/*! For license information please see main.f7e84995.js.LICENSE.txt */
(()=>{var e={0:()=>{!function(){"use strict";function e(t){return this instanceof e?(this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void this.clear()):new e(t)}e.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(e,t){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=t||15;var n=this._circle=document.createElement("canvas"),i=n.getContext("2d"),r=this._r=e+t;return n.width=n.height=2*r,i.shadowOffsetX=i.shadowOffsetY=200,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(r-200,r-200,e,0,2*Math.PI,!0),i.closePath(),i.fill(),this},gradient:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i=n.createLinearGradient(0,0,0,256);for(var r in t.width=1,t.height=256,e)i.addColorStop(r,e[r]);return n.fillStyle=i,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var n,i=0,r=this._data.length;r>i;i++)n=this._data[i],t.globalAlpha=Math.max(n[2]/this._max,e||.05),t.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var a=t.getImageData(0,0,this._width,this._height);return this._colorize(a.data,this._grad),t.putImageData(a,0,0),this},_colorize:function(e,t){for(var n,i=3,r=e.length;r>i;i+=4)(n=4*e[i])&&(e[i-3]=t[n],e[i-2]=t[n+1],e[i-1]=t[n+2])}},window.simpleheat=e}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(e,t){this._latlngs=e,L.setOptions(this,t)},setLatLngs:function(e){return this._latlngs=e,this.redraw()},addLatLng:function(e){return this._latlngs.push(e),this.redraw()},setOptions:function(e){return L.setOptions(this,e),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.options.zoomAnimation&&L.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._canvas),e.off("moveend",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},_initCanvas:function(){var e=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),t=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);e.style[t]="50% 50%";var n=this._map.getSize();e.width=n.x,e.height=n.y;var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(e,"leaflet-zoom-"+(i?"animated":"hide")),this._heat=simpleheat(e),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,e);var t=this._map.getSize();this._heat._width!==t.x&&(this._canvas.width=this._heat._width=t.x),this._heat._height!==t.y&&(this._canvas.height=this._heat._height=t.y),this._redraw()},_redraw:function(){var e,t,n,i,r,a,o,s,l,c=[],u=this._heat._r,h=this._map.getSize(),d=new L.Bounds(L.point([-u,-u]),h.add([u,u])),p=void 0===this.options.max?1:this.options.max,f=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,m=1/Math.pow(2,Math.max(0,Math.min(f-this._map.getZoom(),12))),g=u/2,v=[],y=this._map._getMapPanePos(),_=y.x%g,b=y.y%g;for(e=0,t=this._latlngs.length;t>e;e++)if(n=this._map.latLngToContainerPoint(this._latlngs[e]),d.contains(n)){r=Math.floor((n.x-_)/g)+2,a=Math.floor((n.y-b)/g)+2,l=(void 0!==this._latlngs[e].alt?this._latlngs[e].alt:void 0!==this._latlngs[e][2]?+this._latlngs[e][2]:1)*m,v[a]=v[a]||[],(i=v[a][r])?(i[0]=(i[0]*i[2]+n.x*l)/(i[2]+l),i[1]=(i[1]*i[2]+n.y*l)/(i[2]+l),i[2]+=l):v[a][r]=[n.x,n.y,l]}for(e=0,t=v.length;t>e;e++)if(v[e])for(o=0,s=v[e].length;s>o;o++)(i=v[e][o])&&c.push([Math.round(i[0]),Math.round(i[1]),Math.min(i[2],p)]);this._heat.data(c).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+t+")"}}),L.heatLayer=function(e,t){return new L.HeatLayer(e,t)}},4:(e,t,n)=>{"use strict";var i=n(853),r=n(43),a=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===L?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case w:return"Suspense";case M:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return k(e(t))}catch(n){}}return null}var I=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},O=[],z=-1;function F(e){return{current:e}}function B(e){0>z||(e.current=O[z],O[z]=null,z--)}function j(e,t){z++,O[z]=e.current,e.current=t}var H,V,G=F(null),W=F(null),X=F(null),q=F(null);function Z(e,t){switch(j(X,t),j(W,e),j(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yh(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(G),j(G,e)}function Y(){B(G),B(W),B(X)}function K(e){null!==e.memoizedState&&j(q,e);var t=G.current,n=yh(t,e.type);t!==n&&(j(W,e),j(G,n))}function J(e){W.current===e&&(B(G),B(W)),q.current===e&&(B(q),ud._currentValue=U)}function Q(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+V}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){i=a}e.call(n.prototype)}}else{try{throw Error()}catch(o){i=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&i&&"string"===typeof s.stack)return[s.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Q(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Q("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var ie=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,ae=i.unstable_cancelCallback,oe=i.unstable_shouldYield,se=i.unstable_requestPaint,le=i.unstable_now,ce=i.unstable_getCurrentPriorityLevel,ue=i.unstable_ImmediatePriority,he=i.unstable_UserBlockingPriority,de=i.unstable_NormalPriority,pe=i.unstable_LowPriority,fe=i.unstable_IdlePriority,me=i.log,ge=i.unstable_setDisableYieldValue,ve=null,ye=null;function _e(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/Se|0)|0},xe=Math.log,Se=Math.LN2;var we=256,Me=262144,Ee=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&i;return 0!==s?0!==(i=s&~a)?r=Te(i):0!==(o&=s)?r=Te(o):n||0!==(n=s&~e)&&(r=Te(n)):0!==(s=i&~a)?r=Te(s):0!==o?r=Te(o):n||0!==(n=i&~e)&&(r=Te(n)),0===r?0:0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:r}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Pe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Re(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Le(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-be(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-be(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Ne(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Ue(n))&(e.suspendedLanes|t))?0:n}function Ue(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:Td(e.type)}function Fe(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}var Be=Math.random().toString(36).slice(2),je="__reactFiber$"+Be,He="__reactProps$"+Be,Ve="__reactContainer$"+Be,Ge="__reactEvents$"+Be,We="__reactListeners$"+Be,Xe="__reactHandles$"+Be,qe="__reactResources$"+Be,Ze="__reactMarker$"+Be;function Ye(e){delete e[je],delete e[He],delete e[Ge],delete e[We],delete e[Xe]}function Ke(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[je]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Uh(e);null!==e;){if(n=e[je])return n;e=Uh(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[je]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ze]=!0}var tt=new Set,nt={};function it(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function lt(e,t,n){if(r=t,ie.call(st,r)||!ie.call(ot,r)&&(at.test(r)?st[r]=!0:(ot[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,i,r,a,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ht(t)):null!=n?bt(e,o,ht(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=a&&(e.defaultChecked=!!a),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ht(s):e.removeAttribute("name")}function _t(e,t,n,i,r,a,o,s){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=s?e.checked:!!i,e.defaultChecked=!!i,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),pt(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(o(92));if(I(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),pt(e)}function Mt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Tt(e,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Tt(e,a,t[a])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kt(){}var It=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Ut=null;function Ot(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[He]||null;if(!r)throw Error(o(90));yt(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&ft(i)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Nt||null!==Ut)&&($c(),Nt&&(t=Nt,e=Ut,Ut=Nt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[He]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var jt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(jt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Jd){Ht=!1}var Gt=null,Wt=null,Xt=null;function qt(){if(Xt)return Xt;var e,t,n=Wt,i=n.length,r="value"in Gt?Gt.value:Gt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return Xt=r.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Kt(){return!1}function Jt(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Yt:Kt,this.isPropagationStopped=Kt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Qt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=p({},tn,{view:0,detail:0}),an=Jt(rn),on=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Qt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Qt=0,en=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),sn=Jt(on),ln=Jt(p({},on,{dataTransfer:0})),cn=Jt(p({},rn,{relatedTarget:0})),un=Jt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Jt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Jt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Jt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=Jt(p({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Jt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),xn=Jt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Jt(p({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Jt(p({},tn,{newState:0,oldState:0})),Mn=[9,13,27,32],En=jt&&"CompositionEvent"in window,Tn=null;jt&&"documentMode"in document&&(Tn=document.documentMode);var Cn=jt&&"TextEvent"in window&&!Tn,An=jt&&(!En||Tn&&8<Tn&&11>=Tn),Pn=String.fromCharCode(32),Rn=!1;function Ln(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Un(e,t,n,i){Nt?Ut?Ut.push(i):Ut=[i]:Nt=i,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var On=null,zn=null;function Fn(e){Yu(e,0)}function Bn(e){if(ft(Qe(e)))return e}function jn(e,t){if("change"===e)return t}var Hn=!1;if(jt){var Vn;if(jt){var Gn="oninput"in document;if(!Gn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Gn="function"===typeof Wn.oninput}Vn=Gn}else Vn=!1;Hn=Vn&&(!document.documentMode||9<document.documentMode)}function Xn(){On&&(On.detachEvent("onpropertychange",qn),zn=On=null)}function qn(e){if("value"===e.propertyName&&Bn(zn)){var t=[];Un(t,zn,e,Dt(e)),Ft(Fn,t)}}function Zn(e,t,n){"focusin"===e?(Xn(),zn=n,(On=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Xn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(zn)}function Kn(e,t){if("click"===e)return Bn(t)}function Jn(e,t){if("input"===e||"change"===e)return Bn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(t,r)||!Qn(e[r],t[r]))return!1}return!0}function ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ti(e,t){var n,i=ei(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ei(i)}}function ni(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ni(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ii(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ai=jt&&"documentMode"in document&&11>=document.documentMode,oi=null,si=null,li=null,ci=!1;function ui(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ci||null==oi||oi!==mt(i)||("selectionStart"in(i=oi)&&ri(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},li&&$n(li,i)||(li=i,0<(i=ih(si,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=oi)))}function hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},pi={},fi={};function mi(e){if(pi[e])return pi[e];if(!di[e])return e;var t,n=di[e];for(t in n)if(n.hasOwnProperty(t)&&t in fi)return pi[e]=n[t];return e}jt&&(fi=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);var gi=mi("animationend"),vi=mi("animationiteration"),yi=mi("animationstart"),_i=mi("transitionrun"),bi=mi("transitionstart"),xi=mi("transitioncancel"),Si=mi("transitionend"),wi=new Map,Mi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(e,t){wi.set(e,t),it(t,[e])}Mi.push("scrollEnd");var Ti="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ci=[],Ai=0,Pi=0;function Ri(){for(var e=Ai,t=Pi=Ai=0;t<e;){var n=Ci[t];Ci[t++]=null;var i=Ci[t];Ci[t++]=null;var r=Ci[t];Ci[t++]=null;var a=Ci[t];if(Ci[t++]=null,null!==i&&null!==r){var o=i.pending;null===o?r.next=r:(r.next=o.next,o.next=r),i.pending=r}0!==a&&Di(n,r,a)}}function Li(e,t,n,i){Ci[Ai++]=e,Ci[Ai++]=t,Ci[Ai++]=n,Ci[Ai++]=i,Pi|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function ki(e,t,n,i){return Li(e,t,n,i),Ni(e)}function Ii(e,t){return Li(e,null,null,t),Ni(e)}function Di(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(i=a.alternate)&&(i.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(r=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,r&&null!==t&&(r=31-be(n),null===(i=(e=a.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),a):null}function Ni(e){if(50<Gc)throw Gc=0,Wc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ui={};function Oi(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(e,t,n,i){return new Oi(e,t,n,i)}function Fi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bi(e,t){var n=e.alternate;return null===n?((n=zi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ji(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hi(e,t,n,i,r,a){var s=0;if(i=e,"function"===typeof e)Fi(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=zi(31,n,t,r)).elementType=C,e.lanes=a,e;case v:return Vi(n.children,r,a,t);case y:s=8,r|=24;break;case _:return(e=zi(12,n,t,2|r)).elementType=_,e.lanes=a,e;case w:return(e=zi(13,n,t,r)).elementType=w,e.lanes=a,e;case M:return(e=zi(19,n,t,r)).elementType=M,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case b:s=9;break e;case S:s=11;break e;case E:s=14;break e;case T:s=16,i=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),i=null}return(t=zi(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Vi(e,t,n,i){return(e=zi(7,e,i,t)).lanes=n,e}function Gi(e,t,n){return(e=zi(6,e,null,t)).lanes=n,e}function Wi(e){var t=zi(18,null,null,0);return t.stateNode=e,t}function Xi(e,t,n){return(t=zi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qi=new WeakMap;function Zi(e,t){if("object"===typeof e&&null!==e){var n=qi.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qi.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yi=[],Ki=0,Ji=null,Qi=0,$i=[],er=0,tr=null,nr=1,ir="";function rr(e,t){Yi[Ki++]=Qi,Yi[Ki++]=Ji,Ji=e,Qi=t}function ar(e,t,n){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,tr=e;var i=nr;e=ir;var r=32-be(i)-1;i&=~(1<<r),n+=1;var a=32-be(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,nr=1<<32-be(t)+r|n<<r|i,ir=a+e}else nr=1<<a|n<<r|i,ir=e}function or(e){null!==e.return&&(rr(e,1),ar(e,1,0))}function sr(e){for(;e===Ji;)Ji=Yi[--Ki],Yi[Ki]=null,Qi=Yi[--Ki],Yi[Ki]=null;for(;e===tr;)tr=$i[--er],$i[er]=null,ir=$i[--er],$i[er]=null,nr=$i[--er],$i[er]=null}function lr(e,t){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,nr=t.id,ir=t.overflow,tr=e}var cr=null,ur=null,hr=!1,dr=null,pr=!1,fr=Error(o(519));function mr(e){throw xr(Zi(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fr}function gr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[je]=e,t[He]=i,n){case"dialog":Ku("cancel",t),Ku("close",t);break;case"iframe":case"object":case"embed":Ku("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)Ku(qu[n],t);break;case"source":Ku("error",t);break;case"img":case"image":case"link":Ku("error",t),Ku("load",t);break;case"details":Ku("toggle",t);break;case"input":Ku("invalid",t),_t(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ku("invalid",t);break;case"textarea":Ku("invalid",t),wt(t,i.value,i.defaultValue,i.children)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||ch(t.textContent,n)?(null!=i.popover&&(Ku("beforetoggle",t),Ku("toggle",t)),null!=i.onScroll&&Ku("scroll",t),null!=i.onScrollEnd&&Ku("scrollend",t),null!=i.onClick&&(t.onclick=kt),t=!0):t=!1,t||mr(e,!0)}function vr(e){for(cr=e.return;cr;)switch(cr.tag){case 5:case 31:case 13:return void(pr=!1);case 27:case 3:return void(pr=!0);default:cr=cr.return}}function yr(e){if(e!==cr)return!1;if(!hr)return vr(e),hr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||_h(e.type,e.memoizedProps)),t=!t),t&&ur&&mr(e),vr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ur=Nh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ur=Nh(e)}else 27===n?(n=ur,Th(e.type)?(e=Dh,Dh=null,ur=e):ur=n):ur=cr?Ih(e.stateNode.nextSibling):null;return!0}function _r(){ur=cr=null,hr=!1}function br(){var e=dr;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),dr=null),e}function xr(e){null===dr?dr=[e]:dr.push(e)}var Sr=F(null),wr=null,Mr=null;function Er(e,t,n){j(Sr,t._currentValue),t._currentValue=n}function Tr(e){e._currentValue=Sr.current,B(Sr)}function Cr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ar(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var a=r.dependencies;if(null!==a){var s=r.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cr(a.return,n,e),i||(s=null);break e}a=l.next}}else if(18===r.tag){if(null===(s=r.return))throw Error(o(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),Cr(s,n,e),s=null}else s=r.child;if(null!==s)s.return=r;else for(s=r;null!==s;){if(s===e){s=null;break}if(null!==(r=s.sibling)){r.return=s.return,s=r;break}s=s.return}r=s}}function Pr(e,t,n,i){e=null;for(var r=t,a=!1;null!==r;){if(!a)if(0!==(524288&r.flags))a=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var s=r.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=r.type;Qn(r.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(r===q.current){if(null===(s=r.alternate))throw Error(o(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(ud):e=[ud])}r=r.return}null!==e&&Ar(t,e,n,i),t.flags|=262144}function Rr(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Lr(e){wr=e,Mr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function kr(e){return Dr(wr,e)}function Ir(e,t){return null===wr&&Lr(e),Dr(e,t)}function Dr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Mr){if(null===e)throw Error(o(308));Mr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mr=Mr.next=t;return n}var Nr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ur=i.unstable_scheduleCallback,Or=i.unstable_NormalPriority,zr={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new Nr,data:new Map,refCount:0}}function Br(e){e.refCount--,0===e.refCount&&Ur(Or,function(){e.controller.abort()})}var jr=null,Hr=0,Vr=0,Gr=null;function Wr(){if(0===--Hr&&null!==jr){null!==Gr&&(Gr.status="fulfilled");var e=jr;jr=null,Vr=0,Gr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Xr=D.S;D.S=function(e,t){Ic=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===jr){var n=jr=[];Hr=0,Vr=Hu(),Gr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Hr++,t.then(Wr,Wr)}(0,t),null!==Xr&&Xr(e,t)};var qr=F(null);function Zr(){var e=qr.current;return null!==e?e:fc.pooledCache}function Yr(e,t){j(qr,null===t?qr.current:t.pool)}function Kr(){var e=Zr();return null===e?null:{parent:zr._currentValue,pool:e}}var Jr=Error(o(460)),Qr=Error(o(474)),$r=Error(o(542)),ea={then:function(){}};function ta(e){return"fulfilled"===(e=e.status)||"rejected"===e}function na(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(kt,kt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e;default:if("string"===typeof t.status)t.then(kt,kt);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e}throw ra=t,Jr}}function ia(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ra=t,Jr;throw t}}var ra=null;function aa(){if(null===ra)throw Error(o(459));var e=ra;return ra=null,e}function oa(e){if(e===Jr||e===$r)throw Error(o(483))}var sa=null,la=0;function ca(e){var t=la;return la+=1,null===sa&&(sa=[]),na(sa,e,t)}function ua(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function da(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Bi(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Gi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===v?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===T&&ia(a)===t.type)?(ua(t=r(t,n.props),n),t.return=e,t):(ua(t=Hi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,a){return null===t||7!==t.tag?((t=Vi(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ua(n=Hi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Xi(t,e.mode,n)).return=e,t;case T:return d(e,t=ia(t),n)}if(I(t)||R(t))return(t=Vi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,ca(t),n);if(t.$$typeof===x)return d(e,Ir(e,t),n);ha(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?c(e,t,n,i):null;case g:return n.key===r?u(e,t,n,i):null;case T:return p(e,t,n=ia(n),i)}if(I(n)||R(n))return null!==r?null:h(e,t,n,i,null);if("function"===typeof n.then)return p(e,t,ca(n),i);if(n.$$typeof===x)return p(e,t,Ir(e,n),i);ha(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case m:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case T:return f(e,t,n,i=ia(i),r)}if(I(i)||R(i))return h(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return f(e,t,n,ca(i),r);if(i.$$typeof===x)return f(e,t,n,Ir(t,i),r);ha(t,i)}return null}function y(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===v){if(7===c.tag){n(l,c.sibling),(h=r(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===T&&ia(_)===c.type){n(l,c.sibling),ua(h=r(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((h=Vi(u.props.children,l.mode,h,u.key)).return=l,l=h):(ua(h=Hi(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return s(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=r(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Xi(u,l.mode,h)).return=l,l=h}return s(l);case T:return y(l,c,u=ia(u),h)}if(I(u))return function(r,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(r,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(r,h),hr&&rr(r,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return hr&&rr(r,m),c}for(h=i(h);m<s.length;m++)null!==(g=f(h,r,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),hr&&rr(r,m),c}(l,c,u,h);if(R(u)){if("function"!==typeof(_=R(u)))throw Error(o(150));return function(r,s,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=p(r,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(r,m),s=a(_,s,g),null===h?u=_:h.sibling=_,h=_,m=v}if(y.done)return n(r,m),hr&&rr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,c))&&(s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return hr&&rr(r,g),u}for(m=i(m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(r,e)}),hr&&rr(r,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return y(l,c,ca(u),h);if(u.$$typeof===x)return y(l,c,Ir(l,u),h);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=r(c,u)).return=l,l=h):(n(l,c),(h=Gi(u,l.mode,h)).return=l,l=h),s(l)):n(l,c)}return function(e,t,n,i){try{la=0;var r=y(e,t,n,i);return sa=null,r}catch(o){if(o===Jr||o===$r)throw o;var a=zi(29,o,null,e.mode);return a.lanes=i,a.return=e,a}}}var pa=da(!0),fa=da(!1),ma=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&pc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Ni(e),Di(e,null,n),t}return Li(e,i,t,n),Ni(e)}function ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,De(e,n)}}function xa(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function wa(){if(Sa){if(null!==Gr)throw Gr}}function Ma(e,t,n,i){Sa=!1;var r=e.updateQueue;ma=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=r.baseState;for(o=0,u=c=l=null,s=a;;){var d=-536870913&s.lane,f=d!==s.lane;if(f?(gc&d)===d:(i&d)===d){0!==d&&d===Vr&&(Sa=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;d=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(v,h,d):m)||void 0===d)break e;h=p({},h,d);break e;case 2:ma=!0}}null!==(d=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[d]:f.push(d))}else f={lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(f=s).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===a&&(r.shared.lanes=0),Mc|=o,e.lanes=o,e.memoizedState=h}}function Ea(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ta(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ea(n[e],t)}var Ca=F(null),Aa=F(0);function Pa(e,t){j(Aa,e=Sc),j(Ca,t),Sc=e|t.baseLanes}function Ra(){j(Aa,Sc),j(Ca,Ca.current)}function La(){Sc=Aa.current,B(Ca),B(Aa)}var ka=F(null),Ia=null;function Da(e){var t=e.alternate;j(Fa,1&Fa.current),j(ka,e),null===Ia&&(null===t||null!==Ca.current||null!==t.memoizedState)&&(Ia=e)}function Na(e){j(Fa,Fa.current),j(ka,e),null===Ia&&(Ia=e)}function Ua(e){22===e.tag?(j(Fa,Fa.current),j(ka,e),null===Ia&&(Ia=e)):Oa()}function Oa(){j(Fa,Fa.current),j(ka,ka.current)}function za(e){B(ka),Ia===e&&(Ia=null),B(Fa)}var Fa=F(0);function Ba(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Lh(n)||kh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=0,Ha=null,Va=null,Ga=null,Wa=!1,Xa=!1,qa=!1,Za=0,Ya=0,Ka=null,Ja=0;function Qa(){throw Error(o(321))}function $a(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function eo(e,t,n,i,r,a){return ja=a,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?gs:vs,qa=!1,a=n(i,r),qa=!1,Xa&&(a=no(t,n,i,r)),to(e),a}function to(e){D.H=ms;var t=null!==Va&&null!==Va.next;if(ja=0,Ga=Va=Ha=null,Wa=!1,Ya=0,Ka=null,t)throw Error(o(300));null===e||Is||null!==(e=e.dependencies)&&Rr(e)&&(Is=!0)}function no(e,t,n,i){Ha=e;var r=0;do{if(Xa&&(Ka=null),Ya=0,Xa=!1,25<=r)throw Error(o(301));if(r+=1,Ga=Va=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}D.H=ys,a=t(n,i)}while(Xa);return a}function io(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Va?Va.memoizedState:null)!==e&&(Ha.flags|=1024),t}function ro(){var e=0!==Za;return Za=0,e}function ao(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Wa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wa=!1}ja=0,Ga=Va=Ha=null,Xa=!1,Ya=Za=0,Ka=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ga?Ha.memoizedState=Ga=e:Ga=Ga.next=e,Ga}function lo(){if(null===Va){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Va.next;var t=null===Ga?Ha.memoizedState:Ga.next;if(null!==t)Ga=t,Va=e;else{if(null===e){if(null===Ha.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Va=e).memoizedState,baseState:Va.baseState,baseQueue:Va.baseQueue,queue:Va.queue,next:null},null===Ga?Ha.memoizedState=Ga=e:Ga=Ga.next=e}return Ga}function co(e){var t=Ya;return Ya+=1,null===Ka&&(Ka=[]),e=na(Ka,e,t),t=Ha,null===(null===Ga?t.memoizedState:Ga.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?gs:vs),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===x)return kr(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Ha.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Ha.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=A;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function fo(e){return mo(lo(),Va,e)}function mo(e,t,n){var i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=n;var r=e.baseQueue,a=i.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}t.baseQueue=r=a,i.pending=null}if(a=e.baseState,null===r)e.memoizedState=a;else{var l=s=null,c=null,u=t=r.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(gc&d)===d:(ja&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Vr&&(h=!0);else{if((ja&p)===p){u=u.next,p===Vr&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,s=a):c=c.next=d,Ha.lanes|=p,Mc|=p}d=u.action,qa&&n(a,d),a=u.hasEagerState?u.eagerState:n(a,d)}else p={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=a):c=c.next=p,Ha.lanes|=d,Mc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?s=a:c.next=l,!Qn(a,e.memoizedState)&&(Is=!0,h&&null!==(n=Gr)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=c,i.lastRenderedState=a}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);Qn(a,t.memoizedState)||(Is=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function vo(e,t,n){var i=Ha,r=lo(),a=hr;if(a){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!Qn((Va||r).memoizedState,n);if(s&&(r.memoizedState=n,Is=!0),r=r.queue,Ho(bo.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||null!==Ga&&1&Ga.memoizedState.tag){if(i.flags|=2048,Oo(9,{destroy:void 0},_o.bind(null,i,r,n,t),null),null===fc)throw Error(o(349));a||0!==(127&ja)||yo(i,t,n)}return n}function yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ha.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,i){t.value=n,t.getSnapshot=i,xo(t)&&So(e)}function bo(e,t,n){return n(function(){xo(t)&&So(e)})}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(i){return!0}}function So(e){var t=Ii(e,2);null!==t&&Zc(t,e,2)}function wo(e){var t=so();if("function"===typeof e){var n=e;if(e=n(),qa){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function Mo(e,t,n,i){return e.baseState=n,mo(e,Va,"function"===typeof i?i:po)}function Eo(e,t,n,i,r){if(ds(e))throw Error(o(485));if(null!==(e=t.action)){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==D.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,To(t,a)):(a.next=n.next,t.pending=n.next=a)}}function To(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var a=D.T,o={};D.T=o;try{var s=n(r,i),l=D.S;null!==l&&l(o,s),Co(e,t,s)}catch(c){Po(e,t,c)}finally{null!==a&&null!==o.types&&(a.types=o.types),D.T=a}}else try{Co(e,t,a=n(r,i))}catch(u){Po(e,t,u)}}function Co(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ao(e,t,n)},function(n){return Po(e,t,n)}):Ao(e,t,n)}function Ao(e,t,n){t.status="fulfilled",t.value=n,Ro(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,To(e,n)))}function Po(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Ro(t),t=t.next}while(t!==i)}e.action=null}function Ro(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lo(e,t){return t}function ko(e,t){if(hr){var n=fc.formState;if(null!==n){e:{var i=Ha;if(hr){if(ur){t:{for(var r=ur,a=pr;8!==r.nodeType;){if(!a){r=null;break t}if(null===(r=Ih(r.nextSibling))){r=null;break t}}r="F!"===(a=r.data)||"F"===a?r:null}if(r){ur=Ih(r.nextSibling),i="F!"===r.data;break e}}mr(i)}i=!1}i&&(t=n[0])}}return(n=so()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},n.queue=i,n=cs.bind(null,Ha,i),i.dispatch=n,i=wo(!1),a=hs.bind(null,Ha,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=so()).queue=r,n=Eo.bind(null,Ha,r,a,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Io(e){return Do(lo(),Va,e)}function Do(e,t,n){if(t=mo(e,t,Lo)[0],e=fo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=co(t)}catch(o){if(o===Jr)throw $r;throw o}else i=t;var r=(t=lo()).queue,a=r.dispatch;return n!==t.memoizedState&&(Ha.flags|=2048,Oo(9,{destroy:void 0},No.bind(null,r,n),null)),[i,a,e]}function No(e,t){e.action=t}function Uo(e){var t=lo(),n=Va;if(null!==n)return Do(t,n,e);lo(),t=t.memoizedState;var i=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Oo(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Ha.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zo(){return lo().memoizedState}function Fo(e,t,n,i){var r=so();Ha.flags|=e,r.memoizedState=Oo(1|t,{destroy:void 0},n,void 0===i?null:i)}function Bo(e,t,n,i){var r=lo();i=void 0===i?null:i;var a=r.memoizedState.inst;null!==Va&&null!==i&&$a(i,Va.memoizedState.deps)?r.memoizedState=Oo(t,a,n,i):(Ha.flags|=e,r.memoizedState=Oo(1|t,a,n,i))}function jo(e,t){Fo(8390656,8,e,t)}function Ho(e,t){Bo(2048,8,e,t)}function Vo(e){var t=lo().memoizedState;return function(e){Ha.flags|=4;var t=Ha.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Go(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Xo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Xo.bind(null,t,e),n)}function Zo(){}function Yo(e,t){var n=lo();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&$a(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=lo();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&$a(t,i[1]))return i[0];if(i=e(),qa){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[i,t],i}function Jo(e,t,n){return void 0===n||0!==(1073741824&ja)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Ha.lanes|=e,Mc|=e,n)}function Qo(e,t,n,i){return Qn(n,t)?n:null!==Ca.current?(e=Jo(e,n,i),Qn(e,t)||(Is=!0),e):0===(42&ja)||0!==(1073741824&ja)&&0===(261930&gc)?(Is=!0,e.memoizedState=n):(e=qc(),Ha.lanes|=e,Mc|=e,t)}function $o(e,t,n,i,r){var a=N.p;N.p=0!==a&&8>a?a:8;var o=D.T,s={};D.T=s,hs(e,!1,t,n);try{var l=r(),c=D.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)us(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Xc());else us(e,t,i,Xc())}catch(u){us(e,t,{then:function(){},status:"rejected",reason:u},Xc())}finally{N.p=a,null!==o&&null!==s.types&&(o.types=s.types),D.T=o}}function es(){}function ts(e,t,n,i){if(5!==e.tag)throw Error(o(476));var r=ns(e).queue;$o(e,r,t,U,null===n?es:function(){return is(e),n(i)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:U},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function is(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},Xc())}function rs(){return kr(ud)}function as(){return lo().memoizedState}function os(){return lo().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Xc(),i=_a(t,e=ya(n),n);return null!==i&&(Zc(i,t,n),ba(i,t,n)),t={cache:Fr()},void(e.payload=t)}t=t.return}}function ls(e,t,n){var i=Xc();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ds(e)?ps(t,n):null!==(n=ki(e,t,n,i))&&(Zc(n,e,i),fs(n,t,i))}function cs(e,t,n){us(e,t,n,Xc())}function us(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ds(e))ps(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,Qn(s,o))return Li(e,t,r,0),null===fc&&Ri(),!1}catch(l){}if(null!==(n=ki(e,t,r,i)))return Zc(n,e,i),fs(n,t,i),!0}return!1}function hs(e,t,n,i){if(i={lane:2,revertLane:Hu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ds(e)){if(t)throw Error(o(479))}else null!==(t=ki(e,n,i,2))&&Zc(t,e,2)}function ds(e){var t=e.alternate;return e===Ha||null!==t&&t===Ha}function ps(e,t){Xa=Wa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fs(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,De(e,n)}}var ms={readContext:kr,use:uo,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa};ms.useEffectEvent=Qa;var gs={readContext:kr,use:uo,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:kr,useEffect:jo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){Fo(4,2,e,t)},useMemo:function(e,t){var n=so();t=void 0===t?null:t;var i=e();if(qa){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=so();if(void 0!==n){var r=n(t);if(qa){_e(!0);try{n(t)}finally{_e(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=ls.bind(null,Ha,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=wo(e)).queue,n=cs.bind(null,Ha,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Zo,useDeferredValue:function(e,t){return Jo(so(),e,t)},useTransition:function(){var e=wo(!1);return e=$o.bind(null,Ha,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ha,r=so();if(hr){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===fc)throw Error(o(349));0!==(127&gc)||yo(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,jo(bo.bind(null,i,a,e),[e]),i.flags|=2048,Oo(9,{destroy:void 0},_o.bind(null,i,a,n,t),null),n},useId:function(){var e=so(),t=fc.identifierPrefix;if(hr){var n=ir;t="_"+t+"R_"+(n=(nr&~(1<<32-be(nr)-1)).toString(32)+n),0<(n=Za++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ja++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:rs,useFormState:ko,useActionState:ko,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=hs.bind(null,Ha,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Ha)},useEffectEvent:function(e){var t=so(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},vs={readContext:kr,use:uo,useCallback:Yo,useContext:kr,useEffect:Ho,useImperativeHandle:qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Ko,useReducer:fo,useRef:zo,useState:function(){return fo(po)},useDebugValue:Zo,useDeferredValue:function(e,t){return Qo(lo(),Va.memoizedState,e,t)},useTransition:function(){var e=fo(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:as,useHostTransitionStatus:rs,useFormState:Io,useActionState:Io,useOptimistic:function(e,t){return Mo(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:os};vs.useEffectEvent=Vo;var ys={readContext:kr,use:uo,useCallback:Yo,useContext:kr,useEffect:Ho,useImperativeHandle:qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Ko,useReducer:go,useRef:zo,useState:function(){return go(po)},useDebugValue:Zo,useDeferredValue:function(e,t){var n=lo();return null===Va?Jo(n,e,t):Qo(n,Va.memoizedState,e,t)},useTransition:function(){var e=go(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:as,useHostTransitionStatus:rs,useFormState:Uo,useActionState:Uo,useOptimistic:function(e,t){var n=lo();return null!==Va?Mo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:os};function _s(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}ys.useEffectEvent=Vo;var bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xc(),r=ya(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=_a(e,r,i))&&(Zc(t,e,i),ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xc(),r=ya(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=_a(e,r,i))&&(Zc(t,e,i),ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),i=ya(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=_a(e,i,n))&&(Zc(t,e,n),ba(t,e,n))}};function xs(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,i)||!$n(r,a))}function Ss(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&bs.enqueueReplaceState(t,t.state,null)}function ws(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=p({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function Ms(e){Ti(e)}function Es(e){console.error(e)}function Ts(e){Ti(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function As(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ps(e,t,n){return(n=ya(n)).tag=3,n.payload={element:null},n.callback=function(){Cs(e,t)},n}function Rs(e){return(e=ya(e)).tag=3,e}function Ls(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var a=i.value;e.payload=function(){return r(a)},e.callback=function(){As(t,n,i)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){As(t,n,i),"function"!==typeof r&&(null===Uc?Uc=new Set([this]):Uc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var ks=Error(o(461)),Is=!1;function Ds(e,t,n,i){t.child=null===e?fa(t,null,n,i):pa(t,e.child,n,i)}function Ns(e,t,n,i,r){n=n.render;var a=t.ref;if("ref"in i){var o={};for(var s in i)"ref"!==s&&(o[s]=i[s])}else o=i;return Lr(t),i=eo(e,t,n,o,a,r),s=ro(),null===e||Is?(hr&&s&&or(t),t.flags|=1,Ds(e,t,i,r),t.child):(ao(e,t,r),rl(e,t,r))}function Us(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Fi(a)||void 0!==a.defaultProps||null!==n.compare?((e=Hi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Os(e,t,a,i,r))}if(a=e.child,!al(e,r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,i)&&e.ref===t.ref)return rl(e,t,r)}return t.flags|=1,(e=Bi(a,i)).ref=t.ref,e.return=t,t.child=e}function Os(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if($n(a,i)&&e.ref===t.ref){if(Is=!1,t.pendingProps=i=a,!al(e,r))return t.lanes=e.lanes,rl(e,t,r);0!==(131072&e.flags)&&(Is=!0)}}return Gs(e,t,n,i,r)}function zs(e,t,n,i){var r=i.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~a}else i=0,t.child=null;return Bs(e,t,a,n,i)}if(0===(536870912&n))return i=t.lanes=536870912,Bs(e,t,null!==a?a.baseLanes|n:n,n,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yr(0,null!==a?a.cachePool:null),null!==a?Pa(t,a):Ra(),Ua(t)}else null!==a?(Yr(0,a.cachePool),Pa(t,a),Oa(),t.memoizedState=null):(null!==e&&Yr(0,null),Ra(),Oa());return Ds(e,t,r,n),t.child}function Fs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bs(e,t,n,i,r){var a=Zr();return a=null===a?null:{parent:zr._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Yr(0,null),Ra(),Ua(t),null!==e&&Pr(e,t,i,!0),t.childLanes=r,null}function js(e,t){return(t=$s({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hs(e,t,n){return pa(t,e.child,null,n),(e=js(t,t.pendingProps)).flags|=2,za(t),t.memoizedState=null,e}function Vs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Gs(e,t,n,i,r){return Lr(t),n=eo(e,t,n,i,void 0,r),i=ro(),null===e||Is?(hr&&i&&or(t),t.flags|=1,Ds(e,t,n,r),t.child):(ao(e,t,r),rl(e,t,r))}function Ws(e,t,n,i,r,a){return Lr(t),t.updateQueue=null,n=no(t,i,n,r),to(e),i=ro(),null===e||Is?(hr&&i&&or(t),t.flags|=1,Ds(e,t,n,a),t.child):(ao(e,t,a),rl(e,t,a))}function Xs(e,t,n,i,r){if(Lr(t),null===t.stateNode){var a=Ui,o=n.contextType;"object"===typeof o&&null!==o&&(a=kr(o)),a=new n(i,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=bs,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=i,a.state=t.memoizedState,a.refs={},ga(t),o=n.contextType,a.context="object"===typeof o&&null!==o?kr(o):Ui,a.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(_s(t,n,o,i),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(o=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&bs.enqueueReplaceState(a,a.state,null),Ma(t,i,a,r),wa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=ws(n,s);a.props=l;var c=a.context,u=n.contextType;o=Ui,"object"===typeof u&&null!==u&&(o=kr(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s||c!==o)&&Ss(t,a,i,o),ma=!1;var d=t.memoizedState;a.state=d,Ma(t,i,a,r),wa(),c=t.memoizedState,s||d!==c||ma?("function"===typeof h&&(_s(t,n,h,i),c=t.memoizedState),(l=ma||xs(t,n,l,i,d,c,o))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=o,i=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,va(e,t),u=ws(n,o=t.memoizedProps),a.props=u,h=t.pendingProps,d=a.context,c=n.contextType,l=Ui,"object"===typeof c&&null!==c&&(l=kr(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&Ss(t,a,i,l),ma=!1,d=t.memoizedState,a.state=d,Ma(t,i,a,r),wa();var p=t.memoizedState;o!==h||d!==p||ma||null!==e&&null!==e.dependencies&&Rr(e.dependencies)?("function"===typeof s&&(_s(t,n,s,i),p=t.memoizedState),(u=ma||xs(t,n,u,i,d,p,l)||null!==e&&null!==e.dependencies&&Rr(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,Vs(e,t),i=0!==(128&t.flags),a||i?(a=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&i?(t.child=pa(t,e.child,null,r),t.child=pa(t,null,n,r)):Ds(e,t,n,r),t.memoizedState=a.state,e=t.child):e=rl(e,t,r),e}function qs(e,t,n,i){return _r(),t.flags|=256,Ds(e,t,n,i),t.child}var Zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:Kr()}}function Ks(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function Js(e,t,n){var i,r=t.pendingProps,a=!1,s=0!==(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&0!==(2&Fa.current)),i&&(a=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(hr){if(a?Da(t):Oa(),(e=ur)?null!==(e=null!==(e=Rh(e,pr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return kh(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,a?(Oa(),l=$s({mode:"hidden",children:l},a=t.mode),r=Vi(r,a,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Ys(n),r.childLanes=Ks(e,i,n),t.memoizedState=Zs,Fs(null,r)):(Da(t),Qs(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Da(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),l=r.fallback,a=t.mode,r=$s({mode:"visible",children:r.children},a),(l=Vi(l,a,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,pa(t,e.child,null,n),(r=t.child).memoizedState=Ys(n),r.childLanes=Ks(e,i,n),t.memoizedState=Zs,t=Fs(null,r));else if(Da(t),kh(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var u=i.dgst;i=u,(r=Error(o(419))).stack="",r.digest=i,xr({value:r,source:null,stack:null}),t=el(e,t,n)}else if(Is||Pr(e,t,n,!1),i=0!==(n&e.childLanes),Is||i){if(null!==(i=fc)&&(0!==(r=Ne(i,n))&&r!==c.retryLane))throw c.retryLane=r,Ii(e,r),Zc(i,e,r),ks;Lh(l)||ou(),t=el(e,t,n)}else Lh(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ur=Ih(l.nextSibling),cr=t,hr=!0,dr=null,pr=!1,null!==e&&lr(t,e),(t=Qs(t,r.children)).flags|=4096);return t}return a?(Oa(),l=r.fallback,a=t.mode,u=(c=e.child).sibling,(r=Bi(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Bi(u,l):(l=Vi(l,a,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,Fs(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Ys(n):(null!==(a=l.cachePool)?(c=zr._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Kr(),l={baseLanes:l.baseLanes|n,cachePool:a}),r.memoizedState=l,r.childLanes=Ks(e,i,n),t.memoizedState=Zs,Fs(e.child,r)):(Da(t),e=(n=e.child).sibling,(n=Bi(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Qs(e,t){return(t=$s({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $s(e,t){return(e=zi(22,e,null,t)).lanes=0,e}function el(e,t,n){return pa(t,e.child,null,n),(e=Qs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Cr(e.return,t,n)}function nl(e,t,n,i,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r,o.treeForkCount=a)}function il(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;i=i.children;var o=Fa.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,j(Fa,o),Ds(e,t,i,n),i=hr?Qi:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Ba(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nl(t,!1,r,n,a,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ba(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nl(t,!0,n,null,a,i);break;case"together":nl(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Pr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Bi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Rr(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!al(e,n)&&0===(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),Er(0,zr,e.memoizedState.cache),_r();break;case 27:case 5:K(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:Er(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Na(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Da(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Js(e,t,n):(Da(t),null!==(e=rl(e,t,n))?e.sibling:null);Da(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Pr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return il(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),j(Fa,Fa.current),i)break;return null;case 22:return t.lanes=0,zs(e,t,n,t.pendingProps);case 24:Er(0,zr,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);Is=0!==(131072&e.flags)}else Is=!1,hr&&0!==(1048576&t.flags)&&ar(t,Qi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ia(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===S){t.tag=11,t=Ns(null,t,e,i,n);break e}if(r===E){t.tag=14,t=Us(null,t,e,i,n);break e}}throw t=k(e)||e,Error(o(306,t,""))}Fi(e)?(i=ws(e,i),t.tag=1,t=Xs(null,t,e,i,n)):(t.tag=0,t=Gs(null,t,e,i,n))}return t;case 0:return Gs(e,t,t.type,t.pendingProps,n);case 1:return Xs(e,t,i=t.type,r=ws(i,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(o(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,va(e,t),Ma(t,i,null,n);var s=t.memoizedState;if(i=s.cache,Er(0,zr,i),i!==a.cache&&Ar(t,[zr],n,!0),wa(),i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=qs(e,t,i,n);break e}if(i!==r){xr(r=Zi(Error(o(424)),t)),t=qs(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ur=Ih(e.firstChild),cr=t,hr=!0,dr=null,pr=!0,n=fa(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_r(),i===r){t=rl(e,t,n);break e}Ds(e,t,i,n)}t=t.child}return t;case 26:return Vs(e,t),null===e?(n=Wh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hr||(n=t.type,e=t.pendingProps,(i=gh(X.current).createElement(n))[je]=t,i[He]=e,dh(i,n,e),et(i),t.stateNode=i):t.memoizedState=Wh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&hr&&(i=t.stateNode=Oh(t.type,t.pendingProps,X.current),cr=t,pr=!0,r=ur,Th(t.type)?(Dh=r,ur=Ih(i.firstChild)):ur=r),Ds(e,t,t.pendingProps.children,n),Vs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hr&&((r=i=ur)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===a)return e}if(null===(e=Ih(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,pr))?(t.stateNode=i,cr=t,ur=Ih(i.firstChild),pr=!1,r=!0):r=!1),r||mr(t)),K(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,_h(r,a)?i=null:null!==s&&_h(r,s)&&(t.flags|=32),null!==t.memoizedState&&(r=eo(e,t,io,null,null,n),ud._currentValue=r),Vs(e,t),Ds(e,t,i,n),t.child;case 6:return null===e&&hr&&((e=n=ur)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}(n,t.pendingProps,pr))?(t.stateNode=n,cr=t,ur=null,e=!0):e=!1),e||mr(t)),null;case 13:return Js(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=pa(t,null,i,n):Ds(e,t,i,n),t.child;case 11:return Ns(e,t,t.type,t.pendingProps,n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Er(0,t.type,i.value),Ds(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Lr(t),i=i(r=kr(r)),t.flags|=1,Ds(e,t,i,n),t.child;case 14:return Us(e,t,t.type,t.pendingProps,n);case 15:return Os(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hr){if("hidden"===i.mode)return e=js(t,i),t.lanes=536870912,Fs(null,e);if(Na(t),(e=ur)?null!==(e=null!==(e=Rh(e,pr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return t.lanes=536870912,null}return js(t,i)}var a=e.memoizedState;if(null!==a){var s=a.dehydrated;if(Na(t),r)if(256&t.flags)t.flags&=-257,t=Hs(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Is||Pr(e,t,n,!1),r=0!==(n&e.childLanes),Is||r){if(null!==(i=fc)&&0!==(s=Ne(i,n))&&s!==a.retryLane)throw a.retryLane=s,Ii(e,s),Zc(i,e,s),ks;ou(),t=Hs(e,t,n)}else e=a.treeContext,ur=Ih(s.nextSibling),cr=t,hr=!0,dr=null,pr=!1,null!==e&&lr(t,e),(t=js(t,i)).flags|=4096;return t}return(e=Bi(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zs(e,t,n,t.pendingProps);case 24:return Lr(t),i=kr(zr),null===e?(null===(r=Zr())&&(r=fc,a=Fr(),r.pooledCache=a,a.refCount++,null!==a&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:i,cache:r},ga(t),Er(0,zr,r)):(0!==(e.lanes&n)&&(va(e,t),Ma(t,null,null,n),wa()),r=e.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Er(0,zr,i)):(i=a.cache,Er(0,zr,i),i!==r.cache&&Ar(t,[zr],n,!0))),Ds(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,n,i,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw ra=ea,Qr;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rd(t)){if(!iu())throw ra=ea,Qr;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Re():536870912,e.lanes|=t,Ac|=t)}function hl(e,t){if(!hr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function pl(e,t,n){var i=t.pendingProps;switch(sr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tr(zr),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yr(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,br())),dl(t),null;case 26:var r=t.type,a=t.memoizedState;return null===e?(sl(t),null!==a?(dl(t),cl(t,a)):(dl(t),ll(t,r,0,0,n))):a?a!==e.memoizedState?(sl(t),dl(t),cl(t,a)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&sl(t),dl(t),ll(t,r,0,0,n)),null;case 27:if(J(t),n=X.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&sl(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return dl(t),null}e=G.current,yr(t)?gr(t):(e=Oh(r,i,n),t.stateNode=e,sl(t))}return dl(t),null;case 5:if(J(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&sl(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return dl(t),null}if(a=G.current,yr(t))gr(t);else{var s=gh(X.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(a=s.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a="string"===typeof i.is?s.createElement(r,{is:i.is}):s.createElement(r)}}a[je]=t,a[He]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)a.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;e:switch(dh(a,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&sl(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&sl(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(e=X.current,yr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=cr))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[je]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||ch(e.nodeValue,n)))||mr(t,!0)}else(e=gh(e).createTextNode(i))[je]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=yr(t),null!==n){if(null===e){if(!i)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[je]=t}else _r(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(za(t),t):(za(t),null);if(0!==(128&t.flags))throw Error(o(558))}return dl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=yr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(o(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(o(317));r[je]=t}else _r(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),r=!1}else r=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(za(t),t):(za(t),null)}return za(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool),a=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),dl(t),null);case 4:return Y(),null===e&&$u(t.stateNode.containerInfo),dl(t),null;case 10:return Tr(t.type),dl(t),null;case 19:if(B(Fa),null===(i=t.memoizedState))return dl(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)hl(i,!1);else{if(0!==wc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ba(e))){for(t.flags|=128,hl(i,!1),e=a.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)ji(n,e),n=n.sibling;return j(Fa,1&Fa.current|2),hr&&rr(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&le()>Dc&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ba(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!hr)return dl(t),null}else 2*le()-i.renderingStartTime>Dc&&536870912!==n&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=Fa.current,j(Fa,r?1&n|2:1&n),hr&&rr(t,i.treeForkCount),e):(dl(t),null);case 22:case 23:return za(t),La(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&B(qr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tr(zr),dl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function fl(e,t){switch(sr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tr(zr),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(za(t),null===t.alternate)throw Error(o(340));_r()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(za(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));_r()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Fa),null;case 4:return Y(),null;case 10:return Tr(t.type),null;case 22:case 23:return za(t),La(),null!==e&&B(qr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tr(zr),null;default:return null}}function ml(e,t){switch(sr(t),t.tag){case 3:Tr(zr),Y();break;case 26:case 27:case 5:J(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&za(t);break;case 13:za(t);break;case 19:B(Fa);break;case 10:Tr(t.type);break;case 22:case 23:za(t),La(),null!==e&&B(qr);break;case 24:Tr(zr)}}function gl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var a=n.create,o=n.inst;i=a(),o.destroy=i}n=n.next}while(n!==r)}}catch(s){wu(t,t.return,s)}}function vl(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var a=r.next;i=a;do{if((i.tag&e)===e){var o=i.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,r=t;var l=n,c=s;try{c()}catch(u){wu(r,l,u)}}}i=i.next}while(i!==a)}}catch(u){wu(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ta(t,n)}catch(i){wu(e,e.return,i)}}}function _l(e,t,n){n.props=ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){wu(e,t,i)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){wu(e,t,r)}}function xl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){wu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){wu(e,t,a)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){wu(e,e.return,r)}}function wl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,l=null,c=null,u=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(f)||uh(e,t,f,null,i,d)}}for(var p in i){var f=i[p];if(d=n[p],i.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":a=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==d&&uh(e,t,p,f,i,d)}}return void yt(e,s,l,c,u,h,a,r);case"select":for(a in f=s=l=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":f=c;default:i.hasOwnProperty(a)||uh(e,t,a,null,i,c)}for(r in i)if(a=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=a||null!=c))switch(r){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==c&&uh(e,t,r,a,i,c)}return t=l,n=s,i=f,void(null!=p?xt(e,!!n,p,!1):!!i!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uh(e,t,l,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(null!=r||null!=a))switch(s){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(o(91));break;default:r!==a&&uh(e,t,s,r,i,a)}return void St(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uh(e,t,m,null,i,p);for(c in i)if(p=i[c],f=n[c],i.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else uh(e,t,c,p,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!i.hasOwnProperty(g)&&uh(e,t,g,null,i,p);for(u in i)if(p=i[u],f=n[u],i.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:uh(e,t,u,p,i,f)}return;default:if(At(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!i.hasOwnProperty(v)&&hh(e,t,v,void 0,i,p);for(h in i)p=i[h],f=n[h],!i.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||hh(e,t,h,p,i,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!i.hasOwnProperty(y)&&uh(e,t,y,null,i,p);for(d in i)p=i[d],f=n[d],!i.hasOwnProperty(d)||p===f||null==p&&null==f||uh(e,t,d,p,i,f)}(i,e.type,n,t),i[He]=t}catch(r){wu(e,e.return,r)}}function Ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Th(e.type)||4===e.tag}function El(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Th(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=kt));else if(4!==i&&(27===i&&Th(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&Th(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Al(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);dh(t,i,n),t[je]=e,t[He]=n}catch(a){wu(e,e.return,a)}}var Pl=!1,Rl=!1,Ll=!1,kl="function"===typeof WeakSet?WeakSet:Set,Il=null;function Dl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Zl(e,n),4&i&&gl(5,n);break;case 1:if(Zl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){wu(n,n.return,o)}else{var r=ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){wu(n,n.return,s)}}64&i&&yl(n),512&i&&bl(n,n.return);break;case 3:if(Zl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ta(e,t)}catch(o){wu(n,n.return,o)}}break;case 27:null===t&&4&i&&Al(n);case 26:case 5:Zl(e,n),null===t&&4&i&&Sl(n),512&i&&bl(n,n.return);break;case 12:Zl(e,n);break;case 31:Zl(e,n),4&i&&Bl(e,n);break;case 13:Zl(e,n),4&i&&jl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=Cu.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Pl)){t=null!==t&&null!==t.memoizedState||Rl,r=Pl;var a=Rl;Pl=i,(Rl=t)&&!a?Kl(e,n,0!==(8772&n.subtreeFlags)):Zl(e,n),Pl=r,Rl=a}break;case 30:break;default:Zl(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ul=null,Ol=!1;function zl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Rl||xl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Rl||xl(n,t);var i=Ul,r=Ol;Th(n.type)&&(Ul=n.stateNode,Ol=!1),zl(e,t,n),zh(n.stateNode),Ul=i,Ol=r;break;case 5:Rl||xl(n,t);case 6:if(i=Ul,r=Ol,Ul=null,zl(e,t,n),Ol=r,null!==(Ul=i))if(Ol)try{(9===Ul.nodeType?Ul.body:"HTML"===Ul.nodeName?Ul.ownerDocument.body:Ul).removeChild(n.stateNode)}catch(o){wu(n,t,o)}else try{Ul.removeChild(n.stateNode)}catch(o){wu(n,t,o)}break;case 18:null!==Ul&&(Ol?(Ch(9===(e=Ul).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gd(e)):Ch(Ul,n.stateNode));break;case 4:i=Ul,r=Ol,Ul=n.stateNode.containerInfo,Ol=!0,zl(e,t,n),Ul=i,Ol=r;break;case 0:case 11:case 14:case 15:vl(2,n,t),Rl||vl(4,n,t),zl(e,t,n);break;case 1:Rl||(xl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&_l(n,t,i)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Rl=(i=Rl)||null!==n.memoizedState,zl(e,t,n),Rl=i;break;default:zl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gd(e)}catch(n){wu(t,t.return,n)}}}function jl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gd(e)}catch(n){wu(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var i=Au.bind(null,e,t);t.then(i,i)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Th(l.type)){Ul=l.stateNode,Ol=!1;break e}break;case 5:Ul=l.stateNode,Ol=!1;break e;case 3:case 4:Ul=l.stateNode.containerInfo,Ol=!0;break e}l=l.return}if(null===Ul)throw Error(o(160));Fl(a,s,r),Ul=null,Ol=!1,null!==(a=r.alternate)&&(a.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var Gl=null;function Wl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Xl(e),4&i&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Vl(t,e),Xl(e),512&i&&(Rl||null===n||xl(n,n.return)),64&i&&Pl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=Gl;if(Vl(t,e),Xl(e),512&i&&(Rl||null===n||xl(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(a=r.getElementsByTagName("title")[0])||a[Ze]||a[je]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),dh(a,i,n),a[je]=e,et(a),i=a;break e;case"link":var s=nd("link","href",r).get(i+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}dh(a=r.createElement(i),i,n),r.head.appendChild(a);break;case"meta":if(s=nd("meta","content",r).get(i+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}dh(a=r.createElement(i),i,n),r.head.appendChild(a);break;default:throw Error(o(468,i))}a[je]=e,et(a),i=a}e.stateNode=i}else id(r,e.type,e.stateNode);else e.stateNode=Jh(r,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?id(r,e.type,e.stateNode):Jh(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&wl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Xl(e),512&i&&(Rl||null===n||xl(n,n.return)),null!==n&&4&i&&wl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Xl(e),512&i&&(Rl||null===n||xl(n,n.return)),32&e.flags){r=e.stateNode;try{Mt(r,"")}catch(m){wu(e,e.return,m)}}4&i&&null!=e.stateNode&&wl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(Ll=!0);break;case 6:if(Vl(t,e),Xl(e),4&i){if(null===e.stateNode)throw Error(o(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){wu(e,e.return,m)}}break;case 3:if(td=null,r=Gl,Gl=jh(t.containerInfo),Vl(t,e),Gl=r,Xl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(m){wu(e,e.return,m)}Ll&&(Ll=!1,ql(e));break;case 4:i=Gl,Gl=jh(e.stateNode.containerInfo),Vl(t,e),Xl(e),Gl=i;break;case 12:default:Vl(t,e),Xl(e);break;case 31:case 19:Vl(t,e),Xl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Hl(e,i)));break;case 13:Vl(t,e),Xl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(kc=le()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Hl(e,i)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Pl,h=Rl;if(Pl=u||r,Rl=h||c,Vl(t,e),Rl=h,Pl=u,Xl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Pl||Rl||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,r)"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){wu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){wu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;r?Ah(f,!0):Ah(c.stateNode,!1)}catch(m){wu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Hl(e,n))));case 30:case 21:}}function Xl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(Ml(i)){n=i;break}i=i.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var r=n.stateNode;Cl(e,El(e),r);break;case 5:var a=n.stateNode;32&n.flags&&(Mt(a,""),n.flags&=-33),Cl(e,El(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;Tl(e,El(e),s);break;default:throw Error(o(161))}}catch(l){wu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Zl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Dl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Yl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&_l(t,t.return,n),Yl(t);break;case 27:zh(t.stateNode);case 26:case 5:xl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Kl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Kl(r,a,n),gl(4,a);break;case 1:if(Kl(r,a,n),"function"===typeof(r=(i=a).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){wu(i,i.return,c)}if(null!==(r=(i=a).updateQueue)){var s=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)Ea(l[r],s)}catch(c){wu(i,i.return,c)}}n&&64&o&&yl(a),bl(a,a.return);break;case 27:Al(a);case 26:case 5:Kl(r,a,n),n&&null===i&&4&o&&Sl(a),bl(a,a.return);break;case 12:Kl(r,a,n);break;case 31:Kl(r,a,n),n&&4&o&&Bl(r,a);break;case 13:Kl(r,a,n),n&&4&o&&jl(r,a);break;case 22:null===a.memoizedState&&Kl(r,a,n),bl(a,a.return);break;case 30:break;default:Kl(r,a,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Br(n))}function Ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Br(e))}function $l(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,i),t=t.sibling}function ec(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,i),2048&r&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,i);break;case 3:$l(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Br(e)));break;case 12:if(2048&r){$l(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){wu(t,t.return,l)}}else $l(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,null!==t.memoizedState?2&a._visibility?$l(e,t,n,i):nc(e,t):2&a._visibility?$l(e,t,n,i):(a._visibility|=2,tc(e,t,n,i,0!==(10256&t.subtreeFlags)||!1)),2048&r&&Jl(o,t);break;case 24:$l(e,t,n,i),2048&r&&Ql(t.alternate,t)}}function tc(e,t,n,i,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,o=t,s=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(a,o,s,l,r),gl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(a,o,s,l,r):nc(a,o):(u._visibility|=2,tc(a,o,s,l,r)),r&&2048&c&&Jl(o.alternate,o);break;case 24:tc(a,o,s,l,r),r&&2048&c&&Ql(o.alternate,o);break;default:tc(a,o,s,l,r)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:nc(n,i),2048&r&&Jl(i.alternate,i);break;case 24:nc(n,i),2048&r&&Ql(i.alternate,i);break;default:nc(n,i)}t=t.sibling}}var ic=8192;function rc(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:rc(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,i){if("stylesheet"===n.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var r=Xh(i.href),a=t.querySelector(qh(r));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=od.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,i=Zh(i),(r=Fh.get(r))&&$h(i,r),et(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(a,"link",i),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=od.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,n);break;case 3:case 4:var i=Gl;Gl=jh(e.stateNode.containerInfo),rc(e,t,n),Gl=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=ic,ic=16777216,rc(e,t,n),ic=i):rc(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Il=i,uc(i,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Il=i,uc(i,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Br(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Il=i;else e:for(n=e;null!==Il;){var r=(i=Il).sibling,a=i.return;if(Nl(i),i===n){Il=null;break e}if(null!==r){r.return=a,Il=r;break e}Il=a}}}var hc={getCacheForType:function(e){var t=kr(zr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return kr(zr).controller.signal}},dc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,mc=null,gc=0,vc=0,yc=null,_c=!1,bc=!1,xc=!1,Sc=0,wc=0,Mc=0,Ec=0,Tc=0,Cc=0,Ac=0,Pc=null,Rc=null,Lc=!1,kc=0,Ic=0,Dc=1/0,Nc=null,Uc=null,Oc=0,zc=null,Fc=null,Bc=0,jc=0,Hc=null,Vc=null,Gc=0,Wc=null;function Xc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==D.T?Hu():ze()}function qc(){if(0===Cc)if(0===(536870912&gc)||hr){var e=Me;0===(3932160&(Me<<=1))&&(Me=262144),Cc=e}else Cc=536870912;return null!==(e=ka.current)&&(e.flags|=32),Cc}function Zc(e,t,n){(e!==fc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Qc(e,gc,Cc,!1)),ke(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Ec|=n),4===wc&&Qc(e,gc,Cc,!1)),Nu(e))}function Yc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var i=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),r=i?function(e,t){var n=pc;pc|=2;var i=ru(),r=au();fc!==e||gc!==t?(Nc=null,Dc=le()+500,tu(e,t)):bc=Ae(e,t);e:for(;;)try{if(0!==vc&&null!==mc){t=mc;var a=yc;t:switch(vc){case 1:vc=0,yc=null,du(e,t,a,1);break;case 2:case 9:if(ta(a)){vc=0,yc=null,hu(t);break}t=function(){2!==vc&&9!==vc||fc!==e||(vc=7),Nu(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ta(a)?(vc=0,yc=null,hu(t)):(vc=0,yc=null,du(e,t,a,7));break;case 5:var s=null;switch(mc.tag){case 26:s=mc.memoizedState;case 5:case 27:var l=mc;if(s?rd(s):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,pu(u)):mc=null}break t}}vc=0,yc=null,du(e,t,a,5);break;case 6:vc=0,yc=null,du(e,t,a,6);break;case 8:eu(),wc=6;break e;default:throw Error(o(462))}}cu();break}catch(h){nu(e,h)}return Mr=wr=null,D.H=i,D.A=r,pc=n,null!==mc?0:(fc=null,gc=0,Ri(),wc)}(e,t):su(e,t,!0),a=i;;){if(0===r){bc&&!i&&Qc(e,t,0,!1);break}if(n=e.current.alternate,!a||Jc(n)){if(2===r){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;r=Pc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,s).flags|=256),2!==(s=su(l,s,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=a,Ec|=a,r=4;break e}a=Rc,Rc=r,null!==a&&(null===Rc?Rc=a:Rc.push.apply(Rc,a))}r=s}if(a=!1,2!==r)continue}}if(1===r){tu(e,0),Qc(e,t,0,!0);break}e:{switch(i=e,a=r){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Qc(i,t,Cc,!_c);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(r=kc+300-le())){if(Qc(i,t,Cc,!_c),0!==Ce(i,0,!0))break e;Bc=t,i.timeoutHandle=xh(Kc.bind(null,i,n,Rc,Nc,Lc,t,Cc,Ec,Ac,_c,a,"Throttled",-0,0),r)}else Kc(i,n,Rc,Nc,Lc,t,Cc,Ec,Ac,_c,a,null,-0,0)}break}r=su(e,t,!1),a=!1}Nu(e)}function Kc(e,t,n,i,r,a,o,s,l,c,u,h,d,p){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){ac(t,a,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kt});var f=(62914560&a)===a?kc-le():(4194048&a)===a?Ic-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ad&&(ad=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],a=r.transferSize,o=r.initiatorType,s=r.duration;if(a&&s&&ph(o)){for(o=0,s=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>s)break;var u=l.transferSize,h=l.initiatorType;u&&ph(h)&&(o+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--i,t+=8*(a+o)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ad?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(h,f)))return Bc=a,e.cancelPendingCommit=f(mu.bind(null,e,t,a,n,i,r,o,s,l,u,h,null,d,p)),void Qc(e,a,o,!c)}mu(e,t,a,n,i,r,o,s,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Qn(a(),r))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qc(e,t,n,i){t&=~Tc,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var a=31-be(r),o=1<<a;i[a]=-1,r&=~o}0!==n&&Ie(e,n,t)}function $c(){return 0!==(6&pc)||(Uu(0,!1),!1)}function eu(){if(null!==mc){if(0===vc)var e=mc.return;else Mr=wr=null,oo(e=mc),sa=null,la=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),fc=e,mc=n=Bi(e.current,null),gc=t,vc=0,yc=null,_c=!1,bc=Ae(e,t),xc=!1,Ac=Cc=Tc=Ec=Mc=wc=0,Rc=Pc=null,Lc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-be(i),a=1<<r;t|=e[r],i&=~a}return Sc=t,Ri(),n}function nu(e,t){Ha=null,D.H=ms,t===Jr||t===$r?(t=aa(),vc=3):t===Qr?(t=aa(),vc=4):vc=t===ks?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===mc&&(wc=1,Cs(e,Zi(t,e.current)))}function iu(){var e=ka.current;return null===e||((4194048&gc)===gc?null===Ia:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ia)}function ru(){var e=D.H;return D.H=ms,null===e?ms:e}function au(){var e=D.A;return D.A=hc,e}function ou(){wc=4,_c||(4194048&gc)!==gc&&null!==ka.current||(bc=!0),0===(134217727&Mc)&&0===(134217727&Ec)||null===fc||Qc(fc,gc,Cc,!1)}function su(e,t,n){var i=pc;pc|=2;var r=ru(),a=au();fc===e&&gc===t||(Nc=null,tu(e,t)),t=!1;var o=wc;e:for(;;)try{if(0!==vc&&null!==mc){var s=mc,l=yc;switch(vc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===ka.current&&(t=!0);var c=vc;if(vc=0,yc=null,du(e,s,l,c),n&&bc){o=0;break e}break;default:c=vc,vc=0,yc=null,du(e,s,l,c)}}lu(),o=wc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Mr=wr=null,pc=i,D.H=r,D.A=a,null===mc&&(fc=null,gc=0,Ri()),o}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!oe();)uu(mc)}function uu(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ws(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Ws(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:ml(n,t),t=ol(n,t=mc=ji(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function du(e,t,n,i){Mr=wr=null,oo(t),sa=null,la=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Pr(t,n,r,!0),null!==(n=ka.current)){switch(n.tag){case 31:case 13:return null===Ia?ou():null===n.alternate&&0===wc&&(wc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===ea?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),Mu(e,i,r)),!1;case 22:return n.flags|=65536,i===ea?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),Mu(e,i,r)),!1}throw Error(o(435,n.tag))}return Mu(e,i,r),ou(),!1}if(hr)return null!==(t=ka.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==fr&&xr(Zi(e=Error(o(422),{cause:i}),n))):(i!==fr&&xr(Zi(t=Error(o(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Zi(i,n),xa(e,r=Ps(e.stateNode,i,r)),4!==wc&&(wc=2)),!1;var a=Error(o(520),{cause:i});if(a=Zi(a,n),null===Pc?Pc=[a]:Pc.push(a),4!==wc&&(wc=2),null===t)return!0;i=Zi(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,xa(n,e=Ps(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Uc||!Uc.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,Ls(r=Rs(r),e,n,i),xa(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,gc))return wc=1,Cs(e,Zi(n,e.current)),void(mc=null)}catch(a){if(null!==r)throw mc=r,a;return wc=1,Cs(e,Zi(n,e.current)),void(mc=null)}32768&t.flags?(hr||1===i?e=!0:bc||0!==(536870912&gc)?e=!1:(_c=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=ka.current)&&13===i.tag&&(i.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,_c);e=t.return;var n=pl(t.alternate,t,Sc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===wc&&(wc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);wc=6,mc=null}function mu(e,t,n,i,r,a,s,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Oc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(a=t.lanes|t.childLanes,function(e,t,n,i,r,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-be(n),h=1<<u;s[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==i&&Ie(e,i,0),0!==a&&0===r&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,n,a|=Pi,s,l,c),e===fc&&(mc=fc=null,gc=0),Fc=t,zc=e,Bc=n,jc=a,Hc=r,Vc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(de,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=D.T,D.T=null,r=N.p,N.p=2,s=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fh=_d,ri(e=ii(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=s),p===a&&++h===i&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},_d=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(a=(t=Il).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=ws(n.type,r);e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){wu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ph(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ph(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{pc=s,N.p=r,D.T=i}}Oc=1,gu(),vu(),yu()}}function gu(){if(1===Oc){Oc=0;var e=zc,t=Fc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var i=N.p;N.p=2;var r=pc;pc|=4;try{Wl(t,e);var a=mh,o=ii(e.containerInfo),s=a.focusedElem,l=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&ni(s.ownerDocument.documentElement,s)){if(null!==l&&ri(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var h=s.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var v=ti(s,m),y=ti(s,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var _=h.createRange();_.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(_),p.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),p.addRange(_))}}}}for(h=[],p=s;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<h.length;s++){var b=h[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}_d=!!fh,mh=fh=null}finally{pc=r,N.p=i,D.T=n}}e.current=t,Oc=2}}function vu(){if(2===Oc){Oc=0;var e=zc,t=Fc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var i=N.p;N.p=2;var r=pc;pc|=4;try{Dl(e,t.alternate,t)}finally{pc=r,N.p=i,D.T=n}}Oc=3}}function yu(){if(4===Oc||3===Oc){Oc=0,se();var e=zc,t=Fc,n=Bc,i=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Oc=5:(Oc=0,Fc=zc=null,_u(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Uc=null),Oe(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=D.T,r=N.p,N.p=2,D.T=null;try{for(var a=e.onRecoverableError,o=0;o<i.length;o++){var s=i[o];a(s.value,{componentStack:s.stack})}}finally{D.T=t,N.p=r}}0!==(3&Bc)&&bu(),Nu(e),r=e.pendingLanes,0!==(261930&n)&&0!==(42&r)?e===Wc?Gc++:(Gc=0,Wc=e):Gc=0,Uu(0,!1)}}function _u(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Br(t)))}function bu(){return gu(),vu(),yu(),xu()}function xu(){if(5!==Oc)return!1;var e=zc,t=jc;jc=0;var n=Oe(Bc),i=D.T,r=N.p;try{N.p=32>n?32:n,D.T=null,n=Hc,Hc=null;var a=zc,s=Bc;if(Oc=0,Fc=zc=null,Bc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,lc(a.current),ec(a,a.current,s,n),pc=l,Uu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(c){}return!0}finally{N.p=r,D.T=i,_u(e,t)}}function Su(e,t,n){t=Zi(n,t),null!==(e=_a(e,t=Ps(e.stateNode,t,2),2))&&(ke(e,2),Nu(e))}function wu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Uc||!Uc.has(i))){e=Zi(n,e),null!==(i=_a(t,n=Rs(2),2))&&(Ls(n,i,t,e),ke(i,2),Nu(i));break}}t=t.return}}function Mu(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new dc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(xc=!0,r.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function Eu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(gc&n)===n&&(4===wc||3===wc&&(62914560&gc)===gc&&300>le()-kc?0===(2&pc)&&tu(e,0):Tc|=n,Ac===gc&&(Ac=0)),Nu(e)}function Tu(e,t){0===t&&(t=Re()),null!==(e=Ii(e,t))&&(ke(e,t),Nu(e))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==i&&i.delete(t),Tu(e,n)}var Pu=null,Ru=null,Lu=!1,ku=!1,Iu=!1,Du=0;function Nu(e){e!==Ru&&null===e.next&&(null===Ru?Pu=Ru=e:Ru=Ru.next=e),ku=!0,Lu||(Lu=!0,Mh(function(){0!==(6&pc)?re(ue,Ou):zu()}))}function Uu(e,t){if(!Iu&&ku){Iu=!0;do{for(var n=!1,i=Pu;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var a=0;else{var o=i.suspendedLanes,s=i.pingedLanes;a=(1<<31-be(42|e)+1)-1,a=201326741&(a&=r&~(o&~s))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,ju(i,a))}else a=gc,0===(3&(a=Ce(i,i===fc?a:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Ae(i,a)||(n=!0,ju(i,a));i=i.next}}while(n);Iu=!1}}function Ou(){zu()}function zu(){ku=Lu=!1;var e=0;0!==Du&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bh&&(bh=e,!0);return bh=null,!1}()&&(e=Du);for(var t=le(),n=null,i=Pu;null!==i;){var r=i.next,a=Fu(i,t);0===a?(i.next=null,null===n?Pu=r:n.next=r,null===r&&(Ru=n)):(n=i,(0!==e||0!==(3&a))&&(ku=!0)),i=r}0!==Oc&&5!==Oc||Uu(e,!1),0!==Du&&(Du=0)}function Fu(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var o=31-be(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=Pe(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=gc,n=Ce(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&ae(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ae(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&ae(i),Oe(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=fe}return i=Bu.bind(null,e),n=re(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&ae(i),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Oc&&5!==Oc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var i=gc;return 0===(i=Ce(e,e===fc?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,i,t),Fu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function ju(e,t){if(bu())return null;Yc(e,t,!0)}function Hu(){if(0===Du){var e=Vr;0===e&&(e=we,0===(261888&(we<<=1))&&(we=256)),Du=e}return Du}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Lt(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Mi.length;Wu++){var Xu=Mi[Wu];Ei(Xu.toLowerCase(),"on"+(Xu[0].toUpperCase()+Xu.slice(1)))}Ei(gi,"onAnimationEnd"),Ei(vi,"onAnimationIteration"),Ei(yi,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(_i,"onTransitionRun"),Ei(bi,"onTransitionStart"),Ei(xi,"onTransitionCancel"),Ei(Si,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;a=s,r.currentTarget=c;try{a(r)}catch(u){Ti(u)}r.currentTarget=null,a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;a=s,r.currentTarget=c;try{a(r)}catch(u){Ti(u)}r.currentTarget=null,a=l}}}}function Ku(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var i=e+"__bubble";n.has(i)||(eh(t,e,2,!1),n.add(i))}function Ju(e,t,n){var i=0;t&&(i|=4),eh(n,e,i,t)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Qu]){e[Qu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Zu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qu]||(t[Qu]=!0,Ju("selectionchange",!1,t))}}function eh(e,t,n,i){switch(Td(t)){case 2:var r=bd;break;case 8:r=xd;break;default:r=Sd}n=r.bind(null,t,n,e),r=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function th(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r)break;if(4===o)for(o=i.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==s;){if(null===(o=Ke(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){i=a=o;continue e}s=s.parentNode}}i=i.return}Ft(function(){var i=a,r=Dt(n),o=[];e:{var s=wi.get(e);if(void 0!==s){var c=nn,u=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gi:case vi:case yi:c=un;break;case Si:c=xn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n;break;case"toggle":case"beforetoggle":c=wn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==s?s+"Capture":null:s;h=[];for(var f,m=i;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Bt(m,p))&&h.push(nh(m,g,f)),d)break;m=m.return}0<h.length&&(s=new c(s,u,null,n,r),o.push({event:s,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!Ke(u)&&!u[Ve])&&(c||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=i,null!==(u=(u=n.relatedTarget||n.toElement)?Ke(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=i),c!==u)){if(h=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==c?s:Qe(c),f=null==u?s:Qe(u),(s=new h(g,m+"leave",c,n,r)).target=d,s.relatedTarget=f,g=null,Ke(r)===i&&((h=new h(p,m+"enter",u,n,r)).target=f,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=rh,m=u,f=0,g=p=c;g;g=h(g))f++;g=0;for(var v=m;v;v=h(v))g++;for(;0<f-g;)p=h(p),f--;for(;0<g-f;)m=h(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){h=p;break e}p=h(p),m=h(m)}h=null}else h=null;null!==c&&ah(o,s,c,h,!1),null!==u&&null!==d&&ah(o,d,u,h,!0)}if("select"===(c=(s=i?Qe(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=jn;else if(Nn(s))if(Hn)y=Jn;else{y=Yn;var _=Zn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?i&&At(i.elementType)&&(y=jn):y=Kn;switch(y&&(y=y(e,i))?Un(o,y,n,r):(_&&_(e,s,i),"focusout"===e&&i&&"number"===s.type&&null!=i.memoizedProps.value&&bt(s,"number",s.value)),_=i?Qe(i):window,e){case"focusin":(Nn(_)||"true"===_.contentEditable)&&(oi=_,si=i,li=null);break;case"focusout":li=si=oi=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,ui(o,n,r);break;case"selectionchange":if(ai)break;case"keydown":case"keyup":ui(o,n,r)}var b;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else In?Ln(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(An&&"ko"!==n.locale&&(In||"onCompositionStart"!==x?"onCompositionEnd"===x&&In&&(b=qt()):(Wt="value"in(Gt=r)?Gt.value:Gt.textContent,In=!0)),0<(_=ih(i,x)).length&&(x=new dn(x,e,null,n,r),o.push({event:x,listeners:_}),b?x.data=b:null!==(b=kn(n))&&(x.data=b))),(b=Cn?function(e,t){switch(e){case"compositionend":return kn(t);case"keypress":return 32!==t.which?null:(Rn=!0,Pn);case"textInput":return(e=t.data)===Pn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!En&&Ln(e,t)?(e=qt(),Xt=Wt=Gt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=ih(i,"onBeforeInput")).length&&(_=new dn("onBeforeInput","beforeinput",null,n,r),o.push({event:_,listeners:x}),_.data=b)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var a=Vu((r[He]||null).action),o=i.submitter;o&&null!==(t=(t=o[He]||null)?Vu(t.formAction):o.getAttribute("formAction"))&&(a=t,o=null);var s=new nn("action","action",null,i,r);e.push({event:s,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Du){var e=o?Gu(r,o):new FormData(r);ts(n,{pending:!0,data:e,method:r.method,action:a},null,e)}}else"function"===typeof a&&(s.preventDefault(),e=o?Gu(r,o):new FormData(r),ts(n,{pending:!0,data:e,method:r.method,action:a},a,e))},currentTarget:r}]})}}(o,e,i,n,r)}Yu(o,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===a||(null!=(r=Bt(e,n))&&i.unshift(nh(e,r,a)),null!=(r=Bt(e,t))&&i.push(nh(e,r,a))),3===e.tag)return i;e=e.return}return[]}function rh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ah(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===i)break;5!==s&&26!==s&&27!==s||null===c||(l=c,r?null!=(c=Bt(n,a))&&o.unshift(nh(n,c,l)):r||null!=(c=Bt(n,a))&&o.push(nh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var oh=/\r\n?/g,sh=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(oh,"\n").replace(sh,"")}function ch(e,t){return t=lh(t),lh(e)===t}function uh(e,t,n,i,r,a){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||Mt(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&Mt(e,""+i);break;case"className":ct(e,"class",i);break;case"tabIndex":ct(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,i);break;case"style":Ct(e,i,a);break;case"data":if("object"!==t){ct(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Lt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&uh(e,t,"name",r.name,r,null),uh(e,t,"formEncType",r.formEncType,r,null),uh(e,t,"formMethod",r.formMethod,r,null),uh(e,t,"formTarget",r.formTarget,r,null)):(uh(e,t,"encType",r.encType,r,null),uh(e,t,"method",r.method,r,null),uh(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Lt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=kt);break;case"onScroll":null!=i&&Ku("scroll",e);break;case"onScrollEnd":null!=i&&Ku("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(o(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Lt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ku("beforetoggle",e),Ku("toggle",e),lt(e,"popover",i);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Pt.get(n)||n,i)}}function hh(e,t,n,i,r,a){switch(n){case"style":Ct(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(o(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof i?Mt(e,i):("number"===typeof i||"bigint"===typeof i)&&Mt(e,""+i);break;case"onScroll":null!=i&&Ku("scroll",e);break;case"onScrollEnd":null!=i&&Ku("scrollend",e);break;case"onClick":null!=i&&(e.onclick=kt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(a=null!=(a=e[He]||null)?a[n]:null)&&e.removeEventListener(t,a,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):lt(e,n,i):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ku("error",e),Ku("load",e);var i,r=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(null!=s)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,i,s,n,null)}}return a&&uh(e,t,"srcSet",n.srcSet,n,null),void(r&&uh(e,t,"src",n.src,n,null));case"input":Ku("invalid",e);var l=i=s=a=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":a=h;break;case"type":s=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:uh(e,t,r,h,n,null)}}return void _t(e,i,l,c,u,s,a,!1);case"select":for(a in Ku("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":r=l;default:uh(e,t,a,l,n,null)}return t=i,n=s,e.multiple=!!r,void(null!=t?xt(e,!!r,t,!1):null!=n&&xt(e,!!r,n,!0));case"textarea":for(s in Ku("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:uh(e,t,s,l,n,null)}return void wt(e,r,a,i);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else uh(e,t,c,r,n,null);return;case"dialog":Ku("beforetoggle",e),Ku("toggle",e),Ku("cancel",e),Ku("close",e);break;case"iframe":case"object":Ku("load",e);break;case"video":case"audio":for(r=0;r<qu.length;r++)Ku(qu[r],e);break;case"image":Ku("error",e),Ku("load",e);break;case"details":Ku("toggle",e);break;case"embed":case"source":case"link":Ku("error",e),Ku("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,u,r,n,null)}return;default:if(At(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&hh(e,t,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&uh(e,t,l,r,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fh=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function _h(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bh=null;var xh="function"===typeof setTimeout?setTimeout:void 0,Sh="function"===typeof clearTimeout?clearTimeout:void 0,wh="function"===typeof Promise?Promise:void 0,Mh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof wh?function(e){return wh.resolve(null).then(e).catch(Eh)}:xh;function Eh(e){setTimeout(function(){throw e})}function Th(e){return"head"===e}function Ch(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return e.removeChild(r),void Gd(t);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)zh(e.ownerDocument.documentElement);else if("head"===n){zh(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Ze]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}else"body"===n&&zh(e.ownerDocument.body);n=r}while(n);Gd(t)}function Ah(e,t){var n=e;e=0;do{var i=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=i}while(n)}function Ph(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ph(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}function Lh(e){return"$?"===e.data||"$~"===e.data}function kh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ih(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Dh=null;function Nh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ih(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Uh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Oh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function zh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Fh=new Map,Bh=new Set;function jh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hh=N.d;N.d={f:function(){var e=Hh.f(),t=$c();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?is(t):Hh.r(e)},D:function(e){Hh.D(e),Gh("dns-prefetch",e,null)},C:function(e,t){Hh.C(e,t),Gh("preconnect",e,t)},L:function(e,t,n){Hh.L(e,t,n);var i=Vh;if(i&&e&&t){var r='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+vt(n.imageSizes)+'"]')):r+='[href="'+vt(e)+'"]';var a=r;switch(t){case"style":a=Xh(e);break;case"script":a=Yh(e)}Fh.has(a)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fh.set(a,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(qh(a))||"script"===t&&i.querySelector(Kh(a))||(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}},m:function(e,t){Hh.m(e,t);var n=Vh;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+vt(i)+'"][href="'+vt(e)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Yh(e)}if(!Fh.has(a)&&(e=p({rel:"modulepreload",href:e},t),Fh.set(a,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Kh(a)))return}dh(i=n.createElement("link"),"link",e),et(i),n.head.appendChild(i)}}},X:function(e,t){Hh.X(e,t);var n=Vh;if(n&&e){var i=$e(n).hoistableScripts,r=Yh(e),a=i.get(r);a||((a=n.querySelector(Kh(r)))||(e=p({src:e,async:!0},t),(t=Fh.get(r))&&ed(e,t),et(a=n.createElement("script")),dh(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}},S:function(e,t,n){Hh.S(e,t,n);var i=Vh;if(i&&e){var r=$e(i).hoistableStyles,a=Xh(e);t=t||"default";var o=r.get(a);if(!o){var s={loading:0,preload:null};if(o=i.querySelector(qh(a)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fh.get(a))&&$h(e,n);var l=o=i.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Qh(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:s},r.set(a,o)}}},M:function(e,t){Hh.M(e,t);var n=Vh;if(n&&e){var i=$e(n).hoistableScripts,r=Yh(e),a=i.get(r);a||((a=n.querySelector(Kh(r)))||(e=p({src:e,async:!0,type:"module"},t),(t=Fh.get(r))&&ed(e,t),et(a=n.createElement("script")),dh(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}};var Vh="undefined"===typeof document?null:document;function Gh(e,t,n){var i=Vh;if(i&&"string"===typeof t&&t){var r=vt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Bh.has(r)||(Bh.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}}function Wh(e,t,n,i){var r,a,s,l,c=(c=X.current)?jh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Xh(n.href),(i=(n=$e(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Xh(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Fh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fh.set(e,n),u||(r=c,a=e,s=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=r.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),dh(a,"link",s),et(a),r.head.appendChild(a))))),t&&null===i)throw Error(o(528,""));return h}if(t&&null!==i)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yh(n),(i=(n=$e(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Xh(e){return'href="'+vt(e)+'"'}function qh(e){return'link[rel="stylesheet"]['+e+"]"}function Zh(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Yh(e){return'[src="'+vt(e)+'"]'}function Kh(e){return"script[async]"+e}function Jh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(i)return t.instance=i,et(i),i;var r=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(i=(e.ownerDocument||e).createElement("style")),dh(i,"style",r),Qh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Xh(n.href);var a=e.querySelector(qh(r));if(a)return t.state.loading|=4,t.instance=a,et(a),a;i=Zh(n),(r=Fh.get(r))&&$h(i,r),et(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),dh(a,"link",i),t.state.loading|=4,Qh(a,n.precedence,e),t.instance=a;case"script":return a=Yh(n.src),(r=e.querySelector(Kh(a)))?(t.instance=r,et(r),r):(i=n,(r=Fh.get(a))&&ed(i=p({},n),r),et(r=(e=e.ownerDocument||e).createElement("script")),dh(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Qh(i,n.precedence,e));return t.instance}function Qh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,o=0;o<i.length;o++){var s=i[o];if(s.dataset.precedence===t)a=s;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var i=new Map,r=td=new Map;r.set(n,i)}else(i=(r=td).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[Ze]||a[je]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(t)||"";o=e+o;var s=i.get(o);s?s.push(a):i.set(o,[a])}}return i}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ad=0;function od(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sd=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sd=new Map,t.forEach(cd,e),sd=null,od.call(e))}function cd(e,t){if(!(4&t.state.loading)){var n=sd.get(e);if(n)var i=n.get(null);else{n=new Map,sd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var o=r[a];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}o=(r=t.instance).getAttribute("data-precedence"),(a=n.get(o)||i)===i&&n.set(null,r),n.set(o,r),this.count++,i=od.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var ud={$$typeof:x,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function hd(e,t,n,i,r,a,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,i,r,a,o,s,l,c,u,h){return e=new hd(e,t,n,o,l,c,u,h,s),t=1,!0===a&&(t|=24),a=zi(3,null,null,t),e.current=a,a.stateNode=e,(t=Fr()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},ga(a),e}function pd(e){return e?e=Ui:Ui}function fd(e,t,n,i,r,a){r=pd(r),null===i.context?i.context=r:i.pendingContext=r,(i=ya(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(i.callback=a),null!==(n=_a(e,i,t))&&(Zc(n,0,t),ba(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Ii(e,67108864);null!==t&&Zc(t,0,67108864),gd(e,67108864)}}function yd(e){if(13===e.tag||31===e.tag){var t=Xc(),n=Ii(e,t=Ue(t));null!==n&&Zc(n,0,t),gd(e,t)}}var _d=!0;function bd(e,t,n,i){var r=D.T;D.T=null;var a=N.p;try{N.p=2,Sd(e,t,n,i)}finally{N.p=a,D.T=r}}function xd(e,t,n,i){var r=D.T;D.T=null;var a=N.p;try{N.p=8,Sd(e,t,n,i)}finally{N.p=a,D.T=r}}function Sd(e,t,n,i){if(_d){var r=wd(i);if(null===r)th(e,t,i,Md,n),Nd(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ad=Ud(Ad,e,t,n,i,r),!0;case"dragenter":return Pd=Ud(Pd,e,t,n,i,r),!0;case"mouseover":return Rd=Ud(Rd,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Ld.set(a,Ud(Ld.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,kd.set(a,Ud(kd.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Nd(e,i),4&t&&-1<Dd.indexOf(e)){for(;null!==r;){var a=Je(r);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=Te(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-be(o);s.entanglements[1]|=l,o&=~l}Nu(a),0===(6&pc)&&(Dc=le()+500,Uu(0,!1))}}break;case 31:case 13:null!==(s=Ii(a,2))&&Zc(s,0,2),$c(),gd(a,2)}if(null===(a=wd(i))&&th(e,t,i,Md,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else th(e,t,i,null,n)}}function wd(e){return Ed(e=Dt(e))}var Md=null;function Ed(e){if(Md=null,null!==(e=Ke(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Md=e,null}function Td(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ad=null,Pd=null,Rd=null,Ld=new Map,kd=new Map,Id=[],Dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nd(e,t){switch(e){case"focusin":case"focusout":Ad=null;break;case"dragenter":case"dragleave":Pd=null;break;case"mouseover":case"mouseout":Rd=null;break;case"pointerover":case"pointerout":Ld.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(t.pointerId)}}function Ud(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=Je(t))&&vd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Od(e){var t=Ke(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){yd(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){yd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=wd(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&vd(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);It=i,n.target.dispatchEvent(i),It=null,t.shift()}return!0}function Fd(e,t,n){zd(e)&&n.delete(t)}function Bd(){Cd=!1,null!==Ad&&zd(Ad)&&(Ad=null),null!==Pd&&zd(Pd)&&(Pd=null),null!==Rd&&zd(Rd)&&(Rd=null),Ld.forEach(Fd),kd.forEach(Fd)}function jd(e,t){e.blockedOn===t&&(e.blockedOn=null,Cd||(Cd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bd)))}var Hd=null;function Vd(e){Hd!==e&&(Hd=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Hd===e&&(Hd=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===Ed(i||n))continue;break}var a=Je(n);null!==a&&(e.splice(t,3),t-=3,ts(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Gd(e){function t(t){return jd(t,e)}null!==Ad&&jd(Ad,e),null!==Pd&&jd(Pd,e),null!==Rd&&jd(Rd,e),Ld.forEach(t),kd.forEach(t);for(var n=0;n<Id.length;n++){var i=Id[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Id.length&&null===(n=Id[0]).blockedOn;)Od(n),null===n.blockedOn&&Id.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],o=r[He]||null;if("function"===typeof a)o||Vd(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(r=a,o=a[He]||null)s=o.formAction;else if(null!==Ed(r))continue}else s=o.action;"function"===typeof s?n[i+1]=s:(n.splice(i,3),i-=3),Vd(n)}}}function Wd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Xd(e){this._internalRoot=e}function qd(e){this._internalRoot=e}qd.prototype.render=Xd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));fd(t.current,Xc(),e,t,null,null)},qd.prototype.unmount=Xd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fd(e.current,2,null,e,null,null),$c(),t[Ve]=null}},qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Id.length&&0!==t&&t<Id[n].priority;n++);Id.splice(n,0,e),0===n&&Od(e)}};var Zd=r.version;if("19.2.0"!==Zd)throw Error(o(527,Zd,"19.2.0"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return h(r),e;if(a===i)return h(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,c=r.child;c;){if(c===n){s=!0,n=r,i=a;break}if(c===i){s=!0,i=r,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,i=r;break}if(c===i){s=!0,i=a,n=r;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Yd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{ve=Kd.inject(Yd),ye=Kd}catch(Qd){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,i="",r=Ms,a=Es,l=Ts;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,i,null,r,a,l,Wd),e[Ve]=t.current,$u(e),new Xd(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var i=!1,r="",a=Ms,l=Es,c=Ts,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=dd(e,1,!0,t,0,i,r,u,a,l,c,Wd)).context=pd(null),n=t.current,(r=ya(i=Ue(i=Xc()))).callback=null,_a(n,r,i),n=i,t.current.lanes=n,ke(t,n),Nu(t),e[Ve]=t.current,$u(e),new qd(t)},t.version="19.2.0"},16:(e,t,n)=>{"use strict";e.exports=n(492)},43:(e,t,n)=>{"use strict";e.exports=n(288)},179:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,L();else{var t=i(u);null!==t&&k(x,t.startTime-e)}}var S,w=!1,M=-1,E=5,T=-1;function C(){return!(t.unstable_now()-T<E)}function A(){if(w){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(M),M=-1),f=!0;var a=p;try{t:{for(b(e),d=i(c);null!==d&&!(d.expirationTime>e&&C());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){d.callback=s,b(e),n=!0;break t}d===i(c)&&r(c),b(e)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&k(x,l.startTime-e),n=!1}}break e}finally{d=null,p=a,f=!1}n=void 0}}finally{n?S():w=!1}}}if("function"===typeof _)S=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){v(A,0)};function L(){w||(w=!0,S())}function k(e,n){M=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(y(M),M=-1):g=!0,k(x,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,L())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},205:(e,t,n)=>{"use strict";e.exports=n(252)},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var a=0;function o(e){return"_leaflet_id"in e||(e._leaflet_id=++a),e._leaflet_id}function s(e,t,n){var i,r,a,o;return o=function(){i=!1,r&&(a.apply(n,r),r=!1)},a=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(o,t),i=!0)},a}function l(e,t,n){var i=t[1],r=t[0],a=i-r;return e===i&&n?e:((e-r)%a+a)%a+r}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function f(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function S(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var w=window.requestAnimationFrame||b("RequestAnimationFrame")||S,M=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function E(e,t,n){if(!n||w!==S)return w.call(window,r(e,t));e.call(t)}function T(e){e&&M.call(window,e)}var C={__proto__:null,extend:n,create:i,bind:r,get lastId(){return a},stamp:o,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:w,cancelFn:M,requestAnimFrame:E,cancelAnimFrame:T};function A(){}function P(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}A.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,a=i(r);for(var o in a.constructor=t,t.prototype=a,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(P(e.includes),n.apply(null,[a].concat(e.includes))),n(a,e),delete a.statics,delete a.includes,a.options&&(a.options=r.options?i(r.options):{},n(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},A.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},A.mergeOptions=function(e){return n(this.prototype.options,e),this},A.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var R={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,a=(e=d(e)).length;r<a;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=d(e);for(var r=1===arguments.length,a=0,o=e.length;a<o;a++)r?this._off(e[a]):this._off(e[a],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var r={fn:t,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,r,a;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var o=this._listens(e,t,n);if(!1!==o){var s=i[o];this._firingCount&&(s.fn=c,this._events[e]=i=i.slice()),i.splice(o,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(r=0,a=i.length;r<a;r++)i[r].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var l=a[o],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var r=t;"function"!==typeof t&&(i=!!t,r=void 0,n=void 0);var a=this._events&&this._events[e];if(a&&a.length&&!1!==this._listens(e,r,n))return!0;if(i)for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var r=0,a=i.length;r<a;r++)if(i[r].fn===t&&i[r].ctx===n)return r;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var r=0,a=(e=d(e)).length;r<a;r++)this._on(e[r],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var k=A.extend(R);function I(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var D=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function N(e,t,n){return e instanceof I?e:v(e)?new I(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new I(e.x,e.y):new I(e,t,n)}function U(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function O(e,t){return!e||e instanceof U?e:new U(e,t)}function z(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function F(e,t){return e instanceof z?e:new z(e,t)}function B(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function j(e,t,n){return e instanceof B?e:v(e)&&"object"!==typeof e[0]?3===e.length?new B(e[0],e[1],e[2]):2===e.length?new B(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new B(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new B(e,t,n)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(e){return this.clone()._add(N(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(N(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new I(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new I(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(e){var t=(e=N(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=N(e)).x===this.x&&e.y===this.y},contains:function(e){return e=N(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},U.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof I||"number"===typeof e[0]||"x"in e)t=n=N(e);else if(t=(e=O(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof I?N(e):O(e))instanceof U?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=O(e);var t=this.min,n=this.max,i=e.min,r=e.max,a=r.x>=t.x&&i.x<=n.x,o=r.y>=t.y&&i.y<=n.y;return a&&o},overlaps:function(e){e=O(e);var t=this.min,n=this.max,i=e.min,r=e.max,a=r.x>t.x&&i.x<n.x,o=r.y>t.y&&i.y<n.y;return a&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,r=Math.abs(t.y-n.y)*e;return O(N(t.x-i,t.y-r),N(n.x+i,n.y+r))},equals:function(e){return!!e&&(e=O(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},z.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof B)t=e,n=e;else{if(!(e instanceof z))return e?this.extend(j(e)||F(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new B(t.lat,t.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new z(new B(t.lat-i,t.lng-r),new B(n.lat+i,n.lng+r))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof B||"lat"in e?j(e):F(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof z?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>=t.lat&&i.lat<=n.lat,o=r.lng>=t.lng&&i.lng<=n.lng;return a&&o},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>t.lat&&i.lat<n.lat,o=r.lng>t.lng&&i.lng<n.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(e,t){return!!e&&(e=j(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return V.distance(this,j(e))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var H={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new U(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new B(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var a=e.getSouthWest(),o=e.getNorthEast();return new z(new B(a.lat-i,a.lng-r),new B(o.lat-i,o.lng-r))}},V=n({},H,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,a=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),s=a*a+Math.cos(i)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),G=6378137,W={R:G,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new I(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new B((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=G*Math.PI;return new U([-e,-e],[e,e])}()};function X(e,t,n,i){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function q(e,t,n,i){return new X(e,t,n,i)}X.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new I((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Z=n({},V,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return q(e,.5,-e,.5)}()}),Y=n({},Z,{code:"EPSG:900913"});function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e,t){var n,i,r,a,o,s,l="";for(n=0,r=e.length;n<r;n++){for(i=0,a=(o=e[n]).length;i<a;i++)l+=(i?"L":"M")+(s=o[i]).x+" "+s.y;l+=t?Ue.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,ee=$&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Ne("webkit"),ie=Ne("android"),re=Ne("android 2")||Ne("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=ie&&Ne("Google")&&ae<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&Ne("chrome"),ce=Ne("gecko")&&!ne&&!se&&!$,ue=!le&&Ne("safari"),he=Ne("phantom"),de="OTransition"in Q,pe=0===navigator.platform.indexOf("Win"),fe=$&&"transition"in Q,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in Q,ve=!window.L_DISABLE_3D&&(fe||me||ge)&&!de&&!he,ye="undefined"!==typeof orientation||Ne("mobile"),_e=ye&&ne,be=ye&&me,xe=!window.PointerEvent&&window.MSPointerEvent,Se=!(!window.PointerEvent&&!xe),we="ontouchstart"in window||!!window.TouchEvent,Me=!window.L_NO_TOUCH&&(we||Se),Ee=ye&&se,Te=ye&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ae=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Pe=!!document.createElement("canvas").getContext,Re=!(!document.createElementNS||!K("svg").createSVGRect),Le=!!Re&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),ke=!Re&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ie=0===navigator.platform.indexOf("Mac"),De=0===navigator.platform.indexOf("Linux");function Ne(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ue={ie:$,ielt9:ee,edge:te,webkit:ne,android:ie,android23:re,androidStock:oe,opera:se,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:pe,ie3d:fe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:xe,pointer:Se,touch:Me,touchNative:we,mobileOpera:Ee,mobileGecko:Te,retina:Ce,passiveEvents:Ae,canvas:Pe,svg:Re,vml:ke,inlineSvg:Le,mac:Ie,linux:De},Oe=Ue.msPointer?"MSPointerDown":"pointerdown",ze=Ue.msPointer?"MSPointerMove":"pointermove",Fe=Ue.msPointer?"MSPointerUp":"pointerup",Be=Ue.msPointer?"MSPointerCancel":"pointercancel",je={touchstart:Oe,touchmove:ze,touchend:Fe,touchcancel:Be},He={touchstart:Qe,touchmove:Je,touchend:Je,touchcancel:Je},Ve={},Ge=!1;function We(e,t,n){return"touchstart"===t&&Ke(),He[t]?(n=He[t].bind(this,n),e.addEventListener(je[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Xe(e,t,n){je[t]?e.removeEventListener(je[t],n,!1):console.warn("wrong event specified:",t)}function qe(e){Ve[e.pointerId]=e}function Ze(e){Ve[e.pointerId]&&(Ve[e.pointerId]=e)}function Ye(e){delete Ve[e.pointerId]}function Ke(){Ge||(document.addEventListener(Oe,qe,!0),document.addEventListener(ze,Ze,!0),document.addEventListener(Fe,Ye,!0),document.addEventListener(Be,Ye,!0),Ge=!0)}function Je(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ve)t.touches.push(Ve[n]);t.changedTouches=[t],e(t)}}function Qe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&qt(t),Je(e,t)}function $e(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function r(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var r=Yt(e);if(!r.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||r.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var a=Date.now();a-i<=et?2===++n&&t($e(e)):n=1,i=a}}}else n=e.detail}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,rt,at,ot,st,lt=Et(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Et(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function dt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function pt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function ft(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=St(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=d(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!yt(e,t)){var a=St(e);xt(e,(a?a+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):xt(e,h((" "+St(e)+" ").replace(" "+t+" "," ")))}function xt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function St(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function wt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Mt(e,t)}function Mt(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function Et(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Tt(e,t,n){var i=t||new I(0,0);e.style[lt]=(Ue.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,Ue.any3d?Tt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function At(e){return e._leaflet_pos||new I(0,0)}if("onselectstart"in document)it=function(){Ot(window,"selectstart",qt)},rt=function(){Ft(window,"selectstart",qt)};else{var Pt=Et(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Pt){var e=document.documentElement.style;at=e[Pt],e[Pt]="none"}},rt=function(){Pt&&(document.documentElement.style[Pt]=at,at=void 0)}}function Rt(){Ot(window,"dragstart",qt)}function Lt(){Ft(window,"dragstart",qt)}function kt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(It(),ot=e,st=e.style.outlineStyle,e.style.outlineStyle="none",Ot(window,"keydown",It))}function It(){ot&&(ot.style.outlineStyle=st,ot=void 0,st=void 0,Ft(window,"keydown",It))}function Dt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Nt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Ut={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:ht,getStyle:dt,create:pt,remove:ft,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:_t,removeClass:bt,setClass:xt,getClass:St,setOpacity:wt,testProp:Et,setTransform:Tt,setPosition:Ct,getPosition:At,get disableTextSelection(){return it},get enableTextSelection(){return rt},disableImageDrag:Rt,enableImageDrag:Lt,preventOutline:kt,restoreOutline:It,getSizedParentNode:Dt,getScale:Nt};function Ot(e,t,n,i){if(t&&"object"===typeof t)for(var r in t)Ht(e,r,t[r],n);else for(var a=0,o=(t=d(t)).length;a<o;a++)Ht(e,t[a],n,i);return this}var zt="_leaflet_events";function Ft(e,t,n,i){if(1===arguments.length)Bt(e),delete e[zt];else if(t&&"object"===typeof t)for(var r in t)Vt(e,r,t[r],n);else if(t=d(t),2===arguments.length)Bt(e,function(e){return-1!==y(t,e)});else for(var a=0,o=t.length;a<o;a++)Vt(e,t[a],n,i);return this}function Bt(e,t){for(var n in e[zt]){var i=n.split(/\d/)[0];t&&!t(i)||Vt(e,i,null,null,n)}}var jt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ht(e,t,n,i){var r=t+o(n)+(i?"_"+o(i):"");if(e[zt]&&e[zt][r])return this;var a=function(t){return n.call(i||e,t||window.event)},s=a;!Ue.touchNative&&Ue.pointer&&0===t.indexOf("touch")?a=We(e,t,a):Ue.touch&&"dblclick"===t?a=tt(e,a):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(jt[t]||t,a,!!Ue.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(a=function(t){t=t||window.event,$t(e,t)&&s(t)},e.addEventListener(jt[t],a,!1)):e.addEventListener(t,s,!1):e.attachEvent("on"+t,a),e[zt]=e[zt]||{},e[zt][r]=a}function Vt(e,t,n,i,r){r=r||t+o(n)+(i?"_"+o(i):"");var a=e[zt]&&e[zt][r];if(!a)return this;!Ue.touchNative&&Ue.pointer&&0===t.indexOf("touch")?Xe(e,t,a):Ue.touch&&"dblclick"===t?nt(e,a):"removeEventListener"in e?e.removeEventListener(jt[t]||t,a,!1):e.detachEvent("on"+t,a),e[zt][r]=null}function Gt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Ht(e,"wheel",Gt),this}function Xt(e){return Ot(e,"mousedown touchstart dblclick contextmenu",Gt),e._leaflet_disable_click=!0,this}function qt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Zt(e){return qt(e),Gt(e),this}function Yt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Kt(e,t){if(!t)return new I(e.clientX,e.clientY);var n=Nt(t),i=n.boundingClientRect;return new I((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Jt=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qt(e){return Ue.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Jt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function $t(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:Ot,off:Ft,stopPropagation:Gt,disableScrollPropagation:Wt,disableClickPropagation:Xt,preventDefault:qt,stop:Zt,getPropagationPath:Yt,getMousePosition:Kt,getWheelDelta:Qt,isExternalTarget:$t,addListener:Ot,removeListener:Ft},tn=k.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=At(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=k.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(j(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ot(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(j(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),a=(e instanceof I?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),o=this.containerPointToLatLng(r.add(a));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():F(e);var n=N(t.paddingTopLeft||t.padding||[0,0]),i=N(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var a=i.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),r),s=this.project(e.getNorthEast(),r);return{center:this.unproject(o.add(s).divideBy(2).add(a),r),zoom:r}},fitBounds:function(e,t){if(!(e=F(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=N(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Ue.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),a=this.getSize(),o=this._zoom;e=j(e),t=void 0===t?o:t;var s=Math.max(a.x,a.y),l=s*this.getZoomScale(o,t),c=r.distanceTo(i)||1,u=1.42,h=u*u;function d(e){var t=(l*l-s*s+(e?-1:1)*h*h*c*c)/(2*(e?l:s)*h*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/f(e)}var g=d(0);function v(e){return s*(f(g)/f(g+u*e))}function y(e){return s*(f(g)*m(g+u*e)-p(g))/h}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),x=(d(1)-g)/u,S=n.duration?1e3*n.duration:1e3*x*.8;function w(){var n=(Date.now()-b)/S,a=_(n)*x;n<=1?(this._flyToFrame=E(w,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(y(a)/c)),o),this.getScaleZoom(s/v(a),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),w.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,F(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=N((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=N(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),a=this.project(e),o=this.getPixelBounds(),s=O([o.min.add(n),o.max.subtract(i)]),l=s.getSize();if(!s.contains(a)){this._enforcingBounds=!0;var c=a.subtract(s.getCenter()),u=s.extend(a).getSize().subtract(l);r.x+=c.x<0?-u.x:u.x,r.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),a=t.divideBy(2).round(),o=i.divideBy(2).round(),s=a.subtract(o);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new B(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var a={latlng:t,bounds:n,timestamp:e.timestamp};for(var o in e.coords)"number"===typeof e.coords[o]&&(a[o]=e.coords[o]);this.fire("locationfound",a)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ft(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new z(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=N(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),c=O(this.project(s,i),this.project(o,i)).getSize(),u=Ue.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=t?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),u&&(i=Math.round(i/(u/100))*(u/100),i=t?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(a,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new U(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(j(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(N(e),t)},layerPointToLatLng:function(e){var t=N(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(j(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(j(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(j(e),j(t))},containerPointToLayerPoint:function(e){return N(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return N(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(N(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(e)))},mouseEventToContainerPoint:function(e){return Kt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Ot(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,_t(e,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=dt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new I(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,n)._move(e,t)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Ft:Ot;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,a=e.target||e.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(r&&!$t(a,e))break;if(i.push(n),r)break}if(a===this._container)break;a=a.parentNode}return i.length||s||r||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&kt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var a=this._findEventTargets(e,t);if(i){for(var o=[],s=0;s<i.length;s++)i[s].listens(t,!0)&&o.push(i[s]);a=o.concat(a)}if(a.length){"contextmenu"===t&&qt(e);var l=a[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<a.length;s++)if(a[s].fire(t,c,!0),c.originalEvent._stopped||!1===a[s].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return At(this._mapPane)||new I(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return O([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),a=new U(i.subtract(r),i.add(r)),o=this._getBoundsOffset(a,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(i.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new U(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=O(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),a=i.max.subtract(e.max);return new I(this._rebound(r.x,-a.x),this._rebound(r.y,-a.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=Ue.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Tt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Tt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(E(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var an=A.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),on=function(e){return new an(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function i(i,r){var a=t+i+" "+t+r;e[i+r]=pt("div",a,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ft(this._controlCorners[e]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return an.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Xt(t),Wt(t);var i=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Ot(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=pt("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),Ot(r,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){qt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",i),this._separator=pt("div",e+"-separator",i),this._overlaysList=pt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(t),t.layerId=o(e.layer),Ot(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var a=document.createElement("span");return n.appendChild(a),a.appendChild(t),a.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var a=n.length-1;a>=0;a--)e=n[a],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])&&this._map.removeLayer(r[a]);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])||this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Ot(e,"click",qt),this.expand();var t=this;setTimeout(function(){Ft(e,"click",qt),t._preventClick=!1})}}),ln=function(e,t,n){return new sn(e,t,n)},cn=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var a=pt("a",n,i);return a.innerHTML=e,a.href="#",a.title=t,a.setAttribute("role","button"),a.setAttribute("aria-label",t),Xt(a),Ot(a,"click",Zt),Ot(a,"click",r,this),Ot(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},hn=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(t=r/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(e){return new hn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fn=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Xt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new fn).addTo(this)});var mn=function(e){return new fn(e)};an.Layers=sn,an.Zoom=cn,an.Scale=hn,an.Attribution=fn,on.layers=ln,on.zoom=un,on.scale=dn,on.attribution=mn;var gn=A.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:R},yn=Ue.touch?"touchstart mousedown":"mousedown",_n=k.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Ot(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&kt(this._element),Rt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Dt(this._element);this._startPoint=new I(t.clientX,t.clientY),this._startPos=At(this._element),this._parentScale=Nt(n);var i="mousedown"===e.type;Ot(document,i?"mousemove":"touchmove",this._onMove,this),Ot(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new I(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),Lt(),rt();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var i,r,a,o,s,l,c,u,h,d=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=In(e[r],t);for(o=0;o<4;o++){for(u=d[o],i=[],r=0,a=(c=e.length)-1;r<c;a=r++)s=e[r],l=e[a],s._code&u?l._code&u||((h=kn(l,s,u,t,n))._code=In(h,t),i.push(h)):(l._code&u&&((h=kn(l,s,u,t,n))._code=In(h,t),i.push(h)),i.push(s));e=i}return e}function xn(e,t){var n,i,r,a,o,s,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Un(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=j([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=Sn(e));var p=e.length,f=[];for(n=0;n<p;n++){var m=j(e[n]);f.push(t.project(j([m.lat-h.lat,m.lng-h.lng])))}for(s=l=c=0,n=0,i=p-1;n<p;i=n++)r=f[n],a=f[i],o=r.y*a.x-a.y*r.x,l+=(r.x+a.x)*o,c+=(r.y+a.y)*o,s+=3*o;u=0===s?f[0]:[l/s,c/s];var g=t.unproject(N(u));return j([g.lat+h.lat,g.lng+h.lng])}function Sn(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var a=j(e[r]);t+=a.lat,n+=a.lng,i++}return j([t/i,n/i])}var wn,Mn={__proto__:null,clipPolygon:bn,polygonCenter:xn,centroid:Sn};function En(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=An(e=Rn(e,n),n)}function Tn(e,t,n){return Math.sqrt(Nn(e,t,n,!0))}function Cn(e,t,n){return Nn(e,t,n)}function An(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Pn(e,i,t,0,n-1);var r,a=[];for(r=0;r<n;r++)i[r]&&a.push(e[r]);return a}function Pn(e,t,n,i,r){var a,o,s,l=0;for(o=i+1;o<=r-1;o++)(s=Nn(e[o],e[i],e[r],!0))>l&&(a=o,l=s);l>n&&(t[a]=1,Pn(e,t,n,i,a),Pn(e,t,n,a,r))}function Rn(e,t){for(var n=[e[0]],i=1,r=0,a=e.length;i<a;i++)Dn(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<a-1&&n.push(e[a-1]),n}function Ln(e,t,n,i,r){var a,o,s,l=i?wn:In(e,n),c=In(t,n);for(wn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=In(o=kn(e,t,a=l||c,n,r),n),a===l?(e=o,l=s):(t=o,c=s)}}function kn(e,t,n,i,r){var a,o,s=t.x-e.x,l=t.y-e.y,c=i.min,u=i.max;return 8&n?(a=e.x+s*(u.y-e.y)/l,o=u.y):4&n?(a=e.x+s*(c.y-e.y)/l,o=c.y):2&n?(a=u.x,o=e.y+l*(u.x-e.x)/s):1&n&&(a=c.x,o=e.y+l*(c.x-e.x)/s),new I(a,o,r)}function In(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Dn(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Nn(e,t,n,i){var r,a=t.x,o=t.y,s=n.x-a,l=n.y-o,c=s*s+l*l;return c>0&&((r=((e.x-a)*s+(e.y-o)*l)/c)>1?(a=n.x,o=n.y):r>0&&(a+=s*r,o+=l*r)),s=e.x-a,l=e.y-o,i?s*s+l*l:new I(a,o)}function Un(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function On(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Un(e)}function zn(e,t){var n,i,r,a,o,s,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Un(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=j([0,0]),h=F(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=Sn(e));var d=e.length,p=[];for(n=0;n<d;n++){var f=j(e[n]);p.push(t.project(j([f.lat-u.lat,f.lng-u.lng])))}for(n=0,i=0;n<d-1;n++)i+=p[n].distanceTo(p[n+1])/2;if(0===i)c=p[0];else for(n=0,a=0;n<d-1;n++)if(o=p[n],s=p[n+1],(a+=r=o.distanceTo(s))>i){l=(a-i)/r,c=[s.x-l*(s.x-o.x),s.y-l*(s.y-o.y)];break}var m=t.unproject(N(c));return j([m.lat+u.lat,m.lng+u.lng])}var Fn={__proto__:null,simplify:En,pointToSegmentDistance:Tn,closestPointOnSegment:Cn,clipSegment:Ln,_getEdgeIntersection:kn,_getBitCode:In,_sqClosestPointOnSegment:Nn,isFlat:Un,_flat:On,polylineCenter:zn},Bn={project:function(e){return new I(e.lng,e.lat)},unproject:function(e){return new B(e.y,e.x)},bounds:new U([-180,-90],[180,90])},jn={R:6378137,R_MINOR:6356752.314245179,bounds:new U([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),o=a*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),a/2);return i=-n*Math.log(Math.max(s,1e-10)),new I(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),o=Math.exp(-e.y/i),s=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=a*Math.sin(s),t=Math.pow((1-t)/(1+t),a/2),s+=c=Math.PI/2-2*Math.atan(o*t)-s;return new B(s*n,e.x*n/i)}},Hn={__proto__:null,LonLat:Bn,Mercator:jn,SphericalMercator:W},Vn=n({},V,{code:"EPSG:3395",projection:jn,transformation:function(){var e=.5/(Math.PI*jn.R);return q(e,.5,-e,.5)}()}),Gn=n({},V,{code:"EPSG:4326",projection:Bn,transformation:q(1/180,1,-1/180,.5)}),Wn=n({},H,{projection:Bn,transformation:q(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});H.Earth=V,H.EPSG3395=Vn,H.EPSG3857=Z,H.EPSG900913=Y,H.EPSG4326=Gn,H.Simple=Wn;var Xn=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Xn.extend({initialize:function(e,t){var n,i;if(p(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Zn=function(e,t){return new qn(e,t)},Yn=qn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),qn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),qn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new z;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Kn=function(e,t){return new Yn(e,t)},Jn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var r=N(i),a=N("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Ue.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Qn(e){return new Jn(e)}var $n=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=dt(e,"background-image")||dt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=At(t._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),l=O(o.min._subtract(s).add(r),o.max._subtract(s).subtract(r));if(!l.contains(a)){var c=N((Math.max(l.max.x,a.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=E(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=At(t._icon),r=t._map.layerPointToLatLng(i);n&&Ct(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Xn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=j(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=j(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ot(n,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(_t(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&wt(this._icon,e),this._shadow&&wt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?N(t.iconSize):N(0,0),i=t.iconAnchor?N(t.iconAnchor):N(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=j(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=j(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new U(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ai(e,t){return new ri(e,t)}var oi=ri.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),p(this,t),this._latlng=j(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===V.distance){var r=Math.PI/180,a=this._mRadius/V.R/r,o=n.project([t+a,e]),s=n.project([t-a,e]),l=o.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(a*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-o.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function si(e,t,n){return new oi(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,a=Nn,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],c=1,u=l.length;c<u;c++){var h=a(e,t=l[c-1],n=l[c],!0);h<i&&(i=h,r=a(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=j(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new z,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Un(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Un(e),i=0,r=e.length;i<r;i++)n?(t[i]=j(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new I(e,e);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,r,a=e[0]instanceof B,o=e.length;if(a){for(r=[],i=0;i<o;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<o;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,a,o,s,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,a=(s=this._rings[t]).length;n<a-1;n++)(o=Ln(s[n],s[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(o[0]),o[1]===s[n+1]&&n!==a-2||(l[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=En(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,a,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(i=0,r=(o=(s=this._parts[n]).length)-1;i<o;r=i++)if((t||0!==i)&&Tn(e,s[r],s[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=On;var ui=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof B&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),Un(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Un(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new I(t,t);if(e=new U(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,a=this._rings.length;r<a;r++)(i=bn(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,a,o,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(a=0,o=(l=(t=this._parts[r]).length)-1;a<l;o=a++)n=t[a],i=t[o],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function hi(e,t){return new ui(e,t)}var di=Yn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=v(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var o=pi(e,a);return o?(o.feature=bi(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pi(e,t){var n,i,r,a,o="Feature"===e.type?e.geometry:e,s=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mi;if(!s&&!o)return null;switch(o.type){case"Point":return fi(c,e,n=u(s),t);case"MultiPoint":for(r=0,a=s.length;r<a;r++)n=u(s[r]),l.push(fi(c,e,n,t));return new Yn(l);case"LineString":case"MultiLineString":return i=gi(s,"LineString"===o.type?0:1,u),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(s,"Polygon"===o.type?1:2,u),new ui(i,t);case"GeometryCollection":for(r=0,a=o.geometries.length;r<a;r++){var h=pi({geometry:o.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Yn(l);case"FeatureCollection":for(r=0,a=o.features.length;r<a;r++){var d=pi(o.features[r],t);d&&l.push(d)}return new Yn(l);default:throw new Error("Invalid GeoJSON object.")}}function fi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function mi(e){return new B(e[1],e[0],e[2])}function gi(e,t,n){for(var i,r=[],a=0,o=e.length;a<o;a++)i=t?gi(e[a],t-1,n):(n||mi)(e[a]),r.push(i);return r}function vi(e,t){return void 0!==(e=j(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function yi(e,t,n,i){for(var r=[],a=0,o=e.length;a<o;a++)r.push(t?yi(e[a],Un(e[a])?0:t-1,n,i):vi(e[a],i));return!t&&n&&r.length>0&&r.push(r[0].slice()),r}function _i(e,t){return e.feature?n({},e.feature,{geometry:t}):bi(t)}function bi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var xi={toGeoJSON:function(e){return _i(this,{type:"Point",coordinates:vi(this.getLatLng(),e)})}};function Si(e,t){return new di(e,t)}ti.include(xi),oi.include(xi),ri.include(xi),li.include({toGeoJSON:function(e){var t=!Un(this._latlngs);return _i(this,{type:(t?"Multi":"")+"LineString",coordinates:yi(this._latlngs,t?1:0,!1,e)})}}),ui.include({toGeoJSON:function(e){var t=!Un(this._latlngs),n=t&&!Un(this._latlngs[0]),i=yi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),_i(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),qn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_i(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var a=bi(r);"FeatureCollection"===a.type?i.push.apply(i,a.features):i.push(a)}}}),n?_i(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var wi=Si,Mi=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=F(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Tt(this._image,n,t)},_reset:function(){var e=this._image,t=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ei=function(e,t,n){return new Mi(e,t,n)},Ti=Mi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],a=0;a<n.length;a++)i.push(n[a].src);this._url=n.length>0?i:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var s=pt("source");s.src=this._url[o],t.appendChild(s)}}}});function Ci(e,t,n){return new Ti(e,t,n)}var Ai=Mi.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Pi(e,t,n){return new Ai(e,t,n)}var Ri=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof B||v(e))?(this._latlng=j(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(r(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=j(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Yn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var r=t;return r instanceof e||(r=new e(i).setContent(t)),n&&r.setLatLng(n),r}}),Xn.include({_initOverlay:function(e,t,n,i){var r=n;return r instanceof e?(p(r,i),r._source=this):(r=t&&!i?t:new e(i,this)).setContent(n),r}});var Li=Ri.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ri.prototype.openOn.call(this,e)},onAdd:function(e){Ri.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Gt))},onRemove:function(e){Ri.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Gt))},getEvents:function(){var e=Ri.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Xt(t),Wt(this._contentNode),Ot(t,"contextmenu",Gt),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=pt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Ot(i,"click",function(e){qt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,r=this.options.maxHeight,a="leaflet-popup-scrolled";r&&i>r?(t.height=r+"px",_t(e,a)):bt(e,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(dt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new I(this._containerLeft,-n-this._containerBottom);r._add(At(this._container));var a=e.layerPointToContainerPoint(r),o=N(this.options.autoPanPadding),s=N(this.options.autoPanPaddingTopLeft||o),l=N(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),u=0,h=0;a.x+i+l.x>c.x&&(u=a.x+i-c.x+l.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+n+l.y>c.y&&(h=a.y+n-c.y+l.y),a.y-h-s.y<0&&(h=a.y-s.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ki=function(e,t){return new Li(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Li,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Xn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Li,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Yn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Zt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ii=Ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ri.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ri.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ri.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,r=this._container,a=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(e),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=N(this.options.offset),h=this._getAnchor();"top"===s?(t=l/2,n=c):"bottom"===s?(t=l/2,n=0):"center"===s?(t=l/2,n=c/2):"right"===s?(t=0,n=c/2):"left"===s?(t=l,n=c/2):o.x<a.x?(s="right",t=0,n=c/2):(s="left",t=l+2*(u.x+h.x),n=c/2),e=e.subtract(N(t,n,!0)).add(u).add(h),bt(r,"leaflet-tooltip-right"),bt(r,"leaflet-tooltip-left"),bt(r,"leaflet-tooltip-top"),bt(r,"leaflet-tooltip-bottom"),_t(r,"leaflet-tooltip-"+s),Ct(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&wt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Di=function(e,t){return new Ii(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ii,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Xn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ii,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Yn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Ot(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Ot(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ni=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=N(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ui(e){return new Ni(e)}Jn.Default=$n;var Oi=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ft(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof I?e:new I(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,a=n.length;r<a;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){wt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var a=Math.min(1,(e-r.loaded)/200);wt(r.el,a),a<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(T(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(ft(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ft(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),a=Math.floor(t/2),o=n-1,s=new I(+r,+a);s.z=+o;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>i&&this._retainParent(r,a,o,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var a=2*t;a<2*t+2;a++){var o=new I(r,a);o.z=n+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,a,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var a=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!a||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();Ue.any3d?Tt(e.el,r,i):Ct(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(2*i);return new U(r.subtract(a),r.add(a))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),a=r.getCenter(),o=[],s=this.options.keepBuffer,l=new U(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new I(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new I(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new z(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new I(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(ft(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Ue.ielt9&&this.options.opacity<1&&wt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&E(r(this._tileReady,this,e,null,a)),Ct(a,n),this._tiles[i]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(wt(n.el,0),T(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new I(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new U(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function zi(e){return new Oi(e)}var Fi=Oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Ue.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Ot(n,"load",r(this._tileOnLoad,this,t,n)),Ot(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Ue.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Ue.ielt9?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=_;var n=this._tiles[e].coords;ft(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),Oi.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Oi.prototype._tileReady.call(this,e,t,n)}});function Bi(e,t){return new Fi(e,t)}var ji=Fi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var a=(t=p(this,t)).detectRetina&&Ue.retina?2:1,o=this.getTileSize();i.width=o.x*a,i.height=o.y*a,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Fi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=O(n.project(t[0]),n.project(t[1])),r=i.min,a=i.max,o=(this._wmsVersion>=1.3&&this._crs===Gn?[r.y,r.x,a.y,a.x]:[r.x,r.y,a.x,a.y]).join(","),s=Fi.prototype.getTileUrl.call(this,e);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Hi(e,t){return new ji(e,t)}Fi.WMS=ji,Bi.wms=Hi;var Vi=Xn.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),a=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(e,t));Ue.any3d?Tt(this._container,a,n):Ct(this._container,a)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new U(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gi=Vi.extend({options:{tolerance:0},getEvents:function(){var e=Vi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Ot(e,"mousemove",this._onMouseMove,this),Ot(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ot(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ft(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=Ue.retina?2:1;Ct(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,a,o=e._parts,s=o.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,r=o[n].length;i<r;i++)a=o[n][i],l[i?"lineTo":"moveTo"](a.x,a.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,a=this._drawFirst;a;a=a.next)(n=a.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(_t(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wi(e){return Ue.canvas?new Gi(e):null}var Xi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qi={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Xi("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Xi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ft(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Xi("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Xi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Zi=Ue.vml?Xi:K,Yi=Vi.extend({_initContainer:function(){this._container=Zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Zi("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ft(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,J(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Ki(e){return Ue.svg||Ue.vml?new Yi(e):null}Ue.vml&&Yi.include(qi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wi(e)||Ki(e)}});var Ji=ui.extend({initialize:function(e,t){ui.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=F(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Qi(e,t){return new Ji(e,t)}Yi.create=Zi,Yi.pointsToPath=J,di.geometryToLayer=pi,di.coordsToLatLng=mi,di.coordsToLatLngs=gi,di.latLngToCoords=vi,di.latLngsToCoords=yi,di.getFeature=_i,di.asFeature=bi,nn.mergeOptions({boxZoom:!0});var $i=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Rt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Ot(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new U(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ft(this._box),bt(this._container,"leaflet-crosshair")),rt(),Lt(),Ft(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$i),nn.mergeOptions({doubleClickZoom:!0});var er=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",er),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tr=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,a=(i+t+n)%e-t-n,o=Math.abs(r+n)<Math.abs(a+n)?r:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,s=r.multiplyBy(o/a),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(n.inertiaDeceleration*o),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),E(function(){t.panBy(d,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",tr),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Ot(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){Ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=N(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(N(t),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(r)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Zt(e)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){Ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Qt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Zt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,a=n?Math.ceil(r/n)*n:r,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var ar=gn.extend({addHooks:function(){Ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new I(t.clientX,t.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ot(document,"touchend",qt),Ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),rr),Ot(document,"touchend touchcancel contextmenu",this._cancel,this),Ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ft(document,"touchend",qt),Ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new I(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",ar),nn.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var or=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Ot(document,"touchmove",this._onTouchMove,this),Ot(document,"touchend touchcancel",this._onTouchEnd,this),qt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var o=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(s,this,!0),qt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",or),nn.BoxZoom=$i,nn.DoubleClickZoom=er,nn.Drag=tr,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=ar,nn.TouchZoom=or,e.Bounds=U,e.Browser=Ue,e.CRS=H,e.Canvas=Gi,e.Circle=oi,e.CircleMarker=ri,e.Class=A,e.Control=an,e.DivIcon=Ni,e.DivOverlay=Ri,e.DomEvent=en,e.DomUtil=Ut,e.Draggable=_n,e.Evented=k,e.FeatureGroup=Yn,e.GeoJSON=di,e.GridLayer=Oi,e.Handler=gn,e.Icon=Jn,e.ImageOverlay=Mi,e.LatLng=B,e.LatLngBounds=z,e.Layer=Xn,e.LayerGroup=qn,e.LineUtil=Fn,e.Map=nn,e.Marker=ti,e.Mixin=vn,e.Path=ii,e.Point=I,e.PolyUtil=Mn,e.Polygon=ui,e.Polyline=li,e.Popup=Li,e.PosAnimation=tn,e.Projection=Hn,e.Rectangle=Ji,e.Renderer=Vi,e.SVG=Yi,e.SVGOverlay=Ai,e.TileLayer=Fi,e.Tooltip=Ii,e.Transformation=X,e.Util=C,e.VideoOverlay=Ti,e.bind=r,e.bounds=O,e.canvas=Wi,e.circle=si,e.circleMarker=ai,e.control=on,e.divIcon=Ui,e.extend=n,e.featureGroup=Kn,e.geoJSON=Si,e.geoJson=wi,e.gridLayer=zi,e.icon=Qn,e.imageOverlay=Ei,e.latLng=j,e.latLngBounds=F,e.layerGroup=Zn,e.map=rn,e.marker=ni,e.point=N,e.polygon=hi,e.polyline=ci,e.popup=ki,e.rectangle=Qi,e.setOptions=p,e.stamp=o,e.svg=Ki,e.svgOverlay=Pi,e.tileLayer=Bi,e.tooltip=Di,e.transformation=q,e.version=t,e.videoOverlay=Ci;var sr=window.L;e.noConflict=function(){return window.L=sr,this},window.L=e}(t)},252:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var x=b.prototype=new _;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function w(){}var M={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function T(e,t,i){var r=i.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case i:u=!0;break;case d:return R((u=e._init)(e._payload),t,r,a,o)}}if(u)return o=o(e),u=""===a?"."+P(e,0):a,S(o)?(r="",null!=u&&(r=u.replace(A,"$&/")+"/"),R(o,t,r,"",function(e){return e})):null!=o&&(C(o)&&(l=o,c=r+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+u,o=T(l.type,c,l.props)),t.push(o)),1;u=0;var h,p=""===a?".":a+":";if(S(e))for(var m=0;m<e.length;m++)u+=R(a=e[m],t,r,s=p+P(a,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=R(a=a.value,t,r,s=p+P(a,m++),o);else if("object"===s){if("function"===typeof e.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,a,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function L(e,t,n){if(null==e)return e;var i=[],r=0;return R(e,i,"","",function(e){return t.call(n,e,r++)}),i}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=D,t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return M.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(a in void 0!==t.key&&(r=""+t.key),t)!E.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(i[a]=t[a]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];i.children=o}return T(e.type,r,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var i,r={},a=null;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];r.children=s}if(e&&e.defaultProps)for(i in o=e.defaultProps)void 0===r[i]&&(r[i]=o[i]);return T(e,a,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.T,n={};M.T=n;try{var i=e(),r=M.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(w,I)}catch(a){I(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),M.T=t}},t.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},t.use=function(e){return M.H.use(e)},t.useActionState=function(e,t,n){return M.H.useActionState(e,t,n)},t.useCallback=function(e,t){return M.H.useCallback(e,t)},t.useContext=function(e){return M.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return M.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return M.H.useEffect(e,t)},t.useEffectEvent=function(e){return M.H.useEffectEvent(e)},t.useId=function(){return M.H.useId()},t.useImperativeHandle=function(e,t,n){return M.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.H.useMemo(e,t)},t.useOptimistic=function(e,t){return M.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return M.H.useReducer(e,t,n)},t.useRef=function(e){return M.H.useRef(e)},t.useState=function(e){return M.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.H.useTransition()},t.version="19.2.0"},330:(e,t,n)=>{"use strict";var i=n(43);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useState,o=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(i){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=a({inst:{value:n,getSnapshot:t}}),r=i[0].inst,u=i[1];return s(function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})},[e,n,t]),o(function(){return c(r)&&u({inst:r}),e(function(){c(r)&&u({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},388:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,L();else{var t=i(u);null!==t&&k(x,t.startTime-e)}}var S,w=!1,M=-1,E=5,T=-1;function C(){return!(t.unstable_now()-T<E)}function A(){if(w){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(M),M=-1),f=!0;var a=p;try{t:{for(b(e),d=i(c);null!==d&&!(d.expirationTime>e&&C());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){d.callback=s,b(e),n=!0;break t}d===i(c)&&r(c),b(e)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&k(x,l.startTime-e),n=!1}}break e}finally{d=null,p=a,f=!1}n=void 0}}finally{n?S():w=!1}}}if("function"===typeof _)S=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){v(A,0)};function L(){w||(w=!0,S())}function k(e,n){M=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(y(M),M=-1):g=!0,k(x,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,L())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},443:(e,t,n)=>{"use strict";e.exports=n(717)},461:(e,t,n)=>{"use strict";e.exports=n(330)},492:(e,t,n)=>{"use strict";e.exports=function(e){function t(e,t,n,i){return new Mr(e,t,n,i)}function i(){}function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=la&&e[la]||e["@@iterator"])?e:null}function o(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===ca?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case qr:return"Fragment";case Xr:return"Portal";case Yr:return"Profiler";case Zr:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case Qr:return(e.displayName||"Context")+".Provider";case Jr:return(e._context.displayName||"Context")+".Consumer";case $r:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case na:return null!==(t=e.displayName||null)?t:o(e.type)||"Memo";case ia:t=e._payload,e=e._init;try{return o(e(t))}catch(n){}}return null}function s(e){if(void 0===aa)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||"",oa=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+aa+e+oa}function l(e,t){if(!e||ha)return"";ha=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){i=a}e.call(n.prototype)}}else{try{throw Error()}catch(o){i=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&i&&"string"===typeof s.stack)return[s.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var c=o.split("\n"),u=l.split("\n");for(r=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(i===c.length||r===u.length)for(i=c.length-1,r=u.length-1;1<=i&&0<=r&&c[i]!==u[r];)r--;for(;1<=i&&0<=r;i--,r--)if(c[i]!==u[r]){if(1!==i||1!==r)do{if(i--,0>--r||c[i]!==u[r]){var h="\n"+c[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=i&&0<=r);break}}}finally{ha=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?s(n):""}function c(e){switch(e.tag){case 26:case 27:case 5:return s(e.type);case 16:return s("Lazy");case 13:return s("Suspense");case 19:return s("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}function u(e){try{var t="";do{t+=c(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function d(e){if(h(e)!==e)throw Error(r(188))}function p(e){var t=e.alternate;if(!t){if(null===(t=h(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(i=a.return)){n=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return d(a),e;if(o===i)return d(a),t;o=o.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,i=o;break}if(l===i){s=!0,i=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=a;break}if(l===i){s=!0,i=o,n=a;break}l=l.sibling}if(!s)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}function m(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=m(e)))return t;e=e.sibling}return null}function g(e){return{current:e}}function v(e){0>ys||(e.current=vs[ys],vs[ys]=null,ys--)}function y(e,t){ys++,vs[ys]=e.current,e.current=t}function _(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function b(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=134217727&n;return 0!==s?0!==(n=s&~r)?i=_(n):0!==(a&=s)?i=_(a):e||0!==(o=s&~o)&&(i=_(o)):0!==(s=n&~r)?i=_(s):0!==a?i=_(a):e||0!==(o=n&~o)&&(i=_(o)),0===i?0:0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||32===r&&0!==(4194176&o))?t:i}function x(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function S(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function w(){var e=ws;return 0===(4194176&(ws<<=1))&&(ws=128),e}function M(){var e=Ms;return 0===(62914560&(Ms<<=1))&&(Ms=4194304),e}function E(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function T(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function C(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-bs(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194218&n}function A(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bs(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function P(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function R(e){if("function"===typeof Ds&&Ns(e),Os&&"function"===typeof Os.setStrictMode)try{Os.setStrictMode(Us,e)}catch(t){}}function L(e,t){if("object"===typeof e&&null!==e){var n=Fs.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},Fs.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function k(e,t){Bs[js++]=Vs,Bs[js++]=Hs,Hs=e,Vs=t}function I(e,t,n){Gs[Ws++]=qs,Gs[Ws++]=Zs,Gs[Ws++]=Xs,Xs=e;var i=qs;e=Zs;var r=32-bs(i)-1;i&=~(1<<r),n+=1;var a=32-bs(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,qs=1<<32-bs(t)+r|n<<r|i,Zs=a+e}else qs=1<<a|n<<r|i,Zs=e}function D(e){null!==e.return&&(k(e,1),I(e,1,0))}function N(e){for(;e===Hs;)Hs=Bs[--js],Bs[js]=null,Vs=Bs[--js],Bs[js]=null;for(;e===Xs;)Xs=Gs[--Ws],Gs[Ws]=null,Zs=Gs[--Ws],Gs[Ws]=null,qs=Gs[--Ws],Gs[Ws]=null}function U(e,t){y(Js,t),y(Ks,e),y(Ys,null),e=va(t),v(Ys),y(Ys,e)}function O(){v(Ys),v(Ks),v(Js)}function z(e){null!==e.memoizedState&&y(Qs,e);var t=Ys.current,n=ya(t,e.type);t!==n&&(y(Ks,e),y(Ys,n))}function F(e){Ks.current===e&&(v(Ys),v(Ks)),Qs.current===e&&(v(Qs),Pa?Xa._currentValue=Wa:Xa._currentValue2=Wa)}function B(e){throw W(L(Error(r(418,"")),e)),rl}function j(e,t){if(!ka)throw Error(r(175));Bo(e.stateNode,e.type,e.memoizedProps,t,e)||B(e)}function H(e){for($s=e.return;$s;)switch($s.tag){case 3:case 27:return void(il=!0);case 5:case 13:return void(il=!1);default:$s=$s.return}}function V(e){if(!ka||e!==$s)return!1;if(!tl)return H(e),tl=!0,!1;var t=!1;if(hs?3!==e.tag&&27!==e.tag&&(5!==e.tag||Zo(e.type)&&!Ma(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||Zo(e.type)&&!Ma(e.type,e.memoizedProps))&&(t=!0),t&&el&&B(e),H(e),13===e.tag){if(!ka)throw Error(r(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));el=Vo(e)}else el=$s?Io(e.stateNode):null;return!0}function G(){ka&&(el=$s=null,tl=!1)}function W(e){null===nl?nl=[e]:nl.push(e)}function X(){for(var e=ol,t=sl=ol=0;t<e;){var n=al[t];al[t++]=null;var i=al[t];al[t++]=null;var r=al[t];al[t++]=null;var a=al[t];if(al[t++]=null,null!==i&&null!==r){var o=i.pending;null===o?r.next=r:(r.next=o.next,o.next=r),i.pending=r}0!==a&&K(n,r,a)}}function q(e,t,n,i){al[ol++]=e,al[ol++]=t,al[ol++]=n,al[ol++]=i,sl|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Z(e,t,n,i){return q(e,t,n,i),J(e)}function Y(e,t){return q(e,null,null,t),J(e)}function K(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(i=a.alternate)&&(i.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(r=!0)),e=a,a=a.return;r&&null!==t&&3===e.tag&&(a=e.stateNode,r=31-bs(n),null===(e=(a=a.hiddenUpdates)[r])?a[r]=[t]:e.push(t),t.lane=536870912|n)}function J(e){if(50<nu)throw nu=0,iu=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Q(e){var t;e!==cl&&null===e.next&&(null===cl?ll=cl=e:cl=cl.next=e),hl=!0,ul||(ul=!0,t=ee,Za?Ya(function(){0!==(6&Ac)?Es(Rs,t):t()}):Es(Rs,t))}function $(e,t){if(!dl&&hl){dl=!0;do{for(var n=!1,i=ll;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var a=0;else{var o=i.suspendedLanes,s=i.pingedLanes;a=(1<<31-bs(42|e)+1)-1,a=201326677&(a&=r&~(o&~s))?201326677&a|1:a?2|a:0}0!==a&&(n=!0,ie(i,a))}else a=Lc,0===(3&(a=b(i,i===Pc?a:0)))||x(i,a)||(n=!0,ie(i,a));i=i.next}}while(n);dl=!1}}function ee(){hl=ul=!1;var e=0;0!==pl&&(za()&&(e=pl),pl=0);for(var t=Ps(),n=null,i=ll;null!==i;){var r=i.next,a=te(i,t);0===a?(i.next=null,null===n?ll=r:n.next=r,null===r&&(cl=n)):(n=i,(0!==e||0!==(3&a))&&(hl=!0)),i=r}$(e,!1)}function te(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var o=31-bs(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=S(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=Lc,n=b(e,e===(t=Pc)?n:0),i=e.callbackNode,0===n||e===t&&2===kc||null!==e.cancelPendingCommit)return null!==i&&null!==i&&Ts(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||x(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&Ts(i),P(n)){case 2:case 8:n=Ls;break;case 32:default:n=ks;break;case 268435456:n=Is}return i=ne.bind(null,e),n=Es(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&Ts(i),e.callbackPriority=2,e.callbackNode=null,2}function ne(e,t){var n=e.callbackNode;if(gr()&&e.callbackNode!==n)return null;var i=Lc;return 0===(i=b(e,e===Pc?i:0))?null:(qi(e,i,t),te(e,Ps()),null!=e.callbackNode&&e.callbackNode===n?ne.bind(null,e):null)}function ie(e,t){if(gr())return null;qi(e,t,!0)}function re(){return 0===pl&&(pl=w()),pl}function ae(){if(0===--ml&&null!==fl){null!==vl&&(vl.status="fulfilled");var e=fl;fl=null,gl=0,vl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function oe(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function se(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function le(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ce(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ac)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=J(e),K(e,null,n),t}return q(e,i,t,n),J(e)}function ue(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,A(e,n)}}function he(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function de(){if(_l){if(null!==vl)throw vl}}function pe(e,t,n,i){_l=!1;var r=e.updateQueue;yl=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=r.baseState;for(o=0,u=c=l=null,s=a;;){var d=-536870913&s.lane,p=d!==s.lane;if(p?(Lc&d)===d:(i&d)===d){0!==d&&d===gl&&(_l=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,m=s;d=t;var g=n;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(g,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(g,h,d):f)||void 0===d)break e;h=Vr({},h,d);break e;case 2:yl=!0}}null!==(d=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[d]:p.push(d))}else p={lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(p=s).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===a&&(r.shared.lanes=0),Fc|=o,e.lanes=o,e.memoizedState=h}}function fe(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function me(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fe(n[e],t)}function ge(e,t){if(zs(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!bl.call(t,r)||!zs(e[r],t[r]))return!1}return!0}function ve(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ye(){}function _e(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ye,ye),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===xl)throw Error(r(483));throw e;default:if("string"===typeof t.status)t.then(ye,ye);else{if(null!==(e=Pc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===xl)throw Error(r(483));throw e}throw Ml=t,xl}}function be(){if(null===Ml)throw Error(r(459));var e=Ml;return Ml=null,e}function xe(e){var t=Tl;return Tl+=1,null===El&&(El=[]),_e(El,e,t)}function Se(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function we(e,t){if(t.$$typeof===Gr)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Me(e){return(0,e._init)(e._payload)}function Ee(e){function n(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function i(t,i){if(!e)return null;for(;null!==i;)n(t,i),i=i.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Tr(e,t)).index=0,e.sibling=null,e}function l(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=33554434,n):i:(t.flags|=33554434,n):(t.flags|=1048576,n)}function c(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=Lr(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n,i){var r=n.type;return r===qr?p(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===ia&&Me(r)===t.type)?(Se(t=s(t,n.props),n),t.return=e,t):(Se(t=Ar(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=kr(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function p(e,t,n,i,r){return null===t||7!==t.tag?((t=Pr(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Lr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Wr:return Se(n=Ar(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case Xr:return(t=kr(t,e.mode,n)).return=e,t;case ia:return f(e,t=(0,t._init)(t._payload),n)}if(da(t)||a(t))return(t=Pr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return f(e,xe(t),n);if(t.$$typeof===Qr)return f(e,In(e,t),n);we(e,t)}return null}function m(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Wr:return n.key===r?h(e,t,n,i):null;case Xr:return n.key===r?d(e,t,n,i):null;case ia:return m(e,t,n=(r=n._init)(n._payload),i)}if(da(n)||a(n))return null!==r?null:p(e,t,n,i,null);if("function"===typeof n.then)return m(e,t,xe(n),i);if(n.$$typeof===Qr)return m(e,t,In(e,n),i);we(e,n)}return null}function g(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case Wr:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case Xr:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case ia:return g(e,t,n,i=(0,i._init)(i._payload),r)}if(da(i)||a(i))return p(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return g(e,t,n,xe(i),r);if(i.$$typeof===Qr)return g(e,t,n,In(t,i),r);we(t,i)}return null}function v(t,u,h,d){if("object"===typeof h&&null!==h&&h.type===qr&&null===h.key&&(h=h.props.children),"object"===typeof h&&null!==h){switch(h.$$typeof){case Wr:e:{for(var p=h.key;null!==u;){if(u.key===p){if((p=h.type)===qr){if(7===u.tag){i(t,u.sibling),(d=s(u,h.props.children)).return=t,t=d;break e}}else if(u.elementType===p||"object"===typeof p&&null!==p&&p.$$typeof===ia&&Me(p)===u.type){i(t,u.sibling),Se(d=s(u,h.props),h),d.return=t,t=d;break e}i(t,u);break}n(t,u),u=u.sibling}h.type===qr?((d=Pr(h.props.children,t.mode,d,h.key)).return=t,t=d):(Se(d=Ar(h.type,h.key,h.props,null,t.mode,d),h),d.return=t,t=d)}return c(t);case Xr:e:{for(p=h.key;null!==u;){if(u.key===p){if(4===u.tag&&u.stateNode.containerInfo===h.containerInfo&&u.stateNode.implementation===h.implementation){i(t,u.sibling),(d=s(u,h.children||[])).return=t,t=d;break e}i(t,u);break}n(t,u),u=u.sibling}(d=kr(h,t.mode,d)).return=t,t=d}return c(t);case ia:return v(t,u,h=(p=h._init)(h._payload),d)}if(da(h))return function(t,r,a,s){for(var c=null,u=null,h=r,d=r=0,p=null;null!==h&&d<a.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var v=m(t,h,a[d],s);if(null===v){null===h&&(h=p);break}e&&h&&null===v.alternate&&n(t,h),r=l(v,r,d),null===u?c=v:u.sibling=v,u=v,h=p}if(d===a.length)return i(t,h),tl&&k(t,d),c;if(null===h){for(;d<a.length;d++)null!==(h=f(t,a[d],s))&&(r=l(h,r,d),null===u?c=h:u.sibling=h,u=h);return tl&&k(t,d),c}for(h=o(h);d<a.length;d++)null!==(p=g(h,t,d,a[d],s))&&(e&&null!==p.alternate&&h.delete(null===p.key?d:p.key),r=l(p,r,d),null===u?c=p:u.sibling=p,u=p);return e&&h.forEach(function(e){return n(t,e)}),tl&&k(t,d),c}(t,u,h,d);if(a(h)){if("function"!==typeof(p=a(h)))throw Error(r(150));return function(t,a,s,c){if(null==s)throw Error(r(151));for(var u=null,h=null,d=a,p=a=0,v=null,y=s.next();null!==d&&!y.done;p++,y=s.next()){d.index>p?(v=d,d=null):v=d.sibling;var _=m(t,d,y.value,c);if(null===_){null===d&&(d=v);break}e&&d&&null===_.alternate&&n(t,d),a=l(_,a,p),null===h?u=_:h.sibling=_,h=_,d=v}if(y.done)return i(t,d),tl&&k(t,p),u;if(null===d){for(;!y.done;p++,y=s.next())null!==(y=f(t,y.value,c))&&(a=l(y,a,p),null===h?u=y:h.sibling=y,h=y);return tl&&k(t,p),u}for(d=o(d);!y.done;p++,y=s.next())null!==(y=g(d,t,p,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?p:y.key),a=l(y,a,p),null===h?u=y:h.sibling=y,h=y);return e&&d.forEach(function(e){return n(t,e)}),tl&&k(t,p),u}(t,u,h=p.call(h),d)}if("function"===typeof h.then)return v(t,u,xe(h),d);if(h.$$typeof===Qr)return v(t,u,In(t,h),d);we(t,h)}return"string"===typeof h&&""!==h||"number"===typeof h||"bigint"===typeof h?(h=""+h,null!==u&&6===u.tag?(i(t,u.sibling),(d=s(u,h)).return=t,t=d):(i(t,u),(d=Lr(h,t.mode,d)).return=t,t=d),c(t)):i(t,u)}return function(e,n,i,r){try{Tl=0;var a=v(e,n,i,r);return El=null,a}catch(s){if(s===xl)throw s;var o=t(29,s,null,e.mode);return o.lanes=r,o.return=e,o}}}function Te(e,t){y(Rl,e=Oc),y(Pl,t),Oc=e|t.baseLanes}function Ce(){y(Rl,Oc),y(Pl,Pl.current)}function Ae(){Oc=Rl.current,v(Pl),v(Rl)}function Pe(e){var t=e.alternate;y(Il,1&Il.current),y(Ll,e),null===kl&&(null===t||null!==Pl.current||null!==t.memoizedState)&&(kl=e)}function Re(e){if(22===e.tag){if(y(Il,Il.current),y(Ll,e),null===kl){var t=e.alternate;null!==t&&null!==t.memoizedState&&(kl=e)}}else Le()}function Le(){y(Il,Il.current),y(Ll,Ll.current)}function ke(e){v(Ll),kl===e&&(kl=null),v(Il)}function Ie(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Co(n)||Ao(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function De(){throw Error(r(321))}function Ne(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zs(e[n],t[n]))return!1;return!0}function Ue(e,t,n,i,r,a){return Dl=a,Nl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.H=null===e||null===e.memoizedState?ql:Zl,Bl=!1,a=n(i,r),Bl=!1,Fl&&(a=ze(t,n,i,r)),Oe(e),a}function Oe(e){ua.H=Xl;var t=null!==Ul&&null!==Ul.next;if(Dl=0,Ol=Ul=Nl=null,zl=!1,Hl=0,Vl=null,t)throw Error(r(300));null===e||$l||null!==(e=e.dependencies)&&Rn(e)&&($l=!0)}function ze(e,t,n,i){Nl=e;var a=0;do{if(Fl&&(Vl=null),Hl=0,Fl=!1,25<=a)throw Error(r(301));if(a+=1,Ol=Ul=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}ua.H=Yl,o=t(n,i)}while(Fl);return o}function Fe(){var e=ua.H,t=e.useState()[0];return t="function"===typeof t.then?We(t):t,e=e.useState()[0],(null!==Ul?Ul.memoizedState:null)!==e&&(Nl.flags|=1024),t}function Be(){var e=0!==jl;return jl=0,e}function je(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function He(e){if(zl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}zl=!1}Dl=0,Ol=Ul=Nl=null,Fl=!1,Hl=jl=0,Vl=null}function Ve(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ol?Nl.memoizedState=Ol=e:Ol=Ol.next=e,Ol}function Ge(){if(null===Ul){var e=Nl.alternate;e=null!==e?e.memoizedState:null}else e=Ul.next;var t=null===Ol?Nl.memoizedState:Ol.next;if(null!==t)Ol=t,Ul=e;else{if(null===e){if(null===Nl.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Ul=e).memoizedState,baseState:Ul.baseState,baseQueue:Ul.baseQueue,queue:Ul.queue,next:null},null===Ol?Nl.memoizedState=Ol=e:Ol=Ol.next=e}return Ol}function We(e){var t=Hl;return Hl+=1,null===Vl&&(Vl=[]),e=_e(Vl,e,t),t=Nl,null===(null===Ol?t.memoizedState:Ol.next)&&(t=t.alternate,ua.H=null===t||null===t.memoizedState?ql:Zl),e}function Xe(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return We(e);if(e.$$typeof===Qr)return kn(e)}throw Error(r(438,String(e)))}function qe(e){var t=null,n=Nl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Nl.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n=Wl(),Nl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=sa;return t.index++,n}function Ze(e,t){return"function"===typeof t?t(e):t}function Ye(e){return Ke(Ge(),Ul,e)}function Ke(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var a=e.baseQueue,o=i.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,i.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var l=s=null,c=null,u=t=a.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(Lc&d)===d:(Dl&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===gl&&(h=!0);else{if((Dl&p)===p){u=u.next,p===gl&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,s=o):c=c.next=d,Nl.lanes|=p,Fc|=p}d=u.action,Bl&&n(o,d),o=u.hasEagerState?u.eagerState:n(o,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,Nl.lanes|=d,Fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!zs(o,e.memoizedState)&&($l=!0,h&&null!==(n=vl)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=c,i.lastRenderedState=o}return null===a&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Je(e){var t=Ge(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);zs(o,t.memoizedState)||($l=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Qe(e,t,n){var i=Nl,a=Ge(),o=tl;if(o){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!zs((Ul||a).memoizedState,n);if(s&&(a.memoizedState=n,$l=!0),a=a.queue,wt(tt.bind(null,i,a,e),[e]),a.getSnapshot!==t||s||null!==Ol&&1&Ol.memoizedState.tag){if(i.flags|=2048,yt(9,et.bind(null,i,a,n,t),{destroy:void 0},null),null===Pc)throw Error(r(349));o||0!==(60&Dl)||$e(i,t,n)}return n}function $e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Nl.updateQueue)?(t=Wl(),Nl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function et(e,t,n,i){t.value=n,t.getSnapshot=i,nt(t)&&it(e)}function tt(e,t,n){return n(function(){nt(t)&&it(e)})}function nt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zs(e,n)}catch(i){return!0}}function it(e){var t=Y(e,2);null!==t&&Xi(t,e,2)}function rt(e){var t=Ve();if("function"===typeof e){var n=e;if(e=n(),Bl){R(!0);try{n()}finally{R(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:e},t}function at(e,t,n,i){return e.baseState=n,Ke(e,Ul,"function"===typeof i?i:Ze)}function ot(e,t,n,i,a){if(Vt(e))throw Error(r(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==ua.T?n(!0):o.isTransition=!1,i(o),null===(n=t.pending)?(o.next=t.pending=o,st(t,o)):(o.next=n.next,t.pending=n.next=o)}}function st(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var a=ua.T,o={};ua.T=o;try{var s=n(r,i),l=ua.S;null!==l&&l(o,s),lt(e,t,s)}catch(c){ut(e,t,c)}finally{ua.T=a}}else try{lt(e,t,a=n(r,i))}catch(u){ut(e,t,u)}}function lt(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ct(e,t,n)},function(n){return ut(e,t,n)}):ct(e,t,n)}function ct(e,t,n){t.status="fulfilled",t.value=n,ht(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,st(e,n)))}function ut(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,ht(t),t=t.next}while(t!==i)}e.action=null}function ht(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function dt(e,t){return t}function pt(e,t){if(tl){var n=Pc.formState;if(null!==n){e:{var i=Nl;if(tl){if(el){var r=Lo(el,il);if(r){el=Io(r),i=ko(r);break e}}B(i)}i=!1}i&&(t=n[0])}}(n=Ve()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:t},n.queue=i,n=Bt.bind(null,Nl,i),i.dispatch=n,i=rt(!1);var a=Ht.bind(null,Nl,!1,i.queue);return r={state:t,dispatch:null,action:e,pending:null},(i=Ve()).queue=r,n=ot.bind(null,Nl,r,a,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ft(e){return mt(Ge(),Ul,e)}function mt(e,t,n){t=Ke(e,t,dt)[0],e=Ye(Ze)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?We(t):t;var i=Ge(),r=i.queue,a=r.dispatch;return n!==i.memoizedState&&(Nl.flags|=2048,yt(9,gt.bind(null,r,n),{destroy:void 0},null)),[t,a,e]}function gt(e,t){e.action=t}function vt(e){var t=Ge(),n=Ul;if(null!==n)return mt(t,n,e);Ge(),t=t.memoizedState;var i=(n=Ge()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function yt(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},null===(t=Nl.updateQueue)&&(t=Wl(),Nl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function _t(){return Ge().memoizedState}function bt(e,t,n,i){var r=Ve();Nl.flags|=e,r.memoizedState=yt(1|t,n,{destroy:void 0},void 0===i?null:i)}function xt(e,t,n,i){var r=Ge();i=void 0===i?null:i;var a=r.memoizedState.inst;null!==Ul&&null!==i&&Ne(i,Ul.memoizedState.deps)?r.memoizedState=yt(t,n,a,i):(Nl.flags|=e,r.memoizedState=yt(1|t,n,a,i))}function St(e,t){bt(8390656,8,e,t)}function wt(e,t){xt(2048,8,e,t)}function Mt(e,t){return xt(4,2,e,t)}function Et(e,t){return xt(4,4,e,t)}function Tt(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ct(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,xt(4,4,Tt.bind(null,t,e),n)}function At(){}function Pt(e,t){var n=Ge();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Ne(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Rt(e,t){var n=Ge();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Ne(t,i[1]))return i[0];if(i=e(),Bl){R(!0);try{e()}finally{R(!1)}}return n.memoizedState=[i,t],i}function Lt(e,t,n){return void 0===n||0!==(1073741824&Dl)?e.memoizedState=t:(e.memoizedState=n,e=Wi(),Nl.lanes|=e,Fc|=e,n)}function kt(e,t,n,i){return zs(n,t)?n:null!==Pl.current?(e=Lt(e,n,i),zs(e,t)||($l=!0),e):0===(42&Dl)?($l=!0,e.memoizedState=n):(e=Wi(),Nl.lanes|=e,Fc|=e,t)}function It(e,t,n,i,r){var a=Ua();Na(0!==a&&8>a?a:8);var o=ua.T,s={};ua.T=s,Ht(e,!1,t,n);try{var l=r(),c=ua.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)jt(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Gi());else jt(e,t,i,Gi())}catch(u){jt(e,t,{then:function(){},status:"rejected",reason:u},Gi())}finally{Na(a),ua.T=o}}function Dt(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Wa,baseState:Wa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:Wa},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Nt(){return kn(Xa)}function Ut(){return Ge().memoizedState}function Ot(){return Ge().memoizedState}function zt(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gi(),i=ce(t,e=le(n),n);return null!==i&&(Xi(i,t,n),ue(i,t,n)),t={cache:Nn()},void(e.payload=t)}t=t.return}}function Ft(e,t,n){var i=Gi();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vt(e)?Gt(t,n):null!==(n=Z(e,t,n,i))&&(Xi(n,e,i),Wt(n,t,i))}function Bt(e,t,n){jt(e,t,n,Gi())}function jt(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vt(e))Gt(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,zs(s,o))return q(e,t,r,0),null===Pc&&X(),!1}catch(l){}if(null!==(n=Z(e,t,r,i)))return Xi(n,e,i),Wt(n,t,i),!0}return!1}function Ht(e,t,n,i){if(i={lane:2,revertLane:re(),action:i,hasEagerState:!1,eagerState:null,next:null},Vt(e)){if(t)throw Error(r(479))}else null!==(t=Z(e,n,i,2))&&Xi(t,e,2)}function Vt(e){var t=e.alternate;return e===Nl||null!==t&&t===Nl}function Gt(e,t){Fl=zl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wt(e,t,n){if(0!==(4194176&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,A(e,n)}}function Xt(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:Vr({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function qt(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ge(n,i)||!ge(r,a))}function Zt(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Kl.enqueueReplaceState(t,t.state,null)}function Yt(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=Vr({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function Kt(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Jt(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Qt(e,t,n){return(n=le(n)).tag=3,n.payload={element:null},n.callback=function(){Kt(e,t)},n}function $t(e){return(e=le(e)).tag=3,e}function en(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var a=i.value;e.payload=function(){return r(a)},e.callback=function(){Jt(t,n,i)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Jt(t,n,i),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}function tn(e,t,n,i){t.child=null===e?Al(t,null,n,i):Cl(t,e.child,n,i)}function nn(e,t,n,i,r){n=n.render;var a=t.ref;if("ref"in i){var o={};for(var s in i)"ref"!==s&&(o[s]=i[s])}else o=i;return Ln(t),i=Ue(e,t,n,o,a,r),s=Be(),null===e||$l?(tl&&s&&D(t),t.flags|=1,tn(e,t,i,r),t.child):(je(e,t,r),Sn(e,t,r))}function rn(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Er(a)||void 0!==a.defaultProps||null!==n.compare?((e=Ar(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,an(e,t,a,i,r))}if(a=e.child,!wn(e,r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ge)(o,i)&&e.ref===t.ref)return Sn(e,t,r)}return t.flags|=1,(e=Tr(a,i)).ref=t.ref,e.return=t,t.child=e}function an(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(ge(a,i)&&e.ref===t.ref){if($l=!1,t.pendingProps=i=a,!wn(e,r))return t.lanes=e.lanes,Sn(e,t,r);0!==(131072&e.flags)&&($l=!0)}}return cn(e,t,n,i,r)}function on(e,t,n){var i=t.pendingProps,r=i.children,a=0!==(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(ln(e,t),"hidden"===i.mode||a){if(0!==(128&t.flags)){if(i=null!==o?o.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return sn(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,sn(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&zn(t,null!==o?o.cachePool:null),null!==o?Te(t,o):Ce(),Re(t)}else null!==o?(zn(t,o.cachePool),Te(t,o),Le(),t.memoizedState=null):(null!==e&&zn(t,null),Ce(),Le());return tn(e,t,r,n),t.child}function sn(e,t,n,i){var r=On();return r=null===r?null:{parent:Pa?sc._currentValue:sc._currentValue2,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&zn(t,null),Ce(),Re(t),null!==e&&Pn(e,t,i,!0),null}function ln(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function cn(e,t,n,i,r){return Ln(t),n=Ue(e,t,n,i,void 0,r),i=Be(),null===e||$l?(tl&&i&&D(t),t.flags|=1,tn(e,t,n,r),t.child):(je(e,t,r),Sn(e,t,r))}function un(e,t,n,i,r,a){return Ln(t),t.updateQueue=null,n=ze(t,i,n,r),Oe(e),i=Be(),null===e||$l?(tl&&i&&D(t),t.flags|=1,tn(e,t,n,a),t.child):(je(e,t,a),Sn(e,t,a))}function hn(e,t,n,i,r){if(Ln(t),null===t.stateNode){var a=_s,o=n.contextType;"object"===typeof o&&null!==o&&(a=kn(o)),a=new n(i,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=Kl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=i,a.state=t.memoizedState,a.refs={},oe(t),o=n.contextType,a.context="object"===typeof o&&null!==o?kn(o):_s,a.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(Xt(t,n,o,i),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(o=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&Kl.enqueueReplaceState(a,a.state,null),pe(t,i,a,r),de(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=Yt(n,s);a.props=l;var c=a.context,u=n.contextType;o=_s,"object"===typeof u&&null!==u&&(o=kn(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s||c!==o)&&Zt(t,a,i,o),yl=!1;var d=t.memoizedState;a.state=d,pe(t,i,a,r),de(),c=t.memoizedState,s||d!==c||yl?("function"===typeof h&&(Xt(t,n,h,i),c=t.memoizedState),(l=yl||qt(t,n,l,i,d,c,o))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=o,i=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,se(e,t),u=Yt(n,o=t.memoizedProps),a.props=u,h=t.pendingProps,d=a.context,c=n.contextType,l=_s,"object"===typeof c&&null!==c&&(l=kn(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&Zt(t,a,i,l),yl=!1,d=t.memoizedState,a.state=d,pe(t,i,a,r),de();var p=t.memoizedState;o!==h||d!==p||yl||null!==e&&null!==e.dependencies&&Rn(e.dependencies)?("function"===typeof s&&(Xt(t,n,s,i),p=t.memoizedState),(u=yl||qt(t,n,u,i,d,p,l)||null!==e&&null!==e.dependencies&&Rn(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,ln(e,t),i=0!==(128&t.flags),a||i?(a=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&i?(t.child=Cl(t,e.child,null,r),t.child=Cl(t,null,n,r)):tn(e,t,n,r),t.memoizedState=a.state,e=t.child):e=Sn(e,t,r),e}function dn(e,t,n,i){return G(),t.flags|=256,tn(e,t,n,i),t.child}function pn(e){return{baseLanes:e,cachePool:Fn()}}function fn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Hc),e}function mn(e,n,i){var a,o=n.pendingProps,s=!1,l=0!==(128&n.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&Il.current)),a&&(s=!0,n.flags&=-129),a=0!==(32&n.flags),n.flags&=-33,null===e){if(tl){if(s?Pe(n):Le(),tl){var c,u=el;(c=u)&&(null!==(u=Fo(u,il))?(n.memoizedState={dehydrated:u,treeContext:null!==Xs?{id:qs,overflow:Zs}:null,retryLane:536870912},(c=t(18,null,null,0)).stateNode=u,c.return=n,n.child=c,$s=n,el=null,c=!0):c=!1),c||B(n)}if(null!==(u=n.memoizedState)&&null!==(u=u.dehydrated))return Ao(u)?n.lanes=16:n.lanes=536870912,null;ke(n)}return u=o.children,o=o.fallback,s?(Le(),u=vn({mode:"hidden",children:u},s=n.mode),o=Pr(o,s,i,null),u.return=n,o.return=n,u.sibling=o,n.child=u,(s=n.child).memoizedState=pn(i),s.childLanes=fn(e,a,i),n.memoizedState=ec,o):(Pe(n),gn(n,u))}if(null!==(c=e.memoizedState)&&null!==(u=c.dehydrated)){if(l)256&n.flags?(Pe(n),n.flags&=-257,n=yn(e,n,i)):null!==n.memoizedState?(Le(),n.child=e.child,n.flags|=128,n=null):(Le(),s=o.fallback,u=n.mode,o=vn({mode:"visible",children:o.children},u),(s=Pr(s,u,i,null)).flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,Cl(n,e.child,null,i),(o=n.child).memoizedState=pn(i),o.childLanes=fn(e,a,i),n.memoizedState=ec,n=s);else if(Pe(n),Ao(u))a=Po(u).digest,(o=Error(r(419))).stack="",o.digest=a,W({value:o,source:null,stack:null}),n=yn(e,n,i);else if($l||Pn(e,n,i,!1),a=0!==(i&e.childLanes),$l||a){if(null!==(a=Pc)){if(0!==(42&(o=i&-i)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(a.suspendedLanes|i))?0:o)&&o!==c.retryLane)throw c.retryLane=o,Y(e,o),Xi(a,e,o),Ql}Co(u)||ar(),n=yn(e,n,i)}else Co(u)?(n.flags|=128,n.child=e.child,n=Sr.bind(null,e),Ro(u,n),n=null):(e=c.treeContext,ka&&(el=Uo(u),$s=n,tl=!0,nl=null,il=!1,null!==e&&(Gs[Ws++]=qs,Gs[Ws++]=Zs,Gs[Ws++]=Xs,qs=e.id,Zs=e.overflow,Xs=n)),(n=gn(n,o.children)).flags|=4096);return n}return s?(Le(),s=o.fallback,u=n.mode,l=(c=e.child).sibling,(o=Tr(c,{mode:"hidden",children:o.children})).subtreeFlags=31457280&c.subtreeFlags,null!==l?s=Tr(l,s):(s=Pr(s,u,i,null)).flags|=2,s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,null===(u=e.child.memoizedState)?u=pn(i):(null!==(c=u.cachePool)?(l=Pa?sc._currentValue:sc._currentValue2,c=c.parent!==l?{parent:l,pool:l}:c):c=Fn(),u={baseLanes:u.baseLanes|i,cachePool:c}),s.memoizedState=u,s.childLanes=fn(e,a,i),n.memoizedState=ec,o):(Pe(n),e=(i=e.child).sibling,(i=Tr(i,{mode:"visible",children:o.children})).return=n,i.sibling=null,null!==e&&(null===(a=n.deletions)?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=i,n.memoizedState=null,i)}function gn(e,t){return(t=vn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function vn(e,t){return Rr(e,t,0,null)}function yn(e,t,n){return Cl(t,e.child,null,n),(e=gn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _n(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Cn(e.return,t,n)}function bn(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function xn(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(tn(e,t,i.children,n),0!==(2&(i=Il.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_n(e,n,t);else if(19===e.tag)_n(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(y(Il,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Ie(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),bn(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ie(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}bn(t,!0,n,null,a);break;case"together":bn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Pn(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Tr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function wn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Rn(e))}function Mn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$l=!0;else{if(!wn(e,n)&&0===(128&t.flags))return $l=!1,function(e,t,n){switch(t.tag){case 3:U(t,t.stateNode.containerInfo),En(t,sc,e.memoizedState.cache),G();break;case 27:case 5:z(t);break;case 4:U(t,t.stateNode.containerInfo);break;case 10:En(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Pe(t),t.flags|=128,null):0!==(n&t.child.childLanes)?mn(e,t,n):(Pe(t),null!==(e=Sn(e,t,n))?e.sibling:null);Pe(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Pn(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return xn(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),y(Il,Il.current),i)break;return null;case 22:case 23:return t.lanes=0,on(e,t,n);case 24:En(t,sc,e.memoizedState.cache)}return Sn(e,t,n)}(e,t,n);$l=0!==(131072&e.flags)}else $l=!1,tl&&0!==(1048576&t.flags)&&I(t,Vs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,a=i._init;if(i=a(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((a=i.$$typeof)===$r){t.tag=11,t=nn(null,t,i,e,n);break e}if(a===na){t.tag=14,t=rn(null,t,i,e,n);break e}}throw t=o(i)||i,Error(r(306,t,""))}Er(i)?(e=Yt(i,e),t.tag=1,t=hn(null,t,i,e,n)):(t.tag=0,t=cn(null,t,i,e,n))}return t;case 0:return cn(e,t,t.type,t.pendingProps,n);case 1:return hn(e,t,i=t.type,a=Yt(i,t.pendingProps),n);case 3:e:{if(U(t,t.stateNode.containerInfo),null===e)throw Error(r(387));var s=t.pendingProps;i=(a=t.memoizedState).element,se(e,t),pe(t,s,null,n);var l=t.memoizedState;if(s=l.cache,En(t,sc,s),s!==a.cache&&An(t,[sc],n,!0),de(),s=l.element,ka&&a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=dn(e,t,s,n);break e}if(s!==i){W(i=L(Error(r(424)),t)),t=dn(e,t,s,n);break e}for(ka&&(el=No(t.stateNode.containerInfo),$s=t,tl=!0,nl=null,il=!0),n=Al(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(G(),s===i){t=Sn(e,t,n);break e}tn(e,t,s,n)}t=t.child}return t;case 26:if(Jo)return ln(e,t),null===e?(n=es(t.type,null,t.pendingProps,null))?t.memoizedState=n:tl||(t.stateNode=os(t.type,t.pendingProps,Js.current,t)):t.memoizedState=es(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(hs)return z(t),null===e&&hs&&tl&&(i=t.stateNode=ds(t.type,t.pendingProps,Js.current,Ys.current,!1),$s=t,il=!0,el=Do(i)),i=t.pendingProps.children,null!==e||tl?tn(e,t,i,n):t.child=Cl(t,null,i,n),ln(e,t),t.child;case 5:return null===e&&tl&&(Yo(t.type,t.pendingProps,Ys.current),(a=i=el)&&(null!==(i=Oo(i,t.type,t.pendingProps,il))?(t.stateNode=i,$s=t,el=Do(i),il=!1,a=!0):a=!1),a||B(t)),z(t),a=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,i=s.children,Ma(a,s)?i=null:null!==l&&Ma(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=Ue(e,t,Fe,null,null,n),Pa?Xa._currentValue=a:Xa._currentValue2=a),ln(e,t),tn(e,t,i,n),t.child;case 6:return null===e&&tl&&(Ko(t.pendingProps,Ys.current),(e=n=el)&&(null!==(n=zo(n,t.pendingProps,il))?(t.stateNode=n,$s=t,el=null,e=!0):e=!1),e||B(t)),null;case 13:return mn(e,t,n);case 4:return U(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Cl(t,null,i,n):tn(e,t,i,n),t.child;case 11:return nn(e,t,t.type,t.pendingProps,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,En(t,t.type,i.value),tn(e,t,i.children,n),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,Ln(t),i=i(a=kn(a)),t.flags|=1,tn(e,t,i,n),t.child;case 14:return rn(e,t,t.type,t.pendingProps,n);case 15:return an(e,t,t.type,t.pendingProps,n);case 19:return xn(e,t,n);case 22:return on(e,t,n);case 24:return Ln(t),i=kn(sc),null===e?(null===(a=On())&&(a=Pc,s=Nn(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:i,cache:a},oe(t),En(t,sc,a)):(0!==(e.lanes&n)&&(se(e,t),pe(t,null,null,n),de()),a=e.memoizedState,s=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),En(t,sc,i)):(i=s.cache,En(t,sc,i),i!==a.cache&&An(t,[sc],n,!0))),tn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function En(e,t,n){Pa?(y(tc,t._currentValue),t._currentValue=n):(y(tc,t._currentValue2),t._currentValue2=n)}function Tn(e){var t=tc.current;Pa?e._currentValue=t:e._currentValue2=t,v(tc)}function Cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function An(e,t,n,i){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cn(o.return,n,e),i||(s=null);break e}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(r(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),Cn(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function Pn(e,t,n,i){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(0!==(524288&a.flags))o=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=a.type;zs(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===Qs.current){if(null===(s=a.alternate))throw Error(r(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xa):e=[Xa])}a=a.return}null!==e&&An(t,e,n,i),t.flags|=262144}function Rn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!zs(Pa?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Ln(e){nc=e,ic=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function kn(e){return Dn(nc,e)}function In(e,t){return null===nc&&Ln(e),Dn(e,t)}function Dn(e,t){var n=Pa?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===ic){if(null===e)throw Error(r(308));ic=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ic=ic.next=t;return n}function Nn(){return{controller:new rc,data:new Map,refCount:0}}function Un(e){e.refCount--,0===e.refCount&&ac(oc,function(){e.controller.abort()})}function On(){var e=cc.current;return null!==e?e:Pc.pooledCache}function zn(e,t){y(cc,null===t?cc.current:t.pool)}function Fn(){var e=On();return null===e?null:{parent:Pa?sc._currentValue:sc._currentValue2,pool:e}}function Bn(e){e.flags|=4}function jn(e,t){if(null!==e&&e.child===t.child)return!1;if(0!==(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!==(13878&e.flags)||0!==(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function Hn(e,t,n,i){if(Ra)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Sa(e,n.stateNode);else if(!(4===n.tag||hs&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(La)for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=Eo(a,r.type,r.memoizedProps)),Sa(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=To(a,r.memoizedProps)),Sa(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),Hn(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Vn(e,t,n,i){if(La)for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=Eo(a,r.type,r.memoizedProps)),So(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=To(a,r.memoizedProps)),So(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),Vn(e,r,!(null!==r.memoizedProps&&"manual"===r.memoizedProps.mode),!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Gn(e,t){if(La&&jn(e,t)){var n=(e=t.stateNode).containerInfo,i=xo();Vn(i,t,!1,!1),e.pendingChildren=i,Bn(t),wo(n,i)}}function Wn(e,t,n,i){if(Ra)e.memoizedProps!==i&&Bn(t);else if(La){var r=e.stateNode,a=e.memoizedProps;if((e=jn(e,t))||a!==i){var o=Ys.current;(a=bo(r,n,a,i,!e,null))===r?t.stateNode=r:(wa(a,n,i,o)&&Bn(t),t.stateNode=a,e?Hn(a,t,!1,!1):Bn(t))}else t.stateNode=r}}function Xn(e,t,n){if(Ba(t,n)){if(e.flags|=16777216,!ja(t,n)){if(!nr())throw Ml=wl,Sl;e.flags|=8192}}else e.flags&=-16777217}function qn(e,t){if(ls(t)){if(e.flags|=16777216,!cs(t)){if(!nr())throw Ml=wl,Sl;e.flags|=8192}}else e.flags&=-16777217}function Zn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?M():536870912,e.lanes|=t,Vc|=t)}function Yn(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Kn(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=31457280&r.subtreeFlags,i|=31457280&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Jn(e,t,n){var i=t.pendingProps;switch(N(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kn(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tn(sc),O(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(V(t)?Bn(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nl&&(Zi(nl),nl=null))),Gn(e,t),Kn(t),null;case 26:if(Jo){n=t.type;var a=t.memoizedState;return null===e?(Bn(t),null!==a?(Kn(t),qn(t,a)):(Kn(t),Xn(t,n,i))):a?a!==e.memoizedState?(Bn(t),Kn(t),qn(t,a)):(Kn(t),t.flags&=-16777217):(Ra?e.memoizedProps!==i&&Bn(t):Wn(e,t,n,i),Kn(t),Xn(t,n,i)),null}case 27:if(hs){if(F(t),n=Js.current,a=t.type,null!==e&&null!=t.stateNode)Ra?e.memoizedProps!==i&&Bn(t):Wn(e,t,a,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Kn(t),null}e=Ys.current,V(t)?j(t,e):(e=ds(a,i,n,e,!0),t.stateNode=e,Bn(t))}return Kn(t),null}case 5:if(F(t),n=t.type,null!==e&&null!=t.stateNode)Wn(e,t,n,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Kn(t),null}e=Ys.current,V(t)?j(t,e):(Hn(a=xa(n,i,Js.current,e,t),t,!1,!1),t.stateNode=a,wa(a,n,i,e)&&Bn(t))}return Kn(t),Xn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Ra?n!==i&&Bn(t):La&&(n!==i?(t.stateNode=Ea(i,Js.current,Ys.current,t),Bn(t)):t.stateNode=e.stateNode);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(e=Js.current,n=Ys.current,V(t)){if(!ka)throw Error(r(176));if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(a=$s))switch(a.tag){case 27:case 5:i=a.memoizedProps}jo(e,n,t,i)||B(t)}else t.stateNode=Ea(i,e,n,t)}return Kn(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=V(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!ka)throw Error(r(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));Ho(a,t)}else G(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kn(t),a=!1}else null!==nl&&(Zi(nl),nl=null),a=!0;if(!a)return 256&t.flags?(ke(t),t):(ke(t),null)}if(ke(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(a=i.alternate.memoizedState.cachePool.pool);var o=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Zn(t,t.updateQueue),Kn(t),null;case 4:return O(),Gn(e,t),null===e&&Da(t.stateNode.containerInfo),Kn(t),null;case 10:return Tn(t.type),Kn(t),null;case 19:if(v(Il),null===(a=t.memoizedState))return Kn(t),null;if(i=0!==(128&t.flags),null===(o=a.rendering))if(i)Yn(a,!1);else{if(0!==zc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=Ie(e))){for(t.flags|=128,Yn(a,!1),e=o.updateQueue,t.updateQueue=e,Zn(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Cr(n,e),n=n.sibling;return y(Il,1&Il.current|2),t.child}e=e.sibling}null!==a.tail&&Ps()>Zc&&(t.flags|=128,i=!0,Yn(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ie(o))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Zn(t,e),Yn(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!tl)return Kn(t),null}else 2*Ps()-a.renderingStartTime>Zc&&536870912!==n&&(t.flags|=128,i=!0,Yn(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ps(),t.sibling=null,e=Il.current,y(Il,i?1&e|2:1&e),t):(Kn(t),null);case 22:case 23:return ke(t),Ae(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(Kn(t),6&t.subtreeFlags&&(t.flags|=8192)):Kn(t),null!==(n=t.updateQueue)&&Zn(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&v(cc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(sc),Kn(t),null;case 25:return null}throw Error(r(156,t.tag))}function Qn(e,t){switch(N(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tn(sc),O(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return F(t),null;case 13:if(ke(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));G()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return v(Il),null;case 4:return O(),null;case 10:return Tn(t.type),null;case 22:case 23:return ke(t),Ae(),null!==e&&v(cc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tn(sc),null;default:return null}}function $n(e,t){switch(N(t),t.tag){case 3:Tn(sc),O();break;case 26:case 27:case 5:F(t);break;case 4:O();break;case 13:ke(t);break;case 19:v(Il);break;case 10:Tn(t.type);break;case 22:case 23:ke(t),Ae(),null!==e&&v(cc);break;case 24:Tn(sc)}}function ei(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var a=n.create,o=n.inst;i=a(),o.destroy=i}n=n.next}while(n!==r)}}catch(s){yr(t,t.return,s)}}function ti(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var a=r.next;i=a;do{if((i.tag&e)===e){var o=i.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,r=t;var l=n;try{s()}catch(c){yr(r,l,c)}}}i=i.next}while(i!==a)}}catch(c){yr(t,t.return,c)}}function ni(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{me(t,n)}catch(i){yr(e,e.return,i)}}}function ii(e,t,n){n.props=Yt(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){yr(e,t,i)}}function ri(e,t){try{var n=e.ref;if(null!==n){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=ga(i);break;default:r=i}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){yr(e,t,a)}}function ai(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){yr(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){yr(e,t,a)}else n.current=null}function oi(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{so(i,t,n,e)}catch(r){yr(e,e.return,r)}}function si(e,t,n){try{lo(e.stateNode,e.type,n,t,e)}catch(i){yr(e,e.return,i)}}function li(e){return 5===e.tag||3===e.tag||!!Jo&&26===e.tag||!!hs&&27===e.tag||4===e.tag}function ci(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||li(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!hs||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ui(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?uo(n,e,t):ao(n,e);else if(!(4===i||hs&&27===i)&&null!==(e=e.child))for(ui(e,t,n),e=e.sibling;null!==e;)ui(e,t,n),e=e.sibling}function hi(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?co(n,e,t):ro(n,e);else if(!(4===i||hs&&27===i)&&null!==(e=e.child))for(hi(e,t,n),e=e.sibling;null!==e;)hi(e,t,n),e=e.sibling}function di(e,t,n){e=e.containerInfo;try{Mo(e,n)}catch(i){yr(t,t.return,i)}}function pi(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:wi(e,n),4&i&&ei(5,n);break;case 1:if(wi(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){yr(n,n.return,s)}else{var r=Yt(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){yr(n,n.return,l)}}64&i&&ni(n),512&i&&ri(n,n.return);break;case 3:if(wi(e,n),64&i&&null!==(i=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=ga(n.child.stateNode);break;case 1:e=n.child.stateNode}try{me(i,e)}catch(s){yr(n,n.return,s)}}break;case 26:if(Jo){wi(e,n),512&i&&ri(n,n.return);break}case 27:case 5:wi(e,n),null===t&&4&i&&oi(n),512&i&&ri(n,n.return);break;case 12:wi(e,n);break;case 13:wi(e,n),4&i&&vi(e,n);break;case 22:if(!(r=null!==n.memoizedState||uc)){t=null!==t&&null!==t.memoizedState||hc;var a=uc,o=hc;uc=r,(hc=t)&&!o?Ei(e,n,0!==(8772&n.subtreeFlags)):wi(e,n),uc=a,hc=o}512&i&&("manual"===n.memoizedProps.mode?ri(n,n.return):ai(n,n.return));break;default:wi(e,n)}}function fi(e){var t=e.alternate;null!==t&&(e.alternate=null,fi(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Fa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mi(e,t,n){for(n=n.child;null!==n;)gi(e,t,n),n=n.sibling}function gi(e,t,n){if(Os&&"function"===typeof Os.onCommitFiberUnmount)try{Os.onCommitFiberUnmount(Us,n)}catch(a){}switch(n.tag){case 26:if(Jo){hc||ai(n,t),mi(e,t,n),n.memoizedState?ns(n.memoizedState):n.stateNode&&as(n.stateNode);break}case 27:if(hs){hc||ai(n,t);var i=gc,r=vc;gc=n.stateNode,mi(e,t,n),ms(n.stateNode),gc=i,vc=r;break}case 5:hc||ai(n,t);case 6:if(Ra){if(i=gc,r=vc,gc=null,mi(e,t,n),vc=r,null!==(gc=i))if(vc)try{po(gc,n.stateNode)}catch(o){yr(n,t,o)}else try{ho(gc,n.stateNode)}catch(o){yr(n,t,o)}}else mi(e,t,n);break;case 18:Ra&&null!==gc&&(vc?qo(gc,n.stateNode):Xo(gc,n.stateNode));break;case 4:Ra?(i=gc,r=vc,gc=n.stateNode.containerInfo,vc=!0,mi(e,t,n),gc=i,vc=r):(La&&di(n.stateNode,n,xo()),mi(e,t,n));break;case 0:case 11:case 14:case 15:hc||ti(2,n,t),hc||ti(4,n,t),mi(e,t,n);break;case 1:hc||(ai(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&ii(n,t,i)),mi(e,t,n);break;case 21:mi(e,t,n);break;case 22:hc||ai(n,t),hc=(i=hc)||null!==n.memoizedState,mi(e,t,n),hc=i;break;default:mi(e,t,n)}}function vi(e,t){if(ka&&null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wo(e)}catch(n){yr(t,t.return,n)}}function yi(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new pc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new pc),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var i=wr.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function _i(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var a=n[i],o=e,s=t;if(Ra){var l=s;e:for(;null!==l;){switch(l.tag){case 27:case 5:gc=l.stateNode,vc=!1;break e;case 3:case 4:gc=l.stateNode.containerInfo,vc=!0;break e}l=l.return}if(null===gc)throw Error(r(160));gi(o,s,a),gc=null,vc=!1}else gi(o,s,a);null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)bi(t,e),t=t.sibling}function bi(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_i(t,e),xi(e),4&i&&(ti(3,e,e.return),ei(3,e),ti(5,e,e.return));break;case 1:_i(t,e),xi(e),512&i&&(hc||null===n||ai(n,n.return)),64&i&&uc&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:if(Jo){var a=yc;_i(t,e),xi(e),512&i&&(hc||null===n||ai(n,n.return)),4&i&&(i=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=is(a,e.type,e.memoizedProps,e):rs(a,e.type,e.stateNode):e.stateNode=ts(a,t,e.memoizedProps):i!==t?(null===i?null!==n.stateNode&&as(n.stateNode):ns(i),null===t?rs(a,e.type,e.stateNode):ts(a,t,e.memoizedProps)):null===t&&null!==e.stateNode&&si(e,e.memoizedProps,n.memoizedProps));break}case 27:if(hs&&4&i&&null===e.alternate){a=e.stateNode;var o=e.memoizedProps;try{ps(a),fs(e.type,o,a,e)}catch(h){yr(e,e.return,h)}}case 5:if(_i(t,e),xi(e),512&i&&(hc||null===n||ai(n,n.return)),Ra){if(32&e.flags){t=e.stateNode;try{fo(t)}catch(h){yr(e,e.return,h)}}4&i&&null!=e.stateNode&&si(e,t=e.memoizedProps,null!==n?n.memoizedProps:t),1024&i&&(dc=!0)}break;case 6:if(_i(t,e),xi(e),4&i&&Ra){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=null!==n?n.memoizedProps:i,t=e.stateNode;try{oo(t,n,i)}catch(h){yr(e,e.return,h)}}break;case 3:if(Jo?(ss(),a=yc,yc=$o(t.containerInfo),_i(t,e),yc=a):_i(t,e),xi(e),4&i){if(Ra&&ka&&null!==n&&n.memoizedState.isDehydrated)try{Go(t.containerInfo)}catch(h){yr(e,e.return,h)}if(La){i=t.containerInfo,n=t.pendingChildren;try{Mo(i,n)}catch(h){yr(e,e.return,h)}}}dc&&(dc=!1,Si(e));break;case 4:Jo?(n=yc,yc=$o(e.stateNode.containerInfo),_i(t,e),xi(e),yc=n):(_i(t,e),xi(e)),4&i&&La&&di(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:_i(t,e),xi(e);break;case 13:_i(t,e),xi(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(qc=Ps()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,yi(e,i)));break;case 22:512&i&&(hc||null===n||ai(n,n.return)),a=null!==e.memoizedState;var s=null!==n&&null!==n.memoizedState,l=uc,c=hc;if(uc=l||a,hc=c||s,_i(t,e),hc=c,uc=l,xi(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&i&&(t._visibility=a?-2&t._visibility:1|t._visibility,a&&(t=uc||hc,null===n||s||t||Mi(e)),Ra&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(n=null,Ra)for(t=e;;){if(5===t.tag||Jo&&26===t.tag||hs&&27===t.tag){if(null===n){s=n=t;try{o=s.stateNode,a?mo(o):vo(s.stateNode,s.memoizedProps)}catch(h){yr(s,s.return,h)}}}else if(6===t.tag){if(null===n){s=t;try{var u=s.stateNode;a?go(u):yo(u,s.memoizedProps)}catch(h){yr(s,s.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,yi(e,n))));break;case 19:_i(t,e),xi(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,yi(e,i)));break;case 21:break;default:_i(t,e),xi(e)}}function xi(e){var t=e.flags;if(2&t){try{if(Ra&&(!hs||27!==e.tag)){e:{for(var n=e.return;null!==n;){if(li(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 27:if(hs){var a=i.stateNode;hi(e,ci(e),a);break}case 5:var o=i.stateNode;32&i.flags&&(fo(o),i.flags&=-33),hi(e,ci(e),o);break;case 3:case 4:var s=i.stateNode.containerInfo;ui(e,ci(e),s);break;default:throw Error(r(161))}}}catch(l){yr(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Si(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Si(t),5===t.tag&&1024&t.flags&&qa(t.stateNode),e=e.sibling}}function wi(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)pi(e,t.alternate,t),t=t.sibling}function Mi(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ti(4,t,t.return),Mi(t);break;case 1:ai(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ii(t,t.return,n),Mi(t);break;case 26:case 27:case 5:ai(t,t.return),Mi(t);break;case 22:ai(t,t.return),null===t.memoizedState&&Mi(t);break;default:Mi(t)}e=e.sibling}}function Ei(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Ei(r,a,n),ei(4,a);break;case 1:if(Ei(r,a,n),"function"===typeof(r=(i=a).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){yr(i,i.return,c)}if(null!==(r=(i=a).updateQueue)){var s=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)fe(l[r],s)}catch(c){yr(i,i.return,c)}}n&&64&o&&ni(a),ri(a,a.return);break;case 26:case 27:case 5:Ei(r,a,n),n&&null===i&&4&o&&oi(a),ri(a,a.return);break;case 12:default:Ei(r,a,n);break;case 13:Ei(r,a,n),n&&4&o&&vi(r,a);break;case 22:null===a.memoizedState&&Ei(r,a,n),ri(a,a.return)}t=t.sibling}}function Ti(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Un(n))}function Ci(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e))}function Ai(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Pi(e,t,n,i),t=t.sibling}function Pi(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ai(e,t,n,i),2048&r&&ei(9,t);break;case 3:Ai(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e)));break;case 12:if(2048&r){Ai(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){yr(t,t.return,l)}}else Ai(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?Ai(e,t,n,i):Li(e,t):4&a._visibility?Ai(e,t,n,i):(a._visibility|=4,Ri(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&r&&Ti(t.alternate,t);break;case 24:Ai(e,t,n,i),2048&r&&Ci(t.alternate,t);break;default:Ai(e,t,n,i)}}function Ri(e,t,n,i,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,o=t,s=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:Ri(a,o,s,l,r),ei(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?4&u._visibility?Ri(a,o,s,l,r):Li(a,o):(u._visibility|=4,Ri(a,o,s,l,r)),r&&2048&c&&Ti(o.alternate,o);break;case 24:Ri(a,o,s,l,r),r&&2048&c&&Ci(o.alternate,o);break;default:Ri(a,o,s,l,r)}t=t.sibling}}function Li(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Li(n,i),2048&r&&Ti(i.alternate,i);break;case 24:Li(n,i),2048&r&&Ci(i.alternate,i);break;default:Li(n,i)}t=t.sibling}}function ki(e){if(e.subtreeFlags&_c)for(e=e.child;null!==e;)Ii(e),e=e.sibling}function Ii(e){switch(e.tag){case 26:ki(e),e.flags&_c&&(null!==e.memoizedState?us(yc,e.memoizedState,e.memoizedProps):Va(e.type,e.memoizedProps));break;case 5:ki(e),e.flags&_c&&Va(e.type,e.memoizedProps);break;case 3:case 4:if(Jo){var t=yc;yc=$o(e.stateNode.containerInfo),ki(e),yc=t}else ki(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_c,_c=16777216,ki(e),_c=t):ki(e));break;default:ki(e)}}function Di(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ni(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];fc=i,zi(i,e)}Di(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ui(e),e=e.sibling}function Ui(e){switch(e.tag){case 0:case 11:case 15:Ni(e),2048&e.flags&&ti(9,e,e.return);break;case 3:case 12:default:Ni(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Oi(e)):Ni(e)}}function Oi(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];fc=i,zi(i,e)}Di(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ti(8,t,t.return),Oi(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Oi(t));break;default:Oi(t)}e=e.sibling}}function zi(e,t){for(;null!==fc;){var n=fc;switch(n.tag){case 0:case 11:case 15:ti(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Un(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,fc=i;else e:for(n=e;null!==fc;){var r=(i=fc).sibling,a=i.return;if(fi(i),i===n){fc=null;break e}if(null!==r){r.return=a,fc=r;break e}fc=a}}}function Fi(e){var t=Ia(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(r(364));return t}if(null===(e=Ja(e)))throw Error(r(362));return e.stateNode.current}function Bi(e,t){var n=e.tag;switch(t.$$typeof){case xc:if(e.type===t.value)return!0;break;case Sc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],a=i.tag,o=e[n++],s=t[o];if(5!==a&&26!==a&&27!==a||!eo(i)){for(;null!=s&&Bi(i,s);)s=t[++o];if(o===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}t=!1}return t;case wc:if((5===n||26===n||27===n)&&to(e.stateNode,t.value))return!0;break;case Ec:if((5===n||6===n||26===n||27===n)&&(null!==(e=$a(e))&&0<=e.indexOf(t.value)))return!0;break;case Mc:if((5===n||26===n||27===n)&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function ji(e){switch(e.$$typeof){case xc:return"<"+(o(e.value)||"Unknown")+">";case Sc:return":has("+(ji(e)||"")+")";case wc:return'[role="'+e.value+'"]';case Ec:return'"'+e.value+'"';case Mc:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function Hi(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],a=r.tag,o=e[i++],s=t[o];if(5!==a&&26!==a&&27!==a||!eo(r)){for(;null!=s&&Bi(r,s);)s=t[++o];if(o===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}return n}function Vi(e,t){if(!Ka)throw Error(r(363));e=Hi(e=Fi(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],a=i.tag;if(5===a||26===a||27===a)eo(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}function Gi(){if(0!==(2&Ac)&&0!==Lc)return Lc&-Lc;if(null!==ua.T){return 0!==gl?gl:re()}return Oa()}function Wi(){0===Hc&&(Hc=0===(536870912&Lc)||tl?w():536870912);var e=Ll.current;return null!==e&&(e.flags|=32),Hc}function Xi(e,t,n){(e===Pc&&2===kc||null!==e.cancelPendingCommit)&&(er(e,0),Ji(e,Lc,Hc,!1)),T(e,n),0!==(2&Ac)&&e===Pc||(e===Pc&&(0===(2&Ac)&&(Bc|=n),4===zc&&Ji(e,Lc,Hc,!1)),Q(e))}function qi(e,t,n){if(0!==(6&Ac))throw Error(r(327));for(var i=!n&&0===(60&t)&&0===(t&e.expiredLanes)||x(e,t),a=i?function(e,t){var n=Ac;Ac|=2;var i=ir(),a=rr();Pc!==e||Lc!==t?(Yc=null,Zc=Ps()+500,er(e,t)):Nc=x(e,t);e:for(;;)try{if(0!==kc&&null!==Rc){t=Rc;var o=Ic;t:switch(kc){case 1:kc=0,Ic=null,hr(e,t,o,1);break;case 2:if(ve(o)){kc=0,Ic=null,ur(t);break}t=function(){2===kc&&Pc===e&&(kc=7),Q(e)},o.then(t,t);break e;case 3:kc=7;break e;case 4:kc=5;break e;case 7:ve(o)?(kc=0,Ic=null,ur(t)):(kc=0,Ic=null,hr(e,t,o,7));break;case 5:var s=null;switch(Rc.tag){case 26:s=Rc.memoizedState;case 5:case 27:var l=Rc,c=l.type,u=l.pendingProps;if(s?cs(s):ja(c,u)){kc=0,Ic=null;var h=l.sibling;if(null!==h)Rc=h;else{var d=l.return;null!==d?(Rc=d,dr(d)):Rc=null}break t}}kc=0,Ic=null,hr(e,t,o,5);break;case 6:kc=0,Ic=null,hr(e,t,o,6);break;case 8:$i(),zc=6;break e;default:throw Error(r(462))}}lr();break}catch(p){tr(e,p)}return ic=nc=null,ua.H=i,ua.A=a,Ac=n,null!==Rc?0:(Pc=null,Lc=0,X(),zc)}(e,t):or(e,t,!0),o=i;;){if(0===a){Nc&&!i&&Ji(e,t,0,!1);break}if(6===a)Ji(e,t,0,!Dc);else{if(n=e.current.alternate,o&&!Ki(n)){a=or(e,t,!1),o=!1;continue}if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=Gc;var c=ka&&l.current.memoizedState.isDehydrated;if(c&&(er(l,s).flags|=256),2!==(s=or(l,s,!1))){if(Uc&&!c){l.errorRecoveryDisabledLanes|=o,Bc|=o,a=4;break e}o=Wc,Wc=a,null!==o&&Zi(o)}a=s}if(o=!1,2!==a)continue}}if(1===a){er(e,0),Ji(e,t,0,!0);break}e:{switch(i=e,a){case 0:case 1:throw Error(r(345));case 4:if((4194176&t)===t){Ji(i,t,Hc,!Dc);break e}break;case 2:Wc=null;break;case 3:case 5:break;default:throw Error(r(329))}if(i.finishedWork=n,i.finishedLanes=t,(62914560&t)===t&&10<(o=qc+300-Ps())){if(Ji(i,t,Hc,!Dc),0!==b(i,0))break e;i.timeoutHandle=Ta(Yi.bind(null,i,n,Wc,Yc,Xc,t,Hc,Bc,Vc,Dc,2,-0,0),o)}else Yi(i,n,Wc,Yc,Xc,t,Hc,Bc,Vc,Dc,0,-0,0)}}break}Q(e)}function Zi(e){null===Wc?Wc=e:Wc.push.apply(Wc,e)}function Yi(e,t,n,i,r,a,o,s,l,c,u,h,d){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Ha(),Ii(t),null!==(t=Ga())))return e.cancelPendingCommit=t(fr.bind(null,e,n,i,r,o,s,l,1,h,d)),void Ji(e,a,o,!c);fr(e,n,i,r,o,s,l,u,h,d)}function Ki(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!zs(a(),r))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t,n,i){t&=~jc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var a=31-bs(r),o=1<<a;i[a]=-1,r&=~o}0!==n&&C(e,n,t)}function Qi(){return 0!==(6&Ac)||($(0,!1),!1)}function $i(){if(null!==Rc){if(0===kc)var e=Rc.return;else ic=nc=null,He(e=Rc),El=null,Tl=0,e=Rc;for(;null!==e;)$n(e.alternate,e),e=e.return;Rc=null}}function er(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==Aa&&(e.timeoutHandle=Aa,Ca(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$i(),Pc=e,Rc=n=Tr(e.current,null),Lc=t,kc=0,Ic=null,Dc=!1,Nc=x(e,t),Uc=!1,Vc=Hc=jc=Bc=Fc=zc=0,Wc=Gc=null,Xc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-bs(i),a=1<<r;t|=e[r],i&=~a}return Oc=t,X(),n}function tr(e,t){Nl=null,ua.H=Xl,t===xl?(t=be(),kc=3):t===Sl?(t=be(),kc=4):kc=t===Ql?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,Ic=t,null===Rc&&(zc=1,Kt(e,L(t,e.current)))}function nr(){var e=Ll.current;return null===e||((4194176&Lc)===Lc?null===kl:((62914560&Lc)===Lc||0!==(536870912&Lc))&&e===kl)}function ir(){var e=ua.H;return ua.H=Xl,null===e?Xl:e}function rr(){var e=ua.A;return ua.A=bc,e}function ar(){zc=4,Dc||(4194176&Lc)!==Lc&&null!==Ll.current||(Nc=!0),0===(134217727&Fc)&&0===(134217727&Bc)||null===Pc||Ji(Pc,Lc,Hc,!1)}function or(e,t,n){var i=Ac;Ac|=2;var r=ir(),a=rr();Pc===e&&Lc===t||(Yc=null,er(e,t)),t=!1;var o=zc;e:for(;;)try{if(0!==kc&&null!==Rc){var s=Rc,l=Ic;switch(kc){case 8:$i(),o=6;break e;case 3:case 2:case 6:null===Ll.current&&(t=!0);var c=kc;if(kc=0,Ic=null,hr(e,s,l,c),n&&Nc){o=0;break e}break;default:c=kc,kc=0,Ic=null,hr(e,s,l,c)}}sr(),o=zc;break}catch(u){tr(e,u)}return t&&e.shellSuspendCounter++,ic=nc=null,Ac=i,ua.H=r,ua.A=a,null===Rc&&(Pc=null,Lc=0,X()),o}function sr(){for(;null!==Rc;)cr(Rc)}function lr(){for(;null!==Rc&&!Cs();)cr(Rc)}function cr(e){var t=Mn(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?dr(e):Rc=t}function ur(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=un(n,t,t.pendingProps,t.type,void 0,Lc);break;case 11:t=un(n,t,t.pendingProps,t.type.render,t.ref,Lc);break;case 5:He(t);default:$n(n,t),t=Mn(n,t=Rc=Cr(t,Oc),Oc)}e.memoizedProps=e.pendingProps,null===t?dr(e):Rc=t}function hr(e,t,n,i){ic=nc=null,He(t),El=null,Tl=0;var a=t.return;try{if(function(e,t,n,i,a){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Pn(t,n,a,!0),null!==(n=Ll.current)){switch(n.tag){case 13:return null===kl?ar():null===n.alternate&&0===zc&&(zc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===wl?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),_r(e,i,a)),!1;case 22:return n.flags|=65536,i===wl?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),_r(e,i,a)),!1}throw Error(r(435,n.tag))}return _r(e,i,a),ar(),!1}if(tl)return null!==(t=Ll.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==rl&&W(L(e=Error(r(422),{cause:i}),n))):(i!==rl&&W(L(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,i=L(i,n),he(e,a=Qt(e.stateNode,i,a)),4!==zc&&(zc=2)),!1;var o=Error(r(520),{cause:i});if(o=L(o,n),null===Gc?Gc=[o]:Gc.push(o),4!==zc&&(zc=2),null===t)return!0;i=L(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,he(n,e=Qt(n.stateNode,i,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Kc||!Kc.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,en(a=$t(a),e,n,i),he(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,Lc))return zc=1,Kt(e,L(n,e.current)),void(Rc=null)}catch(o){if(null!==a)throw Rc=a,o;return zc=1,Kt(e,L(n,e.current)),void(Rc=null)}32768&t.flags?(tl||1===i?e=!0:Nc||0!==(536870912&Lc)?e=!1:(Dc=e=!0,(2===i||3===i||6===i)&&(null!==(i=Ll.current)&&13===i.tag&&(i.flags|=16384))),pr(t,e)):dr(t)}function dr(e){var t=e;do{if(0!==(32768&t.flags))return void pr(t,Dc);e=t.return;var n=Jn(t.alternate,t,Oc);if(null!==n)return void(Rc=n);if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===zc&&(zc=5)}function pr(e,t){do{var n=Qn(e.alternate,e);if(null!==n)return n.flags&=32767,void(Rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(Rc=e);Rc=e=n}while(null!==e);zc=6,Rc=null}function fr(e,t,n,i,a,o,s,l,c,u){var h=ua.T,d=Ua();try{Na(2),ua.T=null,function(e,t,n,i,a,o,s,l){do{gr()}while(null!==Qc);if(0!==(6&Ac))throw Error(r(327));var c=e.finishedWork;if(i=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,i,r,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-bs(n),h=1<<u;s[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==i&&C(e,i,0),0!==a&&0===r&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,i,u|=sl,o,s,l),e===Pc&&(Rc=Pc=null,Lc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Jc||(Jc=!0,eu=u,tu=n,function(e,t){Es(e,t)}(ks,function(){return gr(),null})),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=ua.T,ua.T=null,o=Ua(),Na(2),s=Ac,Ac|=4,function(e,t){for(_a(e.containerInfo),fc=t;null!==fc;)if(t=(e=fc).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,fc=t;else for(;null!==fc;){var n=(e=fc).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==n){t=void 0;var i=e,a=n.memoizedProps;n=n.memoizedState;var o=i.stateNode;try{var s=Yt(i.type,a,(i.elementType,i.type));t=o.getSnapshotBeforeUpdate(s,n),o.__reactInternalSnapshotBeforeUpdate=t}catch(l){yr(i,i.return,l)}}break;case 3:0!==(1024&t)&&Ra&&_o(e.stateNode.containerInfo);break;default:if(0!==(1024&t))throw Error(r(163))}if(null!==(t=e.sibling)){t.return=e.return,fc=t;break}fc=e.return}s=mc,mc=!1}(e,c),bi(c,e),ba(e.containerInfo),e.current=c,pi(e,c.alternate,c),As(),Ac=s,Na(o),ua.T=n):e.current=c,Jc?(Jc=!1,Qc=e,$c=i):mr(e,u),u=e.pendingLanes,0===u&&(Kc=null),function(e){if(Os&&"function"===typeof Os.onCommitFiberRoot)try{Os.onCommitFiberRoot(Us,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),Q(e),null!==t)for(a=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],a(u.value,{componentStack:u.stack});0!==(3&$c)&&gr(),u=e.pendingLanes,0!==(4194218&i)&&0!==(42&u)?e===iu?nu++:(nu=0,iu=e):nu=0,$(0,!1)}(e,t,n,i,d,a,o,s)}finally{ua.T=h,Na(d)}}function mr(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Un(t)))}function gr(){if(null!==Qc){var e=Qc,t=eu;eu=0;var n=P($c),i=32>n?32:n;n=ua.T;var a=Ua();try{if(Na(i),ua.T=null,null===Qc)var o=!1;else{i=tu,tu=null;var s=Qc,l=$c;if(Qc=null,$c=0,0!==(6&Ac))throw Error(r(331));var c=Ac;if(Ac|=4,Ui(s.current),Pi(s,s.current,l,i),Ac=c,$(0,!1),Os&&"function"===typeof Os.onPostCommitFiberRoot)try{Os.onPostCommitFiberRoot(Us,s)}catch(u){}o=!0}return o}finally{Na(a),ua.T=n,mr(e,t)}}return!1}function vr(e,t,n){t=L(n,t),null!==(e=ce(e,t=Qt(e.stateNode,t,2),2))&&(T(e,2),Q(e))}function yr(e,t,n){if(3===e.tag)vr(e,e,n);else for(;null!==t;){if(3===t.tag){vr(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kc||!Kc.has(i))){e=L(n,e),null!==(i=ce(t,n=$t(2),2))&&(en(n,i,t,e),T(i,2),Q(i));break}}t=t.return}}function _r(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Cc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(Uc=!0,r.add(n),e=br.bind(null,e,t,n),t.then(e,e))}function br(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Pc===e&&(Lc&n)===n&&(4===zc||3===zc&&(62914560&Lc)===Lc&&300>Ps()-qc?0===(2&Ac)&&er(e,0):jc|=n,Vc===Lc&&(Vc=0)),Q(e)}function xr(e,t){0===t&&(t=M()),null!==(e=Y(e,t))&&(T(e,t),Q(e))}function Sr(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xr(e,n)}function wr(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),xr(e,n)}function Mr(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tr(e,n){var i=e.alternate;return null===i?((i=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Cr(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ar(e,n,i,a,o,s){var l=0;if(a=e,"function"===typeof e)Er(e)&&(l=1);else if("string"===typeof e)l=Jo&&hs?Qo(e,i,Ys.current)?26:gs(e)?27:5:Jo?Qo(e,i,Ys.current)?26:5:hs&&gs(e)?27:5;else e:switch(e){case qr:return Pr(i.children,o,s,n);case Zr:l=8,o|=24;break;case Yr:return(e=t(12,i,n,2|o)).elementType=Yr,e.lanes=s,e;case ea:return(e=t(13,i,n,o)).elementType=ea,e.lanes=s,e;case ta:return(e=t(19,i,n,o)).elementType=ta,e.lanes=s,e;case ra:return Rr(i,o,s,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Kr:case Qr:l=10;break e;case Jr:l=9;break e;case $r:l=11;break e;case na:l=14;break e;case ia:l=16,a=null;break e}l=29,i=Error(r(130,null===e?"null":typeof e,"")),a=null}return(n=t(l,i,n,o)).elementType=e,n.type=a,n.lanes=s,n}function Pr(e,n,i,r){return(e=t(7,e,r,n)).lanes=i,e}function Rr(e,n,i,a){(e=t(22,e,a,n)).elementType=ra,e.lanes=i;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(r(456));if(0===(2&o._pendingVisibility)){var t=Y(e,2);null!==t&&(o._pendingVisibility|=2,Xi(t,0,2))}},attach:function(){var e=o._current;if(null===e)throw Error(r(456));if(0!==(2&o._pendingVisibility)){var t=Y(e,2);null!==t&&(o._pendingVisibility&=-3,Xi(t,0,2))}}};return e.stateNode=o,e}function Lr(e,n,i){return(e=t(6,e,null,n)).lanes=i,e}function kr(e,n,i){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ir(e,t,n,i,r,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Aa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=E(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E(0),this.hiddenUpdates=E(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Dr(e,n,i,r,a,o,s,l,c,u,h,d){return e=new Ir(e,n,i,s,l,c,u,d),n=1,!0===o&&(n|=24),o=t(3,null,null,n),e.current=o,o.stateNode=e,(n=Nn()).refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:r,isDehydrated:i,cache:n},oe(o),e}function Nr(e){return e?e=_s:_s}function Ur(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=null!==(e=p(t))?f(e):null)?null:ga(e.stateNode)}function Or(e,t,n,i,r,a){r=Nr(r),null===i.context?i.context=r:i.pendingContext=r,(i=le(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(i.callback=a),null!==(n=ce(e,i,t))&&(Xi(n,0,t),ue(n,e,t))}function zr(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Fr(e,t){zr(e,t),(e=e.alternate)&&zr(e,t)}var Br={},jr=n(43),Hr=n(513),Vr=Object.assign,Gr=Symbol.for("react.element"),Wr=Symbol.for("react.transitional.element"),Xr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Zr=Symbol.for("react.strict_mode"),Yr=Symbol.for("react.profiler"),Kr=Symbol.for("react.provider"),Jr=Symbol.for("react.consumer"),Qr=Symbol.for("react.context"),$r=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),na=Symbol.for("react.memo"),ia=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ra=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var aa,oa,sa=Symbol.for("react.memo_cache_sentinel"),la=Symbol.iterator,ca=Symbol.for("react.client.reference"),ua=jr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ha=!1,da=Array.isArray,pa=e.rendererVersion,fa=e.rendererPackageName,ma=e.extraDevToolsConfig,ga=e.getPublicInstance,va=e.getRootHostContext,ya=e.getChildHostContext,_a=e.prepareForCommit,ba=e.resetAfterCommit,xa=e.createInstance,Sa=e.appendInitialChild,wa=e.finalizeInitialChildren,Ma=e.shouldSetTextContent,Ea=e.createTextInstance,Ta=e.scheduleTimeout,Ca=e.cancelTimeout,Aa=e.noTimeout,Pa=e.isPrimaryRenderer;e.warnsIfNotActing;var Ra=e.supportsMutation,La=e.supportsPersistence,ka=e.supportsHydration,Ia=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Da=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Na=e.setCurrentUpdatePriority,Ua=e.getCurrentUpdatePriority,Oa=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var za=e.shouldAttemptEagerTransition,Fa=e.detachDeletedInstance;e.requestPostPaintCallback;var Ba=e.maySuspendCommit,ja=e.preloadInstance,Ha=e.startSuspendingCommit,Va=e.suspendInstance,Ga=e.waitForCommitToBeReady,Wa=e.NotPendingTransition,Xa=e.HostTransitionContext,qa=e.resetFormInstance;e.bindToConsole;var Za=e.supportsMicrotasks,Ya=e.scheduleMicrotask,Ka=e.supportsTestSelectors,Ja=e.findFiberRoot,Qa=e.getBoundingRect,$a=e.getTextContent,eo=e.isHiddenSubtree,to=e.matchAccessibilityRole,no=e.setFocusIfFocusable,io=e.setupIntersectionObserver,ro=e.appendChild,ao=e.appendChildToContainer,oo=e.commitTextUpdate,so=e.commitMount,lo=e.commitUpdate,co=e.insertBefore,uo=e.insertInContainerBefore,ho=e.removeChild,po=e.removeChildFromContainer,fo=e.resetTextContent,mo=e.hideInstance,go=e.hideTextInstance,vo=e.unhideInstance,yo=e.unhideTextInstance,_o=e.clearContainer,bo=e.cloneInstance,xo=e.createContainerChildSet,So=e.appendChildToContainerChildSet,wo=e.finalizeContainerChildren,Mo=e.replaceContainerChildren,Eo=e.cloneHiddenInstance,To=e.cloneHiddenTextInstance,Co=e.isSuspenseInstancePending,Ao=e.isSuspenseInstanceFallback,Po=e.getSuspenseInstanceFallbackErrorDetails,Ro=e.registerSuspenseInstanceRetry,Lo=e.canHydrateFormStateMarker,ko=e.isFormStateMarkerMatching,Io=e.getNextHydratableSibling,Do=e.getFirstHydratableChild,No=e.getFirstHydratableChildWithinContainer,Uo=e.getFirstHydratableChildWithinSuspenseInstance,Oo=e.canHydrateInstance,zo=e.canHydrateTextInstance,Fo=e.canHydrateSuspenseInstance,Bo=e.hydrateInstance,jo=e.hydrateTextInstance,Ho=e.hydrateSuspenseInstance,Vo=e.getNextHydratableInstanceAfterSuspenseInstance,Go=e.commitHydratedContainer,Wo=e.commitHydratedSuspenseInstance,Xo=e.clearSuspenseBoundary,qo=e.clearSuspenseBoundaryFromContainer,Zo=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Yo=e.validateHydratableInstance,Ko=e.validateHydratableTextInstance,Jo=e.supportsResources,Qo=e.isHostHoistableType,$o=e.getHoistableRoot,es=e.getResource,ts=e.acquireResource,ns=e.releaseResource,is=e.hydrateHoistable,rs=e.mountHoistable,as=e.unmountHoistable,os=e.createHoistableInstance,ss=e.prepareToCommitHoistables,ls=e.mayResourceSuspendCommit,cs=e.preloadResource,us=e.suspendResource,hs=e.supportsSingletons,ds=e.resolveSingletonInstance,ps=e.clearSingleton,fs=e.acquireSingletonInstance,ms=e.releaseSingletonInstance,gs=e.isHostSingletonType,vs=[],ys=-1,_s={},bs=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xs(e)/Ss|0)|0},xs=Math.log,Ss=Math.LN2,ws=128,Ms=4194304,Es=Hr.unstable_scheduleCallback,Ts=Hr.unstable_cancelCallback,Cs=Hr.unstable_shouldYield,As=Hr.unstable_requestPaint,Ps=Hr.unstable_now,Rs=Hr.unstable_ImmediatePriority,Ls=Hr.unstable_UserBlockingPriority,ks=Hr.unstable_NormalPriority,Is=Hr.unstable_IdlePriority,Ds=Hr.log,Ns=Hr.unstable_setDisableYieldValue,Us=null,Os=null,zs="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Fs=new WeakMap,Bs=[],js=0,Hs=null,Vs=0,Gs=[],Ws=0,Xs=null,qs=1,Zs="",Ys=g(null),Ks=g(null),Js=g(null),Qs=g(null),$s=null,el=null,tl=!1,nl=null,il=!1,rl=Error(r(519)),al=[],ol=0,sl=0,ll=null,cl=null,ul=!1,hl=!1,dl=!1,pl=0,fl=null,ml=0,gl=0,vl=null,yl=!1,_l=!1,bl=Object.prototype.hasOwnProperty,xl=Error(r(460)),Sl=Error(r(474)),wl={then:function(){}},Ml=null,El=null,Tl=0,Cl=Ee(!0),Al=Ee(!1),Pl=g(null),Rl=g(0),Ll=g(null),kl=null,Il=g(0),Dl=0,Nl=null,Ul=null,Ol=null,zl=!1,Fl=!1,Bl=!1,jl=0,Hl=0,Vl=null,Gl=0,Wl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Xl={readContext:kn,use:Xe,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De};Xl.useCacheRefresh=De,Xl.useMemoCache=De,Xl.useHostTransitionStatus=De,Xl.useFormState=De,Xl.useActionState=De,Xl.useOptimistic=De;var ql={readContext:kn,use:Xe,useCallback:function(e,t){return Ve().memoizedState=[e,void 0===t?null:t],e},useContext:kn,useEffect:St,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bt(4194308,4,Tt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bt(4194308,4,e,t)},useInsertionEffect:function(e,t){bt(4,2,e,t)},useMemo:function(e,t){var n=Ve();t=void 0===t?null:t;var i=e();if(Bl){R(!0);try{e()}finally{R(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ve();if(void 0!==n){var r=n(t);if(Bl){R(!0);try{n(t)}finally{R(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Ft.bind(null,Nl,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ve().memoizedState=e},useState:function(e){var t=(e=rt(e)).queue,n=Bt.bind(null,Nl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:At,useDeferredValue:function(e,t){return Lt(Ve(),e,t)},useTransition:function(){var e=rt(!1);return e=It.bind(null,Nl,e.queue,!0,!1),Ve().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Nl,a=Ve();if(tl){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Pc)throw Error(r(349));0!==(60&Lc)||$e(i,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,St(tt.bind(null,i,o,e),[e]),i.flags|=2048,yt(9,et.bind(null,i,o,n,t),{destroy:void 0},null),n},useId:function(){var e=Ve(),t=Pc.identifierPrefix;if(tl){var n=Zs;t=":"+t+"R"+(n=(qs&~(1<<32-bs(qs)-1)).toString(32)+n),0<(n=jl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Gl++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Ve().memoizedState=zt.bind(null,Nl)}};ql.useMemoCache=qe,ql.useHostTransitionStatus=Nt,ql.useFormState=pt,ql.useActionState=pt,ql.useOptimistic=function(e){var t=Ve();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ht.bind(null,Nl,!0,n),n.dispatch=t,[e,t]};var Zl={readContext:kn,use:Xe,useCallback:Pt,useContext:kn,useEffect:wt,useImperativeHandle:Ct,useInsertionEffect:Mt,useLayoutEffect:Et,useMemo:Rt,useReducer:Ye,useRef:_t,useState:function(){return Ye(Ze)},useDebugValue:At,useDeferredValue:function(e,t){return kt(Ge(),Ul.memoizedState,e,t)},useTransition:function(){var e=Ye(Ze)[0],t=Ge().memoizedState;return["boolean"===typeof e?e:We(e),t]},useSyncExternalStore:Qe,useId:Ut};Zl.useCacheRefresh=Ot,Zl.useMemoCache=qe,Zl.useHostTransitionStatus=Nt,Zl.useFormState=ft,Zl.useActionState=ft,Zl.useOptimistic=function(e,t){return at(Ge(),0,e,t)};var Yl={readContext:kn,use:Xe,useCallback:Pt,useContext:kn,useEffect:wt,useImperativeHandle:Ct,useInsertionEffect:Mt,useLayoutEffect:Et,useMemo:Rt,useReducer:Je,useRef:_t,useState:function(){return Je(Ze)},useDebugValue:At,useDeferredValue:function(e,t){var n=Ge();return null===Ul?Lt(n,e,t):kt(n,Ul.memoizedState,e,t)},useTransition:function(){var e=Je(Ze)[0],t=Ge().memoizedState;return["boolean"===typeof e?e:We(e),t]},useSyncExternalStore:Qe,useId:Ut};Yl.useCacheRefresh=Ot,Yl.useMemoCache=qe,Yl.useHostTransitionStatus=Nt,Yl.useFormState=vt,Yl.useActionState=vt,Yl.useOptimistic=function(e,t){var n=Ge();return null!==Ul?at(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Kl={isMounted:function(e){return!!(e=e._reactInternals)&&h(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Gi(),r=le(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ce(e,r,i))&&(Xi(t,0,i),ue(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Gi(),r=le(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ce(e,r,i))&&(Xi(t,0,i),ue(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gi(),i=le(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ce(e,i,n))&&(Xi(t,0,n),ue(t,e,n))}},Jl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ql=Error(r(461)),$l=!1,ec={dehydrated:null,treeContext:null,retryLane:0},tc=g(null),nc=null,ic=null,rc="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ac=Hr.unstable_scheduleCallback,oc=Hr.unstable_NormalPriority,sc={$$typeof:Qr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lc=ua.S;ua.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===fl){var n=fl=[];ml=0,gl=re(),vl={status:"pending",value:void 0,then:function(e){n.push(e)}}}ml++,t.then(ae,ae)}(0,t),null!==lc&&lc(e,t)};var cc=g(null),uc=!1,hc=!1,dc=!1,pc="function"===typeof WeakSet?WeakSet:Set,fc=null,mc=!1,gc=null,vc=!1,yc=null,_c=8192,bc={getCacheForType:function(e){var t=kn(sc),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},xc=0,Sc=1,wc=2,Mc=3,Ec=4;if("function"===typeof Symbol&&Symbol.for){var Tc=Symbol.for;xc=Tc("selector.component"),Sc=Tc("selector.has_pseudo_class"),wc=Tc("selector.role"),Mc=Tc("selector.test_id"),Ec=Tc("selector.text")}var Cc="function"===typeof WeakMap?WeakMap:Map,Ac=0,Pc=null,Rc=null,Lc=0,kc=0,Ic=null,Dc=!1,Nc=!1,Uc=!1,Oc=0,zc=0,Fc=0,Bc=0,jc=0,Hc=0,Vc=0,Gc=null,Wc=null,Xc=!1,qc=0,Zc=1/0,Yc=null,Kc=null,Jc=!1,Qc=null,$c=0,eu=0,tu=null,nu=0,iu=null;return Br.attemptContinuousHydration=function(e){if(13===e.tag){var t=Y(e,67108864);null!==t&&Xi(t,0,67108864),Fr(e,67108864)}},Br.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Gi(),n=Y(e,t);null!==n&&Xi(n,0,t),Fr(e,t)}},Br.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=_(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-bs(t);e.entanglements[1]|=n,t&=~n}Q(e),0===(6&Ac)&&(Zc=Ps()+500,$(0,!1))}}break;case 13:null!==(t=Y(e,2))&&Xi(t,0,2),Qi(),Fr(e,2)}},Br.batchedUpdates=function(e,t){return e(t)},Br.createComponentSelector=function(e){return{$$typeof:xc,value:e}},Br.createContainer=function(e,t,n,i,r,a,o,s,l,c){return Dr(e,t,!1,null,0,i,a,o,s,l,0,null)},Br.createHasPseudoClassSelector=function(e){return{$$typeof:Sc,value:e}},Br.createHydrationContainer=function(e,t,n,i,r,a,o,s,l,c,u,h,d){return(e=Dr(n,i,!0,e,0,a,s,l,c,u,0,d)).context=Nr(null),n=e.current,(r=le(i=Gi())).callback=void 0!==t&&null!==t?t:null,ce(n,r,i),e.current.lanes=i,T(e,i),Q(e),e},Br.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xr,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},Br.createRoleSelector=function(e){return{$$typeof:wc,value:e}},Br.createTestNameSelector=function(e){return{$$typeof:Mc,value:e}},Br.createTextSelector=function(e){return{$$typeof:Ec,value:e}},Br.defaultOnCaughtError=function(e){console.error(e)},Br.defaultOnRecoverableError=function(e){Jl(e)},Br.defaultOnUncaughtError=function(e){Jl(e)},Br.deferredUpdates=function(e){var t=ua.T,n=Ua();try{return Na(32),ua.T=null,e()}finally{Na(n),ua.T=t}},Br.discreteUpdates=function(e,t,n,i,r){var a=ua.T,o=Ua();try{return Na(2),ua.T=null,e(t,n,i,r)}finally{Na(o),ua.T=a,0===Ac&&(Zc=Ps()+500)}},Br.findAllNodes=Vi,Br.findBoundingRects=function(e,t){if(!Ka)throw Error(r(363));t=Vi(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Qa(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,a=i+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,p=d+c.height;if(i>=u&&o>=d&&a<=h&&s<=p){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||p<o||d>s)){d>o&&(c.height+=d-o,c.y=o),p<s&&(c.height=s-d),e.splice(t,1);break}if(!(o!==d||n.height!==c.height||h<i||u>a)){u>i&&(c.width+=u-i,c.x=i),h<a&&(c.width=a-u),e.splice(t,1);break}}return e},Br.findHostInstance=Ur,Br.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=p(e))?m(e):null)?null:ga(e.stateNode)},Br.findHostInstanceWithWarning=function(e){return Ur(e)},Br.flushPassiveEffects=gr,Br.flushSyncFromReconciler=function(e){var t=Ac;Ac|=1;var n=ua.T,i=Ua();try{if(Na(2),ua.T=null,e)return e()}finally{Na(i),ua.T=n,0===(6&(Ac=t))&&$(0,!1)}},Br.flushSyncWork=Qi,Br.focusWithin=function(e,t){if(!Ka)throw Error(r(363));for(t=Hi(e=Fi(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!eo(n)){if((5===i||26===i||27===i)&&no(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},Br.getFindAllNodesFailureDescription=function(e,t){if(!Ka)throw Error(r(363));var n=0,i=[];e=[Fi(e),0];for(var a=0;a<e.length;){var o=e[a++],s=o.tag,l=e[a++],c=t[l];if((5!==s&&26!==s&&27!==s||!eo(o))&&(Bi(o,c)&&(i.push(ji(c)),++l>n&&(n=l)),l<t.length))for(o=o.child;null!==o;)e.push(o,l),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(ji(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},Br.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return ga(e.child.stateNode);default:return e.child.stateNode}},Br.injectIntoDevTools=function(){var e={bundleType:0,version:pa,rendererPackageName:fa,currentDispatcherRef:ua,findFiberByHostInstance:Ia,reconcilerVersion:"19.0.0"};if(null!==ma&&(e.rendererConfig=ma),"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Us=t.inject(e),Os=t}catch(n){}e=!!t.checkDCE}}return e},Br.isAlreadyRendering=function(){return!1},Br.observeVisibleRects=function(e,t,n,i){if(!Ka)throw Error(r(363));e=Vi(e,t);var a=io(e,n,i).disconnect;return{disconnect:function(){a()}}},Br.shouldError=function(){return null},Br.shouldSuspend=function(){return!1},Br.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(r(476));var o=Dt(e).queue;It(e,o,t,Wa,null===n?i:function(){var t=Dt(e).next.queue;return jt(e,t,{},Gi()),n(a)})},Br.updateContainer=function(e,t,n,i){var r=t.current,a=Gi();return Or(r,a,e,t,n,i),a},Br.updateContainerSync=function(e,t,n,i){return 0===t.tag&&gr(),Or(t.current,2,e,t,n,i),2},Br},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},513:(e,t,n)=>{"use strict";e.exports=n(388)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var i=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):"script"===n&&o.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},717:(e,t,n)=>{"use strict";var i=n(43),r=n(461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,s=i.useRef,l=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,o=e,e=i(e),void 0!==r&&d.hasValue){var t=d.value;if(r(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=i(e);return void 0!==r&&r(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,i,r]);var p=o(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},784:(e,t,n)=>{"use strict";e.exports=n(179)},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var a in i={},t)"key"!==a&&(i[a]=t[a]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function S(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,M||(M=!0,w());else{var t=i(u);null!==t&&k(S,t.startTime-e)}}var w,M=!1,E=-1,T=5,C=-1;function A(){return!!v||!(t.unstable_now()-C<T)}function P(){if(v=!1,M){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(E),E=-1),f=!0;var a=p;try{t:{for(x(e),d=i(c);null!==d&&!(d.expirationTime>e&&A());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){d.callback=s,x(e),n=!0;break t}d===i(c)&&r(c),x(e)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&k(S,l.startTime-e),n=!1}}break e}finally{d=null,p=a,f=!1}n=void 0}}finally{n?w():M=!1}}}if("function"===typeof b)w=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=P,w=function(){L.postMessage(null)}}else w=function(){y(P,0)};function k(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(_(E),E=-1):g=!0,k(S,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,M||(M=!0,w()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>i[e]);return o.default=()=>i,n.d(a,o),a}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".cbd1b867.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="front-end:";n.l=(i,r,a,o)=>{if(e[i])e[i].push(r);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=i),e[i]=[r];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,r[1](s)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,a,o=i[0],s=i[1],l=i[2],c=0;if(o.some(t=>0!==e[t])){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkfront_end=self.webpackChunkfront_end||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>zn,AddEquation:()=>nn,AddOperation:()=>In,AdditiveAnimationBlendMode:()=>xr,AdditiveBlending:()=>Qt,AgXToneMapping:()=>Bn,AlphaFormat:()=>Si,AlwaysCompare:()=>aa,AlwaysDepth:()=>Mn,AlwaysStencilFunc:()=>Jr,AmbientLight:()=>Mp,AnimationAction:()=>gf,AnimationClip:()=>Xd,AnimationLoader:()=>tp,AnimationMixer:()=>yf,AnimationObjectGroup:()=>mf,AnimationUtils:()=>Id,ArcCurve:()=>ih,ArrayCamera:()=>Wp,ArrowHelper:()=>_m,AttachedBindMode:()=>Hn,Audio:()=>$p,AudioAnalyser:()=>of,AudioContext:()=>Fp,AudioListener:()=>Qp,AudioLoader:()=>Bp,AxesHelper:()=>bm,BackSide:()=>Zt,BasicDepthPacking:()=>Er,BasicShadowMap:()=>Vt,BatchedMesh:()=>pu,Bone:()=>Mc,BooleanKeyframeTrack:()=>Fd,Box2:()=>Nf,Box3:()=>go,Box3Helper:()=>fm,BoxGeometry:()=>El,BoxHelper:()=>pm,BufferAttribute:()=>Zs,BufferGeometry:()=>hl,BufferGeometryLoader:()=>Lp,ByteType:()=>ui,Cache:()=>Zd,Camera:()=>Ll,CameraHelper:()=>um,CanvasTexture:()=>ju,CapsuleGeometry:()=>Gu,CatmullRomCurve3:()=>ch,CineonToneMapping:()=>On,CircleGeometry:()=>Wu,ClampToEdgeWrapping:()=>Jn,Clock:()=>Xp,Color:()=>Ns,ColorKeyframeTrack:()=>Bd,ColorManagement:()=>Ja,CompressedArrayTexture:()=>Fu,CompressedCubeTexture:()=>Bu,CompressedTexture:()=>zu,CompressedTextureLoader:()=>np,ConeGeometry:()=>qu,ConstantAlphaFactor:()=>xn,ConstantColorFactor:()=>_n,Controls:()=>Sm,CubeCamera:()=>Ol,CubeReflectionMapping:()=>Wn,CubeRefractionMapping:()=>Xn,CubeTexture:()=>zl,CubeTextureLoader:()=>ap,CubeUVReflectionMapping:()=>Yn,CubicBezierCurve:()=>ph,CubicBezierCurve3:()=>fh,CubicInterpolant:()=>Nd,CullFaceBack:()=>Bt,CullFaceFront:()=>jt,CullFaceFrontBack:()=>Ht,CullFaceNone:()=>Ft,Curve:()=>th,CurvePath:()=>xh,CustomBlending:()=>tn,CustomToneMapping:()=>Fn,CylinderGeometry:()=>Xu,Cylindrical:()=>kf,Data3DTexture:()=>fo,DataArrayTexture:()=>ho,DataTexture:()=>Ec,DataTextureLoader:()=>op,DataUtils:()=>Gs,DecrementStencilOp:()=>Br,DecrementWrapStencilOp:()=>Hr,DefaultLoadingManager:()=>Kd,DepthFormat:()=>Ei,DepthStencilFormat:()=>Ti,DepthTexture:()=>Hu,DetachedBindMode:()=>Vn,DirectionalLight:()=>wp,DirectionalLightHelper:()=>sm,DiscreteInterpolant:()=>Od,DodecahedronGeometry:()=>Yu,DoubleSide:()=>Yt,DstAlphaFactor:()=>fn,DstColorFactor:()=>gn,DynamicCopyUsage:()=>pa,DynamicDrawUsage:()=>sa,DynamicReadUsage:()=>ua,EdgesGeometry:()=>eh,EllipseCurve:()=>nh,EqualCompare:()=>ea,EqualDepth:()=>Cn,EqualStencilFunc:()=>Xr,EquirectangularReflectionMapping:()=>qn,EquirectangularRefractionMapping:()=>Zn,Euler:()=>$o,EventDispatcher:()=>Sa,ExternalTexture:()=>Vu,ExtrudeGeometry:()=>ed,FileLoader:()=>ep,Float16BufferAttribute:()=>nl,Float32BufferAttribute:()=>il,FloatType:()=>mi,Fog:()=>Gl,FogExp2:()=>Vl,FramebufferTexture:()=>Ou,FrontSide:()=>qt,Frustum:()=>Wc,FrustumArray:()=>Zc,GLBufferAttribute:()=>Mf,GLSL1:()=>ma,GLSL3:()=>ga,GreaterCompare:()=>na,GreaterDepth:()=>Pn,GreaterEqualCompare:()=>ra,GreaterEqualDepth:()=>An,GreaterEqualStencilFunc:()=>Kr,GreaterStencilFunc:()=>Zr,GridHelper:()=>nm,Group:()=>Bl,HalfFloatType:()=>gi,HemisphereLight:()=>cp,HemisphereLightHelper:()=>tm,IcosahedronGeometry:()=>nd,ImageBitmapLoader:()=>Op,ImageLoader:()=>rp,ImageUtils:()=>to,IncrementStencilOp:()=>Fr,IncrementWrapStencilOp:()=>jr,InstancedBufferAttribute:()=>Pc,InstancedBufferGeometry:()=>Rp,InstancedInterleavedBuffer:()=>wf,InstancedMesh:()=>Oc,Int16BufferAttribute:()=>Qs,Int32BufferAttribute:()=>el,Int8BufferAttribute:()=>Ys,IntType:()=>pi,InterleavedBuffer:()=>Xl,InterleavedBufferAttribute:()=>Zl,Interpolant:()=>Dd,InterpolateDiscrete:()=>fr,InterpolateLinear:()=>mr,InterpolateSmooth:()=>gr,InterpolationSamplingMode:()=>xa,InterpolationSamplingType:()=>ba,InvertStencilOp:()=>Vr,KeepStencilOp:()=>Or,KeyframeTrack:()=>zd,LOD:()=>pc,LatheGeometry:()=>id,Layers:()=>es,LessCompare:()=>$r,LessDepth:()=>En,LessEqualCompare:()=>ta,LessEqualDepth:()=>Tn,LessEqualStencilFunc:()=>qr,LessStencilFunc:()=>Wr,Light:()=>lp,LightProbe:()=>Cp,Line:()=>Su,Line3:()=>Vf,LineBasicMaterial:()=>fu,LineCurve:()=>mh,LineCurve3:()=>gh,LineDashedMaterial:()=>Cd,LineLoop:()=>Cu,LineSegments:()=>Tu,LinearFilter:()=>ri,LinearInterpolant:()=>Ud,LinearMipMapLinearFilter:()=>li,LinearMipMapNearestFilter:()=>oi,LinearMipmapLinearFilter:()=>si,LinearMipmapNearestFilter:()=>ai,LinearSRGBColorSpace:()=>Ir,LinearToneMapping:()=>Nn,LinearTransfer:()=>Dr,Loader:()=>Jd,LoaderUtils:()=>Pp,LoadingManager:()=>Yd,LoopOnce:()=>hr,LoopPingPong:()=>pr,LoopRepeat:()=>dr,MOUSE:()=>Ot,Material:()=>zs,MaterialLoader:()=>Ap,MathUtils:()=>Ia,Matrix2:()=>If,Matrix3:()=>Fa,Matrix4:()=>Vo,MaxEquation:()=>sn,Mesh:()=>wl,MeshBasicMaterial:()=>Fs,MeshDepthMaterial:()=>Md,MeshDistanceMaterial:()=>Ed,MeshLambertMaterial:()=>wd,MeshMatcapMaterial:()=>Td,MeshNormalMaterial:()=>Sd,MeshPhongMaterial:()=>bd,MeshPhysicalMaterial:()=>_d,MeshStandardMaterial:()=>yd,MeshToonMaterial:()=>xd,MinEquation:()=>on,MirroredRepeatWrapping:()=>Qn,MixOperation:()=>kn,MultiplyBlending:()=>en,MultiplyOperation:()=>Ln,NearestFilter:()=>$n,NearestMipMapLinearFilter:()=>ii,NearestMipMapNearestFilter:()=>ti,NearestMipmapLinearFilter:()=>ni,NearestMipmapNearestFilter:()=>ei,NeutralToneMapping:()=>jn,NeverCompare:()=>Qr,NeverDepth:()=>wn,NeverStencilFunc:()=>Gr,NoBlending:()=>Kt,NoColorSpace:()=>Lr,NoToneMapping:()=>Dn,NormalAnimationBlendMode:()=>br,NormalBlending:()=>Jt,NotEqualCompare:()=>ia,NotEqualDepth:()=>Rn,NotEqualStencilFunc:()=>Yr,NumberKeyframeTrack:()=>jd,Object3D:()=>gs,ObjectLoader:()=>kp,ObjectSpaceNormalMap:()=>Rr,OctahedronGeometry:()=>rd,OneFactor:()=>cn,OneMinusConstantAlphaFactor:()=>Sn,OneMinusConstantColorFactor:()=>bn,OneMinusDstAlphaFactor:()=>mn,OneMinusDstColorFactor:()=>vn,OneMinusSrcAlphaFactor:()=>pn,OneMinusSrcColorFactor:()=>hn,OrthographicCamera:()=>xp,PCFShadowMap:()=>Gt,PCFSoftShadowMap:()=>Wt,PMREMGenerator:()=>Jm,Path:()=>Sh,PerspectiveCamera:()=>Nl,Plane:()=>jc,PlaneGeometry:()=>ad,PlaneHelper:()=>mm,PointLight:()=>bp,PointLightHelper:()=>Jf,Points:()=>Iu,PointsMaterial:()=>Au,PolarGridHelper:()=>im,PolyhedronGeometry:()=>Zu,PositionalAudio:()=>af,PropertyBinding:()=>ff,PropertyMixer:()=>sf,QuadraticBezierCurve:()=>vh,QuadraticBezierCurve3:()=>yh,Quaternion:()=>Na,QuaternionKeyframeTrack:()=>Vd,QuaternionLinearInterpolant:()=>Hd,RED_GREEN_RGTC2_Format:()=>cr,RED_RGTC1_Format:()=>sr,REVISION:()=>Ut,RGBADepthPacking:()=>Tr,RGBAFormat:()=>Mi,RGBAIntegerFormat:()=>ki,RGBA_ASTC_10x10_Format:()=>tr,RGBA_ASTC_10x5_Format:()=>Qi,RGBA_ASTC_10x6_Format:()=>$i,RGBA_ASTC_10x8_Format:()=>er,RGBA_ASTC_12x10_Format:()=>nr,RGBA_ASTC_12x12_Format:()=>ir,RGBA_ASTC_4x4_Format:()=>Gi,RGBA_ASTC_5x4_Format:()=>Wi,RGBA_ASTC_5x5_Format:()=>Xi,RGBA_ASTC_6x5_Format:()=>qi,RGBA_ASTC_6x6_Format:()=>Zi,RGBA_ASTC_8x5_Format:()=>Yi,RGBA_ASTC_8x6_Format:()=>Ki,RGBA_ASTC_8x8_Format:()=>Ji,RGBA_BPTC_Format:()=>rr,RGBA_ETC2_EAC_Format:()=>Vi,RGBA_PVRTC_2BPPV1_Format:()=>Bi,RGBA_PVRTC_4BPPV1_Format:()=>Fi,RGBA_S3TC_DXT1_Format:()=>Di,RGBA_S3TC_DXT3_Format:()=>Ni,RGBA_S3TC_DXT5_Format:()=>Ui,RGBDepthPacking:()=>Cr,RGBFormat:()=>wi,RGBIntegerFormat:()=>Li,RGB_BPTC_SIGNED_Format:()=>ar,RGB_BPTC_UNSIGNED_Format:()=>or,RGB_ETC1_Format:()=>ji,RGB_ETC2_Format:()=>Hi,RGB_PVRTC_2BPPV1_Format:()=>zi,RGB_PVRTC_4BPPV1_Format:()=>Oi,RGB_S3TC_DXT1_Format:()=>Ii,RGDepthPacking:()=>Ar,RGFormat:()=>Pi,RGIntegerFormat:()=>Ri,RawShaderMaterial:()=>vd,Ray:()=>Ho,Raycaster:()=>Tf,RectAreaLight:()=>Ep,RedFormat:()=>Ci,RedIntegerFormat:()=>Ai,ReinhardToneMapping:()=>Un,RenderTarget:()=>co,RenderTarget3D:()=>_f,RepeatWrapping:()=>Kn,ReplaceStencilOp:()=>zr,ReverseSubtractEquation:()=>an,RingGeometry:()=>od,SIGNED_RED_GREEN_RGTC2_Format:()=>ur,SIGNED_RED_RGTC1_Format:()=>lr,SRGBColorSpace:()=>kr,SRGBTransfer:()=>Nr,Scene:()=>Wl,ShaderChunk:()=>Cm,ShaderLib:()=>Pm,ShaderMaterial:()=>Rl,ShadowMaterial:()=>gd,Shape:()=>wh,ShapeGeometry:()=>sd,ShapePath:()=>xm,ShapeUtils:()=>Jh,ShortType:()=>hi,Skeleton:()=>Ac,SkeletonHelper:()=>Yf,SkinnedMesh:()=>wc,Source:()=>io,Sphere:()=>Do,SphereGeometry:()=>ld,Spherical:()=>Lf,SphericalHarmonics3:()=>Tp,SplineCurve:()=>_h,SpotLight:()=>mp,SpotLightHelper:()=>Wf,Sprite:()=>cc,SpriteMaterial:()=>Yl,SrcAlphaFactor:()=>dn,SrcAlphaSaturateFactor:()=>yn,SrcColorFactor:()=>un,StaticCopyUsage:()=>da,StaticDrawUsage:()=>oa,StaticReadUsage:()=>ca,StereoCamera:()=>Gp,StreamCopyUsage:()=>fa,StreamDrawUsage:()=>la,StreamReadUsage:()=>ha,StringKeyframeTrack:()=>Gd,SubtractEquation:()=>rn,SubtractiveBlending:()=>$t,TOUCH:()=>zt,TangentSpaceNormalMap:()=>Pr,TetrahedronGeometry:()=>cd,Texture:()=>so,TextureLoader:()=>sp,TextureUtils:()=>Mm,Timer:()=>Pf,TimestampQuery:()=>_a,TorusGeometry:()=>ud,TorusKnotGeometry:()=>hd,Triangle:()=>Rs,TriangleFanDrawMode:()=>Mr,TriangleStripDrawMode:()=>wr,TrianglesDrawMode:()=>Sr,TubeGeometry:()=>dd,UVMapping:()=>Gn,Uint16BufferAttribute:()=>$s,Uint32BufferAttribute:()=>tl,Uint8BufferAttribute:()=>Ks,Uint8ClampedBufferAttribute:()=>Js,Uniform:()=>bf,UniformsGroup:()=>Sf,UniformsLib:()=>Am,UniformsUtils:()=>Pl,UnsignedByteType:()=>ci,UnsignedInt101111Type:()=>xi,UnsignedInt248Type:()=>_i,UnsignedInt5999Type:()=>bi,UnsignedIntType:()=>fi,UnsignedShort4444Type:()=>vi,UnsignedShort5551Type:()=>yi,UnsignedShortType:()=>di,VSMShadowMap:()=>Xt,Vector2:()=>Da,Vector3:()=>Ua,Vector4:()=>lo,VectorKeyframeTrack:()=>Wd,VideoFrameTexture:()=>Uu,VideoTexture:()=>Nu,WebGL3DRenderTarget:()=>mo,WebGLArrayRenderTarget:()=>po,WebGLCoordinateSystem:()=>va,WebGLCubeRenderTarget:()=>Fl,WebGLRenderTarget:()=>uo,WebGLRenderer:()=>oy,WebGLUtils:()=>$v,WebGPUCoordinateSystem:()=>ya,WebXRController:()=>Hl,WireframeGeometry:()=>pd,WrapAroundEnding:()=>_r,ZeroCurvatureEnding:()=>vr,ZeroFactor:()=>ln,ZeroSlopeEnding:()=>yr,ZeroStencilOp:()=>Ur,createCanvasElement:()=>Wa});var t=n(43),i=n.t(t,2),r=n(391);function a(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=["sri"],d=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function y(){return E(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return S("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:w(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function _(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function M(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function E(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:a=!1}=i,o=r.history,s="POP",l=null,c=h();function h(){return(o.state||{idx:null}).idx}function d(){s="POP";let e=h(),t=null==e?null:e-c;c=e,l&&l({action:s,location:f.location,delta:t})}function p(e){return T(e)}null==c&&(c=0,o.replaceState(u(u({},o.state),{},{idx:c}),""));let f={get action(){return s},get location(){return e(r,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(v,d),l=e,()=>{r.removeEventListener(v,d),l=null}},createHref:e=>t(r,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let i=S(f.location,e,t);n&&n(i,e),c=h()+1;let u=x(i,c),d=f.createHref(i);try{o.pushState(u,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;r.location.assign(d)}a&&l&&l({action:s,location:f.location,delta:1})},replace:function(e,t){s="REPLACE";let i=S(f.location,e,t);n&&n(i,e),c=h();let r=x(i,c),u=f.createHref(i);o.replaceState(r,"",u),a&&l&&l({action:s,location:f.location,delta:0})},go:e=>o.go(e)};return f}function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),_(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:w(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,n,i){let r=V(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;let a=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let s=0;null==o&&s<a.length;++s){let e=H(r);o=F(a[s],e,i)}return o}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&o)return;_(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=Z([i,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(_(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:z(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of R(e.path))a(e,t,!0,i);else a(e,t)}),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===i.length)return r?[a,""]:[a];let o=R(i.join("/")),s=[];return s.push(...o.map(e=>""===e?a:[a,e].join("/"))),r&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var L=/^:[\w-]+$/,k=3,I=2,D=1,N=10,U=-2,O=e=>"*"===e;function z(e,t){let n=e.split("/"),i=n.length;return n.some(O)&&(i+=U),t&&(i+=I),n.filter(e=>!O(e)).reduce((e,t)=>e+(L.test(t)?k:""===t?D:N),i)}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},a="/",o=[];for(let s=0;s<i.length;++s){let e=i[s],l=s===i.length-1,c="/"===a?t:t.slice(a.length)||"/",u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:Z([a,u.pathname]),pathnameBase:Y(Z([a,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(a=Z([a,u.pathnameBase]))}return o}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=j(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=s[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:o,pattern:e}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function G(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function X(e){let t=W(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=M(e):(i=u({},e),_(!i.pathname||!i.pathname.includes("?"),G("?","pathname","search",i)),_(!i.pathname||!i.pathname.includes("#"),G("#","pathname","hash",i)),_(!i.search||!i.search.includes("#"),G("#","search","hash",i)));let a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?M(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:K(i),hash:J(r)}}(i,a),c=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}var Z=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var $=["POST","PUT","PATCH","DELETE"],ee=(new Set($),["GET",...$]);new Set(ee),Symbol("ResetLoaderData");var te=t.createContext(null);te.displayName="DataRouter";var ne=t.createContext(null);ne.displayName="DataRouterState";var ie=t.createContext(!1);var re=t.createContext({isTransitioning:!1});re.displayName="ViewTransition";var ae=t.createContext(new Map);ae.displayName="Fetchers";var oe=t.createContext(null);oe.displayName="Await";var se=t.createContext(null);se.displayName="Navigation";var le=t.createContext(null);le.displayName="Location";var ce=t.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=t.createContext(null);ue.displayName="RouteError";function he(){return null!=t.useContext(le)}function de(){return _(he(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(le).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){t.useContext(se).static||t.useLayoutEffect(e)}function me(){let{isDataRoute:e}=t.useContext(ce);return e?function(){let{router:e}=Me("useNavigate"),n=Te("useNavigate"),i=t.useRef(!1);fe(()=>{i.current=!0});let r=t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(i.current,pe),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,u({fromRouteId:n},r)))},[e,n]);return r}():function(){_(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(te),{basename:n,navigator:i}=t.useContext(se),{matches:r}=t.useContext(ce),{pathname:a}=de(),o=JSON.stringify(X(r)),s=t.useRef(!1);fe(()=>{s.current=!0});let l=t.useCallback(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(s.current,pe),!s.current)return;if("number"===typeof t)return void i.go(t);let l=q(t,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:Z([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)},[n,i,o,a,e]);return l}()}t.createContext(null);function ge(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(ce),{pathname:r}=de(),a=JSON.stringify(X(i));return t.useMemo(()=>q(e,JSON.parse(a),r,"path"===n),[e,a,r,n])}function ve(e,n,i,r,a){_(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=t.useContext(se),{matches:s}=t.useContext(ce),l=s[s.length-1],c=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Pe(h,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(h,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,m=de();if(n){var g;let e="string"===typeof n?M(n):n;_("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=m;let v=f.pathname||"/",y=v;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=C(e,{pathname:y});b(p||null!=x,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),b(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Se(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Z([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Z([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,i,r,a);return n&&S?t.createElement(le.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},S):S}function ye(){let e=Ce(),n=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:o},"ErrorBoundary")," or"," ",t.createElement("code",{style:o},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:a},i):null,s)}var _e=t.createElement(ye,null),be=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(ce.Provider,{value:this.props.routeContext},t.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:n,match:i,children:r}=e,a=t.useContext(te);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(ce.Provider,{value:n},r)}function Se(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let a=e,o=null===i||void 0===i?void 0:i.errors;if(null!=o){let e=a.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));_(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,l=-1;if(i)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=i,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){s=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight((e,c,u)=>{let h,d=!1,p=null,f=null;i&&(h=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||_e,s&&(l<0&&0===u?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===u&&(d=!0,f=c.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,u+1)),g=()=>{let n;return n=h?p:d?f:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(xe,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=i},children:n})};return i&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?t.createElement(be,{location:i.location,revalidation:i.revalidation,component:p,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):g()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(e){let n=t.useContext(te);return _(n,we(e)),n}function Ee(e){let n=t.useContext(ne);return _(n,we(e)),n}function Te(e){let n=function(e){let n=t.useContext(ce);return _(n,we(e)),n}(e),i=n.matches[n.matches.length-1];return _(i.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),i.route.id}function Ce(){var e;let n=t.useContext(ue),i=Ee("useRouteError"),r=Te("useRouteError");return void 0!==n?n:null===(e=i.errors)||void 0===e?void 0:e[r]}var Ae={};function Pe(e,t,n){t||Ae[e]||(Ae[e]=!0,b(!1,n))}var Re={};function Le(e,t){e||Re[t]||(Re[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:i,unstable_onError:r}=e;return ve(t,void 0,i,r,n)});function ke(e){_(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(e){let{basename:n="/",children:i=null,location:r,navigationType:a="POP",navigator:o,static:s=!1}=e;_(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:o,static:s,future:{}}),[l,o,s]);"string"===typeof r&&(r=M(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,m=t.useMemo(()=>{let e=V(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:p,key:f},navigationType:a}},[l,u,h,d,p,f,a]);return b(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:t.createElement(se.Provider,{value:c},t.createElement(le.Provider,{children:i,value:m}))}function De(e){let{children:t,location:n}=e;return ve(Ne(t),n)}t.Component;function Ne(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let a=[...n,r];if(e.type===t.Fragment)return void i.push.apply(i,Ne(e.props.children,a));_(e.type===ke,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),_(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ne(e.props.children,a)),i.push(o)}),i}var Ue="get",Oe="application/x-www-form-urlencoded";function ze(e){return null!=e&&"string"===typeof e.tagName}var Fe=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function je(e){return null==e||Be.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Oe,'"')),null)}function He(e,t){let n,i,r,a,o;if(ze(s=e)&&"form"===s.tagName.toLowerCase()){let o=e.getAttribute("action");i=o?V(o,t):null,n=e.getAttribute("method")||Ue,r=je(e.getAttribute("enctype"))||Oe,a=new FormData(e)}else if(function(e){return ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(i=s?V(s,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Ue,r=je(e.getAttribute("formenctype"))||je(o.getAttribute("enctype"))||Oe,a=new FormData(o,e),!function(){if(null===Fe)try{new FormData(document.createElement("form"),0),Fe=!1}catch(e){Fe=!0}return Fe}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,i)}}else{if(ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ue,i=null,r=Oe,o=e}var s;return a&&"text/plain"===r&&(o=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ve(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===V(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function We(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xe(e){return null!=e&&"string"===typeof e.page}function qe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ze(e,t,n,i,r,a){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>o(e,t)||s(e,t)):"data"===a?t.filter((t,a)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Ye(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function Ke(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!Xe(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(a)||(n.add(a),e.push({key:a,link:r})),e},[])}function Je(e,t){return"lazy"===e.mode&&!0===t}function Qe(){let e=t.useContext(te);return Ve(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $e(){let e=t.useContext(ne);return Ve(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=t.createContext(void 0);function tt(){let e=t.useContext(et);return Ve(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function it(e,t,n){if(n&&!st)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}et.displayName="FrameworkContext";function rt(e){let{page:n}=e,i=a(e,d),{router:r}=Qe(),o=t.useMemo(()=>C(r.routes,n,r.basename),[r.routes,n,r.basename]);return o?t.createElement(ot,u({page:n,matches:o},i)):null}function at(e){let{manifest:n,routeModules:i}=tt(),[r,a]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return Ke((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await We(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(qe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,n,i).then(e=>{t||a(e)}),()=>{t=!0}},[e,n,i]),r}function ot(e){let{page:n,matches:i}=e,r=a(e,p),o=de(),{manifest:s,routeModules:l}=tt(),{basename:c}=Qe(),{loaderData:h,matches:d}=$e(),f=t.useMemo(()=>Ze(n,i,d,s,o,"data"),[n,i,d,s,o]),m=t.useMemo(()=>Ze(n,i,d,s,o,"assets"),[n,i,d,s,o]),g=t.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{var i;let r=s.routes[n.route.id];r&&r.hasLoader&&(!f.some(e=>e.route.id===n.route.id)&&n.route.id in h&&null!==(i=l[n.route.id])&&void 0!==i&&i.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=Ge(n,c,"data");return t&&e.size>0&&r.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[c,h,o,s,f,i,n,l]),v=t.useMemo(()=>Ye(m,s),[m,s]),y=at(m);return t.createElement(t.Fragment,null,g.map(e=>t.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},r))),v.map(e=>t.createElement("link",u({key:e,rel:"modulepreload",href:e},r))),y.map(e=>{let{key:n,link:i}=e;return t.createElement("link",u({key:n,nonce:r.nonce},i))}))}var st=!1;function lt(e){let{manifest:n,serverHandoffString:i,isSpaMode:r,renderMeta:o,routeDiscovery:s,ssr:l}=tt(),{router:c,static:d,staticContext:p}=Qe(),{matches:f}=$e(),m=t.useContext(ie),g=Je(s,l);o&&(o.didRenderScripts=!0);let v=it(f,null,r);t.useEffect(()=>{0},[]);let y=t.useMemo(()=>{var r;if(m)return null;let o=p?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=d?"".concat(null!==n.hmr&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let i="route".concat(t),r=n.routes[e.route.id];Ve(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:o,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=r,u=[...a?[{module:a,varName:"".concat(i,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(i,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=a(e,h),r=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push("/".concat(o.join("/"))),o.pop();s.forEach(e=>{let n=C(t.routes,e,t.basename);n&&n.forEach(e=>r.add(e.route.id))});let l=[...r].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return u(u({},i),{},{routes:l,sri:!!n||void 0})}(n,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),t.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),_=st||m?[]:(n.entry.imports.concat(Ye(v,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let x="object"===typeof n.sri?n.sri:{};return Le(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),st||m?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),_.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),y)}function ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function ut(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let r,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(n))return t.createElement(ht,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(ht,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function ht(e){var n;let{title:i,renderScripts:r,isOutsideRemixApp:a,children:o}=e,{routeModules:s}=tt();return null!==s.root&&void 0!==n&&n.Layout&&!a?o:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,i)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?t.createElement(lt,null):null)))}var dt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{dt&&(window.__reactRouterVersion="7.9.3")}catch(fM){}function pt(e){let{basename:n,children:i,window:r}=e,a=t.useRef();null==a.current&&(a.current=y({window:r,v5Compat:!0}));let o=a.current,[s,l]=t.useState({action:o.action,location:o.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>o.listen(c),[o,c]),t.createElement(Ie,{basename:n,children:i,location:s.location,navigationType:s.action,navigator:o})}var ft=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=t.forwardRef(function(e,n){let i,{onClick:r,discover:o="render",prefetch:s="none",relative:l,reloadDocument:c,replace:h,state:d,target:p,to:m,preventScrollReset:g,viewTransition:v}=e,y=a(e,f),{basename:x}=t.useContext(se),S="string"===typeof m&&ft.test(m),M=!1;if("string"===typeof m&&S&&(i=m,dt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=V(t.pathname,x);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:M=!0}catch(fM){b(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let E=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=t.useContext(se),{hash:a,pathname:o,search:s}=ge(e,{relative:n}),l=o;return"/"!==i&&(l="/"===o?i:Z([i,o])),r.createHref({pathname:l,search:s,hash:a})}(m,{relative:l}),[T,C,A]=function(e,n){let i=t.useContext(et),[r,a]=t.useState(!1),[o,s]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=n,p=t.useRef(null);t.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{a(!0)},m=()=>{a(!1),s(!1)};return i?"intent"!==e?[o,p,{}]:[o,p,{onFocus:nt(l,f),onBlur:nt(c,m),onMouseEnter:nt(u,f),onMouseLeave:nt(h,m),onTouchStart:nt(d,f)}]:[!1,p,{}]}(s,y),P=function(e){let{target:n,replace:i,state:r,preventScrollReset:a,relative:o,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),c=de(),u=ge(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:w(c)===w(u);l(e,{replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:s})}},[c,l,u,i,r,n,e,a,o,s])}(m,{replace:h,state:d,target:p,preventScrollReset:g,relative:l,viewTransition:v});let R=t.createElement("a",u(u(u({},y),A),{},{href:i||E,onClick:M||c?r:function(e){r&&r(e),e.defaultPrevented||P(e)},ref:ct(n,C),target:p,"data-discover":S||"render"!==o?void 0:"true"}));return T&&!S?t.createElement(t.Fragment,null,R,t.createElement(rt,{page:E})):R});mt.displayName="Link",t.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:s=!1,style:l,to:c,viewTransition:h,children:d}=e,p=a(e,m),f=ge(c,{relative:p.relative}),g=de(),v=t.useContext(ne),{navigator:y,basename:b}=t.useContext(se),x=null!=v&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(re);_(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yt("useViewTransitionState"),a=ge(e,{relative:n});if(!i.isTransitioning)return!1;let o=V(i.currentLocation.pathname,r)||i.currentLocation.pathname,s=V(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=B(a.pathname,s)||null!=B(a.pathname,o)}(f)&&!0===h,S=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=g.pathname,M=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(w=w.toLowerCase(),M=M?M.toLowerCase():null,S=S.toLowerCase()),M&&b&&(M=V(M,b)||M);const E="/"!==S&&S.endsWith("/")?S.length-1:S.length;let T,C=w===S||!s&&w.startsWith(S)&&"/"===w.charAt(E),A=null!=M&&(M===S||!s&&M.startsWith(S)&&"/"===M.charAt(S.length)),P={isActive:C,isPending:A,isTransitioning:x},R=C?i:void 0;T="function"===typeof o?o(P):[o,C?"active":null,A?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L="function"===typeof l?l(P):l;return t.createElement(mt,u(u({},p),{},{"aria-current":R,className:T,ref:n,style:L,to:c,viewTransition:h}),"function"===typeof d?d(P):d)}).displayName="NavLink";var gt=t.forwardRef((e,n)=>{let{discover:i="render",fetcherKey:r,navigate:o,reloadDocument:s,replace:l,state:c,method:h=Ue,action:d,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:v}=e,y=a(e,g),b=xt(),x=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(se),r=t.useContext(ce);_(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o=u({},ge(e||".",{relative:n})),s=de();if(null==e){o.search=s.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(o.pathname="/"===o.pathname?i:Z([i,o.pathname]));return w(o)}(d,{relative:f}),S="get"===h.toLowerCase()?"get":"post",M="string"===typeof d&&ft.test(d);return t.createElement("form",u(u({ref:n,method:S,action:x,onSubmit:s?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||h;b(t||e.currentTarget,{fetcherKey:r,method:n,navigate:o,replace:l,state:c,relative:f,preventScrollReset:m,viewTransition:v})}},y),{},{"data-discover":M||"render"!==i?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let n=t.useContext(te);return _(n,vt(e)),n}gt.displayName="Form";var _t=0,bt=()=>"__".concat(String(++_t),"__");function xt(){let{router:e}=yt("useSubmit"),{basename:n}=t.useContext(se),i=Te("useRouteId");return t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:o,encType:s,formData:l,body:c}=He(t,n);if(!1===r.navigate){let t=r.fetcherKey||bt();await e.fetch(t,i,r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||s,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||s,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,n,i])}const St=n.p+"static/media/axolotl.f65c0b804b3c5f53fa81.png",wt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Et={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tt=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ct=(0,t.forwardRef)((e,n)=>{let{color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:h}=e,d=a(e,Tt);return(0,t.createElement)("svg",u(u(u({ref:n},Et),{},{width:r,height:r,stroke:i,strokeWidth:s?24*Number(o)/Number(r):o,className:Mt("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...h.map(e=>{let[n,i]=e;return(0,t.createElement)(n,i)}),...Array.isArray(c)?c:[c]])}),At=["className"],Pt=(e,n)=>{const i=(0,t.forwardRef)((i,r)=>{let{className:o}=i,s=a(i,At);return(0,t.createElement)(Ct,u({ref:r,iconNode:n,className:Mt("lucide-".concat((l=wt(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),o)},s));var l});return i.displayName=wt(e),i},Rt=Pt("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var Lt=n(579);const kt=function(){const e=de(),t="/watch"===e.pathname,n="/simulate"===e.pathname;return(0,Lt.jsxs)("div",{className:"bg-violet-800 h-20 flex flex-row justify-between items-center px-4",children:[(0,Lt.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,Lt.jsx)(mt,{to:"/",children:(0,Lt.jsx)("img",{src:St,className:"h-28 w-auto mt-8",alt:"Axolotl"})}),(0,Lt.jsx)("p",{className:"text-6xl text-white font-bebas mt-2",children:"Space Axolotls"})]}),(0,Lt.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Lt.jsx)(mt,{to:"/watch",onClick:e=>t&&e.preventDefault(),className:"flex items-center justify-center \n                          bg-gradient-to-br from-sky-400 to-blue-600 hover:opacity-70 text-xl font-bold px-6 rounded-lg transition duration-300 text-white \n                ".concat(t?"h-10 opacity-90 cursor-default pointer-events-none":"hover:bg-gray-100 h-14"),children:"Orbit Viewer"}),(0,Lt.jsx)(mt,{to:"/simulate",onClick:e=>n&&e.preventDefault(),className:"flex items-center justify-center \n                        bg-gradient-to-tl from-sky-400 to-blue-600 hover:opacity-70 text-xl font-bold px-6 rounded-lg transition duration-300 text-white\n              ".concat(n?"h-10 opacity-90 cursor-default pointer-events-none":"hover:bg-gray-100 h-14"),children:"Impact Simulation"}),(0,Lt.jsx)("a",{href:"https://github.com/gonrfernando/Meteor-Madness-Space-Axolotls",target:"_blank",rel:"noopener noreferrer",className:" bg-lime-600 flex items-center gap-2 border-2 border-white text-white hover:bg-white hover:text-indigo-800 px-4 py-2 rounded-lg transition duration-300",children:(0,Lt.jsx)(Rt,{size:20})})]})]})},It=e=>{let{number:t=20}=e;const n=new Array(t).fill(!0);return(0,Lt.jsx)(Lt.Fragment,{children:n.map((e,t)=>(0,Lt.jsx)("span",{className:"animate-meteor-effect absolute top-1/2 left-1/2 h-0.5 w-0.5 rounded-[9999px] bg-slate-500 shadow-[0_0_0_1px_#ffffff10] rotate-[215deg]",style:{top:"".concat(Math.floor(100*Math.random()),"%"),left:"".concat(Math.floor(100*Math.random()),"%"),animationDelay:"".concat(Math.random()*(.8-.2)+.2,"s"),animationDuration:"".concat(Math.floor(8*Math.random()+2),"s")},children:(0,Lt.jsx)("div",{className:"pointer-events-none absolute top-1/2 left-1/2 h-[1px] w-[50px] -translate-y-1/2 bg-gradient-to-r from-slate-500 to-transparent"})},t))})},Dt=(n.p,n.p+"static/media/meteor-impact.fe7b99efb3a01d3406b3.jpeg"),Nt=n.p+"static/media/orbit-simulation.4c91013f9137ddf17930.jpeg",Ut="180",Ot={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zt={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ft=0,Bt=1,jt=2,Ht=3,Vt=0,Gt=1,Wt=2,Xt=3,qt=0,Zt=1,Yt=2,Kt=0,Jt=1,Qt=2,$t=3,en=4,tn=5,nn=100,rn=101,an=102,on=103,sn=104,ln=200,cn=201,un=202,hn=203,dn=204,pn=205,fn=206,mn=207,gn=208,vn=209,yn=210,_n=211,bn=212,xn=213,Sn=214,wn=0,Mn=1,En=2,Tn=3,Cn=4,An=5,Pn=6,Rn=7,Ln=0,kn=1,In=2,Dn=0,Nn=1,Un=2,On=3,zn=4,Fn=5,Bn=6,jn=7,Hn="attached",Vn="detached",Gn=300,Wn=301,Xn=302,qn=303,Zn=304,Yn=306,Kn=1e3,Jn=1001,Qn=1002,$n=1003,ei=1004,ti=1004,ni=1005,ii=1005,ri=1006,ai=1007,oi=1007,si=1008,li=1008,ci=1009,ui=1010,hi=1011,di=1012,pi=1013,fi=1014,mi=1015,gi=1016,vi=1017,yi=1018,_i=1020,bi=35902,xi=35899,Si=1021,wi=1022,Mi=1023,Ei=1026,Ti=1027,Ci=1028,Ai=1029,Pi=1030,Ri=1031,Li=1032,ki=1033,Ii=33776,Di=33777,Ni=33778,Ui=33779,Oi=35840,zi=35841,Fi=35842,Bi=35843,ji=36196,Hi=37492,Vi=37496,Gi=37808,Wi=37809,Xi=37810,qi=37811,Zi=37812,Yi=37813,Ki=37814,Ji=37815,Qi=37816,$i=37817,er=37818,tr=37819,nr=37820,ir=37821,rr=36492,ar=36494,or=36495,sr=36283,lr=36284,cr=36285,ur=36286,hr=2200,dr=2201,pr=2202,fr=2300,mr=2301,gr=2302,vr=2400,yr=2401,_r=2402,br=2500,xr=2501,Sr=0,wr=1,Mr=2,Er=3200,Tr=3201,Cr=3202,Ar=3203,Pr=0,Rr=1,Lr="",kr="srgb",Ir="srgb-linear",Dr="linear",Nr="srgb",Ur=0,Or=7680,zr=7681,Fr=7682,Br=7683,jr=34055,Hr=34056,Vr=5386,Gr=512,Wr=513,Xr=514,qr=515,Zr=516,Yr=517,Kr=518,Jr=519,Qr=512,$r=513,ea=514,ta=515,na=516,ia=517,ra=518,aa=519,oa=35044,sa=35048,la=35040,ca=35045,ua=35049,ha=35041,da=35046,pa=35050,fa=35042,ma="100",ga="300 es",va=2e3,ya=2001,_a={COMPUTE:"compute",RENDER:"render"},ba={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},xa={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Sa{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const wa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ma=1234567;const Ea=Math.PI/180,Ta=180/Math.PI;function Ca(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(wa[255&e]+wa[e>>8&255]+wa[e>>16&255]+wa[e>>24&255]+"-"+wa[255&t]+wa[t>>8&255]+"-"+wa[t>>16&15|64]+wa[t>>24&255]+"-"+wa[63&n|128]+wa[n>>8&255]+"-"+wa[n>>16&255]+wa[n>>24&255]+wa[255&i]+wa[i>>8&255]+wa[i>>16&255]+wa[i>>24&255]).toLowerCase()}function Aa(e,t,n){return Math.max(t,Math.min(n,e))}function Pa(e,t){return(e%t+t)%t}function Ra(e,t,n){return(1-n)*e+n*t}function La(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ka(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Ia={DEG2RAD:Ea,RAD2DEG:Ta,generateUUID:Ca,clamp:Aa,euclideanModulo:Pa,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Ra,damp:function(e,t,n,i){return Ra(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Pa(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Ma=e);let t=Ma+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ea},radToDeg:function(e){return e*Ta},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+i)/2),u=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),p=a((i-t)/2),f=o((i-t)/2);switch(r){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ka,denormalize:La};class Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Da.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Aa(this.x,e.x,t.x),this.y=Aa(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Aa(this.x,e,t),this.y=Aa(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Aa(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Aa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Na{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,o){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==h||l!==d||c!==p){let e=1-o;const t=s*h+l*d+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,o=Math.sin(o*a)/r}const r=o*n;if(s=s*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-o){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const o=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[a],h=r[a+1],d=r[a+2],p=r[a+3];return e[t]=o*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-o*d,e[t+2]=l*p+c*d+o*h-s*u,e[t+3]=c*p-o*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Aa(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+i*l-r*s,this._y=i*c+a*s+r*o-n*l,this._z=r*c+a*l+n*s-i*o,this._w=a*c-n*o-i*s-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ua{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ua.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(za.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(za.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*i-o*n),c=2*(o*t-r*i),u=2*(r*n-a*t);return this.x=t+s*l+a*u-o*c,this.y=n+s*c+o*l-r*u,this.z=i+s*u+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Aa(this.x,e.x,t.x),this.y=Aa(this.y,e.y,t.y),this.z=Aa(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Aa(this.x,e,t),this.y=Aa(this.y,e,t),this.z=Aa(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Aa(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Oa.copy(this).projectOnVector(e),this.sub(Oa)}reflect(e){return this.sub(Oa.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Aa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Oa=new Ua,za=new Na;class Fa{constructor(e,t,n,i,r,a,o,s,l){Fa.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,o,s,l)}set(e,t,n,i,r,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],x=i[5],S=i[8];return r[0]=a*f+o*v+s*b,r[3]=a*m+o*y+s*x,r[6]=a*g+o*_+s*S,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*x,r[7]=l*g+c*_+u*S,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*x,r[8]=h*g+d*_+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*r*c+n*o*s+i*r*l-i*a*s}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,h=o*s-c*r,d=l*r-a*s,p=t*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(o*n-i*a)*f,e[3]=h*f,e[4]=(c*t-i*s)*f,e[5]=(i*r-o*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,o){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Ba.makeScale(e,t)),this}rotate(e){return this.premultiply(Ba.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ba.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ba=new Fa;function ja(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Ha={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Va(e,t){return new Ha[e](t)}function Ga(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Wa(){const e=Ga("canvas");return e.style.display="block",e}const Xa={};function qa(e){e in Xa||(Xa[e]=!0,console.warn(e))}const Za=(new Fa).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ya=(new Fa).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ka(){const e={enabled:!0,workingColorSpace:Ir,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Nr&&(e.r=Qa(e.r),e.g=Qa(e.g),e.b=Qa(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Nr&&(e.r=$a(e.r),e.g=$a(e.g),e.b=$a(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Lr?Dr:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return qa("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return qa("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[Ir]:{primaries:t,whitePoint:i,transfer:Dr,toXYZ:Za,fromXYZ:Ya,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:kr},outputColorSpaceConfig:{drawingBufferColorSpace:kr}},[kr]:{primaries:t,whitePoint:i,transfer:Nr,toXYZ:Za,fromXYZ:Ya,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:kr}}}),e}const Ja=Ka();function Qa(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function $a(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let eo;class to{static getDataURL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===eo&&(eo=Ga("canvas")),eo.width=e.width,eo.height=e.height;const n=eo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=eo}return t.toDataURL(n)}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ga("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Qa(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Qa(t[e]/255)):t[e]=Qa(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let no=0;class io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:no++}),this.uuid=Ca(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(ro(i[t].image)):e.push(ro(i[t]))}else e=ro(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function ro(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?to.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ao=0;const oo=new Ua;class so extends Sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:so.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jn,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jn,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ri,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:si,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mi,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ci,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:so.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Lr;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ao++}),this.uuid=Ca(),this.name="",this.source=new io(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Da(0,0),this.repeat=new Da(1,1),this.center=new Da(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fa,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(oo).x}get height(){return this.source.getSize(oo).y}get depth(){return this.source.getSize(oo).z}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Texture.setValues(): parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n:console.warn("THREE.Texture.setValues(): property '".concat(t,"' does not exist."))}}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Gn)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kn:e.x=e.x-Math.floor(e.x);break;case Jn:e.x=e.x<0?0:1;break;case Qn:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Kn:e.y=e.y-Math.floor(e.y);break;case Jn:e.y=e.y<0?0:1;break;case Qn:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}so.DEFAULT_IMAGE=null,so.DEFAULT_MAPPING=Gn,so.DEFAULT_ANISOTROPY=1;class lo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;lo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,_=(u+f)/4,b=(p+m)/4;return e>s&&e>v?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):s>v?s<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=y/i,r=b/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=_/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Aa(this.x,e.x,t.x),this.y=Aa(this.y,e.y,t.y),this.z=Aa(this.z,e.z,t.z),this.w=Aa(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Aa(this.x,e,t),this.y=Aa(this.y,e,t),this.z=Aa(this.z,e,t),this.w=Aa(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Aa(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class co extends Sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ri,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new lo(0,0,e,t),this.scissorTest=!1,this.viewport=new lo(0,0,e,t);const i={width:e,height:t,depth:n.depth},r=new so(i);this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={minFilter:ri,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++){this.textures[n].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new io(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uo extends co{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class ho extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$n,this.minFilter=$n,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class po extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new ho(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class fo extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$n,this.minFilter=$n,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mo extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new fo(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(yo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(yo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,yo):yo.fromBufferAttribute(i,t),yo.applyMatrix4(e.matrixWorld),this.expandByPoint(yo);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),_o.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),_o.copy(n.boundingBox)),_o.applyMatrix4(e.matrixWorld),this.union(_o)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,yo),yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(To),Co.subVectors(this.max,To),bo.subVectors(e.a,To),xo.subVectors(e.b,To),So.subVectors(e.c,To),wo.subVectors(xo,bo),Mo.subVectors(So,xo),Eo.subVectors(bo,So);let t=[0,-wo.z,wo.y,0,-Mo.z,Mo.y,0,-Eo.z,Eo.y,wo.z,0,-wo.x,Mo.z,0,-Mo.x,Eo.z,0,-Eo.x,-wo.y,wo.x,0,-Mo.y,Mo.x,0,-Eo.y,Eo.x,0];return!!Ro(t,bo,xo,So,Co)&&(t=[1,0,0,0,1,0,0,0,1],!!Ro(t,bo,xo,So,Co)&&(Ao.crossVectors(wo,Mo),t=[Ao.x,Ao.y,Ao.z],Ro(t,bo,xo,So,Co)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(yo).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(vo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const vo=[new Ua,new Ua,new Ua,new Ua,new Ua,new Ua,new Ua,new Ua],yo=new Ua,_o=new go,bo=new Ua,xo=new Ua,So=new Ua,wo=new Ua,Mo=new Ua,Eo=new Ua,To=new Ua,Co=new Ua,Ao=new Ua,Po=new Ua;function Ro(e,t,n,i,r){for(let a=0,o=e.length-3;a<=o;a+=3){Po.fromArray(e,a);const o=r.x*Math.abs(Po.x)+r.y*Math.abs(Po.y)+r.z*Math.abs(Po.z),s=t.dot(Po),l=n.dot(Po),c=i.dot(Po);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const Lo=new go,ko=new Ua,Io=new Ua;class Do{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Lo.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ko.subVectors(e,this.center);const t=ko.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ko,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Io.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ko.copy(e.center).add(Io)),this.expandByPoint(ko.copy(e.center).sub(Io))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const No=new Ua,Uo=new Ua,Oo=new Ua,zo=new Ua,Fo=new Ua,Bo=new Ua,jo=new Ua;class Ho{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,No)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=No.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(No.copy(this.origin).addScaledVector(this.direction,t),No.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Uo.copy(e).add(t).multiplyScalar(.5),Oo.copy(t).sub(e).normalize(),zo.copy(this.origin).sub(Uo);const r=.5*e.distanceTo(t),a=-this.direction.dot(Oo),o=zo.dot(this.direction),s=-zo.dot(Oo),l=zo.lengthSq(),c=Math.abs(1-a*a);let u,h,d,p;if(c>0)if(u=a*s-o,h=a*o-s,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+a*h+2*o)+h*(a*u+h+2*s)+l}else h=r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-a*r+o)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(a*r+o)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=a>0?-r:r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Uo).addScaledVector(Oo,h),d}intersectSphere(e,t){No.subVectors(e.center,this.origin);const n=No.dot(this.direction),i=No.dot(No)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,No)}intersectTriangle(e,t,n,i,r){Fo.subVectors(t,e),Bo.subVectors(n,e),jo.crossVectors(Fo,Bo);let a,o=this.direction.dot(jo);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}zo.subVectors(this.origin,e);const s=a*this.direction.dot(Bo.crossVectors(zo,Bo));if(s<0)return null;const l=a*this.direction.dot(Fo.cross(zo));if(l<0)return null;if(s+l>o)return null;const c=-a*zo.dot(jo);return c<0?null:this.at(c/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Vo{constructor(e,t,n,i,r,a,o,s,l,c,u,h,d,p,f,m){Vo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,o,s,l,c,u,h,d,p,f,m)}set(e,t,n,i,r,a,o,s,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Vo).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Go.setFromMatrixColumn(e,0).length(),r=1/Go.setFromMatrixColumn(e,1).length(),a=1/Go.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=o*c,r=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-o*s,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e+r*o,t[4]=i*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-i,t[6]=r+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e-r*o,t[4]=-a*u,t[8]=i+n*o,t[1]=n+i*o,t[5]=a*c,t[9]=r-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,i=o*c,r=o*u;t[0]=s*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=s*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,i=o*s,r=o*l;t[0]=s*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*s,n=a*l,i=o*s,r=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=o*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Xo,e,qo)}lookAt(e,t,n){const i=this.elements;return Ko.subVectors(e,t),0===Ko.lengthSq()&&(Ko.z=1),Ko.normalize(),Zo.crossVectors(n,Ko),0===Zo.lengthSq()&&(1===Math.abs(n.z)?Ko.x+=1e-4:Ko.z+=1e-4,Ko.normalize(),Zo.crossVectors(n,Ko)),Zo.normalize(),Yo.crossVectors(Ko,Zo),i[0]=Zo.x,i[4]=Yo.x,i[8]=Ko.x,i[1]=Zo.y,i[5]=Yo.y,i[9]=Ko.y,i[2]=Zo.z,i[6]=Yo.z,i[10]=Ko.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=i[0],S=i[4],w=i[8],M=i[12],E=i[1],T=i[5],C=i[9],A=i[13],P=i[2],R=i[6],L=i[10],k=i[14],I=i[3],D=i[7],N=i[11],U=i[15];return r[0]=a*x+o*E+s*P+l*I,r[4]=a*S+o*T+s*R+l*D,r[8]=a*w+o*C+s*L+l*N,r[12]=a*M+o*A+s*k+l*U,r[1]=c*x+u*E+h*P+d*I,r[5]=c*S+u*T+h*R+d*D,r[9]=c*w+u*C+h*L+d*N,r[13]=c*M+u*A+h*k+d*U,r[2]=p*x+f*E+m*P+g*I,r[6]=p*S+f*T+m*R+g*D,r[10]=p*w+f*C+m*L+g*N,r[14]=p*M+f*A+m*k+g*U,r[3]=v*x+y*E+_*P+b*I,r[7]=v*S+y*T+_*R+b*D,r[11]=v*w+y*C+_*L+b*N,r[15]=v*M+y*A+_*k+b*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*l*u-r*o*h+n*l*h+i*o*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*a*h-i*a*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*o*d-r*a*u+n*a*d+r*o*c-n*l*c)+e[15]*(-i*o*c-t*s*u+t*o*h+i*a*u-n*a*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*s*d-o*m*d-u*s*g+o*h*g,y=p*h*l-c*m*l-p*s*d+a*m*d+c*s*g-a*h*g,_=c*f*l-p*u*l+p*o*d-a*f*d-c*o*g+a*u*g,b=p*u*s-c*f*s-p*o*h+a*f*h+c*o*m-a*u*m,x=t*v+n*y+i*_+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=v*S,e[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*S,e[2]=(o*m*r-f*s*r+f*i*l-n*m*l-o*i*g+n*s*g)*S,e[3]=(u*s*r-o*h*r-u*i*l+n*h*l+o*i*d-n*s*d)*S,e[4]=y*S,e[5]=(c*m*r-p*h*r+p*i*d-t*m*d-c*i*g+t*h*g)*S,e[6]=(p*s*r-a*m*r-p*i*l+t*m*l+a*i*g-t*s*g)*S,e[7]=(a*h*r-c*s*r+c*i*l-t*h*l-a*i*d+t*s*d)*S,e[8]=_*S,e[9]=(p*u*r-c*f*r-p*n*d+t*f*d+c*n*g-t*u*g)*S,e[10]=(a*f*r-p*o*r+p*n*l-t*f*l-a*n*g+t*o*g)*S,e[11]=(c*o*r-a*u*r-c*n*l+t*u*l+a*n*d-t*o*d)*S,e[12]=b*S,e[13]=(c*f*i-p*u*i+p*n*h-t*f*h-c*n*m+t*u*m)*S,e[14]=(p*o*i-a*f*i-p*n*s+t*f*s+a*n*m-t*o*m)*S,e[15]=(a*u*i-c*o*i+c*n*s-t*u*s-a*n*h+t*o*h)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,c=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,c*o+n,c*s-i*a,0,l*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,c=a+a,u=o+o,h=r*l,d=r*c,p=r*u,f=a*c,m=a*u,g=o*u,v=s*l,y=s*c,_=s*u,b=n.x,x=n.y,S=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(h+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*S,i[9]=(m-v)*S,i[10]=(1-(h+f))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Go.set(i[0],i[1],i[2]).length();const a=Go.set(i[4],i[5],i[6]).length(),o=Go.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Wo.copy(this);const s=1/r,l=1/a,c=1/o;return Wo.elements[0]*=s,Wo.elements[1]*=s,Wo.elements[2]*=s,Wo.elements[4]*=l,Wo.elements[5]*=l,Wo.elements[6]*=l,Wo.elements[8]*=c,Wo.elements[9]*=c,Wo.elements[10]*=c,t.setFromRotationMatrix(Wo),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,i,r,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:va,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,c=2*r/(t-e),u=2*r/(n-i),h=(t+e)/(t-e),d=(n+i)/(n-i);let p,f;if(s)p=r/(a-r),f=a*r/(a-r);else if(o===va)p=-(a+r)/(a-r),f=-2*a*r/(a-r);else{if(o!==ya)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);p=-a/(a-r),f=-a*r/(a-r)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,r,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:va,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,c=2/(t-e),u=2/(n-i),h=-(t+e)/(t-e),d=-(n+i)/(n-i);let p,f;if(s)p=1/(a-r),f=a/(a-r);else if(o===va)p=-2/(a-r),f=-(a+r)/(a-r);else{if(o!==ya)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=-1/(a-r),f=-r/(a-r)}return l[0]=c,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=u,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Go=new Ua,Wo=new Vo,Xo=new Ua(0,0,0),qo=new Ua(1,1,1),Zo=new Ua,Yo=new Ua,Ko=new Ua,Jo=new Vo,Qo=new Na;class $o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$o.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Aa(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Aa(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Aa(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Aa(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Aa(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Aa(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Jo.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Jo,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Qo.setFromEuler(this),this.setFromQuaternion(Qo,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$o.DEFAULT_ORDER="XYZ";class es{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let ts=0;const ns=new Ua,is=new Na,rs=new Vo,as=new Ua,os=new Ua,ss=new Ua,ls=new Na,cs=new Ua(1,0,0),us=new Ua(0,1,0),hs=new Ua(0,0,1),ds={type:"added"},ps={type:"removed"},fs={type:"childadded",child:null},ms={type:"childremoved",child:null};class gs extends Sa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ts++}),this.uuid=Ca(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gs.DEFAULT_UP.clone();const e=new Ua,t=new $o,n=new Na,i=new Ua(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Vo},normalMatrix:{value:new Fa}}),this.matrix=new Vo,this.matrixWorld=new Vo,this.matrixAutoUpdate=gs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new es,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return is.setFromAxisAngle(e,t),this.quaternion.multiply(is),this}rotateOnWorldAxis(e,t){return is.setFromAxisAngle(e,t),this.quaternion.premultiply(is),this}rotateX(e){return this.rotateOnAxis(cs,e)}rotateY(e){return this.rotateOnAxis(us,e)}rotateZ(e){return this.rotateOnAxis(hs,e)}translateOnAxis(e,t){return ns.copy(e).applyQuaternion(this.quaternion),this.position.add(ns.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cs,e)}translateY(e){return this.translateOnAxis(us,e)}translateZ(e){return this.translateOnAxis(hs,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(rs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?as.copy(e):as.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),os.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rs.lookAt(os,as,this.up):rs.lookAt(as,os,this.up),this.quaternion.setFromRotationMatrix(rs),i&&(rs.extractRotation(i.matrixWorld),is.setFromRotationMatrix(rs),this.quaternion.premultiply(is.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ds),fs.child=e,this.dispatchEvent(fs),fs.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ps),ms.child=e,this.dispatchEvent(ms),ms.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),rs.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),rs.multiply(e.parent.matrixWorld)),e.applyMatrix4(rs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ds),fs.child=e,this.dispatchEvent(fs),fs.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(os,e,ss),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(os,ls,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(e=>u(u({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(e=>u({},e)),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}gs.DEFAULT_UP=new Ua(0,1,0),gs.DEFAULT_MATRIX_AUTO_UPDATE=!0,gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vs=new Ua,ys=new Ua,_s=new Ua,bs=new Ua,xs=new Ua,Ss=new Ua,ws=new Ua,Ms=new Ua,Es=new Ua,Ts=new Ua,Cs=new lo,As=new lo,Ps=new lo;class Rs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ua;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),vs.subVectors(e,t),i.cross(vs);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){vs.subVectors(i,t),ys.subVectors(n,t),_s.subVectors(e,t);const a=vs.dot(vs),o=vs.dot(ys),s=vs.dot(_s),l=ys.dot(ys),c=ys.dot(_s),u=a*l-o*o;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*s-o*c)*h,p=(a*c-o*s)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,bs)&&(bs.x>=0&&bs.y>=0&&bs.x+bs.y<=1)}static getInterpolation(e,t,n,i,r,a,o,s){return null===this.getBarycoord(e,t,n,i,bs)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(r,bs.x),s.addScaledVector(a,bs.y),s.addScaledVector(o,bs.z),s)}static getInterpolatedAttribute(e,t,n,i,r,a){return Cs.setScalar(0),As.setScalar(0),Ps.setScalar(0),Cs.fromBufferAttribute(e,t),As.fromBufferAttribute(e,n),Ps.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(Cs,r.x),a.addScaledVector(As,r.y),a.addScaledVector(Ps,r.z),a}static isFrontFacing(e,t,n,i){return vs.subVectors(n,t),ys.subVectors(e,t),vs.cross(ys).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vs.subVectors(this.c,this.b),ys.subVectors(this.a,this.b),.5*vs.cross(ys).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return Rs.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,o;xs.subVectors(i,n),Ss.subVectors(r,n),Ms.subVectors(e,n);const s=xs.dot(Ms),l=Ss.dot(Ms);if(s<=0&&l<=0)return t.copy(n);Es.subVectors(e,i);const c=xs.dot(Es),u=Ss.dot(Es);if(c>=0&&u<=c)return t.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(xs,a);Ts.subVectors(e,r);const d=xs.dot(Ts),p=Ss.dot(Ts);if(p>=0&&d<=p)return t.copy(r);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(Ss,o);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return ws.subVectors(r,i),o=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(ws,o);const g=1/(m+f+h);return a=f*g,o=h*g,t.copy(n).addScaledVector(xs,a).addScaledVector(Ss,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ks={h:0,s:0,l:0},Is={h:0,s:0,l:0};function Ds(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Ns{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ja.colorSpaceToWorking(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ja.workingColorSpace;return this.r=e,this.g=t,this.b=n,Ja.colorSpaceToWorking(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ja.workingColorSpace;if(e=Pa(e,1),t=Aa(t,0,1),n=Aa(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Ds(r,i,e+1/3),this.g=Ds(r,i,e),this.b=Ds(r,i,e-1/3)}return Ja.colorSpaceToWorking(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;const n=Ls[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qa(e.r),this.g=Qa(e.g),this.b=Qa(e.b),this}copyLinearToSRGB(e){return this.r=$a(e.r),this.g=$a(e.g),this.b=$a(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;return Ja.workingToColorSpace(Us.copy(this),e),65536*Math.round(Aa(255*Us.r,0,255))+256*Math.round(Aa(255*Us.g,0,255))+Math.round(Aa(255*Us.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ja.workingColorSpace;Ja.workingToColorSpace(Us.copy(this),t);const n=Us.r,i=Us.g,r=Us.b,a=Math.max(n,i,r),o=Math.min(n,i,r);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=c<=.5?e/(a+o):e/(2-a-o),a){case n:s=(i-r)/e+(i<r?6:0);break;case i:s=(r-n)/e+2;break;case r:s=(n-i)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ja.workingColorSpace;return Ja.workingToColorSpace(Us.copy(this),t),e.r=Us.r,e.g=Us.g,e.b=Us.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;Ja.workingToColorSpace(Us.copy(this),e);const t=Us.r,n=Us.g,i=Us.b;return e!==kr?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(ks),this.setHSL(ks.h+e,ks.s+t,ks.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ks),e.getHSL(Is);const n=Ra(ks.h,Is.h,t),i=Ra(ks.s,Is.s,t),r=Ra(ks.l,Is.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Us=new Ns;Ns.NAMES=Ls;let Os=0;class zs extends Sa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Os++}),this.uuid=Ca(),this.name="",this.type="Material",this.blending=Jt,this.side=qt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dn,this.blendDst=pn,this.blendEquation=nn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ns(0,0,0),this.blendAlpha=0,this.depthFunc=Tn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Jr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Or,this.stencilZFail=Or,this.stencilZPass=Or,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Jt&&(n.blending=this.blending),this.side!==qt&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==dn&&(n.blendSrc=this.blendSrc),this.blendDst!==pn&&(n.blendDst=this.blendDst),this.blendEquation!==nn&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Tn&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Jr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Or&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Or&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Or&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Fs extends zs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ns(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Ln,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bs=js();function js(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:o,offsetTable:s}}function Hs(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Aa(e,-65504,65504),Bs.floatView[0]=e;const t=Bs.uint32View[0],n=t>>23&511;return Bs.baseTable[n]+((8388607&t)>>Bs.shiftTable[n])}function Vs(e){const t=e>>10;return Bs.uint32View[0]=Bs.mantissaTable[Bs.offsetTable[t]+(1023&e)]+Bs.exponentTable[t],Bs.floatView[0]}class Gs{static toHalfFloat(e){return Hs(e)}static fromHalfFloat(e){return Vs(e)}}const Ws=new Ua,Xs=new Da;let qs=0;class Zs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:qs++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=oa,this.updateRanges=[],this.gpuType=mi,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Xs.fromBufferAttribute(this,t),Xs.applyMatrix3(e),this.setXY(t,Xs.x,Xs.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix3(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix4(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyNormalMatrix(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.transformDirection(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=La(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ka(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=La(t,this.array)),t}setX(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=La(t,this.array)),t}setY(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=La(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=La(t,this.array)),t}setW(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array),r=ka(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==oa&&(e.usage=this.usage),e}}class Ys extends Zs{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ks extends Zs{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Js extends Zs{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Qs extends Zs{constructor(e,t,n){super(new Int16Array(e),t,n)}}class $s extends Zs{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class el extends Zs{constructor(e,t,n){super(new Int32Array(e),t,n)}}class tl extends Zs{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class nl extends Zs{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Vs(this.array[e*this.itemSize]);return this.normalized&&(t=La(t,this.array)),t}setX(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize]=Hs(t),this}getY(e){let t=Vs(this.array[e*this.itemSize+1]);return this.normalized&&(t=La(t,this.array)),t}setY(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+1]=Hs(t),this}getZ(e){let t=Vs(this.array[e*this.itemSize+2]);return this.normalized&&(t=La(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+2]=Hs(t),this}getW(e){let t=Vs(this.array[e*this.itemSize+3]);return this.normalized&&(t=La(t,this.array)),t}setW(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+3]=Hs(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this.array[e+2]=Hs(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array),r=ka(r,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this.array[e+2]=Hs(i),this.array[e+3]=Hs(r),this}}class il extends Zs{constructor(e,t,n){super(new Float32Array(e),t,n)}}let rl=0;const al=new Vo,ol=new gs,sl=new Ua,ll=new go,cl=new go,ul=new Ua;class hl extends Sa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rl++}),this.uuid=Ca(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ja(e)?tl:$s)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Fa).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return al.makeRotationFromQuaternion(e),this.applyMatrix4(al),this}rotateX(e){return al.makeRotationX(e),this.applyMatrix4(al),this}rotateY(e){return al.makeRotationY(e),this.applyMatrix4(al),this}rotateZ(e){return al.makeRotationZ(e),this.applyMatrix4(al),this}translate(e,t,n){return al.makeTranslation(e,t,n),this.applyMatrix4(al),this}scale(e,t,n){return al.makeScale(e,t,n),this.applyMatrix4(al),this}lookAt(e){return ol.lookAt(e),ol.updateMatrix(),this.applyMatrix4(ol.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sl).negate(),this.translate(sl.x,sl.y,sl.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new il(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Ua(-1/0,-1/0,-1/0),new Ua(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];ll.setFromBufferAttribute(e),this.morphTargetsRelative?(ul.addVectors(this.boundingBox.min,ll.min),this.boundingBox.expandByPoint(ul),ul.addVectors(this.boundingBox.max,ll.max),this.boundingBox.expandByPoint(ul)):(this.boundingBox.expandByPoint(ll.min),this.boundingBox.expandByPoint(ll.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Do);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Ua,1/0);if(e){const n=this.boundingSphere.center;if(ll.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];cl.setFromBufferAttribute(n),this.morphTargetsRelative?(ul.addVectors(ll.min,cl.min),ll.expandByPoint(ul),ul.addVectors(ll.max,cl.max),ll.expandByPoint(ul)):(ll.expandByPoint(cl.min),ll.expandByPoint(cl.max))}ll.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)ul.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(ul));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],o=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)ul.fromBufferAttribute(a,t),o&&(sl.fromBufferAttribute(e,t),ul.add(sl)),i=Math.max(i,n.distanceToSquared(ul))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Zs(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],s=[];for(let w=0;w<n.count;w++)o[w]=new Ua,s[w]=new Ua;const l=new Ua,c=new Ua,u=new Ua,h=new Da,d=new Da,p=new Da,f=new Ua,m=new Ua;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,i),h.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const a=1/(d.x*p.y-p.x*d.y);isFinite(a)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(a),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(a),o[e].add(f),o[t].add(f),o[i].add(f),s[e].add(m),s[t].add(m),s[i].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let w=0,M=v.length;w<M;++w){const t=v[w],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)g(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const y=new Ua,_=new Ua,b=new Ua,x=new Ua;function S(e){b.fromBufferAttribute(i,e),x.copy(b);const t=o[e];y.copy(t),y.sub(b.multiplyScalar(b.dot(t))).normalize(),_.crossVectors(x,t);const n=_.dot(s[e])<0?-1:1;a.setXYZW(e,y.x,y.y,y.z,n)}for(let w=0,M=v.length;w<M;++w){const t=v[w],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)S(e.getX(i+0)),S(e.getX(i+1)),S(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Zs(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Ua,r=new Ua,a=new Ua,o=new Ua,s=new Ua,l=new Ua,c=new Ua,u=new Ua;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),o.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),s.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ul.fromBufferAttribute(e,t),ul.normalize(),e.setXYZ(t,ul.x,ul.y,ul.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let o=0,s=0;for(let l=0,c=t.length;l<c;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)a[s++]=n[o++]}return new Zs(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new hl,n=this.index.array,i=this.attributes;for(const o in i){const r=e(i[o],n);t.setAttribute(o,r)}const r=this.morphAttributes;for(const o in r){const i=[],a=r[o];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);i.push(r)}t.morphAttributes[o]=i}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,s=a.length;o<s;o++){const e=a[o];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const i={};let r=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[s]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere=o.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dl=new Vo,pl=new Ho,fl=new Do,ml=new Ua,gl=new Ua,vl=new Ua,yl=new Ua,_l=new Ua,bl=new Ua,xl=new Ua,Sl=new Ua;class wl extends gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(r&&o){bl.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=o[n],s=r[n];0!==i&&(_l.fromBufferAttribute(s,e),a?bl.addScaledVector(_l,i):bl.addScaledVector(_l.sub(t),i))}t.add(bl)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),fl.copy(n.boundingSphere),fl.applyMatrix4(r),pl.copy(e.ray).recast(e.near),!1===fl.containsPoint(pl.origin)){if(null===pl.intersectSphere(fl,ml))return;if(pl.origin.distanceToSquared(ml)>(e.far-e.near)**2)return}dl.copy(r).invert(),pl.copy(e.ray).applyMatrix4(dl),null!==n.boundingBox&&!1===pl.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,pl)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,o=r.index,s=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(a))for(let p=0,f=h.length;p<f;p++){const r=h[p],s=a[r.materialIndex];for(let a=Math.max(r.start,d.start),h=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));a<h;a+=3){i=Ml(this,s,e,n,l,c,u,o.getX(a),o.getX(a+1),o.getX(a+2)),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);r<s;r+=3){i=Ml(this,a,e,n,l,c,u,o.getX(r),o.getX(r+1),o.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==s)if(Array.isArray(a))for(let p=0,f=h.length;p<f;p++){const r=h[p],o=a[r.materialIndex];for(let a=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));a<h;a+=3){i=Ml(this,o,e,n,l,c,u,a,a+1,a+2),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(s.count,d.start+d.count);r<o;r+=3){i=Ml(this,a,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function Ml(e,t,n,i,r,a,o,s,l,c){e.getVertexPosition(s,gl),e.getVertexPosition(l,vl),e.getVertexPosition(c,yl);const u=function(e,t,n,i,r,a,o,s){let l;if(l=t.side===Zt?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side===qt,s),null===l)return null;Sl.copy(s),Sl.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Sl);return c<n.near||c>n.far?null:{distance:c,point:Sl.clone(),object:e}}(e,t,n,i,gl,vl,yl,xl);if(u){const e=new Ua;Rs.getBarycoord(xl,gl,vl,yl,e),r&&(u.uv=Rs.getInterpolatedAttribute(r,s,l,c,e,new Da)),a&&(u.uv1=Rs.getInterpolatedAttribute(a,s,l,c,e,new Da)),o&&(u.normal=Rs.getInterpolatedAttribute(o,s,l,c,e,new Ua),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c:c,normal:new Ua,materialIndex:0};Rs.getNormal(gl,vl,yl,t.normal),u.face=t,u.barycoord=e}return u}class El extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const o=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,i,r,a,p,f,m,g,v){const y=a/m,_=p/g,b=a/2,x=p/2,S=f/2,w=m+1,M=g+1;let E=0,T=0;const C=new Ua;for(let o=0;o<M;o++){const a=o*_-x;for(let s=0;s<w;s++){const h=s*y-b;C[e]=h*i,C[t]=a*r,C[n]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-o/g),E+=1}}for(let o=0;o<g;o++)for(let e=0;e<m;e++){const t=h+e+w*o,n=h+e+w*(o+1),i=h+(e+1)+w*(o+1),r=h+(e+1)+w*o;s.push(t,n,r),s.push(n,i,r),T+=6}o.addGroup(d,T,v),d+=T,h+=E}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new il(l,3)),this.setAttribute("normal",new il(c,3)),this.setAttribute("uv",new il(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new El(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Tl(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Cl(e){const t={};for(let n=0;n<e.length;n++){const i=Tl(e[n]);for(const e in i)t[e]=i[e]}return t}function Al(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Ja.workingColorSpace}const Pl={clone:Tl,merge:Cl};class Rl extends zs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tl(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ll extends gs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vo,this.projectionMatrix=new Vo,this.projectionMatrixInverse=new Vo,this.coordinateSystem=va,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const kl=new Ua,Il=new Da,Dl=new Da;class Nl extends Ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ta*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ea*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ta*Math.atan(Math.tan(.5*Ea*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){kl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(kl.x,kl.y).multiplyScalar(-e/kl.z),kl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(kl.x,kl.y).multiplyScalar(-e/kl.z)}getViewSize(e,t){return this.getViewBounds(e,Il,Dl),t.subVectors(Dl,Il)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ea*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/o,i*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ul=-90;class Ol extends gs{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Nl(Ul,1,e,t);i.layers=this.layers,this.add(i);const r=new Nl(Ul,1,e,t);r.layers=this.layers,this.add(r);const a=new Nl(Ul,1,e,t);a.layers=this.layers,this.add(a);const o=new Nl(Ul,1,e,t);o.layers=this.layers,this.add(o);const s=new Nl(Ul,1,e,t);s.layers=this.layers,this.add(s);const l=new Nl(Ul,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,o,s]=t;for(const l of t)this.remove(l);if(e===va)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==ya)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,s,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,s),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class zl extends so{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0,arguments.length>9?arguments[9]:void 0),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Fl extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new zl(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new El(5,5,5),o=new Rl({name:"CubemapFromEquirect",uniforms:Tl(n),vertexShader:i,fragmentShader:r,side:Zt,blending:Kt});o.uniforms.tEquirect.value=t;const s=new wl(a,o),l=t.minFilter;t.minFilter===si&&(t.minFilter=ri);return new Ol(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}class Bl extends gs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jl={type:"move"};class Hl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ua,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ua),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ua,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ua),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),i=this._getHandJoint(l,a);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(jl)))}return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Bl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Ns(e),this.density=t}clone(){return new Vl(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Gl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Ns(e),this.near=t,this.far=n}clone(){return new Gl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Wl extends gs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $o,this.environmentIntensity=1,this.environmentRotation=new $o,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Xl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=oa,this.updateRanges=[],this.version=0,this.uuid=Ca()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ca()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ca()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ql=new Ua;class Zl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ql.fromBufferAttribute(this,t),ql.applyMatrix4(e),this.setXYZ(t,ql.x,ql.y,ql.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ql.fromBufferAttribute(this,t),ql.applyNormalMatrix(e),this.setXYZ(t,ql.x,ql.y,ql.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ql.fromBufferAttribute(this,t),ql.transformDirection(e),this.setXYZ(t,ql.x,ql.y,ql.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=La(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ka(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ka(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ka(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ka(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ka(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=La(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=La(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=La(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=La(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ka(t,this.array),n=ka(n,this.array),i=ka(i,this.array),r=ka(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Zs(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Yl extends zs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ns(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Kl;const Jl=new Ua,Ql=new Ua,$l=new Ua,ec=new Da,tc=new Da,nc=new Vo,ic=new Ua,rc=new Ua,ac=new Ua,oc=new Da,sc=new Da,lc=new Da;class cc extends gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yl;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Kl){Kl=new hl;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Xl(e,5);Kl.setIndex([0,1,2,0,2,3]),Kl.setAttribute("position",new Zl(t,3,0,!1)),Kl.setAttribute("uv",new Zl(t,2,3,!1))}this.geometry=Kl,this.material=e,this.center=new Da(.5,.5),this.count=1}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ql.setFromMatrixScale(this.matrixWorld),nc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),$l.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ql.multiplyScalar(-$l.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;uc(ic.set(-.5,-.5,0),$l,a,Ql,i,r),uc(rc.set(.5,-.5,0),$l,a,Ql,i,r),uc(ac.set(.5,.5,0),$l,a,Ql,i,r),oc.set(0,0),sc.set(1,0),lc.set(1,1);let o=e.ray.intersectTriangle(ic,rc,ac,!1,Jl);if(null===o&&(uc(rc.set(-.5,.5,0),$l,a,Ql,i,r),sc.set(0,1),o=e.ray.intersectTriangle(ic,ac,rc,!1,Jl),null===o))return;const s=e.ray.origin.distanceTo(Jl);s<e.near||s>e.far||t.push({distance:s,point:Jl.clone(),uv:Rs.getInterpolation(Jl,ic,rc,ac,oc,sc,lc,new Da),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function uc(e,t,n,i,r,a){ec.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(tc.x=a*ec.x-r*ec.y,tc.y=r*ec.x+a*ec.y):tc.copy(ec),e.copy(t),e.x+=tc.x,e.y+=tc.y,e.applyMatrix4(nc)}const hc=new Ua,dc=new Ua;class pc extends gs{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){hc.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(hc);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){hc.setFromMatrixPosition(e.matrixWorld),dc.setFromMatrixPosition(this.matrixWorld);const n=hc.distanceTo(dc)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const fc=new Ua,mc=new lo,gc=new lo,vc=new Ua,yc=new Vo,_c=new Ua,bc=new Do,xc=new Vo,Sc=new Ho;class wc extends wl{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Hn,this.bindMatrix=new Vo,this.bindMatrixInverse=new Vo,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new go),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_c),this.boundingBox.expandByPoint(_c)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Do),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_c),this.boundingSphere.expandByPoint(_c)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),bc.copy(this.boundingSphere),bc.applyMatrix4(i),!1!==e.ray.intersectsSphere(bc)&&(xc.copy(i).invert(),Sc.copy(e.ray).applyMatrix4(xc),null!==this.boundingBox&&!1===Sc.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Sc)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lo,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Hn?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Vn?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;mc.fromBufferAttribute(i.attributes.skinIndex,e),gc.fromBufferAttribute(i.attributes.skinWeight,e),fc.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=gc.getComponent(r);if(0!==e){const i=mc.getComponent(r);yc.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(vc.copy(fc).applyMatrix4(yc),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Mc extends gs{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ec extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:$n,arguments.length>9&&void 0!==arguments[9]?arguments[9]:$n,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Tc=new Vo,Cc=new Vo;class Ac{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Ca(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Vo)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Vo;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const i=e[r]?e[r].matrixWorld:Cc;Tc.multiplyMatrices(i,t[r]),Tc.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Ac(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ec(t,e,e,Mi,mi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Mc),this.bones.push(r),this.boneInverses.push((new Vo).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class Pc extends Zs{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Rc=new Vo,Lc=new Vo,kc=[],Ic=new go,Dc=new Vo,Nc=new wl,Uc=new Do;class Oc extends wl{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pc(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Dc)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new go),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rc),Ic.copy(e.boundingBox).applyMatrix4(Rc),this.boundingBox.union(Ic)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Do),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rc),Uc.copy(e.boundingSphere).applyMatrix4(Rc),this.boundingSphere.union(Uc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=e*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=i[r+a]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Nc.geometry=this.geometry,Nc.material=this.material,void 0!==Nc.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Uc.copy(this.boundingSphere),Uc.applyMatrix4(n),!1!==e.ray.intersectsSphere(Uc)))for(let r=0;r<i;r++){this.getMatrixAt(r,Rc),Lc.multiplyMatrices(n,Rc),Nc.matrixWorld=Lc,Nc.raycast(e,kc);for(let e=0,n=kc.length;e<n;e++){const n=kc[e];n.instanceId=r,n.object=this,t.push(n)}kc.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Pc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new Ec(new Float32Array(i*this.count),i,this.count,Ci,mi));const r=this.morphTexture.source.data.data;let a=0;for(let l=0;l<n.length;l++)a+=n[l];const o=this.geometry.morphTargetsRelative?1:1-a,s=i*e;r[s]=o,r.set(n,s+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const zc=new Ua,Fc=new Ua,Bc=new Fa;class jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=zc.subVectors(n,t).cross(Fc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(zc),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Bc.getNormalMatrix(e),i=this.coplanarPoint(zc).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Hc=new Do,Vc=new Da(.5,.5),Gc=new Ua;class Wc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jc,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jc,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new jc,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new jc;this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:va,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.planes,r=e.elements,a=r[0],o=r[1],s=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],p=r[8],f=r[9],m=r[10],g=r[11],v=r[12],y=r[13],_=r[14],b=r[15];if(i[0].setComponents(l-a,d-c,g-p,b-v).normalize(),i[1].setComponents(l+a,d+c,g+p,b+v).normalize(),i[2].setComponents(l+o,d+u,g+f,b+y).normalize(),i[3].setComponents(l-o,d-u,g-f,b-y).normalize(),n)i[4].setComponents(s,h,m,_).normalize(),i[5].setComponents(l-s,d-h,g-m,b-_).normalize();else if(i[4].setComponents(l-s,d-h,g-m,b-_).normalize(),t===va)i[5].setComponents(l+s,d+h,g+m,b+_).normalize();else{if(t!==ya)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(s,h,m,_).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Hc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Hc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hc)}intersectsSprite(e){Hc.center.set(0,0,0);const t=Vc.distanceTo(e.center);return Hc.radius=.7071067811865476+t,Hc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hc)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Gc.x=i.normal.x>0?e.max.x:e.min.x,Gc.y=i.normal.y>0?e.max.y:e.min.y,Gc.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Gc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const Xc=new Vo,qc=new Wc;class Zc{constructor(){this.coordinateSystem=va}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),qc.setFromProjectionMatrix(Xc,i.coordinateSystem,i.reversedDepth),qc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),qc.setFromProjectionMatrix(Xc,i.coordinateSystem,i.reversedDepth),qc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),qc.setFromProjectionMatrix(Xc,i.coordinateSystem,i.reversedDepth),qc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),qc.setFromProjectionMatrix(Xc,i.coordinateSystem,i.reversedDepth),qc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),qc.setFromProjectionMatrix(Xc,i.coordinateSystem,i.reversedDepth),qc.containsPoint(e))return!0}return!1}clone(){return new Zc}}function Yc(e,t){return e-t}function Kc(e,t){return e.z-t.z}function Jc(e,t){return t.z-e.z}class Qc{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=i}reset(){this.list.length=0,this.index=0}}const $c=new Vo,eu=new Ns(1,1,1),tu=new Wc,nu=new Zc,iu=new go,ru=new Do,au=new Ua,ou=new Ua,su=new Ua,lu=new Qc,cu=new wl,uu=[];function hu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let a=0;a<r;a++)for(let r=0;r<i;r++)t.setComponent(a+n,r,e.getComponent(a,r))}else t.array.set(e.array,n*i);t.needsUpdate=!0}function du(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)t[i]=e[i]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class pu extends wl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,i=arguments.length>3?arguments[3]:void 0;super(new hl,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ec(t,e,e,Mi,mi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Ec(t,e,e,Ai,fi);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ec(t,e,e,Mi,mi);n.colorSpace=Ja.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in e.attributes){const r=e.getAttribute(i),{array:a,itemSize:o,normalized:s}=r,l=new a.constructor(n*o),c=new Zs(l,o,s);t.setAttribute(i,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Zs(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new go);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,$c),this.getBoundingBoxAt(i,iu).applyMatrix4($c),e.union(iu)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Do);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,$c),this.getBoundingSphereAt(i,ru).applyMatrix4($c),e.union(ru)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Yc),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const i=this._matricesTexture;$c.identity().toArray(i.image.data,16*n),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(eu.toArray(r.image.data,4*n),r.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const a=e.getIndex();if(null!==a&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?a.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let o;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Yc),o=this._availableGeometryIds.shift(),r[o]=i):(o=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(o,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,o}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(i&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const s=o.vertexStart,l=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),i=n.getAttribute(c);hu(e,i,s);const r=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=s+t;for(let t=0;t<r;t++)i.setComponent(e,t,0)}i.needsUpdate=!0,i.addUpdateRange(s*r,l*r)}if(i){const e=o.indexStart,n=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)r.setX(e+t,s+a.getX(t));for(let t=a.count,i=n;t<i;t++)r.setX(e+t,s);r.needsUpdate=!0,r.addUpdateRange(e,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),r=this.geometry;for(let a=0,o=n.length;a<o;a++){const o=i[a],s=n[o];if(!1!==s.active){if(null!==r.index){if(s.indexStart!==t){const{indexStart:n,vertexStart:i,reservedIndexCount:a}=s,o=r.index,l=o.array,c=e-i;for(let e=n;e<n+a;e++)l[e]=l[e]+c;o.array.copyWithin(t,n,n+a),o.addUpdateRange(t,a),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=s,i=r.attributes;for(const r in i){const a=i[r],{array:o,itemSize:s}=a;o.copyWithin(e*s,t*s,(t+n)*s),a.addUpdateRange(e*s,n*s)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=r.index?s.indexStart:s.vertexStart,this._nextIndexStart=r.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingBox){const e=new go,t=n.index,r=n.attributes.position;for(let n=i.start,a=i.start+i.count;n<a;n++){let i=n;t&&(i=t.getX(i)),e.expandByPoint(au.fromBufferAttribute(r,i))}i.boundingBox=e}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingSphere){const t=new Do;this.getBoundingBoxAt(e,iu),iu.getCenter(t.center);const r=n.index,a=n.attributes.position;let o=0;for(let e=i.start,n=i.start+i.count;e<n;e++){let n=e;r&&(n=r.getX(n)),au.fromBufferAttribute(a,n),o=Math.max(o,t.center.distanceToSquared(au))}t.radius=Math.sqrt(o),i.boundingSphere=t}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Yc);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const i=new Int32Array(e),r=new Int32Array(e);du(this._multiDrawCounts,i),du(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),du(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),du(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),du(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new hl,this._initializeGeometry(i));const r=this.geometry;i.index&&du(i.index.array,r.index.array);for(const a in i.attributes)du(i.attributes[a].array,r.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,a=this.geometry;cu.material=this.material,cu.geometry.index=a.index,cu.geometry.attributes=a.attributes,null===cu.geometry.boundingBox&&(cu.geometry.boundingBox=new go),null===cu.geometry.boundingSphere&&(cu.geometry.boundingSphere=new Do);for(let o=0,s=n.length;o<s;o++){if(!n[o].visible||!n[o].active)continue;const a=n[o].geometryIndex,s=i[a];cu.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(o,cu.matrixWorld).premultiply(r),this.getBoundingBoxAt(a,cu.geometry.boundingBox),this.getBoundingSphereAt(a,cu.geometry.boundingSphere),cu.raycast(e,uu);for(let e=0,n=uu.length;e<n;e++){const n=uu[e];n.object=this,n.batchId=o,t.push(n)}uu.length=0}cu.material=null,cu.geometry.index=null,cu.geometry.attributes={},cu.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>u(u({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>u({},e)),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data,f=n.isArrayCamera?nu:tu;h&&!n.isArrayCamera&&($c.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),tu.setFromProjectionMatrix($c,n.coordinateSystem,n.reversedDepth));let m=0;if(this.sortObjects){$c.copy(this.matrixWorld).invert(),au.setFromMatrixPosition(n.matrixWorld).applyMatrix4($c),ou.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection($c);for(let i=0,r=s.length;i<r;i++)if(s[i].visible&&s[i].active){const e=s[i].geometryIndex;this.getMatrixAt(i,$c),this.getBoundingSphereAt(e,ru).applyMatrix4($c);let t=!1;if(h&&(t=!f.intersectsSphere(ru,n)),!t){const t=u[e],n=su.subVectors(ru.center,au).dot(ou);lu.push(t.start,t.count,n,i)}}const e=lu.list,t=this.customSort;null===t?e.sort(r.transparent?Jc:Kc):t.call(this,e,n);for(let n=0,i=e.length;n<i;n++){const t=e[n];l[m]=t.start*o,c[m]=t.count,p[m]=t.index,m++}lu.reset()}else for(let g=0,v=s.length;g<v;g++)if(s[g].visible&&s[g].active){const e=s[g].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(g,$c),this.getBoundingSphereAt(e,ru).applyMatrix4($c),t=!f.intersectsSphere(ru,n)),!t){const t=u[e];l[m]=t.start*o,c[m]=t.count,p[m]=g,m++}}d.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,a){this.onBeforeRender(e,null,i,r,a)}}class fu extends zs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ns(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const mu=new Ua,gu=new Ua,vu=new Vo,yu=new Ho,_u=new Do,bu=new Ua,xu=new Ua;class Su extends gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fu;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)mu.fromBufferAttribute(t,e-1),gu.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=mu.distanceTo(gu);e.setAttribute("lineDistance",new il(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_u.copy(n.boundingSphere),_u.applyMatrix4(i),_u.radius+=r,!1===e.ray.intersectsSphere(_u))return;vu.copy(i).invert(),yu.copy(e.ray).applyMatrix4(vu);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=l){const n=c.getX(r),i=c.getX(r+1),a=wu(this,e,yu,s,n,i,r);a&&t.push(a)}if(this.isLineLoop){const r=c.getX(i-1),a=c.getX(n),o=wu(this,e,yu,s,r,a,i-1);o&&t.push(o)}}else{const n=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=l){const n=wu(this,e,yu,s,r,r+1,r);n&&t.push(n)}if(this.isLineLoop){const r=wu(this,e,yu,s,i-1,n,i-1);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function wu(e,t,n,i,r,a,o){const s=e.geometry.attributes.position;mu.fromBufferAttribute(s,r),gu.fromBufferAttribute(s,a);if(n.distanceSqToSegment(mu,gu,bu,xu)>i)return;bu.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(bu);return l<t.near||l>t.far?void 0:{distance:l,point:xu.clone().applyMatrix4(e.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:e}}const Mu=new Ua,Eu=new Ua;class Tu extends Su{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Mu.fromBufferAttribute(t,e),Eu.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Mu.distanceTo(Eu);e.setAttribute("lineDistance",new il(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cu extends Su{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Au extends zs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ns(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Pu=new Vo,Ru=new Ho,Lu=new Do,ku=new Ua;class Iu extends gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Lu.copy(n.boundingSphere),Lu.applyMatrix4(i),Lu.radius+=r,!1===e.ray.intersectsSphere(Lu))return;Pu.copy(i).invert(),Ru.copy(e.ray).applyMatrix4(Pu);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);n<r;n++){const r=l.getX(n);ku.fromBufferAttribute(c,r),Du(ku,r,s,i,e,t,this)}}else{for(let n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);n<r;n++)ku.fromBufferAttribute(c,n),Du(ku,n,s,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Du(e,t,n,i,r,a,o){const s=Ru.distanceSqToPoint(e);if(s<n){const n=new Ua;Ru.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class Nu extends so{constructor(e,t,n,i){super(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:ri,arguments.length>5&&void 0!==arguments[5]?arguments[5]:ri,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const r=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){r.needsUpdate=!0,r._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Uu extends Nu{constructor(e,t,n,i,r,a,o,s){super({},e,t,n,i,r,a,o,s),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Ou extends so{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$n,this.minFilter=$n,this.generateMipmaps=!1,this.needsUpdate=!0}}class zu extends so{constructor(e,t,n,i,r,a,o,s,l,c,u,h){super(null,a,o,s,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Fu extends zu{constructor(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Jn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Bu extends zu{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Wn),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ju extends so{constructor(e,t,n,i,r,a,o,s,l){super(e,t,n,i,r,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Hu extends so{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fi,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$n,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:$n,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ei,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(c!==Ei&&c!==Ti)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:u},i,r,a,o,s,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new io(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Vu extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Gu extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),r=Math.max(1,Math.floor(r));const a=[],o=[],s=[],l=[],c=t/2,u=Math.PI/2*e,h=t,d=2*u+h,p=2*n+r,f=i+1,m=new Ua,g=new Ua;for(let v=0;v<=p;v++){let y=0,_=0,b=0,x=0;if(v<=n){const t=v/n,i=t*Math.PI/2;_=-c-e*Math.cos(i),b=e*Math.sin(i),x=-e*Math.cos(i),y=t*u}else if(v<=n+r){const i=(v-n)/r;_=i*t-c,b=e,x=0,y=u+i*h}else{const t=(v-n-r)/n,i=t*Math.PI/2;_=c+e*Math.sin(i),b=e*Math.cos(i),x=e*Math.sin(i),y=u+h+t*u}const S=Math.max(0,Math.min(1,y/d));let w=0;0===v?w=.5/i:v===p&&(w=-.5/i);for(let e=0;e<=i;e++){const t=e/i,n=t*Math.PI*2,r=Math.sin(n),a=Math.cos(n);g.x=-b*a,g.y=_,g.z=b*r,o.push(g.x,g.y,g.z),m.set(-b*a,x,b*r),m.normalize(),s.push(m.x,m.y,m.z),l.push(t+w,S)}if(v>0){const e=(v-1)*f;for(let t=0;t<i;t++){const n=e+t,i=e+t+1,r=v*f+t,o=v*f+t+1;a.push(n,i,r),a.push(i,o,r)}}}this.setIndex(a),this.setAttribute("position",new il(o,3)),this.setAttribute("normal",new il(s,3)),this.setAttribute("uv",new il(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gu(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Wu extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],a=[],o=[],s=[],l=new Ua,c=new Da;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[h]/e+1)/2,c.y=(a[h+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new il(a,3)),this.setAttribute("normal",new il(o,3)),this.setAttribute("uv",new il(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xu extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const r=p,a=new Da,f=new Ua;let v=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i*s+o,n=Math.cos(t),r=Math.sin(t);f.x=y*r,f.y=m*_,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,_,0),a.x=.5*n+.5,a.y=.5*r*_+.5,d.push(a.x,a.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new Ua,v=new Ua;let y=0;const _=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*s+o,l=Math.sin(r),f=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),a.set(l,_,f).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const a=f[i][n],o=f[i+1][n],s=f[i+1][n+1],l=f[i][n+1];(e>0||0!==i)&&(c.push(a,o,l),y+=3),(t>0||i!==r-1)&&(c.push(o,s,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new il(u,3)),this.setAttribute("normal",new il(h,3)),this.setAttribute("uv",new il(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qu extends Xu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}static fromJSON(e){return new qu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zu extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],a=[];function o(e,t,n,i){const r=i+1,a=[];for(let o=0;o<=r;o++){a[o]=[];const i=e.clone().lerp(n,o/r),s=t.clone().lerp(n,o/r),l=r-o;for(let e=0;e<=l;e++)a[o][e]=0===e&&o===r?i:i.clone().lerp(s,e/l)}for(let o=0;o<r;o++)for(let e=0;e<2*(r-o)-1;e++){const t=Math.floor(e/2);e%2===0?(s(a[o][t+1]),s(a[o+1][t]),s(a[o][t])):(s(a[o][t+1]),s(a[o+1][t+1]),s(a[o+1][t]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new Ua,i=new Ua,r=new Ua;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],i),l(t[a+2],r),o(n,i,r,e)}(i),function(e){const t=new Ua;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Ua;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=u(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;a.push(n,1-i)}(function(){const e=new Ua,t=new Ua,n=new Ua,i=new Ua,o=new Da,s=new Da,l=new Da;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(o,d+0,e,p),c(s,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new il(r,3)),this.setAttribute("normal",new il(r.slice(),3)),this.setAttribute("uv",new il(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zu(e.vertices,e.indices,e.radius,e.details)}}class Yu extends Zu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yu(e.radius,e.detail)}}const Ku=new Ua,Ju=new Ua,Qu=new Ua,$u=new Rs;class eh extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(Ea*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=$u;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),s.fromBufferAttribute(o,l[2]),$u.getNormal(Qu),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(s.x*i),",").concat(Math.round(s.y*i),",").concat(Math.round(s.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],a=$u[c[e]],o=$u[c[t]],s="".concat(n,"_").concat(i),p="".concat(i,"_").concat(n);p in h&&h[p]?(Qu.dot(h[p].normal)<=r&&(d.push(a.x,a.y,a.z),d.push(o.x,o.y,o.z)),h[p]=null):s in h||(h[s]={index0:l[e],index1:l[t],normal:Qu.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];Ku.fromBufferAttribute(o,t),Ju.fromBufferAttribute(o,n),d.push(Ku.x,Ku.y,Ku.z),d.push(Ju.x,Ju.y,Ju.z)}this.setAttribute("position",new il(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class th{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let o,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),o=n[i]-a,o<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i];return(i+(a-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new Da:new Ua);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new Ua,i=[],r=[],a=[],o=new Ua,s=new Vo;for(let d=0;d<=e;d++){const t=d/e;i[d]=this.getTangentAt(t,new Ua)}r[0]=new Ua,a[0]=new Ua;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Aa(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(s.makeRotationAxis(o,e))}a[d].crossVectors(i[d],r[d])}if(!0===t){let t=Math.acos(Aa(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=r?0:n),!0!==this.aClockwise||r||(i===n?i=-n:i-=n);const a=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=s-this.aY;o=n*e-i*t+this.aX,s=n*t+i*e+this.aY}return t.set(o,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ih extends nh{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function rh(){let e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(i-t)/(o+s)+(i-n)/s;l*=o,c*=o,r(t,n,l,c)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}const ah=new Ua,oh=new rh,sh=new rh,lh=new rh;class ch extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let a,o,s=Math.floor(r),l=r-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===l&&s===i-1&&(s=i-2,l=1),this.closed||s>0?a=n[(s-1)%i]:(ah.subVectors(n[0],n[1]).add(n[0]),a=ah);const c=n[s%i],u=n[(s+1)%i];if(this.closed||s+2<i?o=n[(s+2)%i]:(ah.subVectors(n[i-1],n[i-2]).add(n[i-1]),o=ah),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),oh.initNonuniformCatmullRom(a.x,c.x,u.x,o.x,t,n,i),sh.initNonuniformCatmullRom(a.y,c.y,u.y,o.y,t,n,i),lh.initNonuniformCatmullRom(a.z,c.z,u.z,o.z,t,n,i)}else"catmullrom"===this.curveType&&(oh.initCatmullRom(a.x,c.x,u.x,o.x,this.tension),sh.initCatmullRom(a.y,c.y,u.y,o.y,this.tension),lh.initCatmullRom(a.z,c.z,u.z,o.z,this.tension));return t.set(oh.calc(l),sh.calc(l),lh.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ua).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uh(e,t,n,i,r){const a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function hh(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function dh(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class ph extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Da,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Da,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Da;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(dh(e,n.x,i.x,r.x,a.x),dh(e,n.y,i.y,r.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ua,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ua;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(dh(e,n.x,i.x,r.x,a.x),dh(e,n.y,i.y,r.y,a.y),dh(e,n.z,i.z,r.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Da,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Da,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Da;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=this.v0,i=this.v1,r=this.v2;return t.set(hh(e,n.x,i.x,r.x),hh(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yh extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ua;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua,n=this.v0,i=this.v1,r=this.v2;return t.set(hh(e,n.x,i.x,r.x),hh(e,n.y,i.y,r.y),hh(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _h extends th{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da,n=this.points,i=(n.length-1)*e,r=Math.floor(i),a=i-r,o=n[0===r?r:r-1],s=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(uh(a,o.x,s.x,l.x,c.x),uh(a,o.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Da).fromArray(n))}return this}}var bh=Object.freeze({__proto__:null,ArcCurve:ih,CatmullRomCurve3:ch,CubicBezierCurve:ph,CubicBezierCurve3:fh,EllipseCurve:nh,LineCurve:mh,LineCurve3:gh,QuadraticBezierCurve:vh,QuadraticBezierCurve3:yh,SplineCurve:_h});class xh extends th{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new bh[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,a=this.curves[r],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new bh[n.type]).fromJSON(n))}return this}}class Sh extends xh{constructor(e){super(),this.type="Path",this.currentPoint=new Da,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new mh(this.currentPoint.clone(),new Da(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new vh(this.currentPoint.clone(),new Da(e,t),new Da(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const o=new ph(this.currentPoint.clone(),new Da(e,t),new Da(n,i),new Da(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new _h(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,o,s),this}absellipse(e,t,n,i,r,a,o,s){const l=new nh(e,t,n,i,r,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wh extends Sh{constructor(e){super(e),this.uuid=Ca(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Sh).fromJSON(n))}return this}}function Mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let a=Eh(e,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c;if(i&&(a=function(e,t,n,i){const r=[];for(let a=0,o=t.length;a<o;a++){const n=Eh(e,t[a]*i,a<o-1?t[a+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),r.push(Uh(n))}r.sort(kh);for(let a=0;a<r.length;a++)n=Ih(r[a],n);return n}(e,t,a,n)),e.length>80*n){s=1/0,l=1/0;let t=-1/0,i=-1/0;for(let a=n;a<r;a+=n){const n=e[a],r=e[a+1];n<s&&(s=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}c=Math.max(t-s,i-l),c=0!==c?32767/c:0}return Ch(a,o,n,s,l,c,0),o}function Eh(e,t,n,i,r){let a;if(r===function(e,t,n,i){let r=0;for(let a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(let o=t;o<n;o+=i)a=qh(o/i|0,e[o],e[o+1],a);else for(let o=n-i;o>=t;o-=i)a=qh(o/i|0,e[o],e[o+1],a);return a&&jh(a,a.next)&&(Zh(a),a=a.next),a}function Th(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!jh(i,i.next)&&0!==Bh(i.prev,i,i.next))i=i.next;else{if(Zh(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Ch(e,t,n,i,r,a,o){if(!e)return;!o&&a&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Nh(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let a=null;for(t=0;r;){t++;let o=r,s=0;for(let e=0;e<n&&(s++,o=o.nextZ,o);e++);let l=n;for(;s>0||l>0&&o;)0!==s&&(0===l||!o||r.z<=o.z)?(i=r,r=r.nextZ,s--):(i=o,o=o.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=o}a.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,a);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(a?Ph(e,i,r,a):Ah(e))t.push(l.i,e.i,c.i),Zh(e),e=c.next,s=c.next;else if((e=c)===s){o?1===o?Ch(e=Rh(Th(e),t),t,n,i,r,a,2):2===o&&Lh(e,t,n,i,r,a):Ch(Th(e),t,n,i,r,a,1);break}}}function Ah(e){const t=e.prev,n=e,i=e.next;if(Bh(t,n,i)>=0)return!1;const r=t.x,a=n.x,o=i.x,s=t.y,l=n.y,c=i.y,u=Math.min(r,a,o),h=Math.min(s,l,c),d=Math.max(r,a,o),p=Math.max(s,l,c);let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&zh(r,s,a,l,o,c,f.x,f.y)&&Bh(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Ph(e,t,n,i){const r=e.prev,a=e,o=e.next;if(Bh(r,a,o)>=0)return!1;const s=r.x,l=a.x,c=o.x,u=r.y,h=a.y,d=o.y,p=Math.min(s,l,c),f=Math.min(u,h,d),m=Math.max(s,l,c),g=Math.max(u,h,d),v=Nh(p,f,t,n,i),y=Nh(m,g,t,n,i);let _=e.prevZ,b=e.nextZ;for(;_&&_.z>=v&&b&&b.z<=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&zh(s,u,l,h,c,d,_.x,_.y)&&Bh(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==o&&zh(s,u,l,h,c,d,b.x,b.y)&&Bh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&zh(s,u,l,h,c,d,_.x,_.y)&&Bh(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==o&&zh(s,u,l,h,c,d,b.x,b.y)&&Bh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Rh(e,t){let n=e;do{const i=n.prev,r=n.next.next;!jh(i,r)&&Hh(i,n,n.next,r)&&Wh(i,r)&&Wh(r,i)&&(t.push(i.i,n.i,r.i),Zh(n),Zh(n.next),n=e=r),n=n.next}while(n!==e);return Th(n)}function Lh(e,t,n,i,r,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Fh(o,e)){let s=Xh(o,e);return o=Th(o,o.next),s=Th(s,s.next),Ch(o,t,n,i,r,a,0),void Ch(s,t,n,i,r,a,0)}e=e.next}o=o.next}while(o!==e)}function kh(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function Ih(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let a,o=-1/0;if(jh(e,n))return n;do{if(jh(e,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>o&&(o=e,a=n.x<n.next.x?n:n.next,e===i))return a}n=n.next}while(n!==t);if(!a)return null;const s=a,l=a.x,c=a.y;let u=1/0;n=a;do{if(i>=n.x&&n.x>=l&&i!==n.x&&Oh(r<c?i:o,r,l,c,r<c?o:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);Wh(n,e)&&(t<u||t===u&&(n.x>a.x||n.x===a.x&&Dh(a,n)))&&(a=n,u=t)}n=n.next}while(n!==s);return a}(e,t);if(!n)return t;const i=Xh(n,e);return Th(i,i.next),Th(n,n.next)}function Dh(e,t){return Bh(e.prev,e,t.prev)<0&&Bh(t.next,e,e.next)<0}function Nh(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Uh(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Oh(e,t,n,i,r,a,o,s){return(r-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function zh(e,t,n,i,r,a,o,s){return!(e===o&&t===s)&&Oh(e,t,n,i,r,a,o,s)}function Fh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Hh(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Wh(e,t)&&Wh(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Bh(e.prev,e,t.prev)||Bh(e,t.prev,t))||jh(e,t)&&Bh(e.prev,e,e.next)>0&&Bh(t.prev,t,t.next)>0)}function Bh(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function jh(e,t){return e.x===t.x&&e.y===t.y}function Hh(e,t,n,i){const r=Gh(Bh(e,t,n)),a=Gh(Bh(e,t,i)),o=Gh(Bh(n,i,e)),s=Gh(Bh(n,i,t));return r!==a&&o!==s||(!(0!==r||!Vh(e,n,t))||(!(0!==a||!Vh(e,i,t))||(!(0!==o||!Vh(n,e,i))||!(0!==s||!Vh(n,t,i)))))}function Vh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Gh(e){return e>0?1:e<0?-1:0}function Wh(e,t){return Bh(e.prev,e,e.next)<0?Bh(e,t,e.next)>=0&&Bh(e,e.prev,t)>=0:Bh(e,t,e.prev)<0||Bh(e,e.next,t)<0}function Xh(e,t){const n=Yh(e.i,e.x,e.y),i=Yh(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function qh(e,t,n,i){const r=Yh(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Zh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yh(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Kh{static triangulate(e,t){return Mh(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)}}class Jh{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Jh.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];Qh(e),$h(n,e);let a=e.length;t.forEach(Qh);for(let s=0;s<t.length;s++)i.push(a),a+=t[s].length,$h(n,t[s]);const o=Kh.triangulate(n,i);for(let s=0;s<o.length;s+=3)r.push(o.slice(s,s+3));return r}}function Qh(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function $h(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class ed extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wh([new Da(.5,.5),new Da(-.5,.5),new Da(-.5,-.5),new Da(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let o=0,s=e.length;o<s;o++){a(e[o])}function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:td;let g,v,y,_,b,x=!1;f&&(g=f.getSpacedPoints(s),x=!0,c=!1,v=f.computeFrenetFrames(s,!1),y=new Ua,_=new Ua,b=new Ua),c||(p=0,u=0,h=0,d=0);const S=e.extractPoints(o);let w=S.shape;const M=S.holes;if(!Jh.isClockWise(w)){w=w.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];Jh.isClockWise(t)&&(M[e]=t.reverse())}}function E(e){const t=1e-10*1e-10;let n=e[0];for(let i=1;i<=e.length;i++){const r=i%e.length,a=e[r],o=a.x-n.x,s=a.y-n.y,l=o*o+s*s,c=Math.max(Math.abs(a.x),Math.abs(a.y),Math.abs(n.x),Math.abs(n.y));l<=t*c*c?(e.splice(r,1),i--):n=a}}E(w),M.forEach(E);const T=M.length,C=w;for(let t=0;t<T;t++){const e=M[t];w=w.concat(e)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const P=w.length;function R(e,t,n){let i,r,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,h=o*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-s/h,f=t.y+o/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-s*l);i=p+o*m-e.x,r=f+s*m-e.y;const g=i*i+r*r;if(g<=2)return new Da(i,r);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Da(i/a,r/a)}const L=[];for(let t=0,n=C.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[t]=R(C[t],C[i],C[r]);const k=[];let I,D,N=L.concat();for(let t=0,n=T;t<n;t++){const e=M[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=R(e[t],e[i],e[r]);k.push(I),N=N.concat(I)}if(0===p)D=Jh.triangulateShape(C,M);else{const e=[],t=[];for(let n=0;n<p;n++){const i=n/p,r=u*Math.cos(i*Math.PI/2),a=h*Math.sin(i*Math.PI/2)+d;for(let t=0,n=C.length;t<n;t++){const n=A(C[t],L[t],a);F(n.x,n.y,-r),0===i&&e.push(n)}for(let e=0,n=T;e<n;e++){const n=M[e];I=k[e];const o=[];for(let e=0,t=n.length;e<t;e++){const t=A(n[e],I[e],a);F(t.x,t.y,-r),0===i&&o.push(t)}0===i&&t.push(o)}}D=Jh.triangulateShape(e,t)}const U=D.length,O=h+d;for(let t=0;t<P;t++){const e=c?A(w[t],N[t],O):w[t];x?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(_).add(y),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<P;e++){const n=c?A(w[e],N[e],O):w[e];x?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(_).add(y),F(b.x,b.y,b.z)):F(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=C.length;t<r;t++){const e=A(C[t],L[t],i);F(e.x,e.y,l+n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];I=k[t];for(let t=0,r=e.length;t<r;t++){const r=A(e[t],I[t],i);x?F(r.x,r.y+g[s-1].y,g[s-1].x+n):F(r.x,r.y,l+n)}}}function z(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=P*e,a=P*(e+1);j(t+i+n,t+r+n,t+r+a,t+i+a)}}}function F(e,t,n){a.push(e),a.push(t),a.push(n)}function B(e,t,r){H(e),H(t),H(r);const a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);V(o[0]),V(o[1]),V(o[2])}function j(e,t,r,a){H(e),H(t),H(a),H(t),H(r),H(a);const o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);V(s[0]),V(s[1]),V(s[3]),V(s[1]),V(s[2]),V(s[3])}function H(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function V(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=P*e;for(let n=0;n<U;n++){const e=D[n];B(e[2]+t,e[1]+t,e[0]+t)}e=s+2*p,t=P*e;for(let n=0;n<U;n++){const e=D[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<U;e++){const t=D[e];B(t[2],t[1],t[0])}for(let e=0;e<U;e++){const t=D[e];B(t[0]+P*s,t[1]+P*s,t[2]+P*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;z(C,t),t+=C.length;for(let n=0,i=M.length;n<i;n++){const e=M[n];z(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new il(i,3)),this.setAttribute("uv",new il(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new bh[i.type]).fromJSON(i)),new ed(n,e.options)}}const td={generateTopUV:function(e,t,n,i,r){const a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Da(a,o),new Da(s,l),new Da(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new Da(o,1-l),new Da(c,1-h),new Da(d,1-f),new Da(m,1-v)]:[new Da(s,1-l),new Da(u,1-h),new Da(p,1-f),new Da(g,1-v)]}};class nd extends Zu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nd(e.radius,e.detail)}}class id extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Da(0,-.5),new Da(.5,0),new Da(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Aa(i,0,2*Math.PI);const r=[],a=[],o=[],s=[],l=[],c=1/t,u=new Ua,h=new Da,d=new Ua,p=new Ua,f=new Ua;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),s.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){const r=n+v*c*i,d=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),h.x=v/t,h.y=n/(e.length-1),o.push(h.x,h.y);const i=s[3*n+0]*d,r=s[3*n+1],c=s[3*n+0]*p;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,a=n+e.length,o=n+e.length+1,s=n+1;r.push(i,a,s),r.push(o,s,a)}this.setIndex(r),this.setAttribute("position",new il(a,3)),this.setAttribute("uv",new il(o,2)),this.setAttribute("normal",new il(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new id(e.points,e.segments,e.phiStart,e.phiLength)}}class rd extends Zu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rd(e.radius,e.detail)}}class ad extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,o=Math.floor(n),s=Math.floor(i),l=o+1,c=s+1,u=e/o,h=t/s,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-a;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/o),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<o;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;d.push(t,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new il(p,3)),this.setAttribute("normal",new il(f,3)),this.setAttribute("uv",new il(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.width,e.height,e.widthSegments,e.heightSegments)}}class od extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const o=[],s=[],l=[],c=[];let u=e;const h=(t-e)/i,d=new Ua,p=new Da;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*a;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,a=i+n+1,s=i+n+2,l=i+1;o.push(r,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new il(s,3)),this.setAttribute("normal",new il(l,3)),this.setAttribute("uv",new il(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new od(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class sd extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wh([new Da(0,.5),new Da(-.5,-.5),new Da(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(o,s,c),o+=s,s=0;function l(e){const o=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Jh.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Jh.isClockWise(e)&&(u[t]=e.reverse())}const h=Jh.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,i=h.length;t<i;t++){const e=h[t],i=e[0]+o,r=e[1]+o,a=e[2]+o;n.push(i,r,a),s+=3}}this.setIndex(n),this.setAttribute("position",new il(i,3)),this.setAttribute("normal",new il(r,3)),this.setAttribute("uv",new il(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new sd(n,e.curveSegments)}}class ld extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const c=[],u=new Ua,h=new Ua,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===a?y=.5/t:g===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*r)*Math.sin(a+v*o),u.y=e*Math.cos(a+v*o),u.z=e*Math.sin(i+s*r)*Math.sin(a+v*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],o=c[g+1][e+1];(0!==g||a>0)&&d.push(t,i,o),(g!==n-1||s<Math.PI)&&d.push(i,r,o)}this.setIndex(d),this.setAttribute("position",new il(p,3)),this.setAttribute("normal",new il(f,3)),this.setAttribute("uv",new il(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ld(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cd extends Zu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cd(e.radius,e.detail)}}class ud extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],s=[],l=[],c=new Ua,u=new Ua,h=new Ua;for(let d=0;d<=n;d++)for(let a=0;a<=i;a++){const p=a/i*r,f=d/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(a/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=i;e++){const t=(i+1)*d+e-1,n=(i+1)*(d-1)+e-1,r=(i+1)*(d-1)+e,o=(i+1)*d+e;a.push(t,n,o),a.push(n,r,o)}this.setIndex(a),this.setAttribute("position",new il(o,3)),this.setAttribute("normal",new il(s,3)),this.setAttribute("uv",new il(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hd extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const o=[],s=[],l=[],c=[],u=new Ua,h=new Ua,d=new Ua,p=new Ua,f=new Ua,m=new Ua,g=new Ua;for(let y=0;y<=n;++y){const o=y/n*r*Math.PI*2;v(o,r,a,e,d),v(o+.01,r,a,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,a=-t*Math.cos(r),o=t*Math.sin(r);u.x=d.x+(a*g.x+o*f.x),u.y=d.y+(a*g.y+o*f.y),u.z=d.z+(a*g.z+o*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,a=(i+1)*(y-1)+e;o.push(t,n,a),o.push(n,r,a)}function v(e,t,n,i,r){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new il(s,3)),this.setAttribute("normal",new il(l,3)),this.setAttribute("uv",new il(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dd extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yh(new Ua(-1,-1,0),new Ua(-1,1,0),new Ua(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Ua,s=new Ua,l=new Da;let c=new Ua;const u=[],h=[],d=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=a.normals[r],d=a.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+r*d.x,s.y=a*l.y+r*d.y,s.z=a*l.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),a=(i+1)*e+t,o=(i+1)*(e-1)+t;p.push(n,r,o),p.push(r,a,o)}}()}(),this.setIndex(p),this.setAttribute("position",new il(u,3)),this.setAttribute("normal",new il(h,3)),this.setAttribute("uv",new il(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dd((new bh[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class pd extends hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Ua,r=new Ua;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=o.getX(e+l),c=o.getX(e+(l+1)%3);i.fromBufferAttribute(a,s),r.fromBufferAttribute(a,c),!0===fd(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let s=0;s<3;s++){const o=3*e+s,l=3*e+(s+1)%3;i.fromBufferAttribute(a,o),r.fromBufferAttribute(a,l),!0===fd(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new il(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fd(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var md=Object.freeze({__proto__:null,BoxGeometry:El,CapsuleGeometry:Gu,CircleGeometry:Wu,ConeGeometry:qu,CylinderGeometry:Xu,DodecahedronGeometry:Yu,EdgesGeometry:eh,ExtrudeGeometry:ed,IcosahedronGeometry:nd,LatheGeometry:id,OctahedronGeometry:rd,PlaneGeometry:ad,PolyhedronGeometry:Zu,RingGeometry:od,ShapeGeometry:sd,SphereGeometry:ld,TetrahedronGeometry:cd,TorusGeometry:ud,TorusKnotGeometry:hd,TubeGeometry:dd,WireframeGeometry:pd});class gd extends zs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ns(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vd extends Rl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yd extends zs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ns(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ns(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _d extends yd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Da(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Aa(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ns(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ns(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ns(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bd extends zs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ns(16777215),this.specular=new Ns(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ns(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Ln,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xd extends zs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ns(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ns(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sd extends zs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wd extends zs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ns(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ns(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Ln,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Md extends zs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Er,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ed extends zs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Td extends zs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ns(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pr,this.normalScale=new Da(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Cd extends fu{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ad(e,t){return e&&e.constructor!==t?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Pd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rd(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function Ld(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,o=0;o!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[o++]=e[i+n]}return r}function kd(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(t.push(a.time),n.push(...o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}class Id{static convertArray(e,t){return Ad(e,t)}static isTypedArray(e){return Pd(e)}static getKeyframeOrder(e){return Rd(e)}static sortedArray(e,t,n){return Ld(e,t,n)}static flattenJSON(e,t,n,i){kd(e,t,n,i)}static subclip(e,t,n,i){return function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const a=e.clone();a.name=t;const o=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),s=[],c=[];for(let a=0;a<e.times.length;++a){const o=e.times[a]*r;if(!(o<n||o>=i)){s.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==s.length&&(e.times=Ad(s,e.times.constructor),e.values=Ad(c,e.values.constructor),o.push(e))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a}(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:30)}static makeClipAdditive(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,a=t/i;for(let o=0;o<r;++o){const t=n.tracks[o],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(a<=t.times[0]){const e=s,n=l-s;d=t.values.slice(e,n)}else if(a>=t.times[h]){const e=h*l+s,n=e+l-s;d=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=s,i=l-s;e.evaluate(a),d=e.resultBuffer.slice(n,i)}"quaternion"===i&&(new Na).fromArray(d).normalize().conjugate().toArray(d);const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)Na.multiplyQuaternionsFlat(r.values,t,d,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=d[n]}}}return e.blendMode=xr,e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:30)}}class Dd{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nd extends Dd{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vr,endingEnd:vr}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case yr:r=e,o=2*t-n;break;case _r:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case yr:a=e,s=2*n-t;break;case _r:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let b=0;b!==o;++b)r[b]=g*a[c+b]+v*a[l+b]+y*a[s+b]+_*a[u+b];return r}}class Ud extends Dd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(i-t),u=1-c;for(let h=0;h!==o;++h)r[h]=a[l+h]*u+a[s+h]*c;return r}}class Od extends Dd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class zd{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ad(t,this.TimeBufferType),this.values=Ad(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ad(e.times,Array),values:Ad(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Od(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ud(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Nd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case fr:t=this.InterpolantFactoryMethodDiscrete;break;case mr:t=this.InterpolantFactoryMethodLinear;break;case gr:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fr;case this.InterpolantFactoryMethodLinear:return mr;case this.InterpolantFactoryMethodSmooth:return gr}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==r;o++){const t=n[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,a),e=!1;break}a=t}if(void 0!==i&&Pd(i))for(let o=0,s=i.length;o!==s;++o){const t=i[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===gr,r=e.length-1;let a=1;for(let o=1;o<r;++o){let r=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(i)r=!0;else{const e=o*n,i=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[i+o]||n!==t[a+o]){r=!0;break}}}if(r){if(o!==a){e[a]=e[o];const i=o*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,o=0;o!==n;++o)t[i+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}zd.prototype.ValueTypeName="",zd.prototype.TimeBufferType=Float32Array,zd.prototype.ValueBufferType=Float32Array,zd.prototype.DefaultInterpolation=mr;class Fd extends zd{constructor(e,t,n){super(e,t,n)}}Fd.prototype.ValueTypeName="bool",Fd.prototype.ValueBufferType=Array,Fd.prototype.DefaultInterpolation=fr,Fd.prototype.InterpolantFactoryMethodLinear=void 0,Fd.prototype.InterpolantFactoryMethodSmooth=void 0;class Bd extends zd{constructor(e,t,n,i){super(e,t,n,i)}}Bd.prototype.ValueTypeName="color";class jd extends zd{constructor(e,t,n,i){super(e,t,n,i)}}jd.prototype.ValueTypeName="number";class Hd extends Dd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t);let l=e*o;for(let c=l+o;l!==c;l+=4)Na.slerpFlat(r,0,a,l-o,a,l,s);return r}}class Vd extends zd{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new Hd(this.times,this.values,this.getValueSize(),e)}}Vd.prototype.ValueTypeName="quaternion",Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Gd extends zd{constructor(e,t,n){super(e,t,n)}}Gd.prototype.ValueTypeName="string",Gd.prototype.ValueBufferType=Array,Gd.prototype.DefaultInterpolation=fr,Gd.prototype.InterpolantFactoryMethodLinear=void 0,Gd.prototype.InterpolantFactoryMethodSmooth=void 0;class Wd extends zd{constructor(e,t,n,i){super(e,t,n,i)}}Wd.prototype.ValueTypeName="vector";class Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:br;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Ca(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(qd(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,a=n.length;r!==a;++r)t.push(zd.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let o=0;o<r;o++){let e=[],s=[];e.push((o+r-1)%r,o,(o+1)%r),s.push(0,1,0);const l=Rd(e);e=Ld(e,1,l),s=Ld(s,1,l),i||0!==e[0]||(e.push(r),s.push(s[0])),a.push(new jd(".morphTargetInfluences["+t[o].name+"]",e,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,s=e.length;o<s;o++){const t=e[o],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],o=[];kd(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],a=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),a.push(i.morphTarget===r?1:0)}i.push(new jd(".morphTargetInfluence["+r+"]",t,a))}s=t.length*a}else{const r=".bones["+t[c].name+"]";n(Wd,r+".position",e,"pos",i),n(Vd,r+".quaternion",e,"rot",i),n(Wd,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,s,i,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function qd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jd;case"vector":case"vector2":case"vector3":case"vector4":return Wd;case"color":return Bd;case"quaternion":return Vd;case"bool":case"boolean":return Fd;case"string":return Gd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];kd(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Zd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Yd{constructor(e,t,n){const i=this;let r,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const Kd=new Yd;class Jd{constructor(e){this.manager=void 0!==e?e:Kd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Jd.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qd={};class $d extends Error{constructor(e,t){super(e),this.response=t}}class ep extends Jd{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Zd.get("file:".concat(e));if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==Qd[e])return void Qd[e].push({onLoad:t,onProgress:n,onError:i});Qd[e]=[],Qd[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,s=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Qd[e],i=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=r?parseInt(r):0,o=0!==a;let s=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{s+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new $d('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,o));case"json":return e.json();default:if(""===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{Zd.add("file:".concat(e),t);const n=Qd[e];delete Qd[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=Qd[e];if(void 0===n)throw this.manager.itemError(e),t;delete Qd[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class tp extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new ep(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(fM){i?i(fM):console.error(fM),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Xd.parse(e[n]);t.push(i)}return t}}class np extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=[],o=new zu,s=new ep(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let l=0;function c(c){s.load(e[c],function(e){const n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=ri),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else s.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ri),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}const ip=new WeakMap;class rp extends Jd{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Zd.get("image:".concat(e));if(void 0!==a){if(!0===a.complete)r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0);else{let e=ip.get(a);void 0===e&&(e=[],ip.set(a,e)),e.push({onLoad:t,onError:i})}return a}const o=Ga("img");function s(){c(),t&&t(this);const n=ip.get(this)||[];for(let e=0;e<n.length;e++){const t=n[e];t.onLoad&&t.onLoad(this)}ip.delete(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),Zd.remove("image:".concat(e));const n=ip.get(this)||[];for(let e=0;e<n.length;e++){const i=n[e];i.onError&&i.onError(t)}ip.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),Zd.add("image:".concat(e),o),r.manager.itemStart(e),o.src=e,o}}class ap extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=new zl;r.colorSpace=kr;const a=new rp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],function(e){r.images[n]=e,o++,6===o&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)s(l);return r}}class op extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new Ec,o=new ep(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(e){let n;try{n=r.parse(e)}catch(o){if(void 0===i)return void console.error(o);i(o)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Jn,a.wrapT=void 0!==n.wrapT?n.wrapT:Jn,a.magFilter=void 0!==n.magFilter?n.magFilter:ri,a.minFilter=void 0!==n.minFilter?n.minFilter:ri,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=si),1===n.mipmapCount&&(a.minFilter=ri),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,i),a}}class sp extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=new so,a=new rp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class lp extends gs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Ns(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class cp extends lp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(gs.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ns(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const up=new Vo,hp=new Ua,dp=new Ua;class pp{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Da(512,512),this.mapType=ci,this.map=null,this.mapPass=null,this.matrix=new Vo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wc,this._frameExtents=new Da(1,1),this._viewportCount=1,this._viewports=[new lo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;hp.setFromMatrixPosition(e.matrixWorld),t.position.copy(hp),dp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dp),t.updateMatrixWorld(),up.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(up,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(up)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fp extends pp{constructor(){super(new Nl(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*Ta*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mp extends lp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gs.DEFAULT_UP),this.updateMatrix(),this.target=new gs,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new fp}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const gp=new Vo,vp=new Ua,yp=new Ua;class _p extends pp{constructor(){super(new Nl(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Da(4,2),this._viewportCount=6,this._viewports=[new lo(2,1,1,1),new lo(0,1,1,1),new lo(3,1,1,1),new lo(1,1,1,1),new lo(3,0,1,1),new lo(1,0,1,1)],this._cubeDirections=[new Ua(1,0,0),new Ua(-1,0,0),new Ua(0,0,1),new Ua(0,0,-1),new Ua(0,1,0),new Ua(0,-1,0)],this._cubeUps=[new Ua(0,1,0),new Ua(0,1,0),new Ua(0,1,0),new Ua(0,1,0),new Ua(0,0,1),new Ua(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),vp.setFromMatrixPosition(e.matrixWorld),n.position.copy(vp),yp.copy(n.position),yp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(yp),n.updateMatrixWorld(),i.makeTranslation(-vp.x,-vp.y,-vp.z),gp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gp,n.coordinateSystem,n.reversedDepth)}}class bp extends lp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new _p}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xp extends Ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Sp extends pp{constructor(){super(new xp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class wp extends lp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gs.DEFAULT_UP),this.updateMatrix(),this.target=new gs,this.shadow=new Sp}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Mp extends lp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ep extends lp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Tp{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ua)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Cp extends lp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tp;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ap extends Jd{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,a=new ep(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(fM){i?i(fM):console.error(fM),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Ns).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(i.dispersion=e.dispersion),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new Ns).setHex(t.value);break;case"v2":i.uniforms[r].value=(new Da).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new Ua).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new lo).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new Fa).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Vo).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Da).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Da).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Ap.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:gd,SpriteMaterial:Yl,RawShaderMaterial:vd,ShaderMaterial:Rl,PointsMaterial:Au,MeshPhysicalMaterial:_d,MeshStandardMaterial:yd,MeshPhongMaterial:bd,MeshToonMaterial:xd,MeshNormalMaterial:Sd,MeshLambertMaterial:wd,MeshDepthMaterial:Md,MeshDistanceMaterial:Ed,MeshBasicMaterial:Fs,MeshMatcapMaterial:Td,LineDashedMaterial:Cd,LineBasicMaterial:fu,Material:zs}[e]}}class Pp{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Rp extends hl{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Lp extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new ep(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(fM){i?i(fM):console.error(fM),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}(e,r.buffer),o=Va(r.type,a),s=new Xl(o,r.stride);return s.uuid=r.uuid,t[i]=s,s}const r=e.isInstancedBufferGeometry?new Rp:new hl,a=e.data.index;if(void 0!==a){const e=Va(a.type,a.array);r.setIndex(new Zs(e,1))}const o=e.data.attributes;for(const u in o){const t=o[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Zl(r,t.itemSize,t.offset,t.normalized)}else{const e=Va(t.type,t.array);n=new(t.isInstancedBufferAttribute?Pc:Zs)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),r.setAttribute(u,n)}const s=e.data.morphAttributes;if(s)for(const u in s){const t=s[u],n=[];for(let r=0,a=t.length;r<a;r++){const a=t[r];let o;if(a.isInterleavedBufferAttribute){const t=i(e.data,a.data);o=new Zl(t,a.itemSize,a.offset,a.normalized)}else{const e=Va(a.type,a.array);o=new Zs(e,a.itemSize,a.normalized)}void 0!==a.name&&(o.name=a.name),n.push(o)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;return void 0!==c&&(r.boundingSphere=(new Do).fromJSON(c)),e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class kp extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=""===this.path?Pp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new ep(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)},n,i)}async loadAsync(e,t){const n=""===this.path?Pp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new ep(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),a=JSON.parse(r),o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,s,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new wh).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,a=e.length;r<a;r++){const t=(new Ac).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Lp;for(let r=0,a=e.length;r<a;r++){let a;const o=e[r];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(o);break;default:o.type in md?a=md[o.type].fromJSON(o,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(o.type,'"'))}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new Ap;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=Xd.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function a(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Va(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Yd(t);r=new rp(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ec(n.data,n.width,n.height)))}i[n.uuid]=new io(e)}else{const e=a(n.url);i[n.uuid]=new io(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:Va(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new rp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new Ec(i.data,i.width,i.height)))}n[i.uuid]=new io(e)}else{const e=await r(i.url);n[i.uuid]=new io(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const o=t[a.image],s=o.data;let l;Array.isArray(s)?(l=new zl,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Ec:new so,s&&(l.needsUpdate=!0)),l.source=o,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,Ip)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Dp),l.wrapT=n(a.wrap[1],Dp)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,Np)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,Np)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),i[a.uuid]=l}return i}parseObject(e,t,n,i,r){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function h(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new Wl,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Ns(e.background):a.background=h(e.background)),void 0!==e.environment&&(a.environment=h(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Gl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Vl(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Nl(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new xp(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Mp(e.color,e.intensity);break;case"DirectionalLight":a=new wp(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new bp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Ep(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new mp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new cp(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Cp).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=c(e.material),a=new wc(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=c(e.material),a=new wl(o,s);break;case"InstancedMesh":o=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;a=new Oc(o,s,t),a.instanceMatrix=new Pc(new Float32Array(n.array),16),void 0!==i&&(a.instanceColor=new Pc(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":o=l(e.geometry),s=c(e.material),a=new pu(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s),a.geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=(new go).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(n=(new Do).fromJSON(e.boundingSphere)),u(u({},e),{},{boundingBox:t,boundingSphere:n})}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=h(e.matricesTexture.uuid),a._indirectTexture=h(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=h(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(a.boundingSphere=(new Do).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(a.boundingBox=(new go).fromJSON(e.boundingBox));break;case"LOD":a=new pc;break;case"Line":a=new Su(l(e.geometry),c(e.material));break;case"LineLoop":a=new Cu(l(e.geometry),c(e.material));break;case"LineSegments":a=new Tu(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new Iu(l(e.geometry),c(e.material));break;case"Sprite":a=new cc(c(e.material));break;case"Group":a=new Bl;break;case"Bone":a=new Mc;break;default:a=new gs}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=a.getObjectByProperty("uuid",n.object);void 0!==i&&a.addLevel(i,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);t.target=void 0!==i?i:new gs}})}}const Ip={UVMapping:Gn,CubeReflectionMapping:Wn,CubeRefractionMapping:Xn,EquirectangularReflectionMapping:qn,EquirectangularRefractionMapping:Zn,CubeUVReflectionMapping:Yn},Dp={RepeatWrapping:Kn,ClampToEdgeWrapping:Jn,MirroredRepeatWrapping:Qn},Np={NearestFilter:$n,NearestMipmapNearestFilter:ei,NearestMipmapLinearFilter:ni,LinearFilter:ri,LinearMipmapNearestFilter:ai,LinearMipmapLinearFilter:si},Up=new WeakMap;class Op extends Jd{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Zd.get("image-bitmap:".concat(e));if(void 0!==a)return r.manager.itemStart(e),a.then?void a.then(n=>{if(!0!==Up.has(a))return t&&t(n),r.manager.itemEnd(e),n;i&&i(Up.get(a)),r.manager.itemError(e),r.manager.itemEnd(e)}):(setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,o.signal="function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const s=fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return Zd.add("image-bitmap:".concat(e),n),t&&t(n),r.manager.itemEnd(e),n}).catch(function(t){i&&i(t),Up.set(s,t),Zd.remove("image-bitmap:".concat(e)),r.manager.itemError(e),r.manager.itemEnd(e)});Zd.add("image-bitmap:".concat(e),s),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let zp;class Fp{static getContext(){return void 0===zp&&(zp=new(window.AudioContext||window.webkitAudioContext)),zp}static setContext(e){zp=e}}class Bp extends Jd{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new ep(this.manager);function o(t){i?i(t):console.error(t),r.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0);Fp.getContext().decodeAudioData(n,function(e){t(e)}).catch(o)}catch(fM){o(fM)}},n,i)}}const jp=new Vo,Hp=new Vo,Vp=new Vo;class Gp{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Vp.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(Ea*t.fov*.5)/t.zoom;let a,o;Hp.elements[12]=-n,jp.elements[12]=n,a=-r*t.aspect+i,o=r*t.aspect+i,Vp.elements[0]=2*t.near/(o-a),Vp.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(Vp),a=-r*t.aspect-i,o=r*t.aspect-i,Vp.elements[0]=2*t.near/(o-a),Vp.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(Vp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Hp),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jp)}}class Wp extends Nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Xp{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const qp=new Ua,Zp=new Na,Yp=new Ua,Kp=new Ua,Jp=new Ua;class Qp extends gs{constructor(){super(),this.type="AudioListener",this.context=Fp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Xp}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(qp,Zp,Yp),Kp.set(0,0,-1).applyQuaternion(Zp),Jp.set(0,1,0).applyQuaternion(Zp),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(qp.x,e),t.positionY.linearRampToValueAtTime(qp.y,e),t.positionZ.linearRampToValueAtTime(qp.z,e),t.forwardX.linearRampToValueAtTime(Kp.x,e),t.forwardY.linearRampToValueAtTime(Kp.y,e),t.forwardZ.linearRampToValueAtTime(Kp.z,e),t.upX.linearRampToValueAtTime(Jp.x,e),t.upY.linearRampToValueAtTime(Jp.y,e),t.upZ.linearRampToValueAtTime(Jp.z,e)}else t.setPosition(qp.x,qp.y,qp.z),t.setOrientation(Kp.x,Kp.y,Kp.z,Jp.x,Jp.y,Jp.z)}}class $p extends gs{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const ef=new Ua,tf=new Na,nf=new Ua,rf=new Ua;class af extends $p{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ef,tf,nf),rf.set(0,0,1).applyQuaternion(tf);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ef.x,e),t.positionY.linearRampToValueAtTime(ef.y,e),t.positionZ.linearRampToValueAtTime(ef.z,e),t.orientationX.linearRampToValueAtTime(rf.x,e),t.orientationY.linearRampToValueAtTime(rf.y,e),t.orientationZ.linearRampToValueAtTime(rf.z,e)}else t.setPosition(ef.x,ef.y,ef.z),t.setOrientation(rf.x,rf.y,rf.z)}}class of{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class sf{constructor(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){Na.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;Na.multiplyQuaternionsFlat(e,a,e,t,e,n),Na.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]*a+e[n+o]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}}const lf="\\[\\]\\.:\\/",cf=new RegExp("["+lf+"]","g"),uf="[^"+lf+"]",hf="[^"+lf.replace("\\.","")+"]",df=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",uf)+/(WCOD+)?/.source.replace("WCOD",hf)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uf)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uf)+"$"),pf=["material","materials","bones","map"];class ff{constructor(e,t,n){this.path=t,this.parsedPath=n||ff.parseTrackName(t),this.node=ff.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ff.Composite(e,t,n):new ff(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cf,"")}static parseTrackName(e){const t=df.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==pf.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=ff.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?o=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ff.Composite=class{constructor(e,t,n){const i=n||ff.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},ff.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ff.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ff.prototype.GetterByBindingType=[ff.prototype._getValue_direct,ff.prototype._getValue_array,ff.prototype._getValue_arrayElement,ff.prototype._getValue_toArray],ff.prototype.SetterByBindingTypeAndVersioning=[[ff.prototype._setValue_direct,ff.prototype._setValue_direct_setNeedsUpdate,ff.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ff.prototype._setValue_array,ff.prototype._setValue_array_setNeedsUpdate,ff.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ff.prototype._setValue_arrayElement,ff.prototype._setValue_arrayElement_setNeedsUpdate,ff.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ff.prototype._setValue_fromArray,ff.prototype._setValue_fromArray_setNeedsUpdate,ff.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mf{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ca(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let o,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new ff(u,n[e],i[e]))}else if(d<l){o=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[s];let o=t[d];t[d]=a,void 0===o&&(o=new ff(u,n[e],i[e])),t[s]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[s]=a,e[a]=o;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[l];t[l]=i,t[a]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<r){const o=--r,s=e[o],c=--a,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[c];t[l]=i,t[o]=r,t.pop()}}else{const r=--a,o=e[r];r>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new ff(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}class gf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,o=new Array(a),s={endingStart:vr,endingEnd:vr};for(let l=0;l!==a;++l){const e=r[l].createInterpolant(null);o[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===xr)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===pr;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===hr){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=yr,i.endingEnd=yr):(i.endingStart=e?this.zeroSlopeAtStart?yr:vr:_r,i.endingEnd=t?this.zeroSlopeAtEnd?yr:vr:_r)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}const vf=new Float32Array(1);class yf extends Sa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new sf(ff.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,r),a[u]=l}o[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Ud(new Float32Array(2),new Float32Array(2),1,vf),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a="string"===typeof e?Xd.findByName(i,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:br),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new gf(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?Xd.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,a)}const o=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)o[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class _f extends co{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new fo(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class bf{constructor(e){this.value=e}clone(){return new bf(void 0===this.value.clone?this.value:this.value.clone())}}let xf=0;class Sf extends Sa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:xf++}),this.name="",this.usage=oa,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class wf extends Xl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Mf{constructor(e,t,n,i,r){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.normalized=a,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Ef=new Vo;class Tf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Ho(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new es,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Ef.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Ef),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Af(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Cf),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)Af(e[i],this,n,t);return n.sort(Cf),n}}function Cf(e,t){return e.distance-t.distance}function Af(e,t,n,i){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(r=!1)}if(!0===r&&!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Af(i[e],t,n,!0)}}class Pf{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=Rf.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Rf(){!1===this._document.hidden&&this.reset()}class Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Aa(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Aa(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class If{constructor(e,t,n,i){If.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const Df=new Da;class Nf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Da(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Df.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Df).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uf=new Ua,Of=new Ua,zf=new Ua,Ff=new Ua,Bf=new Ua,jf=new Ua,Hf=new Ua;class Vf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Uf.subVectors(e,this.start),Of.subVectors(this.end,this.start);const n=Of.dot(Of);let i=Of.dot(Uf)/n;return t&&(i=Aa(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hf;const i=1e-8*1e-8;let r,a;const o=this.start,s=e.start,l=this.end,c=e.end;zf.subVectors(l,o),Ff.subVectors(c,s),Bf.subVectors(o,s);const u=zf.dot(zf),h=Ff.dot(Ff),d=Ff.dot(Bf);if(u<=i&&h<=i)return t.copy(o),n.copy(s),t.sub(n),t.dot(t);if(u<=i)r=0,a=d/h,a=Aa(a,0,1);else{const e=zf.dot(Bf);if(h<=i)a=0,r=Aa(-e/u,0,1);else{const t=zf.dot(Ff),n=u*h-t*t;r=0!==n?Aa((t*d-e*h)/n,0,1):0,a=(t*r+d)/h,a<0?(a=0,r=Aa(-e/u,0,1)):a>1&&(a=1,r=Aa((t-e)/u,0,1))}}return t.copy(o).add(zf.multiplyScalar(r)),n.copy(s).add(Ff.multiplyScalar(a)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Gf=new Ua;class Wf extends gs{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new hl,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,s=32;a<s;a++,o++){const e=a/s*Math.PI*2,t=o/s*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new il(i,3));const r=new fu({fog:!1,toneMapped:!1});this.cone=new Tu(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Gf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Gf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xf=new Ua,qf=new Vo,Zf=new Vo;class Yf extends Tu{constructor(e){const t=Kf(e),n=new hl,i=[],r=[];for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new il(i,3)),n.setAttribute("color",new il(r,3));super(n,new fu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new Ns(255),o=new Ns(65280);this.setColors(a,o)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Zf.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(qf.multiplyMatrices(Zf,e.matrixWorld),Xf.setFromMatrixPosition(qf),i.setXYZ(a,Xf.x,Xf.y,Xf.z),qf.multiplyMatrices(Zf,e.parent.matrixWorld),Xf.setFromMatrixPosition(qf),i.setXYZ(a+1,Xf.x,Xf.y,Xf.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const n=this.geometry.getAttribute("color");for(let i=0;i<n.count;i+=2)n.setXYZ(i,e.r,e.g,e.b),n.setXYZ(i+1,t.r,t.g,t.b);return n.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kf(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...Kf(e.children[n]));return t}class Jf extends wl{constructor(e,t,n){super(new ld(t,4,2),new Fs({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qf=new Ua,$f=new Ns,em=new Ns;class tm extends gs{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new rd(t);i.rotateY(.5*Math.PI),this.material=new Fs({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new Zs(a,3)),this.add(new wl(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$f.copy(this.light.color),em.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?$f:em;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Qf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nm extends Tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Ns(n),i=new Ns(i);const r=t/2,a=e/t,o=e/2,s=[],l=[];for(let u=0,h=0,d=-o;u<=t;u++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);const e=u===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new hl;c.setAttribute("position",new il(s,3)),c.setAttribute("color",new il(l,3));super(c,new fu({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class im extends Tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Ns(r),a=new Ns(a);const o=[],s=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;o.push(0,0,0),o.push(i,0,l);const u=1&c?r:a;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:a,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l;o.push(r,0,a),s.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l,o.push(r,0,a),s.push(t.r,t.g,t.b)}}const l=new hl;l.setAttribute("position",new il(o,3)),l.setAttribute("color",new il(s,3));super(l,new fu({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rm=new Ua,am=new Ua,om=new Ua;class sm extends gs{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new hl;i.setAttribute("position",new il([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new fu({fog:!1,toneMapped:!1});this.lightPlane=new Su(i,r),this.add(this.lightPlane),i=new hl,i.setAttribute("position",new il([0,0,0,0,0,1],3)),this.targetLine=new Su(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rm.setFromMatrixPosition(this.light.matrixWorld),am.setFromMatrixPosition(this.light.target.matrixWorld),om.subVectors(am,rm),this.lightPlane.lookAt(am),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(am),this.targetLine.scale.z=om.length()}}const lm=new Ua,cm=new Ll;class um extends Tu{constructor(e){const t=new hl,n=new fu({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};function o(e,t){s(e),s(t)}function s(e){i.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new il(i,3)),t.setAttribute("color",new il(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Ns(16755200),c=new Ns(16711680),u=new Ns(43775),h=new Ns(16777215),d=new Ns(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,i,r){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap;let n,i;if(cm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)n=1,i=0;else if(this.camera.coordinateSystem===va)n=-1,i=1;else{if(this.camera.coordinateSystem!==ya)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);n=0,i=1}hm("c",t,e,cm,0,0,n),hm("t",t,e,cm,0,0,i),hm("n1",t,e,cm,-1,-1,n),hm("n2",t,e,cm,1,-1,n),hm("n3",t,e,cm,-1,1,n),hm("n4",t,e,cm,1,1,n),hm("f1",t,e,cm,-1,-1,i),hm("f2",t,e,cm,1,-1,i),hm("f3",t,e,cm,-1,1,i),hm("f4",t,e,cm,1,1,i),hm("u1",t,e,cm,.7,1.1,n),hm("u2",t,e,cm,-.7,1.1,n),hm("u3",t,e,cm,0,2,n),hm("cf1",t,e,cm,-1,0,i),hm("cf2",t,e,cm,1,0,i),hm("cf3",t,e,cm,0,-1,i),hm("cf4",t,e,cm,0,1,i),hm("cn1",t,e,cm,-1,0,n),hm("cn2",t,e,cm,1,0,n),hm("cn3",t,e,cm,0,-1,n),hm("cn4",t,e,cm,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function hm(e,t,n,i,r,a,o){lm.set(r,a,o).unproject(i);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],lm.x,lm.y,lm.z)}}const dm=new go;class pm extends Tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new hl;r.setIndex(new Zs(n,1)),r.setAttribute("position",new Zs(i,3)),super(r,new fu({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&dm.setFromObject(this.object),dm.isEmpty())return;const e=dm.min,t=dm.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fm extends Tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new hl;i.setIndex(new Zs(n,1)),i.setAttribute("position",new il([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new fu({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mm extends Su{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new hl;i.setAttribute("position",new il([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new fu({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new hl;r.setAttribute("position",new il([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new wl(r,new Fs({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const gm=new Ua;let vm,ym;class _m extends gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ua(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ua(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===vm&&(vm=new hl,vm.setAttribute("position",new il([0,0,0,0,1,0],3)),ym=new qu(.5,1,5,1),ym.translate(0,-.5,0)),this.position.copy(t),this.line=new Su(vm,new fu({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wl(ym,new Fs({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{gm.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(gm,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bm extends Tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new hl;n.setAttribute("position",new il(t,3)),n.setAttribute("color",new il([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new fu({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Ns,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class xm{constructor(){this.type="ShapePath",this.color=new Ns,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Sh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[r],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return i}const n=Jh.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,a,o;const s=[];if(1===i.length)return a=i[0],o=new wh,o.curves=a.curves,s.push(o),s;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=i.length;m<g;m++)a=i[m],h=a.getPoints(),r=n(h),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new wh,p:h},u[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new wh;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let a=0;a<r.length;a++){const o=r[a];let s=!0;for(let r=0;r<u.length;r++)t(o.p,u[r].p)&&(i!==r&&n++,s?(s=!1,c[r].push(o)):e=!0);s&&c[i].push(o)}}n>0&&!1===e&&(p=c)}for(let m=0,g=u.length;m<g;m++){o=u[m].s,s.push(o),d=p[m];for(let e=0,t=d.length;e<t;e++)o.holes.push(d[e].h)}return s}}class Sm extends Sa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function wm(e,t,n,i){const r=function(e){switch(e){case ci:case ui:return{byteLength:1,components:1};case di:case hi:case gi:return{byteLength:2,components:1};case vi:case yi:return{byteLength:2,components:4};case fi:case pi:case mi:return{byteLength:4,components:1};case bi:case xi:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(i);switch(n){case Si:return e*t;case Ci:case Ai:return e*t/r.components*r.byteLength;case Pi:case Ri:return e*t*2/r.components*r.byteLength;case wi:return e*t*3/r.components*r.byteLength;case Mi:case ki:return e*t*4/r.components*r.byteLength;case Ii:case Di:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ni:case Ui:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case zi:case Bi:return Math.max(e,16)*Math.max(t,8)/4;case Oi:case Fi:return Math.max(e,8)*Math.max(t,8)/2;case ji:case Hi:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Vi:case Gi:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Wi:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Xi:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case qi:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Zi:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Yi:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case Ki:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Ji:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case Qi:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case $i:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case er:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case tr:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case nr:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case ir:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case rr:case ar:case or:return Math.ceil(e/4)*Math.ceil(t/4)*16;case sr:case lr:return Math.ceil(e/4)*Math.ceil(t/4)*8;case cr:case ur:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}class Mm{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,i){return wm(e,t,n,i)}}function Em(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Tm(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,a=i.byteLength,o=e.createBuffer();let s;if(e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if("undefined"!==typeof Float16Array&&i instanceof Float16Array)s=e.HALF_FLOAT;else if(i instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,a=n.updateRanges;if(e.bindBuffer(i,t),0===a.length)e.bufferSubData(i,0,r);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){const n=a[t],i=a[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,a[t]=i)}a.length=t+1;for(let n=0,o=a.length;n<o;n++){const t=a[n];e.bufferSubData(i,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ut}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ut);const Cm={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Am={common:{diffuse:{value:new Ns(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Fa},alphaMap:{value:null},alphaMapTransform:{value:new Fa},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Fa}},envmap:{envMap:{value:null},envMapRotation:{value:new Fa},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Fa}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Fa}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Fa},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Fa},normalScale:{value:new Da(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Fa},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Fa}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Fa}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Fa}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ns(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ns(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Fa},alphaTest:{value:0},uvTransform:{value:new Fa}},sprite:{diffuse:{value:new Ns(16777215)},opacity:{value:1},center:{value:new Da(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Fa},alphaMap:{value:null},alphaMapTransform:{value:new Fa},alphaTest:{value:0}}},Pm={basic:{uniforms:Cl([Am.common,Am.specularmap,Am.envmap,Am.aomap,Am.lightmap,Am.fog]),vertexShader:Cm.meshbasic_vert,fragmentShader:Cm.meshbasic_frag},lambert:{uniforms:Cl([Am.common,Am.specularmap,Am.envmap,Am.aomap,Am.lightmap,Am.emissivemap,Am.bumpmap,Am.normalmap,Am.displacementmap,Am.fog,Am.lights,{emissive:{value:new Ns(0)}}]),vertexShader:Cm.meshlambert_vert,fragmentShader:Cm.meshlambert_frag},phong:{uniforms:Cl([Am.common,Am.specularmap,Am.envmap,Am.aomap,Am.lightmap,Am.emissivemap,Am.bumpmap,Am.normalmap,Am.displacementmap,Am.fog,Am.lights,{emissive:{value:new Ns(0)},specular:{value:new Ns(1118481)},shininess:{value:30}}]),vertexShader:Cm.meshphong_vert,fragmentShader:Cm.meshphong_frag},standard:{uniforms:Cl([Am.common,Am.envmap,Am.aomap,Am.lightmap,Am.emissivemap,Am.bumpmap,Am.normalmap,Am.displacementmap,Am.roughnessmap,Am.metalnessmap,Am.fog,Am.lights,{emissive:{value:new Ns(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cm.meshphysical_vert,fragmentShader:Cm.meshphysical_frag},toon:{uniforms:Cl([Am.common,Am.aomap,Am.lightmap,Am.emissivemap,Am.bumpmap,Am.normalmap,Am.displacementmap,Am.gradientmap,Am.fog,Am.lights,{emissive:{value:new Ns(0)}}]),vertexShader:Cm.meshtoon_vert,fragmentShader:Cm.meshtoon_frag},matcap:{uniforms:Cl([Am.common,Am.bumpmap,Am.normalmap,Am.displacementmap,Am.fog,{matcap:{value:null}}]),vertexShader:Cm.meshmatcap_vert,fragmentShader:Cm.meshmatcap_frag},points:{uniforms:Cl([Am.points,Am.fog]),vertexShader:Cm.points_vert,fragmentShader:Cm.points_frag},dashed:{uniforms:Cl([Am.common,Am.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cm.linedashed_vert,fragmentShader:Cm.linedashed_frag},depth:{uniforms:Cl([Am.common,Am.displacementmap]),vertexShader:Cm.depth_vert,fragmentShader:Cm.depth_frag},normal:{uniforms:Cl([Am.common,Am.bumpmap,Am.normalmap,Am.displacementmap,{opacity:{value:1}}]),vertexShader:Cm.meshnormal_vert,fragmentShader:Cm.meshnormal_frag},sprite:{uniforms:Cl([Am.sprite,Am.fog]),vertexShader:Cm.sprite_vert,fragmentShader:Cm.sprite_frag},background:{uniforms:{uvTransform:{value:new Fa},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cm.background_vert,fragmentShader:Cm.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Fa}},vertexShader:Cm.backgroundCube_vert,fragmentShader:Cm.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cm.cube_vert,fragmentShader:Cm.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cm.equirect_vert,fragmentShader:Cm.equirect_frag},distanceRGBA:{uniforms:Cl([Am.common,Am.displacementmap,{referencePosition:{value:new Ua},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cm.distanceRGBA_vert,fragmentShader:Cm.distanceRGBA_frag},shadow:{uniforms:Cl([Am.lights,Am.fog,{color:{value:new Ns(0)},opacity:{value:1}}]),vertexShader:Cm.shadow_vert,fragmentShader:Cm.shadow_frag}};Pm.physical={uniforms:Cl([Pm.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Fa},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Fa},clearcoatNormalScale:{value:new Da(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Fa},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Fa},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Fa},sheen:{value:0},sheenColor:{value:new Ns(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Fa},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Fa},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Fa},transmissionSamplerSize:{value:new Da},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Fa},attenuationDistance:{value:0},attenuationColor:{value:new Ns(0)},specularColor:{value:new Ns(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Fa},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Fa},anisotropyVector:{value:new Da},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Fa}}]),vertexShader:Cm.meshphysical_vert,fragmentShader:Cm.meshphysical_frag};const Rm={r:0,b:0,g:0},Lm=new $o,km=new Vo;function Im(e,t,n,i,r,a,o){const s=new Ns(0);let l,c,u=!0===a?0:1,h=null,d=0,p=null;function f(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function m(t,n){t.getRGB(Rm,Al(e)),i.buffers.color.setClear(Rm.r,Rm.g,Rm.b,n,o)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let n=!1;const r=f(t);null===r?m(s,u):r&&r.isColor&&(m(r,1),n=!0);const a=e.xr.getEnvironmentBlendMode();"additive"===a?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===a&&i.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const i=f(n);i&&(i.isCubeTexture||i.mapping===Yn)?(void 0===c&&(c=new wl(new El(1,1,1),new Rl({name:"BackgroundCubeMaterial",uniforms:Tl(Pm.backgroundCube.uniforms),vertexShader:Pm.backgroundCube.vertexShader,fragmentShader:Pm.backgroundCube.fragmentShader,side:Zt,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Lm.copy(n.backgroundRotation),Lm.x*=-1,Lm.y*=-1,Lm.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Lm.y*=-1,Lm.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(km.makeRotationFromEuler(Lm)),c.material.toneMapped=Ja.getTransfer(i.colorSpace)!==Nr,h===i&&d===i.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=i,d=i.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new wl(new ad(2,2),new Rl({name:"BackgroundMaterial",uniforms:Tl(Pm.background.uniforms),vertexShader:Pm.background.vertexShader,fragmentShader:Pm.background.fragmentShader,side:qt,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Ja.getTransfer(i.colorSpace)!==Nr,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),h===i&&d===i.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=i,d=i.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Dm(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=c(null);let a=r,o=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],i=[],r=[];for(let a=0;a<n;a++)t[a]=0,i[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const i=a.newAttributes,r=a.enabledAttributes,o=a.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function p(){const t=a.newAttributes,n=a.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function f(t,n,i,r,a,o,s){!0===s?e.vertexAttribIPointer(t,n,i,a,o):e.vertexAttribPointer(t,n,i,r,a,o)}function m(){g(),o=!0,a!==r&&(a=r,s(a.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,m,g){let v=!1;const y=function(t,n,r){const a=!0===r.wireframe;let o=i[t.id];void 0===o&&(o={},i[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];void 0===l&&(l=c(e.createVertexArray()),s[a]=l);return l}(m,l,r);a!==y&&(a=y,s(a.object)),v=function(e,t,n,i){const r=a.attributes,o=t.attributes;let s=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){const t=r[a];let n=o[a];if(void 0===n&&("instanceMatrix"===a&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return a.attributesNum!==s||a.index!==i}(n,m,l,g),v&&function(e,t,n,i){const r={},o=t.attributes;let s=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){let t=o[a];void 0===t&&("instanceMatrix"===a&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[a]=n,s++}}a.attributes=r,a.attributesNum=s,a.index=i}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||o)&&(o=!1,function(n,i,r,a){u();const o=a.attributes,s=r.getAttributes(),l=i.defaultAttributeValues;for(const c in s){const i=s[c];if(i.location>=0){let r=o[c];if(void 0===r&&("instanceMatrix"===c&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const o=r.normalized,s=r.itemSize,l=t.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||r.gpuType===pi;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,g=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)d(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,u,o,l*p,(g+s/i.locationSize*e)*p,m)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)d(i.location+e,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,u,o,s*p,s/i.locationSize*e*p,m)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,r,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function Nm(e,t,n){let i;function r(t,r,a){0!==a&&(e.drawArraysInstanced(i,t,r,a),n.update(r,i,a))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,a);let o=0;for(let t=0;t<a;t++)o+=r[t];n.update(o,i,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,i,1)}}}function Um(e,t,n,i){let r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==n.precision?n.precision:"highp";const s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,textureFormatReadable:function(t){return t===Mi||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===gi&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==ci&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==mi&&!r)},precision:o,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Om(e){const t=this;let n=null,i=0,r=!1,a=!1;const o=new jc,s=new Fa,l={value:null,needsUpdate:!1};function c(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==a;++n,l+=4)o.copy(e[n]).applyMatrix4(r,s),o.normal.toArray(c,l),c[l+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,s,u){const h=o.clippingPlanes,d=o.clipIntersection,p=o.clipShadows,f=e.get(o);if(!r||null===h||0===h.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=a?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(h,s,t,u);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function zm(e){let t=new WeakMap;function n(e,t){return t===qn?e.mapping=Wn:t===Zn&&(e.mapping=Xn),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===qn||a===Zn){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=new Fl(a.height);return o.fromEquirectangularTexture(e,r),t.set(r,o),r.addEventListener("dispose",i),n(o.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const Fm=[.125,.215,.35,.446,.526,.582],Bm=20,jm=new xp,Hm=new Ns;let Vm=null,Gm=0,Wm=0,Xm=!1;const qm=(1+Math.sqrt(5))/2,Zm=1/qm,Ym=[new Ua(-qm,Zm,0),new Ua(qm,Zm,0),new Ua(-Zm,0,qm),new Ua(Zm,0,qm),new Ua(0,qm,-Zm),new Ua(0,qm,Zm),new Ua(-1,1,-1),new Ua(1,1,-1),new Ua(-1,1,1),new Ua(1,1,1)],Km=new Ua;class Jm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{size:a=256,position:o=Km}=r;Vm=this._renderer.getRenderTarget(),Gm=this._renderer.getActiveCubeFace(),Wm=this._renderer.getActiveMipmapLevel(),Xm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s,o),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Vm,Gm,Wm),this._renderer.xr.enabled=Xm,e.scissorTest=!1,$m(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wn||e.mapping===Xn?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Vm=this._renderer.getRenderTarget(),Gm=this._renderer.getActiveCubeFace(),Wm=this._renderer.getActiveMipmapLevel(),Xm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ri,minFilter:ri,generateMipmaps:!1,type:gi,format:Mi,colorSpace:Ir,depthBuffer:!1},i=Qm(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Qm(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const a=e-4+1+Fm.length;for(let o=0;o<a;o++){const a=Math.pow(2,r);n.push(a);let s=1/a;o>e-4?s=Fm[o-e+4-1]:0===o&&(s=0),i.push(s);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),_=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*p*e),y.set(h,m*p*e);const r=[e,e,e,e,e,e];_.set(r,g*p*e)}const b=new hl;b.setAttribute("position",new Zs(v,f)),b.setAttribute("uv",new Zs(y,m)),b.setAttribute("faceIndex",new Zs(_,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(Bm),r=new Ua(0,1,0),a=new Rl({name:"SphericalGaussianBlur",defines:{n:Bm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Kt,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return i}_compileMaterial(e){const t=new wl(this._lodPlanes[0],e);this._renderer.compile(t,jm)}_sceneToCubeUV(e,t,n,i,r){const a=new Nl(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(Hm),l.toneMapping=Dn,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(i),l.clearDepth(),l.setRenderTarget(null));const h=new Fs({name:"PMREM.Background",side:Zt,depthWrite:!1,depthTest:!1}),d=new wl(new El,h);let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(Hm),p=!0);for(let m=0;m<6;m++){const t=m%3;0===t?(a.up.set(0,o[m],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x+s[m],r.y,r.z)):1===t?(a.up.set(0,0,o[m]),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y+s[m],r.z)):(a.up.set(0,o[m],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y,r.z+s[m]));const n=this._cubeSize;$m(i,t*n,m>2?n:0,n,n),l.setRenderTarget(i),p&&l.render(d,a),l.render(e,a)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Wn||e.mapping===Xn;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=tg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eg());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new wl(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const o=this._cubeSize;$m(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,jm)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Ym[(i-r-1)%Ym.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new wl(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):Bm;f>Bm&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(Bm));const m=[];let g=0;for(let _=0;_<Bm;++_){const e=_/p,t=Math.exp(-e*e/2);m.push(t),0===_?g+=t:_<f&&(g+=2*t)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[i];$m(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,jm)}}function Qm(e,t,n){const i=new uo(e,t,n);return i.texture.mapping=Yn,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function $m(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function eg(){return new Rl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Kt,depthTest:!1,depthWrite:!1})}function tg(){return new Rl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Kt,depthTest:!1,depthWrite:!1})}function ng(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,o=a===qn||a===Zn,s=a===Wn||a===Xn;if(o||s){let a=t.get(r);const l=void 0!==a?a.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new Jm(e)),a=o?n.fromEquirectangular(r,a):n.fromCubemap(r,a),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),a.texture;if(void 0!==a)return a.texture;{const l=r.image;return o&&l&&l.height>0||s&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new Jm(e)),a=o?n.fromEquirectangular(r):n.fromCubemap(r),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),r.addEventListener("dispose",i),a.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ig(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&qa("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function rg(e,t,n,i){const r={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",o),delete r[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let o=0;if(null!==i){const e=i.array;o=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;o=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const s=new(ja(n)?tl:$s)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const r in i)t.update(i[r],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function ag(e,t,n){let i,r,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(i,o,r,t*a,s),n.update(o,i,s))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(i,o,r,t*a),n.update(o,i,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,a,0,r,e,0,o);let s=0;for(let t=0;t<o;t++)s+=a[t];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(i,s,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*c[e];n.update(t,i,1)}}}function og(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function sg(e,t,n){const i=new WeakMap,r=new lo;return{update:function(a,o,s){const l=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=void 0!==c?c.length:0;let h=i.get(o);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==o.morphAttributes.position,p=void 0!==o.morphAttributes.normal,f=void 0!==o.morphAttributes.color,m=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let _=o.attributes.position.count*y,b=1;_>t.maxTextureSize&&(b=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);const x=new Float32Array(_*b*4*u),S=new ho(x,_,b,u);S.type=mi,S.needsUpdate=!0;const w=4*y;for(let E=0;E<u;E++){const T=m[E],C=g[E],A=v[E],P=_*b*4*E;for(let R=0;R<T.count;R++){const L=R*w;!0===d&&(r.fromBufferAttribute(T,R),x[P+L+0]=r.x,x[P+L+1]=r.y,x[P+L+2]=r.z,x[P+L+3]=0),!0===p&&(r.fromBufferAttribute(C,R),x[P+L+4]=r.x,x[P+L+5]=r.y,x[P+L+6]=r.z,x[P+L+7]=0),!0===f&&(r.fromBufferAttribute(A,R),x[P+L+8]=r.x,x[P+L+9]=r.y,x[P+L+10]=r.z,x[P+L+11]=4===A.itemSize?r.w:1)}}function M(){S.dispose(),i.delete(o),o.removeEventListener("dispose",M)}h={count:u,texture:S,size:new Da(_,b)},i.set(o,h),o.addEventListener("dispose",M)}if(!0===a.isInstancedMesh&&null!==a.morphTexture)s.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let k=0;for(let D=0;D<l.length;D++)k+=l[D];const I=o.morphTargetsRelative?1:1-k;s.getUniforms().setValue(e,"morphTargetBaseInfluence",I),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function lg(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=i.render.frame,l=o.geometry,c=t.get(o,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),r.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),r.set(o,s))),o.isSkinnedMesh){const e=o.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c},dispose:function(){r=new WeakMap}}}const cg=new so,ug=new Hu(1,1),hg=new ho,dg=new fo,pg=new zl,fg=[],mg=[],gg=new Float32Array(16),vg=new Float32Array(9),yg=new Float32Array(4);function _g(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=fg[r];if(void 0===a&&(a=new Float32Array(r),fg[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function bg(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function xg(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Sg(e,t){let n=mg[t];void 0===n&&(n=new Int32Array(t),mg[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function wg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Mg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bg(n,t))return;e.uniform2fv(this.addr,t),xg(n,t)}}function Eg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(bg(n,t))return;e.uniform3fv(this.addr,t),xg(n,t)}}function Tg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bg(n,t))return;e.uniform4fv(this.addr,t),xg(n,t)}}function Cg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(bg(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),xg(n,t)}else{if(bg(n,i))return;yg.set(i),e.uniformMatrix2fv(this.addr,!1,yg),xg(n,i)}}function Ag(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(bg(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),xg(n,t)}else{if(bg(n,i))return;vg.set(i),e.uniformMatrix3fv(this.addr,!1,vg),xg(n,i)}}function Pg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(bg(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),xg(n,t)}else{if(bg(n,i))return;gg.set(i),e.uniformMatrix4fv(this.addr,!1,gg),xg(n,i)}}function Rg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Lg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bg(n,t))return;e.uniform2iv(this.addr,t),xg(n,t)}}function kg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bg(n,t))return;e.uniform3iv(this.addr,t),xg(n,t)}}function Ig(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bg(n,t))return;e.uniform4iv(this.addr,t),xg(n,t)}}function Dg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ng(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bg(n,t))return;e.uniform2uiv(this.addr,t),xg(n,t)}}function Ug(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bg(n,t))return;e.uniform3uiv(this.addr,t),xg(n,t)}}function Og(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bg(n,t))return;e.uniform4uiv(this.addr,t),xg(n,t)}}function zg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let a;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(ug.compareFunction=ta,a=ug):a=cg,n.setTexture2D(t||a,r)}function Fg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||dg,r)}function Bg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||pg,r)}function jg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||hg,r)}function Hg(e,t){e.uniform1fv(this.addr,t)}function Vg(e,t){const n=_g(t,this.size,2);e.uniform2fv(this.addr,n)}function Gg(e,t){const n=_g(t,this.size,3);e.uniform3fv(this.addr,n)}function Wg(e,t){const n=_g(t,this.size,4);e.uniform4fv(this.addr,n)}function Xg(e,t){const n=_g(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function qg(e,t){const n=_g(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Zg(e,t){const n=_g(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Yg(e,t){e.uniform1iv(this.addr,t)}function Kg(e,t){e.uniform2iv(this.addr,t)}function Jg(e,t){e.uniform3iv(this.addr,t)}function Qg(e,t){e.uniform4iv(this.addr,t)}function $g(e,t){e.uniform1uiv(this.addr,t)}function ev(e,t){e.uniform2uiv(this.addr,t)}function tv(e,t){e.uniform3uiv(this.addr,t)}function nv(e,t){e.uniform4uiv(this.addr,t)}function iv(e,t,n){const i=this.cache,r=t.length,a=Sg(n,r);bg(i,a)||(e.uniform1iv(this.addr,a),xg(i,a));for(let o=0;o!==r;++o)n.setTexture2D(t[o]||cg,a[o])}function rv(e,t,n){const i=this.cache,r=t.length,a=Sg(n,r);bg(i,a)||(e.uniform1iv(this.addr,a),xg(i,a));for(let o=0;o!==r;++o)n.setTexture3D(t[o]||dg,a[o])}function av(e,t,n){const i=this.cache,r=t.length,a=Sg(n,r);bg(i,a)||(e.uniform1iv(this.addr,a),xg(i,a));for(let o=0;o!==r;++o)n.setTextureCube(t[o]||pg,a[o])}function ov(e,t,n){const i=this.cache,r=t.length,a=Sg(n,r);bg(i,a)||(e.uniform1iv(this.addr,a),xg(i,a));for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||hg,a[o])}class sv{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return wg;case 35664:return Mg;case 35665:return Eg;case 35666:return Tg;case 35674:return Cg;case 35675:return Ag;case 35676:return Pg;case 5124:case 35670:return Rg;case 35667:case 35671:return Lg;case 35668:case 35672:return kg;case 35669:case 35673:return Ig;case 5125:return Dg;case 36294:return Ng;case 36295:return Ug;case 36296:return Og;case 35678:case 36198:case 36298:case 36306:case 35682:return zg;case 35679:case 36299:case 36307:return Fg;case 35680:case 36300:case 36308:case 36293:return Bg;case 36289:case 36303:case 36311:case 36292:return jg}}(t.type)}}class lv{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Hg;case 35664:return Vg;case 35665:return Gg;case 35666:return Wg;case 35674:return Xg;case 35675:return qg;case 35676:return Zg;case 5124:case 35670:return Yg;case 35667:case 35671:return Kg;case 35668:case 35672:return Jg;case 35669:case 35673:return Qg;case 5125:return $g;case 36294:return ev;case 36295:return tv;case 36296:return nv;case 35678:case 36198:case 36298:case 36306:case 35682:return iv;case 35679:case 36299:case 36307:return rv;case 35680:case 36300:case 36308:case 36293:return av;case 36289:case 36303:case 36311:case 36292:return ov}}(t.type)}}class cv{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const uv=/(\w+)(\])?(\[|\.)?/g;function hv(e,t){e.seq.push(t),e.map[t.id]=t}function dv(e,t,n){const i=e.name,r=i.length;for(uv.lastIndex=0;;){const a=uv.exec(i),o=uv.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===r){hv(n,void 0===c?new sv(s,e,t):new lv(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new cv(s),hv(n,e)),n=e}}}class pv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);dv(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function fv(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let mv=0;const gv=new Fa;function vv(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=(e.getShaderInfoLog(t)||"").trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=r;o<a;o++){const e=o+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[o]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function yv(e,t){const n=function(e){Ja._getMatrix(gv,Ja.workingColorSpace,e);const t="mat3( ".concat(gv.elements.map(e=>e.toFixed(4))," )");switch(Ja.getTransfer(e)){case Dr:return[t,"LinearTransferOETF"];case Nr:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function _v(e,t){let n;switch(t){case Nn:n="Linear";break;case Un:n="Reinhard";break;case On:n="Cineon";break;case zn:n="ACESFilmic";break;case Bn:n="AgX";break;case jn:n="Neutral";break;case Fn:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const bv=new Ua;function xv(){Ja.getLuminanceCoefficients(bv);const e=bv.x.toFixed(4),t=bv.y.toFixed(4),n=bv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function Sv(e){return""!==e}function wv(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Mv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ev=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tv(e){return e.replace(Ev,Av)}const Cv=new Map;function Av(e,t){let n=Cm[t];if(void 0===n){const e=Cv.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Cm[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Tv(n)}const Pv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rv(e){return e.replace(Pv,Lv)}function Lv(e,t,n,i){let r="";for(let a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function kv(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Iv(e,t,n,i){const r=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Gt?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Wt?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Xt&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Wn:case Xn:t="ENVMAP_TYPE_CUBE";break;case Yn:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Xn&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ln:t="ENVMAP_BLENDING_MULTIPLY";break;case kn:t="ENVMAP_BLENDING_MIX";break;case In:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sv).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Sv).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Sv).join("\n"),v.length>0&&(v+="\n")):(g=[kv(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Sv).join("\n"),v=[kv(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Dn?"#define TONE_MAPPING":"",n.toneMapping!==Dn?Cm.tonemapping_pars_fragment:"",n.toneMapping!==Dn?_v("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Cm.colorspace_pars_fragment,yv("linearToOutputTexel",n.outputColorSpace),xv(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Sv).join("\n")),o=Tv(o),o=wv(o,n),o=Mv(o,n),s=Tv(s),s=wv(s,n),s=Mv(s,n),o=Rv(o),s=Rv(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===ga?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ga?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+g+o,b=y+v+s,x=fv(r,r.VERTEX_SHADER,_),S=fv(r,r.FRAGMENT_SHADER,b);function w(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m)||"",i=r.getShaderInfoLog(x)||"",a=r.getShaderInfoLog(S)||"",o=n.trim(),s=i.trim(),l=a.trim();let c=!0,u=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(c=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,x,S);else{const e=vv(r,x,"vertex"),n=vv(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+o+"\n"+e+"\n"+n)}else""!==o?console.warn("THREE.WebGLProgram: Program Info Log:",o):""!==s&&""!==l||(u=!1);u&&(t.diagnostics={runnable:c,programLog:o,vertexShader:{log:s,prefix:g},fragmentShader:{log:l,prefix:v}})}r.deleteShader(x),r.deleteShader(S),M=new pv(r,m),E=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let o=1;i.type===e.FLOAT_MAT2&&(o=2),i.type===e.FLOAT_MAT3&&(o=3),i.type===e.FLOAT_MAT4&&(o=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(r,m)}let M,E;r.attachShader(m,x),r.attachShader(m,S),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===M&&w(this),M},this.getAttributes=function(){return void 0===E&&w(this),E};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(m,37297)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=mv++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}let Dv=0;class Nv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Uv(e),t.set(e,n)),n}}class Uv{constructor(e){this.id=Dv++,this.code=e,this.usedTimes=0}}function Ov(e,t,n,i,r,a,o){const s=new es,l=new Nv,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(a,s,u,g,v){const y=g.fog,_=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),S=x&&x.mapping===Yn?x.image.height:null,w=f[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const M=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,E=void 0!==M?M.length:0;let T,C,A,P,R=0;if(void 0!==_.morphAttributes.position&&(R=1),void 0!==_.morphAttributes.normal&&(R=2),void 0!==_.morphAttributes.color&&(R=3),w){const e=Pm[w];T=e.vertexShader,C=e.fragmentShader}else T=a.vertexShader,C=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),P=l.getFragmentShaderID(a);const L=e.getRenderTarget(),k=e.state.buffers.depth.getReversed(),I=!0===v.isInstancedMesh,D=!0===v.isBatchedMesh,N=!!a.map,U=!!a.matcap,O=!!x,z=!!a.aoMap,F=!!a.lightMap,B=!!a.bumpMap,j=!!a.normalMap,H=!!a.displacementMap,V=!!a.emissiveMap,G=!!a.metalnessMap,W=!!a.roughnessMap,X=a.anisotropy>0,q=a.clearcoat>0,Z=a.dispersion>0,Y=a.iridescence>0,K=a.sheen>0,J=a.transmission>0,Q=X&&!!a.anisotropyMap,$=q&&!!a.clearcoatMap,ee=q&&!!a.clearcoatNormalMap,te=q&&!!a.clearcoatRoughnessMap,ne=Y&&!!a.iridescenceMap,ie=Y&&!!a.iridescenceThicknessMap,re=K&&!!a.sheenColorMap,ae=K&&!!a.sheenRoughnessMap,oe=!!a.specularMap,se=!!a.specularColorMap,le=!!a.specularIntensityMap,ce=J&&!!a.transmissionMap,ue=J&&!!a.thicknessMap,he=!!a.gradientMap,de=!!a.alphaMap,pe=a.alphaTest>0,fe=!!a.alphaHash,me=!!a.extensions;let ge=Dn;a.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:w,shaderType:a.type,shaderName:a.name,vertexShader:T,fragmentShader:C,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:P,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:D,batchingColor:D&&null!==v._colorsTexture,instancing:I,instancingColor:I&&null!==v.instanceColor,instancingMorph:I&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:Ir,alphaToCoverage:!!a.alphaToCoverage,map:N,matcap:U,envMap:O,envMapMode:O&&x.mapping,envMapCubeUVHeight:S,aoMap:z,lightMap:F,bumpMap:B,normalMap:j,displacementMap:d&&H,emissiveMap:V,normalMapObjectSpace:j&&a.normalMapType===Rr,normalMapTangentSpace:j&&a.normalMapType===Pr,metalnessMap:G,roughnessMap:W,anisotropy:X,anisotropyMap:Q,clearcoat:q,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Z,iridescence:Y,iridescenceMap:ne,iridescenceThicknessMap:ie,sheen:K,sheenColorMap:re,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:se,specularIntensityMap:le,transmission:J,transmissionMap:ce,thicknessMap:ue,gradientMap:he,opaque:!1===a.transparent&&a.blending===Jt&&!1===a.alphaToCoverage,alphaMap:de,alphaTest:pe,alphaHash:fe,combine:a.combine,mapUv:N&&m(a.map.channel),aoMapUv:z&&m(a.aoMap.channel),lightMapUv:F&&m(a.lightMap.channel),bumpMapUv:B&&m(a.bumpMap.channel),normalMapUv:j&&m(a.normalMap.channel),displacementMapUv:H&&m(a.displacementMap.channel),emissiveMapUv:V&&m(a.emissiveMap.channel),metalnessMapUv:G&&m(a.metalnessMap.channel),roughnessMapUv:W&&m(a.roughnessMap.channel),anisotropyMapUv:Q&&m(a.anisotropyMap.channel),clearcoatMapUv:$&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:re&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&m(a.sheenRoughnessMap.channel),specularMapUv:oe&&m(a.specularMap.channel),specularColorMapUv:se&&m(a.specularColorMap.channel),specularIntensityMapUv:le&&m(a.specularIntensityMap.channel),transmissionMapUv:ce&&m(a.transmissionMap.channel),thicknessMapUv:ue&&m(a.thicknessMap.channel),alphaMapUv:de&&m(a.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(j||X),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!_.attributes.uv&&(N||de),fog:!!y,useFog:!0===a.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===a.flatShading&&!1===a.wireframe,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,reversedDepthBuffer:k,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:E,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:N&&!0===a.map.isVideoTexture&&Ja.getTransfer(a.map.colorSpace)===Nr,decodeVideoTextureEmissive:V&&!0===a.emissiveMap.isVideoTexture&&Ja.getTransfer(a.emissiveMap.colorSpace)===Nr,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Yt,flipSided:a.side===Zt,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:me&&!0===a.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===a.extensions.multiDraw||D)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);t.batchingColor&&s.enable(21);t.gradientMap&&s.enable(22);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.reversedDepthBuffer&&s.enable(4);t.skinning&&s.enable(5);t.morphTargets&&s.enable(6);t.morphNormals&&s.enable(7);t.morphColors&&s.enable(8);t.premultipliedAlpha&&s.enable(9);t.shadowMapEnabled&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.decodeVideoTextureEmissive&&s.enable(20);t.alphaToCoverage&&s.enable(21);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Pm[t];n=Pl.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Iv(e,n,t,a),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function zv(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Fv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Bv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function jv(){const e=[];let t=0;const n=[],i=[],r=[];function a(n,i,r,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?i.push(u):!0===o.transparent?r.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?i.unshift(u):!0===o.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Fv),i.length>1&&i.sort(t||Bv),r.length>1&&r.sort(t||Bv)}}}function Hv(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new jv,e.set(t,[r])):n>=i.length?(r=new jv,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Vv(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ua,color:new Ns};break;case"SpotLight":n={position:new Ua,direction:new Ua,color:new Ns,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ua,color:new Ns,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ua,skyColor:new Ns,groundColor:new Ns};break;case"RectAreaLight":n={color:new Ns,position:new Ua,halfWidth:new Ua,halfHeight:new Ua}}return e[t.id]=n,n}}}let Gv=0;function Wv(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Xv(e){const t=new Vv,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Da};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Da,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)i.probe.push(new Ua);const r=new Ua,a=new Vo,o=new Vo;return{setup:function(r){let a=0,o=0,s=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0;r.sort(Wv);for(let e=0,b=r.length;e<b;e++){const _=r[e],b=_.color,x=_.intensity,S=_.distance,w=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)a+=b.r*x,o+=b.g*x,s+=b.b*x;else if(_.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(_.sh.coefficients[e],x);y++}else if(_.isDirectionalLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),_.castShadow){const e=_.shadow,t=n.get(_);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[l]=t,i.directionalShadowMap[l]=w,i.directionalShadowMatrix[l]=_.shadow.matrix,p++}i.directional[l]=e,l++}else if(_.isSpotLight){const e=t.get(_);e.position.setFromMatrixPosition(_.matrixWorld),e.color.copy(b).multiplyScalar(x),e.distance=S,e.coneCos=Math.cos(_.angle),e.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),e.decay=_.decay,i.spot[u]=e;const r=_.shadow;if(_.map&&(i.spotLightMap[g]=_.map,g++,r.updateMatrices(_),_.castShadow&&v++),i.spotLightMatrix[u]=r.matrix,_.castShadow){const e=n.get(_);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[u]=e,i.spotShadowMap[u]=w,m++}u++}else if(_.isRectAreaLight){const e=t.get(_);e.color.copy(b).multiplyScalar(x),e.halfWidth.set(.5*_.width,0,0),e.halfHeight.set(0,.5*_.height,0),i.rectArea[h]=e,h++}else if(_.isPointLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),e.distance=_.distance,e.decay=_.decay,_.castShadow){const e=_.shadow,t=n.get(_);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=w,i.pointShadowMatrix[c]=_.shadow.matrix,f++}i.point[c]=e,c++}else if(_.isHemisphereLight){const e=t.get(_);e.skyColor.copy(_.color).multiplyScalar(x),e.groundColor.copy(_.groundColor).multiplyScalar(x),i.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Am.LTC_FLOAT_1,i.rectAreaLTC2=Am.LTC_FLOAT_2):(i.rectAreaLTC1=Am.LTC_HALF_1,i.rectAreaLTC2=Am.LTC_HALF_2)),i.ambient[0]=a,i.ambient[1]=o,i.ambient[2]=s;const _=i.hash;_.directionalLength===l&&_.pointLength===c&&_.spotLength===u&&_.rectAreaLength===h&&_.hemiLength===d&&_.numDirectionalShadows===p&&_.numPointShadows===f&&_.numSpotShadows===m&&_.numSpotMaps===g&&_.numLightProbes===y||(i.directional.length=l,i.spot.length=u,i.rectArea.length=h,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=m,i.spotShadowMap.length=m,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=f,i.spotLightMatrix.length=m+g-v,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=v,i.numLightProbes=y,_.directionalLength=l,_.pointLength=c,_.spotLength=u,_.rectAreaLength=h,_.hemiLength=d,_.numDirectionalShadows=p,_.numPointShadows=f,_.numSpotShadows=m,_.numSpotMaps=g,_.numLightProbes=y,i.version=Gv++)},setupView:function(e,t){let n=0,s=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(t.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=i.point[s];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function qv(e){const t=new Xv(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function Zv(e){let t=new WeakMap;return{get:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(n);let a;return void 0===r?(a=new qv(e),t.set(n,[a])):i>=r.length?(a=new qv(e),r.push(a)):a=r[i],a},dispose:function(){t=new WeakMap}}}function Yv(e,t,n){let i=new Wc;const r=new Da,a=new Da,o=new lo,s=new Md({depthPacking:Tr}),l=new Ed,c={},u=n.maxTextureSize,h={[qt]:Zt,[Zt]:qt,[Yt]:Yt},d=new Rl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Da},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new hl;f.setAttribute("position",new Zs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new wl(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Gt;let v=this.type;function y(n,i){const a=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new uo(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,p,m,null)}function _(t,n,i,r){let a=null;const o=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=a.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r,n.addEventListener("dispose",x)),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===Xt?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=i}return a}function b(n,r,a,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Xt)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=_(n,h,o,s);n.onBeforeShadow(e,n,r,a,i,t,u),e.renderBufferDirect(a,null,i,t,n,u),n.onAfterShadow(e,n,r,a,i,t,u)}}}else if(l.visible){const t=_(n,l,o,s);n.onBeforeShadow(e,n,r,a,i,t,null),e.renderBufferDirect(a,null,i,t,n,null),n.onAfterShadow(e,n,r,a,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,a,o,s)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(Kt),!0===d.buffers.depth.getReversed()?d.buffers.color.setClear(0,0,0,0):d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=v!==Xt&&this.type===Xt,f=v===Xt&&this.type!==Xt;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),a.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/h.x),r.x=a.x*h.x,c.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/h.y),r.y=a.y*h.y,c.mapSize.y=a.y)),null===c.map||!0===p||!0===f){const e=this.type!==Xt?{minFilter:$n,magFilter:$n}:{};null!==c.map&&c.map.dispose(),c.map=new uo(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(o),c.updateMatrices(l,e),i=c.getFrustum(),b(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===Xt&&y(c,s),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const Kv={[wn]:Mn,[En]:Pn,[Cn]:Rn,[Tn]:An,[Mn]:wn,[Pn]:En,[Rn]:Cn,[An]:Tn};function Jv(e,t){const n=new function(){let t=!1;const n=new lo;let i=null;const r=new lo(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,a=null,o=null;return{setReversed:function(e){if(i!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),i=e;const r=o;o=null,this.setClear(r)}},getReversed:function(){return i},setTest:function(t){t?B(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){if(i&&(t=Kv[t]),a!==t){switch(t){case wn:e.depthFunc(e.NEVER);break;case Mn:e.depthFunc(e.ALWAYS);break;case En:e.depthFunc(e.LESS);break;case Tn:e.depthFunc(e.LEQUAL);break;case Cn:e.depthFunc(e.EQUAL);break;case An:e.depthFunc(e.GEQUAL);break;case Pn:e.depthFunc(e.GREATER);break;case Rn:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){o!==t&&(i&&(t=1-t),e.clearDepth(t),o=t)},reset:function(){n=!1,r=null,a=null,o=null,i=!1}}},r=new function(){let t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null}}},a=new WeakMap,o=new WeakMap;let s={},l={},c=new WeakMap,u=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,_=null,b=new Ns(0,0,0),x=0,S=!1,w=null,M=null,E=null,T=null,C=null;const A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,R=0;const L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(L)[1]),P=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),P=R>=2);let k=null,I={};const D=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),U=(new lo).fromArray(D),O=(new lo).fromArray(N);function z(t,n,i,r){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const F={};function B(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function j(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}F[e.TEXTURE_2D]=z(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=z(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=z(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=z(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),B(e.DEPTH_TEST),i.setFunc(Tn),W(!1),X(Bt),B(e.CULL_FACE),G(Kt);const H={[nn]:e.FUNC_ADD,[rn]:e.FUNC_SUBTRACT,[an]:e.FUNC_REVERSE_SUBTRACT};H[on]=e.MIN,H[sn]=e.MAX;const V={[ln]:e.ZERO,[cn]:e.ONE,[un]:e.SRC_COLOR,[dn]:e.SRC_ALPHA,[yn]:e.SRC_ALPHA_SATURATE,[gn]:e.DST_COLOR,[fn]:e.DST_ALPHA,[hn]:e.ONE_MINUS_SRC_COLOR,[pn]:e.ONE_MINUS_SRC_ALPHA,[vn]:e.ONE_MINUS_DST_COLOR,[mn]:e.ONE_MINUS_DST_ALPHA,[_n]:e.CONSTANT_COLOR,[bn]:e.ONE_MINUS_CONSTANT_COLOR,[xn]:e.CONSTANT_ALPHA,[Sn]:e.ONE_MINUS_CONSTANT_ALPHA};function G(t,n,i,r,a,o,s,l,c,u){if(t!==Kt){if(!1===d&&(B(e.BLEND),d=!0),t===tn)a=a||n,o=o||i,s=s||r,n===f&&a===v||(e.blendEquationSeparate(H[n],H[a]),f=n,v=a),i===m&&r===g&&o===y&&s===_||(e.blendFuncSeparate(V[i],V[r],V[o],V[s]),m=i,g=r,y=o,_=s),!1!==l.equals(b)&&c===x||(e.blendColor(l.r,l.g,l.b,c),b.copy(l),x=c),p=t,S=!1;else if(t!==p||u!==S){if(f===nn&&v===nn||(e.blendEquation(e.FUNC_ADD),f=nn,v=nn),u)switch(t){case Jt:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Qt:e.blendFunc(e.ONE,e.ONE);break;case $t:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case en:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Jt:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Qt:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case $t:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case en:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,_=null,b.set(0,0,0),x=0,p=t,S=u}}else!0===d&&(j(e.BLEND),d=!1)}function W(t){w!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),w=t)}function X(t){t!==Ft?(B(e.CULL_FACE),t!==M&&(t===Bt?e.cullFace(e.BACK):t===jt?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),M=t}function q(t,n,i){t?(B(e.POLYGON_OFFSET_FILL),T===n&&C===i||(e.polygonOffset(n,i),T=n,C=i)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:B,disable:j,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=u,r=!1;if(t){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const a=t.textures;if(i.length!==a.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=a.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(t,a){t.side===Yt?j(e.CULL_FACE):B(e.CULL_FACE);let o=t.side===Zt;a&&(o=!o),W(o),t.blending===Jt&&!1===t.transparent?G(Kt):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);const s=t.stencilWrite;r.setTest(s),s&&(r.setMask(t.stencilWriteMask),r.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),r.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===k?e.TEXTURE0+A-1:k);let r=I[i];void 0===r&&(r={type:void 0,texture:void 0},I[i]=r),r.type===t&&r.texture===n||(k!==i&&(e.activeTexture(i),k=i),e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=I[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=o.get(n);void 0===i&&(i=new WeakMap,o.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=o.get(n).get(t);a.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),a.set(n,i))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},k=null,I={},l={},c=new WeakMap,u=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,_=null,b=new Ns(0,0,0),x=0,S=!1,w=null,M=null,E=null,T=null,C=null,U.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),r.reset()}}}function Qv(e,t,n,i,r,a,o){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new Da,u=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(G){}function f(e,t){return p?new OffscreenCanvas(e,t):Ga("canvas")}function m(e,t,n){let i=1;const r=V(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),a=Math.floor(i*r.height);void 0===h&&(h=f(n,a));const o=t?f(n,a):h;o.width=n,o.height=a;return o.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function _(n,i,r,a){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=i;if(i===e.RED&&(r===e.FLOAT&&(s=e.R32F),r===e.HALF_FLOAT&&(s=e.R16F),r===e.UNSIGNED_BYTE&&(s=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.R8UI),r===e.UNSIGNED_SHORT&&(s=e.R16UI),r===e.UNSIGNED_INT&&(s=e.R32UI),r===e.BYTE&&(s=e.R8I),r===e.SHORT&&(s=e.R16I),r===e.INT&&(s=e.R32I)),i===e.RG&&(r===e.FLOAT&&(s=e.RG32F),r===e.HALF_FLOAT&&(s=e.RG16F),r===e.UNSIGNED_BYTE&&(s=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RG8UI),r===e.UNSIGNED_SHORT&&(s=e.RG16UI),r===e.UNSIGNED_INT&&(s=e.RG32UI),r===e.BYTE&&(s=e.RG8I),r===e.SHORT&&(s=e.RG16I),r===e.INT&&(s=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGB8UI),r===e.UNSIGNED_SHORT&&(s=e.RGB16UI),r===e.UNSIGNED_INT&&(s=e.RGB32UI),r===e.BYTE&&(s=e.RGB8I),r===e.SHORT&&(s=e.RGB16I),r===e.INT&&(s=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),r===e.UNSIGNED_INT&&(s=e.RGBA32UI),r===e.BYTE&&(s=e.RGBA8I),r===e.SHORT&&(s=e.RGBA16I),r===e.INT&&(s=e.RGBA32I)),i===e.RGB&&(r===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.UNSIGNED_INT_10F_11F_11F_REV&&(s=e.R11F_G11F_B10F)),i===e.RGBA){const t=o?Dr:Ja.getTransfer(a);r===e.FLOAT&&(s=e.RGBA32F),r===e.HALF_FLOAT&&(s=e.RGBA16F),r===e.UNSIGNED_BYTE&&(s=t===Nr?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function b(t,n){let i;return t?null===n||n===fi||n===_i?i=e.DEPTH24_STENCIL8:n===mi?i=e.DEPTH32F_STENCIL8:n===di&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===fi||n===_i?i=e.DEPTH_COMPONENT24:n===mi?i=e.DEPTH_COMPONENT32F:n===di&&(i=e.DEPTH_COMPONENT16),i}function x(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==$n&&e.minFilter!==ri?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=d.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&M(e),0===Object.keys(r).length&&d.delete(n)}i.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=i.get(t);t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let t=0;t<n.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[i][t]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let a=0,s=r.length;a<s;a++){const t=i.get(r[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),o.memory.textures--),i.remove(r[a])}i.remove(t)}(n)}function M(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete d.get(r)[n.__cacheKey],o.memory.textures--}let E=0;function T(t,r){const a=i.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}const C={[Kn]:e.REPEAT,[Jn]:e.CLAMP_TO_EDGE,[Qn]:e.MIRRORED_REPEAT},A={[$n]:e.NEAREST,[ei]:e.NEAREST_MIPMAP_NEAREST,[ni]:e.NEAREST_MIPMAP_LINEAR,[ri]:e.LINEAR,[ai]:e.LINEAR_MIPMAP_NEAREST,[si]:e.LINEAR_MIPMAP_LINEAR},P={[Qr]:e.NEVER,[aa]:e.ALWAYS,[$r]:e.LESS,[ta]:e.LEQUAL,[ea]:e.EQUAL,[ra]:e.GEQUAL,[na]:e.GREATER,[ia]:e.NOTEQUAL};function R(n,a){if(a.type!==mi||!1!==t.has("OES_texture_float_linear")||a.magFilter!==ri&&a.magFilter!==ai&&a.magFilter!==ni&&a.magFilter!==si&&a.minFilter!==ri&&a.minFilter!==ai&&a.minFilter!==ni&&a.minFilter!==si||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,C[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,C[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,P[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===$n)return;if(a.minFilter!==ni&&a.minFilter!==si)return;if(a.type===mi&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||i.get(a).__currentAnisotropy){const o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy}}}function L(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const r=n.source;let a=d.get(r);void 0===a&&(a={},d.set(r,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[s].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&M(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return i}function k(e,t,n){return Math.floor(Math.floor(e/n)/t)}function I(t,o,s){let l=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=e.TEXTURE_3D);const c=L(t,o),u=o.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=i.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Ja.getPrimaries(Ja.workingColorSpace),i=o.colorSpace===Lr?null:Ja.getPrimaries(o.colorSpace),d=o.colorSpace===Lr||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(o.image,!1,r.maxTextureSize);p=H(o,p);const f=a.convert(o.format,o.colorSpace),y=a.convert(o.type);let S,w=_(o.internalFormat,f,y,o.colorSpace,o.isVideoTexture);R(l,o);const M=o.mipmaps,E=!0!==o.isVideoTexture,T=void 0===h.__version||!0===c,C=u.dataReady,A=x(o,p);if(o.isDepthTexture)w=b(o.format===Ti,o.type),T&&(E?n.texStorage2D(e.TEXTURE_2D,1,w,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,y,null));else if(o.isDataTexture)if(M.length>0){E&&T&&n.texStorage2D(e.TEXTURE_2D,A,w,M[0].width,M[0].height);for(let t=0,i=M.length;t<i;t++)S=M[t],E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,y,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,f,y,S.data);o.generateMipmaps=!1}else E?(T&&n.texStorage2D(e.TEXTURE_2D,A,w,p.width,p.height),C&&function(t,i,r,a){const o=t.updateRanges;if(0===o.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,r,a,i.data);else{o.sort((e,t)=>e.start-t.start);let s=0;for(let e=1;e<o.length;e++){const t=o[s],n=o[e],r=t.start+t.count,a=k(n.start,i.width,4),l=k(t.start,i.width,4);n.start<=r+1&&a===l&&k(n.start+n.count-1,i.width,4)===a?t.count=Math.max(t.count,n.start+n.count-t.start):(++s,o[s]=n)}o.length=s+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),u=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,i.width);for(let t=0,h=o.length;t<h;t++){const s=o[t],l=Math.floor(s.start/4),c=Math.ceil(s.count/4),u=l%i.width,h=Math.floor(l/i.width),d=c,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,u),e.pixelStorei(e.UNPACK_SKIP_ROWS,h),n.texSubImage2D(e.TEXTURE_2D,0,u,h,d,p,r,a,i.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,u)}}(o,p,f,y)):n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,y,p.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){E&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,w,M[0].width,M[0].height,p.depth);for(let t=0,i=M.length;t<i;t++)if(S=M[t],o.format!==Mi)if(null!==f)if(E){if(C)if(o.layerUpdates.size>0){const i=wm(S.width,S.height,o.format,o.type);for(const r of o.layerUpdates){const a=S.data.subarray(r*i/S.data.BYTES_PER_ELEMENT,(r+1)*i/S.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,S.width,S.height,1,f,a)}o.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,p.depth,f,S.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,p.depth,0,S.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?C&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,p.depth,f,y,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,p.depth,0,f,y,S.data)}else{E&&T&&n.texStorage2D(e.TEXTURE_2D,A,w,M[0].width,M[0].height);for(let t=0,i=M.length;t<i;t++)S=M[t],o.format!==Mi?null!==f?E?C&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,y,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,f,y,S.data)}else if(o.isDataArrayTexture)if(E){if(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,w,p.width,p.height,p.depth),C)if(o.layerUpdates.size>0){const t=wm(p.width,p.height,o.format,o.type);for(const i of o.layerUpdates){const r=p.data.subarray(i*t/p.data.BYTES_PER_ELEMENT,(i+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,f,y,r)}o.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isData3DTexture)E?(T&&n.texStorage3D(e.TEXTURE_3D,A,w,p.width,p.height,p.depth),C&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)):n.texImage3D(e.TEXTURE_3D,0,w,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isFramebufferTexture){if(T)if(E)n.texStorage2D(e.TEXTURE_2D,A,w,p.width,p.height);else{let t=p.width,i=p.height;for(let r=0;r<A;r++)n.texImage2D(e.TEXTURE_2D,r,w,t,i,0,f,y,null),t>>=1,i>>=1}}else if(M.length>0){if(E&&T){const t=V(M[0]);n.texStorage2D(e.TEXTURE_2D,A,w,t.width,t.height)}for(let t=0,i=M.length;t<i;t++)S=M[t],E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,y,S):n.texImage2D(e.TEXTURE_2D,t,w,f,y,S);o.generateMipmaps=!1}else if(E){if(T){const t=V(p);n.texStorage2D(e.TEXTURE_2D,A,w,t.width,t.height)}C&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,y,p)}else n.texImage2D(e.TEXTURE_2D,0,w,f,y,p);g(o)&&v(l),h.__version=u.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function D(t,r,o,l,c,u){const h=a.convert(o.format,o.colorSpace),d=a.convert(o.type),p=_(o.internalFormat,h,d,o.colorSpace),f=i.get(r),m=i.get(o);if(m.__renderTarget=r,!f.__hasExternalTextures){const t=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,i,r.depth,0,h,d,null):n.texImage2D(c,u,p,t,i,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),j(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,m.__webglTexture,0,B(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,m.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function N(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,a=r&&r.isDepthTexture?r.type:null,o=b(n.stencilBuffer,a),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=B(n);j(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,o,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const o=t[r],l=a.convert(o.format,o.colorSpace),c=a.convert(o.type),u=_(o.internalFormat,l,c,o.colorSpace),h=B(n);i&&!1===j(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):j(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const a=i.get(r.depthTexture);a.__renderTarget=r,a.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const o=a.__webglTexture,l=B(r);if(r.depthTexture.format===Ei)j(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==Ti)throw new Error("Unknown depthTexture format");j(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function O(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?U(r.__webglFramebuffer[0],t):U(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=e.createRenderbuffer(),N(r.__webglDepthbuffer[i],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=r.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else{const i=t.texture.mipmaps;if(i&&i.length>0?n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),N(r.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const z=[],F=[];function B(e){return Math.min(r.maxSamples,e.samples)}function j(e){const n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Ir&&n!==Lr&&(Ja.getTransfer(n)===Nr?i===Mi&&r===ci||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function V(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=E;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,r){const a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?I(a,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?I(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,o){const s=i.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;const l=L(t,o),c=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=i.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Ja.getPrimaries(Ja.workingColorSpace),i=o.colorSpace===Lr?null:Ja.getPrimaries(o.colorSpace),h=o.colorSpace===Lr||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=o.isCompressedTexture||o.image[0].isCompressedTexture,p=o.image[0]&&o.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?o.image[e].image:o.image[e]:m(o.image[e],!0,r.maxCubemapSize),f[e]=H(o,f[e]);const y=f[0],b=a.convert(o.format,o.colorSpace),S=a.convert(o.type),w=_(o.internalFormat,b,S,o.colorSpace),M=!0!==o.isVideoTexture,E=void 0===u.__version||!0===l,T=c.dataReady;let C,A=x(o,y);if(R(e.TEXTURE_CUBE_MAP,o),d){M&&E&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,w,y.width,y.height);for(let t=0;t<6;t++){C=f[t].mipmaps;for(let i=0;i<C.length;i++){const r=C[i];o.format!==Mi?null!==b?M?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,b,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,w,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,b,S,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,w,r.width,r.height,0,b,S,r.data)}}}else{if(C=o.mipmaps,M&&E){C.length>0&&A++;const t=V(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,A,w,t.width,t.height)}for(let t=0;t<6;t++)if(p){M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,b,S,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,f[t].width,f[t].height,0,b,S,f[t].data);for(let i=0;i<C.length;i++){const r=C[i].image[t].image;M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,b,S,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,w,r.width,r.height,0,b,S,r.data)}}else{M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,S,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,b,S,f[t]);for(let i=0;i<C.length;i++){const r=C[i];M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,b,S,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,w,b,S,r.image[t])}}}g(o)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,r){const a=i.get(t);void 0!==n&&D(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&O(t)},this.setupRenderTarget=function(t){const r=t.texture,s=i.get(t),l=i.get(r);t.addEventListener("dispose",w);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,o.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=c.length;t<n;t++){const n=i.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===j(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const r=a.convert(i.format,i.colorSpace),o=a.convert(i.type),l=_(i.internalFormat,r,o,i.colorSpace,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),N(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),R(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)D(s.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else D(s.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(r)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let r=0,a=c.length;r<a;r++){const a=c[r],o=i.get(a);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,o.__webglTexture),R(l,a),D(s.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+r,l,0),g(a)&&v(l)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),R(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)D(s.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else D(s.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);g(r)&&v(i),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let r=0,a=t.length;r<a;r++){const a=t[r];if(g(a)){const t=y(e),r=i.get(a).__webglTexture;n.bindTexture(t,r),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===j(t)){const r=t.textures,a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),h=r.length>1;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const d=t.texture.mipmaps;d&&d.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===l&&(z.length=0,F.length=0,z.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(z.push(c),F.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,F)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,z))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=D,this.useMultisampledRTT=j}function $v(e,t){return{convert:function(n){let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;const a=Ja.getTransfer(r);if(n===ci)return e.UNSIGNED_BYTE;if(n===vi)return e.UNSIGNED_SHORT_4_4_4_4;if(n===yi)return e.UNSIGNED_SHORT_5_5_5_1;if(n===bi)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===xi)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===ui)return e.BYTE;if(n===hi)return e.SHORT;if(n===di)return e.UNSIGNED_SHORT;if(n===pi)return e.INT;if(n===fi)return e.UNSIGNED_INT;if(n===mi)return e.FLOAT;if(n===gi)return e.HALF_FLOAT;if(n===Si)return e.ALPHA;if(n===wi)return e.RGB;if(n===Mi)return e.RGBA;if(n===Ei)return e.DEPTH_COMPONENT;if(n===Ti)return e.DEPTH_STENCIL;if(n===Ci)return e.RED;if(n===Ai)return e.RED_INTEGER;if(n===Pi)return e.RG;if(n===Ri)return e.RG_INTEGER;if(n===ki)return e.RGBA_INTEGER;if(n===Ii||n===Di||n===Ni||n===Ui)if(a===Nr){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===Ii)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Di)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ni)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ui)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===Ii)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Di)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ni)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ui)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Oi||n===zi||n===Fi||n===Bi){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===Oi)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===zi)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Fi)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Bi)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ji||n===Hi||n===Vi){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===ji||n===Hi)return a===Nr?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===Vi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Gi||n===Wi||n===Xi||n===qi||n===Zi||n===Yi||n===Ki||n===Ji||n===Qi||n===$i||n===er||n===tr||n===nr||n===ir){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===Gi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Wi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Xi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===qi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Zi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Yi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ki)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ji)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Qi)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===$i)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===er)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===tr)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===nr)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ir)return a===Nr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===rr||n===ar||n===or){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===rr)return a===Nr?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ar)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===or)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===sr||n===lr||n===cr||n===ur){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===sr)return i.COMPRESSED_RED_RGTC1_EXT;if(n===lr)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===cr)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ur)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===_i?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class ey{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new Vu(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Rl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new wl(new ad(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ty extends Sa{constructor(e,t){super();const n=this;let i=null,r=1,a=null,o="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,p=null;const f="undefined"!==typeof XRWebGLBinding,m=new ey,g={},v=t.getContextAttributes();let y=null,_=null;const b=[],x=[],S=new Da;let w=null;const M=new Nl;M.viewport=new lo;const E=new Nl;E.viewport=new lo;const T=[M,E],C=new Wp;let A=null,P=null;function R(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=b[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function L(){i.removeEventListener("select",R),i.removeEventListener("selectstart",R),i.removeEventListener("selectend",R),i.removeEventListener("squeeze",R),i.removeEventListener("squeezestart",R),i.removeEventListener("squeezeend",R),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",k);for(let e=0;e<b.length;e++){const t=x[e];null!==t&&(x[e]=null,b[e].disconnect(t))}A=null,P=null,m.reset();for(const e in g)delete g[e];e.setRenderTarget(y),d=null,h=null,u=null,i=null,_=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=x.indexOf(n);i>=0&&(x[i]=null,b[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=x.indexOf(n);if(-1===i){for(let e=0;e<b.length;e++){if(e>=x.length){x.push(n),i=e;break}if(null===x[e]){x[e]=n,i=e;break}}if(-1===i)break}const r=b[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new Hl,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new Hl,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new Hl,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return null===u&&f&&(u=new XRWebGLBinding(i,t)),u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){y=e.getRenderTarget(),i.addEventListener("select",R),i.addEventListener("selectstart",R),i.addEventListener("selectend",R),i.addEventListener("squeeze",R),i.addEventListener("squeezestart",R),i.addEventListener("squeezeend",R),i.addEventListener("end",L),i.addEventListener("inputsourceschange",k),!0!==v.xrCompatible&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(S);if(f&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,a=null,o=null;v.depth&&(o=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?Ti:Ei,a=v.stencil?_i:fi);const s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:r};u=this.getBinding(),h=u.createProjectionLayer(s),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new uo(h.textureWidth,h.textureHeight,{format:Mi,type:ci,depthTexture:new Hu(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new uo(d.framebufferWidth,d.framebufferHeight,{format:Mi,type:ci,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await i.requestReferenceSpace(o),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const I=new Ua,D=new Ua;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),C.near=E.near=M.near=t,C.far=E.far=M.far=n,A===C.near&&P===C.far||(i.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,P=C.far),C.layers.mask=6|e.layers.mask,M.layers.mask=3&C.layers.mask,E.layers.mask=5&C.layers.mask;const r=e.parent,a=C.cameras;N(C,r);for(let i=0;i<a.length;i++)N(a[i],r);2===a.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const i=I.distanceTo(D),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*u,p=o*h,f=i/(-u+h),m=f*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=o+f,n=s+f,r=d-m,a=p+(i-m),u=l*s/n*t,h=c*s/n*t;e.projectionMatrix.makePerspective(r,a,u,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,M,E):C.projectionMatrix.copy(M.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Ta*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,r)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(C)},this.getCameraTexture=function(e){return g[e]};let U=null;const O=new Em;O.setAnimationLoop(function(t,r){if(c=r.getViewerPose(l||a),p=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let r=!1;t.length!==C.cameras.length&&(C.cameras.length=0,r=!0);for(let n=0;n<t.length;n++){const i=t[n];let a=null;if(null!==d)a=d.getViewport(i);else{const t=u.getViewSubImage(h,i);a=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(_))}let o=T[n];void 0===o&&(o=new Nl,o.layers.enable(n),o.viewport=new lo,T[n]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===n&&(C.matrix.copy(o.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===r&&C.cameras.push(o)}const a=i.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&f){u=n.getBinding();const e=u.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&m.init(e,i.renderState)}if(a&&a.includes("camera-access")&&f){e.state.unbindTexture(),u=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new Vu,g[n]=e);const t=u.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<b.length;e++){const t=x[e],n=b[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}U&&U(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){U=e},this.dispose=function(){}}}const ny=new $o,iy=new Vo;function ry(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===Zt&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===Zt&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),a=r.envMap,o=r.envMapRotation;a&&(e.envMap.value=a,ny.copy(o),ny.x*=-1,ny.y*=-1,ny.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(ny.y*=-1,ny.z*=-1),e.envMapRotation.value.setFromMatrix4(iy.makeRotationFromEuler(ny)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Al(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,o,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Zt&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,s)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function ay(e,t,n,i){let r={},a={},o=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,a=t+"_"+n;if(void 0===i[a])return i[a]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[a];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[a]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let a=0,o=t.length;a<o;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,r=e.length;t<r;t++){const r=e[t],a=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]),o=n%i,s=o%t.boundary,l=o+s;n+=s,0!==l&&i-l<t.storage&&(n+=i-l),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const p=h.program;i.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,o=i.length;r<o;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,a)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let a=0;a<n.length;a++){const o=n[a],s=c(o);"number"===typeof o||"boolean"===typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}}}class oy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Wa(),context:n=null,depth:i=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reversedDepthBuffer:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=a;const p=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Dn,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const _=this;let b=!1;this._outputColorSpace=kr;let x=0,S=0,w=null,M=-1,E=null;const T=new lo,C=new lo;let A=null;const P=new Ns(0);let R=0,L=t.width,k=t.height,I=1,D=null,N=null;const U=new lo(0,0,L,k),O=new lo(0,0,L,k);let z=!1;const F=new Wc;let B=!1,j=!1;const H=new Vo,V=new Ua,G=new lo,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function q(){return null===w?I:1}let Z,Y,K,J,Q,$,ee,te,ne,ie,re,ae,oe,se,le,ce,ue,he,de,pe,fe,me,ge,ve,ye=n;function _e(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:r,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Ut)),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===ye){const t="webgl2";if(ye=_e(t,e),null===ye)throw _e(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(He){throw console.error("THREE.WebGLRenderer: "+He.message),He}function be(){Z=new ig(ye),Z.init(),me=new $v(ye,Z),Y=new Um(ye,Z,e,me),K=new Jv(ye,Z),Y.reversedDepthBuffer&&h&&K.buffers.depth.setReversed(!0),J=new og(ye),Q=new zv,$=new Qv(ye,Z,K,Q,Y,me,J),ee=new zm(_),te=new ng(_),ne=new Tm(ye),ge=new Dm(ye,ne),ie=new rg(ye,ne,J,ge),re=new lg(ye,ie,ne,J),de=new sg(ye,Y,$),ce=new Om(Q),ae=new Ov(_,ee,te,Z,Y,ge,ce),oe=new ry(_,Q),se=new Hv,le=new Zv(Z),he=new Im(_,ee,te,K,re,d,s),ue=new Yv(_,re,Y),ve=new ay(ye,J,Y,K),pe=new Nm(ye,Z,J),fe=new ag(ye,Z,J),J.programs=ae.programs,_.capabilities=Y,_.extensions=Z,_.properties=Q,_.renderLists=se,_.shadowMap=ue,_.state=K,_.info=J}be();const xe=new ty(_,ye);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=J.autoReset,t=ue.enabled,n=ue.autoUpdate,i=ue.needsUpdate,r=ue.type;be(),J.autoReset=e,ue.enabled=t,ue.autoUpdate=n,ue.needsUpdate=i,ue.type=r}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach(function(e){ae.releaseProgram(e)}),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&e.side===Yt&&!1===e.forceSinglePass?(e.side=Zt,e.needsUpdate=!0,Ue(e,t,n),e.side=qt,e.needsUpdate=!0,Ue(e,t,n),e.side=Yt):Ue(e,t,n)}this.xr=xe,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(L,k,!1))},this.getSize=function(e){return e.set(L,k)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,k=n,t.width=Math.floor(e*I),t.height=Math.floor(n*I),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*I,k*I).floor()},this.setDrawingBufferSize=function(e,n,i){L=e,k=n,I=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(U)},this.setViewport=function(e,t,n,i){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,i),K.viewport(T.copy(U).multiplyScalar(I).round())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,i){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,i),K.scissor(C.copy(O).multiplyScalar(I).round())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){K.setScissorTest(z=e)},this.setOpaqueSort=function(e){D=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor(...arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha(...arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==w){const t=w.texture.format;e=t===ki||t===Ri||t===Ai}if(e){const e=w.texture.type,t=e===ci||e===fi||e===di||e===_i||e===vi||e===yi,n=he.getClearColor(),i=he.getClearAlpha(),r=n.r,a=n.g,o=n.b;t?(p[0]=r,p[1]=a,p[2]=o,p[3]=i,ye.clearBufferuiv(ye.COLOR,0,p)):(f[0]=r,f[1]=a,f[2]=o,f[3]=i,ye.clearBufferiv(ye.COLOR,0,f))}else n|=ye.COLOR_BUFFER_BIT}e&&(n|=ye.DEPTH_BUFFER_BIT),t&&(n|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),he.dispose(),se.dispose(),le.dispose(),Q.dispose(),ee.dispose(),te.dispose(),re.dispose(),ge.dispose(),ve.dispose(),ae.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Ae),xe.removeEventListener("sessionend",Pe),Re.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=W);const o=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,n,i,r){!0!==t.isScene&&(t=W);$.resetTextureUnits();const a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===w?_.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:Ir,l=(i.isMeshStandardMaterial?te:ee).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Dn;i.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(f=_.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Q.get(i),b=g.state.lights;if(!0===B&&(!0===j||e!==E)){const t=e===E&&i.id===M;ce.setState(i,e,t)}let x=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==s||r.isBatchedMesh&&!1===y.batching?x=!0:r.isBatchedMesh||!0!==y.batching?r.isBatchedMesh&&!0===y.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===y.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===y.instancing?x=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?x=!0:r.isSkinnedMesh||!0!==y.skinning?r.isInstancedMesh&&!0===y.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===y.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===y.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===y.instancingMorph&&null!==r.morphTexture||y.envMap!==l||!0===i.fog&&y.fog!==a?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ce.numPlanes&&y.numIntersection===ce.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,y.__version=i.version);let S=y.currentProgram;!0===x&&(S=Ue(i,t,r));let T=!1,C=!1,A=!1;const P=S.getUniforms(),R=y.uniforms;K.useProgram(S.program)&&(T=!0,C=!0,A=!0);i.id!==M&&(M=i.id,C=!0);if(T||E!==e){K.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),P.setValue(ye,"projectionMatrix",e.projectionMatrix),P.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=P.map.cameraPosition;void 0!==t&&t.setValue(ye,V.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&P.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&P.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,C=!0,A=!0)}if(r.isSkinnedMesh){P.setOptional(ye,r,"bindMatrix"),P.setOptional(ye,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(ye,"boneTexture",e.boneTexture,$))}r.isBatchedMesh&&(P.setOptional(ye,r,"batchingTexture"),P.setValue(ye,"batchingTexture",r._matricesTexture,$),P.setOptional(ye,r,"batchingIdTexture"),P.setValue(ye,"batchingIdTexture",r._indirectTexture,$),P.setOptional(ye,r,"batchingColorTexture"),null!==r._colorsTexture&&P.setValue(ye,"batchingColorTexture",r._colorsTexture,$));const L=n.morphAttributes;void 0===L.position&&void 0===L.normal&&void 0===L.color||de.update(r,n,S);(C||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,P.setValue(ye,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(R.envMapIntensity.value=t.environmentIntensity);C&&(P.setValue(ye,"toneMappingExposure",_.toneMappingExposure),y.needsLights&&(N=A,(D=R).ambientLightColor.needsUpdate=N,D.lightProbe.needsUpdate=N,D.directionalLights.needsUpdate=N,D.directionalLightShadows.needsUpdate=N,D.pointLights.needsUpdate=N,D.pointLightShadows.needsUpdate=N,D.spotLights.needsUpdate=N,D.spotLightShadows.needsUpdate=N,D.rectAreaLights.needsUpdate=N,D.hemisphereLights.needsUpdate=N),a&&!0===i.fog&&oe.refreshFogUniforms(R,a),oe.refreshMaterialUniforms(R,i,I,k,g.state.transmissionRenderTarget[e.id]),pv.upload(ye,Oe(y),R,$));var D,N;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(pv.upload(ye,Oe(y),R,$),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&P.setValue(ye,"center",r.center);if(P.setValue(ye,"modelViewMatrix",r.modelViewMatrix),P.setValue(ye,"normalMatrix",r.normalMatrix),P.setValue(ye,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ve.update(n,S),ve.bind(n,S)}}return S}(e,t,n,i,r);K.setMaterial(i,o);let l=n.index,c=1;if(!0===i.wireframe){if(l=ie.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==a&&(d=Math.max(d,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;ge.setup(r,i,s,n,l);let v=pe;if(null!==l&&(m=ne.get(l),v=fe,v.setIndex(m)),r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*q()),v.setMode(ye.LINES)):v.setMode(ye.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),K.setLineWidth(e*q()),r.isLineSegments?v.setMode(ye.LINES):r.isLineLoop?v.setMode(ye.LINE_LOOP):v.setMode(ye.LINE_STRIP)}else r.isPoints?v.setMode(ye.POINTS):r.isSprite&&v.setMode(ye.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)qa("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),v.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(Z.get("WEBGL_multi_draw"))v.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,a=l?ne.get(l).bytesPerElement:1,o=Q.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)o.setValue(ye,"_gl_DrawID",i),v.render(e[i]/a,t[i])}else if(r.isInstancedMesh)v.renderInstances(d,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=le.get(n),g.init(t),y.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];Te(a,n,e),i.add(a)}else Te(t,n,e),i.add(t)}),g=y.pop(),i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){Q.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==Z.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ce=null;function Ae(){Re.stop()}function Pe(){Re.start()}const Re=new Em;function Le(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){i&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),r=e.material;r.visible&&m.push(e,t,r,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=re.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=t.groups;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r[o.materialIndex];s&&s.visible&&m.push(e,t,s,n,G.z,o)}}else r.visible&&m.push(e,t,r,n,G.z,null)}const r=e.children;for(let a=0,o=r.length;a<o;a++)Le(r[a],t,n,i)}function ke(e,t,n,i){const r=e.opaque,a=e.transmissive,o=e.transparent;g.setupLightsView(n),!0===B&&ce.setGlobalState(_.clippingPlanes,n),i&&K.viewport(T.copy(i)),r.length>0&&De(r,t,n),a.length>0&&De(a,t,n),o.length>0&&De(o,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Ie(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[i.id]&&(g.state.transmissionRenderTarget[i.id]=new uo(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")||Z.has("EXT_color_buffer_float")?gi:ci,minFilter:si,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ja.workingColorSpace}));const a=g.state.transmissionRenderTarget[i.id],o=i.viewport||T;a.setSize(o.z*_.transmissionResolutionScale,o.w*_.transmissionResolutionScale);const s=_.getRenderTarget(),l=_.getActiveCubeFace(),c=_.getActiveMipmapLevel();_.setRenderTarget(a),_.getClearColor(P),R=_.getClearAlpha(),R<1&&_.setClearColor(16777215,.5),_.clear(),X&&he.render(n);const u=_.toneMapping;_.toneMapping=Dn;const h=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),g.setupLightsView(i),!0===B&&ce.setGlobalState(_.clippingPlanes,i),De(e,n,i),$.updateMultisampleRenderTarget(a),$.updateRenderTargetMipmap(a),!1===Z.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,a=t.length;r<a;r++){const a=t[r],o=a.object,s=a.geometry,l=a.material,c=a.group;if(l.side===Yt&&o.layers.test(i.layers)){const t=l.side;l.side=Zt,l.needsUpdate=!0,Ne(o,n,i,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&($.updateMultisampleRenderTarget(a),$.updateRenderTargetMipmap(a))}_.setRenderTarget(s,l,c),_.setClearColor(P,R),void 0!==h&&(i.viewport=h),_.toneMapping=u}function De(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],o=a.object,s=a.geometry,l=a.group;let c=a.material;!0===c.allowOverride&&null!==i&&(c=i),o.layers.test(n.layers)&&Ne(o,t,n,s,c,l)}}function Ne(e,t,n,i,r,a){e.onBeforeRender(_,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(_,t,n,i,e,a),!0===r.transparent&&r.side===Yt&&!1===r.forceSinglePass?(r.side=Zt,r.needsUpdate=!0,_.renderBufferDirect(n,t,i,r,e,a),r.side=qt,r.needsUpdate=!0,_.renderBufferDirect(n,t,i,r,e,a),r.side=Yt):_.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(_,t,n,i,r,a)}function Ue(e,t,n){!0!==t.isScene&&(t=W);const i=Q.get(e),r=g.state.lights,a=g.state.shadowsArray,o=r.state.version,s=ae.getParameters(e,r.state,a,t,n),l=ae.getProgramCacheKey(s);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ee),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===o)return ze(e,s),u}else s.uniforms=ae.getUniforms(e),e.onBeforeCompile(s,_),u=ae.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const h=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ce.uniform),ze(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=pv.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ze(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop(function(e){Ce&&Ce(e)}),"undefined"!==typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Ce=e,xe.setAnimationLoop(e),null===e?Re.stop():Re.start()},xe.addEventListener("sessionstart",Ae),xe.addEventListener("sessionend",Pe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===xe.enabled&&!0===xe.isPresenting&&(!0===xe.cameraAutoUpdate&&xe.updateCamera(t),t=xe.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,w),g=le.get(e,y.length),g.init(t),y.push(g),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(H,va,t.reversedDepth),j=this.localClippingEnabled,B=ce.init(this.clippingPlanes,j),m=se.get(e,v.length),m.init(),v.push(m),!0===xe.enabled&&!0===xe.isPresenting){const e=_.xr.getDepthSensingMesh();null!==e&&Le(e,t,-1/0,_.sortObjects)}Le(e,t,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort(D,N),X=!1===xe.enabled||!1===xe.isPresenting||!1===xe.hasDepthSensing(),X&&he.addToRenderList(m,e),this.info.render.frame++,!0===B&&ce.beginShadows();const n=g.state.shadowsArray;ue.render(n,e,t),!0===B&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=m.opaque,r=m.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,a=n.length;t<a;t++){Ie(i,r,e,n[t])}X&&he.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];ke(m,e,i,i.viewport)}}else r.length>0&&Ie(i,r,e,t),X&&he.render(e),ke(m,e,t);null!==w&&0===S&&($.updateMultisampleRenderTarget(w),$.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(_,e,t),ge.resetDefaultState(),M=-1,E=null,y.pop(),y.length>0?(g=y[y.length-1],!0===B&&ce.setGlobalState(_.clippingPlanes,g.state.camera)):g=null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,n){const i=Q.get(e);i.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:n,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Fe=ye.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=e,x=t,S=n;let i=!0,r=null,a=!1,o=!1;if(e){const s=Q.get(e);if(void 0!==s.__useDefaultFramebuffer)K.bindFramebuffer(ye.FRAMEBUFFER,null),i=!1;else if(void 0===s.__webglFramebuffer)$.setupRenderTarget(e);else if(s.__hasExternalTextures)$.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=e.samples>0&&!1===$.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,T.copy(e.viewport),C.copy(e.scissor),A=e.scissorTest}else T.copy(U).multiplyScalar(I).floor(),C.copy(O).multiplyScalar(I).floor(),A=z;0!==n&&(r=Fe);if(K.bindFramebuffer(ye.FRAMEBUFFER,r)&&i&&K.drawBuffers(e,r),K.viewport(T),K.scissor(C),K.setScissorTest(A),a){const i=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(o){const i=t;for(let t=0;t<e.textures.length;t++){const r=Q.get(e.textures[t]);ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0+t,r.__webglTexture,n,i)}}else if(null!==e&&0!==n){const t=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){K.bindFramebuffer(ye.FRAMEBUFFER,l);try{const o=e.textures[s],l=o.format,c=o.type;if(!Y.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Y.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&(e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+s),ye.readPixels(t,n,i,r,me.convert(l),me.convert(c),a))}finally{const e=null!==w?Q.get(w).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,a,o){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){K.bindFramebuffer(ye.FRAMEBUFFER,l);const o=e.textures[s],c=o.format,u=o.type;if(!Y.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Y.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const h=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.bufferData(ye.PIXEL_PACK_BUFFER,a.byteLength,ye.STREAM_READ),e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+s),ye.readPixels(t,n,i,r,me.convert(c),me.convert(u),0);const d=null!==w?Q.get(w).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,d);const p=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise(function(i,r){setTimeout(function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}},n)})}(ye,p,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,a),ye.deleteBuffer(h),ye.deleteSync(p),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=null!==t?t.x:0,s=null!==t?t.y:0;$.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,o,s,r,a),K.unbindTexture()};const Be=ye.createFramebuffer(),je=ye.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,i,r,a,o,s,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===f&&(0!==p?(qa("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),f=p,p=0):f=0);const m=e.isCompressedTexture?e.mipmaps[f]:e.image;if(null!==h)n=h.max.x-h.min.x,i=h.max.y-h.min.y,r=h.isBox3?h.max.z-h.min.z:1,a=h.min.x,o=h.min.y,s=h.isBox3?h.min.z:0;else{const t=Math.pow(2,-p);n=Math.floor(m.width*t),i=Math.floor(m.height*t),r=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,a=0,o=0,s=0}null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const g=me.convert(t.format),v=me.convert(t.type);let y;t.isData3DTexture?($.setTexture3D(t,0),y=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?($.setTexture2DArray(t,0),y=ye.TEXTURE_2D_ARRAY):($.setTexture2D(t,0),y=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const _=ye.getParameter(ye.UNPACK_ROW_LENGTH),b=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),x=ye.getParameter(ye.UNPACK_SKIP_PIXELS),S=ye.getParameter(ye.UNPACK_SKIP_ROWS),w=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,m.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,m.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,a),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,o),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,s);const M=e.isDataArrayTexture||e.isData3DTexture,E=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const h=Q.get(e),d=Q.get(t),m=Q.get(h.__renderTarget),g=Q.get(d.__renderTarget);K.bindFramebuffer(ye.READ_FRAMEBUFFER,m.__webglFramebuffer),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<r;v++)M&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,p,s+v),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,f,u+v)),ye.blitFramebuffer(a,o,n,i,l,c,n,i,ye.DEPTH_BUFFER_BIT,ye.NEAREST);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==p||e.isRenderTargetTexture||Q.has(e)){const h=Q.get(e),d=Q.get(t);K.bindFramebuffer(ye.READ_FRAMEBUFFER,Be),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,je);for(let e=0;e<r;e++)M?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,h.__webglTexture,p,s+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,h.__webglTexture,p),E?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,d.__webglTexture,f,u+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,d.__webglTexture,f),0!==p?ye.blitFramebuffer(a,o,n,i,l,c,n,i,ye.COLOR_BUFFER_BIT,ye.NEAREST):E?ye.copyTexSubImage3D(y,f,l,c,u+e,a,o,n,i):ye.copyTexSubImage2D(y,f,l,c,a,o,n,i);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else E?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(y,f,l,c,u,n,i,r,g,v,m.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(y,f,l,c,u,n,i,r,g,m.data):ye.texSubImage3D(y,f,l,c,u,n,i,r,g,v,m):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,f,l,c,n,i,g,v,m.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,f,l,c,m.width,m.height,g,m.data):ye.texSubImage2D(ye.TEXTURE_2D,f,l,c,n,i,g,v,m);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,_),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,b),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,x),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,S),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,w),0===f&&t.generateMipmaps&&ye.generateMipmap(y),K.unbindTexture()},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&$.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?$.setTextureCube(e,0):e.isData3DTexture?$.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?$.setTexture2DArray(e,0):$.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){x=0,S=0,w=null,K.reset(),ge.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return va}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Ja._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ja._getUnpackColorSpace()}}const sy={type:"change"},ly={type:"start"},cy={type:"end"},uy=new Ho,hy=new jc,dy=Math.cos(70*Ia.DEG2RAD),py=new Ua,fy=2*Math.PI,my=-1,gy=0,vy=1,yy=2,_y=3,by=4,xy=5,Sy=6,wy=1e-6;class My extends Sm{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.state=my,this.target=new Ua,this.cursor=new Ua,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ot.ROTATE,MIDDLE:Ot.DOLLY,RIGHT:Ot.PAN},this.touches={ONE:zt.ROTATE,TWO:zt.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Ua,this._lastQuaternion=new Na,this._lastTargetPosition=new Ua,this._quat=(new Na).setFromUnitVectors(e.up,new Ua(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Lf,this._sphericalDelta=new Lf,this._scale=1,this._panOffset=new Ua,this._rotateStart=new Da,this._rotateEnd=new Da,this._rotateDelta=new Da,this._panStart=new Da,this._panEnd=new Da,this._panDelta=new Da,this._dollyStart=new Da,this._dollyEnd=new Da,this._dollyDelta=new Da,this._dollyDirection=new Ua,this._mouse=new Da,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Ty.bind(this),this._onPointerDown=Ey.bind(this),this._onPointerUp=Cy.bind(this),this._onContextMenu=Dy.bind(this),this._onMouseWheel=Ry.bind(this),this._onKeyDown=Ly.bind(this),this._onTouchStart=ky.bind(this),this._onTouchMove=Iy.bind(this),this._onMouseDown=Ay.bind(this),this._onMouseMove=Py.bind(this),this._interceptControlDown=Ny.bind(this),this._interceptControlUp=Uy.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1});this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents();this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(sy),this.update(),this.state=my}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.object.position;py.copy(t).sub(this.target),py.applyQuaternion(this._quat),this._spherical.setFromVector3(py),this.autoRotate&&this.state===my&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=fy:n>Math.PI&&(n-=fy),i<-Math.PI?i+=fy:i>Math.PI&&(i-=fy),this._spherical.theta=n<=i?Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const e=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=e!=this._spherical.radius}if(py.setFromSpherical(this._spherical),py.applyQuaternion(this._quatInverse),t.copy(this.target).add(py),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let e=null;if(this.object.isPerspectiveCamera){const t=py.length();e=this._clampDistance(t*this._scale);const n=t-e;this.object.position.addScaledVector(this._dollyDirection,n),this.object.updateMatrixWorld(),r=!!n}else if(this.object.isOrthographicCamera){const t=new Ua(this._mouse.x,this._mouse.y,0);t.unproject(this.object);const n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=n!==this.object.zoom;const i=new Ua(this._mouse.x,this._mouse.y,0);i.unproject(this.object),this.object.position.sub(i).add(t),this.object.updateMatrixWorld(),e=py.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==e&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(e).add(this.object.position):(uy.origin.copy(this.object.position),uy.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(uy.direction))<dy?this.object.lookAt(this.target):(hy.setFromNormalAndCoplanarPoint(this.object.up,this.target),uy.intersectPlane(hy,this.target))))}else if(this.object.isOrthographicCamera){const e=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),e!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,!!(r||this._lastPosition.distanceToSquared(this.object.position)>wy||8*(1-this._lastQuaternion.dot(this.object.quaternion))>wy||this._lastTargetPosition.distanceToSquared(this.target)>wy)&&(this.dispatchEvent(sy),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?fy/60*this.autoRotateSpeed*e:fy/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){py.setFromMatrixColumn(t,0),py.multiplyScalar(-e),this._panOffset.add(py)}_panUp(e,t){!0===this.screenSpacePanning?py.setFromMatrixColumn(t,1):(py.setFromMatrixColumn(t,0),py.crossVectors(this.object.up,py)),py.multiplyScalar(e),this._panOffset.add(py)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;py.copy(i).sub(this.target);let r=py.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*r/n.clientHeight,this.object.matrix),this._panUp(2*t*r/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,r=t-n.top,a=n.width,o=n.height;this._mouse.x=i/a*2-1,this._mouse.y=-r/o*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(fy*this._rotateDelta.x/t.clientHeight),this._rotateUp(fy*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(fy*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-fy*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(fy*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-fy*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateEnd.set(n,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(fy*this._rotateDelta.x/t.clientHeight),this._rotateUp(fy*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return void this._pointers.splice(t,1)}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];void 0===t&&(t=new Da,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Ey(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(e)||(this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e)))}function Ty(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function Cy(e){switch(this._removePointer(e),this._pointers.length){case 0:this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(cy),this.state=my;break;case 1:const t=this._pointers[0],n=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:n.x,pageY:n.y})}}function Ay(e){let t;switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ot.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(e),this.state=vy;break;case Ot.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=yy}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=gy}break;case Ot.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=gy}else{if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=yy}break;default:this.state=my}this.state!==my&&this.dispatchEvent(ly)}function Py(e){switch(this.state){case gy:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(e);break;case vy:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(e);break;case yy:if(!1===this.enablePan)return;this._handleMouseMovePan(e)}}function Ry(e){!1!==this.enabled&&!1!==this.enableZoom&&this.state===my&&(e.preventDefault(),this.dispatchEvent(ly),this._handleMouseWheel(this._customWheelEvent(e)),this.dispatchEvent(cy))}function Ly(e){!1!==this.enabled&&this._handleKeyDown(e)}function ky(e){switch(this._trackPointer(e),this._pointers.length){case 1:switch(this.touches.ONE){case zt.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(e),this.state=_y;break;case zt.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(e),this.state=by;break;default:this.state=my}break;case 2:switch(this.touches.TWO){case zt.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(e),this.state=xy;break;case zt.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(e),this.state=Sy;break;default:this.state=my}break;default:this.state=my}this.state!==my&&this.dispatchEvent(ly)}function Iy(e){switch(this._trackPointer(e),this.state){case _y:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(e),this.update();break;case by:if(!1===this.enablePan)return;this._handleTouchMovePan(e),this.update();break;case xy:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(e),this.update();break;case Sy:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(e),this.update();break;default:this.state=my}}function Dy(e){!1!==this.enabled&&e.preventDefault()}function Ny(e){if("Control"===e.key){this._controlActive=!0;this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function Uy(e){if("Control"===e.key){this._controlActive=!1;this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function Oy(){const e=(0,t.useRef)(null),n=(0,t.useRef)(null),i=(0,t.useRef)(null),r=(0,t.useRef)(null),a=(0,t.useRef)(null),o=(0,t.useRef)(null),s=(0,t.useRef)(!0),l=(0,t.useRef)([]);return(0,t.useEffect)(()=>{const t=e.current||document.body,c=t.clientWidth||window.innerWidth,u=t.clientHeight||window.innerHeight,h=9.81/6371,d=1e5,p=new Wl;n.current=p;const f=new Nl(45,c/u,.1,1e3);f.position.z=3,i.current=f;const m=new oy({antialias:!0});m.setPixelRatio(window.devicePixelRatio||1),m.setSize(c,u),m.toneMapping=zn,Ir&&(m.outputColorSpace=Ir),t.appendChild(m.domElement),r.current=m;const g=new Bl;g.rotation.z=-23.4*Math.PI/180,p.add(g);new My(f,m.domElement);const v=new sp,y=e=>(e&&e.dispose&&l.current.push(e),e),_=new nd(1,16),b=new ld(1.01,Math.max(8,256)),x=new ld(1.03,Math.max(8,256)),S=y(v.load("/three-textures/8k_earth_daymap.jpg")),w=y(v.load("/three-textures/earthspec1k.jpg")),M=y(v.load("/three-textures/earthbump1k.jpg")),E=new bd({map:S,specularMap:w,bumpMap:M,bumpScale:.04}),T=new wl(_,E);g.add(T);const C=y(v.load("/three-textures/8k_earth_nightmap.jpg")),A=new Fs({map:C,blending:Qt}),P=new wl(_.clone(),A);g.add(P);const R=y(v.load("/three-textures/8k_earth_clouds.jpg")),L=new yd({map:R,blending:Qt}),k=new wl(b,L);g.add(k);const I=new Fs({color:9687023,transparent:!0,opacity:.1}),D=new wl(x,I);D.renderOrder=1,g.add(D);const N=new wp(16777215,2);let U;N.position.set(-2,.5,1.5),p.add(N),function e(){U=requestAnimationFrame(e),s.current&&(T.rotation.y+=5e-4,P.rotation.y+=5e-4,k.rotation.y+=3e-4),m.render(p,f)}();const O=new Tf,z=new Da;function F(e){const t=function(e){const t=m.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1}}(e);z.x=t.x,z.y=t.y,O.setFromCamera(z,f),s.current=!1;const n=O.intersectObjects(g.children,!0);if(n.length>0){const i=n[0],r=20*Math.PI/180,l=i.point.length();let c=Math.acos(i.point.y/l),u=Math.atan2(i.point.z,i.point.x);c=Math.min(c+r,Math.PI),u+=r;const _=new Ua(l*Math.sin(c)*Math.cos(u),l*Math.cos(c),l*Math.sin(c)*Math.sin(u)),b=f.position.clone(),x=_.clone().multiplyScalar(2.2).divideScalar(1.5),S=f.getWorldDirection(new Ua).clone(),w=i.point.clone();let M=0;const E=60;function T(){M++;const e=Math.min(M/E,1);f.position.lerpVectors(b,x,e),f.lookAt(S.clone().lerp(w,e)),e<1&&requestAnimationFrame(T)}T(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{yawDeg:0,pitchDeg:0,velocity:7e-4,diameter:1e3,density:1,mass:1e3};a.current&&(p.remove(a.current),a.current.trail&&p.remove(a.current.trail),a.current.burn&&p.remove(a.current.burn));const i=n.diameter/2,r=new nd(i/6371e3,3),s=y(v.load("/three-textures/meteor_texture.jpg")),l=new yd({map:s,emissive:16777040,emissiveIntensity:4,roughness:.4,metalness:.2}),c=new wl(r,l),u=e.clone().normalize(),d=u.clone(),f=Ia.degToRad(n.yawDeg||0),m=Ia.degToRad(n.pitchDeg||0),g=new bp(16755285,2.5,2.5);p.add(g),g.intensity=0,o.current=g;const _=(new Vo).makeRotationY(f);d.applyMatrix4(_);const b=(new Ua).crossVectors(d,new Ua(0,1,0)).normalize(),x=(new Vo).makeRotationAxis(b,m);d.applyMatrix4(x),c.position.copy(d.clone().multiplyScalar(t+1));const S=u.clone().multiplyScalar(1.1).clone().sub(d).normalize(),w=S.multiplyScalar(-1*(n.velocity||7e-4)),M=new fu({color:16737792,transparent:!0,opacity:.5}),E=(new hl).setFromPoints([d,c.position]),T=new Su(E,M);p.add(T),c.trail=T;const C=y(v.load("/three-textures/burn_glow.png")),A=new yd({map:C,color:16750899,transparent:!0,blending:Qt,depthWrite:!1,opacity:1,emissive:16750899,emissiveIntensity:2}),P=new wl(r.clone(),A);P.scale.set(1.1,1.1,1.1),c.add(P),c.burn=P;const R=7e3,L=new hl,k=new Float32Array(21e3),I=new Float32Array(21e3),D=5e4/6371e3,N=c.position.clone().normalize();let U=0;const O=Math.floor(500);for(let a=0;a<14;a++){const e=D-a*(D/14)*(.8+.4*Math.random());for(let t=0;t<O&&U<R;t++){let t,n,i,r,a=0;do{const o=Math.random(),s=Math.random(),l=Math.acos(2*o-1),c=2*Math.PI*s;if(t=e*Math.sin(l)*Math.cos(c),n=e*Math.sin(l)*Math.sin(c),i=e*Math.cos(l),r=new Ua(t,n,i).normalize().dot(N),a++,a>10)break}while(r>.2);k[3*U+0]=t,k[3*U+1]=n,k[3*U+2]=i;const o=.6,s=new Ua(t,n,i).normalize().multiplyScalar(1-o).add(N.clone().multiplyScalar(o));s.x+=.3*(Math.random()-.5),s.y+=.3*(Math.random()-.5),s.z+=.3*(Math.random()-.5),s.normalize();const l=2e-4;I[3*U+0]=s.x*l,I[3*U+1]=s.y*l,I[3*U+2]=s.z*l,U++}}L.setAttribute("position",new Zs(k,3));const z=new Au({color:16755251,size:.003,transparent:!0,opacity:.8,blending:Qt,depthWrite:!1}),F=new Iu(L,z);c.add(F),c.particles=F,c.velocities=I;let B=!0;const j=()=>{if(!B)return;if(c.position.add(w),o.current){const e=c.position.clone().normalize(),t=.013,i=c.position.clone().add(e.clone().multiplyScalar(t));o.current.position.copy(i),o.current.intensity=n.diameter>5e3?.2:n.diameter>2e3?.15:.05}const e=[c.position.clone(),c.position.clone().sub(S.clone().multiplyScalar(.2))];T.geometry.setFromPoints(e),M.opacity=Math.max(.2,.8-c.position.length()/2);const t=c.position.length();if(t>1.2){const e=c.position.clone().normalize().negate();w.add(e.multiplyScalar(.02*h))}if(t<1.2&&t>.1?(P.material.opacity=Ia.mapLinear(t,1.15,1.02,0,1),w.length(),t>1.1?(w.multiplyScalar(.989),c.material.emissiveIntensity=6):t>1.05?(w.multiplyScalar(.983),c.material.emissiveIntensity=7):t>1.02?(w.multiplyScalar(.978),c.material.emissiveIntensity=8):w.multiplyScalar(.971)):P.material.opacity=0,t<1.035&&t>.1){const e=F.geometry.attributes.position.array,t=c.velocities;for(let n=0;n<R;n++)e[3*n+0]+=.99*t[3*n+0],e[3*n+1]+=.99*t[3*n+1],e[3*n+2]+=.99*t[3*n+2];F.geometry.attributes.position.needsUpdate=!0}if(t<=.1)return P.material.opacity=0,o.current&&(p.remove(o.current),o.current=null),p.remove(c),p.remove(T),p.remove(P),a.current=null,void(B=!1);requestAnimationFrame(j)};j(),a.current=c,p.add(c)}(i.point,.4,{velocity:40*1e-6,diameter:d,mass:80})}}function B(){const e=t.clientWidth||window.innerWidth,n=t.clientHeight||window.innerHeight;f.aspect=e/n,f.updateProjectionMatrix(),m.setSize(e,n)}return m.domElement.addEventListener("click",F),window.addEventListener("resize",B),()=>{m.domElement.removeEventListener("click",F),window.removeEventListener("resize",B),cancelAnimationFrame(U),_.dispose(),b.dispose(),x.dispose(),[E,A,L,I].forEach(e=>{try{e&&e.dispose&&e.dispose()}catch(fM){}}),l.current.forEach(e=>{try{e&&e.dispose&&e.dispose()}catch(fM){}}),l.current=[],a.current&&p.remove(a.current),o.current&&p.remove(o.current);try{t.removeChild(m.domElement)}catch(fM){}m.dispose(),n.current=null,i.current=null,r.current=null,a.current=null,o.current=null}},[]),(0,Lt.jsx)("div",{className:"w-full h-full bg-black",children:(0,Lt.jsx)("div",{ref:e,className:"w-full h-full",style:{background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.02), rgba(0,0,0,0.02))"}})})}const zy=function(){return(0,Lt.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Lt.jsx)(kt,{}),(0,Lt.jsxs)("div",{className:"bg-black flex-1 relative overflow-hidden",children:[(0,Lt.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-center rounded-lg",children:[(0,Lt.jsx)(It,{number:60,className:"overflow-hidden"}),(0,Lt.jsxs)("div",{className:"relative z-10 flex h-full gap-20 items-center",children:[(0,Lt.jsxs)("div",{className:"flex-1 flex-col items-center justify-center self-baseline ml-0 mt-14 pl-14 mb-6",children:[(0,Lt.jsxs)("span",{className:"pointer-events-none bg-gradient-to-b from-white to-indigo-800 bg-clip-text text-center text-9xl leading-none font-bebas whitespace-pre-wrap text-transparent",children:["METEOR",(0,Lt.jsx)("br",{}),"MADNESS"]}),(0,Lt.jsxs)("p",{className:"text-4xl font-bebas text-gray-300",children:[" Interactive 3D simulator that models",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("span",{className:" text-5xl font-black underline ",children:" asteroid trajectories and impact scenarios"}),"\xa0 using real NASA data. Visualize consequences and explore mitigation strategies."]})]}),(0,Lt.jsx)("div",{className:"flex-1 flex items-center justify-center h-[36rem]",children:(0,Lt.jsx)(Oy,{})})]})]}),(0,Lt.jsxs)("div",{className:"mt-8 flex flex-row w-full h-[24rem] gap-6 px-20 pb-20",children:[(0,Lt.jsxs)(mt,{to:"/simulate",className:"relative h-full w-full rounded-3xl overflow-hidden group hover:scale-[1.02] transition duration-300 cursor-pointer  hover:shadow-[0_0_50px_20px_rgba(99,102,241,0.7)]",children:[(0,Lt.jsx)("img",{src:Dt,alt:"Meteor background",className:"absolute inset-0 w-full h-full object-cover"}),(0,Lt.jsx)("div",{className:"absolute inset-0 bg-black/50 group-hover:bg-black/30 transition duration-300"}),(0,Lt.jsx)("div",{className:"absolute bottom-6 right-6 text-right z-10",children:(0,Lt.jsxs)("span",{className:"pointer-events-none bg-gradient-to-b from-white to-stone-400 bg-clip-text text-7xl leading-none font-bebas whitespace-pre-wrap text-transparent drop-shadow-lg",children:["SIMULATE",(0,Lt.jsx)("br",{}),"IMPACT"]})})]}),(0,Lt.jsxs)(mt,{to:"/watch",className:"relative h-full w-full rounded-3xl overflow-hidden group hover:scale-[1.02] transition duration-300 cursor-pointer  hover:shadow-[0_0_50px_20px_rgba(139,92,246,0.7)]",children:[(0,Lt.jsx)("img",{src:Nt,alt:"Impact background",className:"absolute inset-0 w-full h-full object-cover"}),(0,Lt.jsx)("div",{className:"absolute bottom-6 right-6 text-right z-10",children:(0,Lt.jsxs)("span",{className:"pointer-events-none bg-gradient-to-b from-white to-stone-400 bg-clip-text text-7xl leading-none font-bebas whitespace-pre-wrap text-transparent drop-shadow-lg",children:["WATCH",(0,Lt.jsx)("br",{}),"METEORITES"]})})]})]}),(0,Lt.jsx)("div",{className:"relative z-10 flex items-center justify-center px-8 pb-12",children:(0,Lt.jsx)("div",{className:"rounded-3xl border-2 border-transparent bg-gradient-to-br from-white to-indigo-600 p-1 max-w-5xl",children:(0,Lt.jsxs)("div",{className:"bg-black rounded-2xl p-8",children:[(0,Lt.jsx)("h2",{className:"text-4xl font-bebas text-center mb-8 bg-gradient-to-b from-white to-indigo-600 bg-clip-text text-transparent",children:"THE TEAM"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-12",children:[[{name:"Andres Garcia",avatar:"\ud83d\udc68\u200d\ud83d\ude80"},{name:"Zahid Aguirre",avatar:"\ud83d\udc68\u200d\ud83d\udcbb"},{name:"Fernando Gonzalez",avatar:"\ud83d\udc68\u200d\ud83d\udcbb"},{name:"Angel Reynoso",avatar:"\ud83d\udc69\u200d\ud83d\ude80"},{name:"Itzel Ximena",avatar:"\ud83d\udc69\u200d\ud83d\udcbb"},{name:"Alvaro Nu\xf1ez",avatar:"\ud83d\udc69\u200d\ud83d\ude80"}].map((e,t)=>(0,Lt.jsxs)("div",{className:"flex flex-row items-center text-center gap-4",children:[(0,Lt.jsx)("div",{className:"text-4xl bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full w-12 h-12 flex items-center justify-center",children:e.avatar}),(0,Lt.jsx)("h3",{className:"text-white font-semibold text-2xl",children:e.name})]},t)),(0,Lt.jsx)("div",{})]})]})})})]})]})};var Fy=n(205),By=n(443);const jy=e=>{let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=i?i:"object"!==typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,a={setState:i,getState:r,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(i,r,a);return a},{useSyncExternalStoreWithSelector:Hy}=By,Vy=e=>e;const Gy=(e,n)=>{const i=(e=>e?jy(e):jy)(e),r=function(e){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vy,i=arguments.length>2?arguments[2]:void 0;const r=Hy(e.subscribe,e.getState,e.getInitialState,n,i);return t.useDebugValue(r),r}(i,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:n)};return Object.assign(r,i),r},Wy=[];function Xy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function qy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const o of Wy)if(Xy(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!n)throw o.promise}const r={keys:t,equal:i.equal,remove:()=>{const e=Wy.indexOf(r);-1!==e&&Wy.splice(e,1)},promise:(a=e,"object"===typeof a&&"function"===typeof a.then?e:e(...t)).then(e=>{r.response=e,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(e=>r.error=e)};var a;if(Wy.push(r),!n)throw r.promise}const Zy=(e,t,n)=>qy(e,t,!1,n);var Yy=n(16),Ky=n.n(Yy),Jy=n(784);(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product))})()?t.useLayoutEffect:t.useEffect;function Qy(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=Qy(i,t,n);if(e)return e;i=t?null:i.sibling}}function $y(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const e_=$y(t.createContext(null));class t_ extends t.Component{render(){return t.createElement(e_.Provider,{value:this._reactInternals},this.props.children)}}function n_(){const e=t.useContext(e_);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo(()=>{for(const t of[e,null==e?void 0:e.alternate]){if(!t)continue;const e=Qy(t,!1,e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}});if(e)return e}},[e,n])}const i_=Symbol.for("react.context"),r_=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i_;function a_(){const e=function(){const e=n_(),[n]=t.useState(()=>new Map);n.clear();let i=e;for(;i;){const e=i.type;r_(e)&&e!==e_&&!n.has(e)&&n.set(e,t.use($y(e))),i=i.return}return n}();return t.useMemo(()=>Array.from(e.keys()).reduce((n,i)=>r=>t.createElement(n,null,t.createElement(i.Provider,u(u({},r),{},{value:e.get(i)}))),e=>t.createElement(t_,u({},e))),[e])}const o_=["params"];function s_(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}i.act;const l_=e=>e&&e.isOrthographicCamera,c_=e=>null!=e&&("string"===typeof e||"number"===typeof e||e.isColor),u_=((e,t)=>"undefined"!==typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product)))()?t.useLayoutEffect:t.useEffect;function h_(e){const n=t.useRef(e);return u_(()=>{n.current=e},[e]),n}function d_(e){let{set:t}=e;return u_(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const p_=(e=>((e=class extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function f_(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function m_(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}const g_={obj:e=>e===Object(e)&&!g_.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(g_.str(e)||g_.num(e)||g_.boo(e))return e===t;const a=g_.obj(e);if(a&&"reference"===i)return e===t;const o=g_.arr(e);if(o&&"reference"===n)return e===t;if((o||a)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(a&&"shallow"===n&&"shallow"===i){for(s in r?t:e)if(!g_.equ(e[s],t[s],{strict:r,objects:"reference"}))return!1}else for(s in r?t:e)if(e[s]!==t[s])return!1;if(g_.und(s)){if(o&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function v_(e){const t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}const y_=["children","key","ref"];function __(e){const t={};for(const n in e)y_.includes(n)||(t[n]=e[n]);return t}function b_(e,t,n,i){const r=e;let a=null==r?void 0:r.__r3f;return a||(a={root:t,type:n,parent:null,children:[],props:__(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function x_(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};n=e;for(const r of t.split("-")){var i;t=r,e=n,n=null==(i=n)?void 0:i[t]}return{root:e,key:t,target:n}}const S_=/-\d+$/;function w_(e,t){if(g_.str(t.props.attach)){if(S_.test(t.props.attach)){const n=t.props.attach.replace(S_,""),{root:i,key:r}=x_(e.object,n);Array.isArray(i[r])||(i[r]=[])}const{root:n,key:i}=x_(e.object,t.props.attach);t.previousAttach=n[i],n[i]=t.object}else g_.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function M_(e,t){if(g_.str(t.props.attach)){const{root:n,key:i}=x_(e.object,t.props.attach),r=t.previousAttach;void 0===r?delete n[i]:n[i]=r}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}const E_=[...y_,"args","dispose","attach","object","onUpdate","dispose"],T_=new Map;function C_(e){let t=T_.get(e.constructor);try{t||(t=new e.constructor,T_.set(e.constructor,t))}catch(fM){}return t}const A_=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],P_=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function R_(e,t){var n;const i=e.__r3f,r=i&&s_(i).getState(),a=null==i?void 0:i.eventCount;for(const s in t){let n=t[s];if(E_.includes(s))continue;if(i&&P_.test(s)){"function"===typeof n?i.handlers[s]=n:delete i.handlers[s],i.eventCount=Object.keys(i.handlers).length;continue}if(void 0===n)continue;let{root:a,key:l,target:c}=x_(e,s);if(c instanceof es&&n instanceof es)c.mask=n.mask;else if(c instanceof Ns&&c_(n))c.set(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"function"===typeof c.copy&&null!=n&&n.constructor&&c.constructor===n.constructor)c.copy(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&Array.isArray(n))"function"===typeof c.fromArray?c.fromArray(n):c.set(...n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"number"===typeof n)"function"===typeof c.setScalar?c.setScalar(n):c.set(n);else{var o;a[l]=n,r&&!r.linear&&A_.includes(l)&&null!=(o=a[l])&&o.isTexture&&a[l].format===Mi&&a[l].type===ci&&(a[l].colorSpace=kr)}}if(null!=i&&i.parent&&null!=r&&r.internal&&null!=(n=i.object)&&n.isObject3D&&a!==i.eventCount){const e=i.object,t=r.internal.interaction.indexOf(e);t>-1&&r.internal.interaction.splice(t,1),i.eventCount&&null!==e.raycast&&r.internal.interaction.push(e)}return i&&void 0===i.props.attach&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&L_(i),e}function L_(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);const n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function k_(e,t){e.manual||(l_(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}const I_=e=>null==e?void 0:e.isObject3D;function D_(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function N_(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function U_(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const i=e.eventObject.__r3f;if(n.hovered.delete(D_(e)),null!=i&&i.eventCount){const n=i.handlers,r=u(u({},e),{},{intersections:t});null==n.onPointerOut||n.onPointerOut(r),null==n.onPointerLeave||n.onPointerLeave(r)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))})}}return function(a){const{onPointerMissed:o,internal:s}=e.getState();s.lastEvent.current=a;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,h=function(t,n){const i=e.getState(),r=new Set,a=[],o=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<o.length;e++){const t=m_(o[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let s=o.flatMap(function(e){const n=m_(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i}).sort((e,t)=>{const n=m_(e.object),i=m_(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=D_(e);return!r.has(t)&&(r.add(t),!0)});i.events.filter&&(s=i.events.filter(s,i));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push(u(u({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(D_(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(a):0;"onPointerDown"===r&&(s.initialClick=[a.offsetX,a.offsetY],s.initialHits=h.map(e=>e.eventObject)),c&&!h.length&&d<=2&&(i(a,s.interaction),o&&o(a)),l&&n(h),function(e,t,i,r){if(e.length){const a={stopped:!1};for(const o of e){let s=m_(o.object);if(s||o.object.traverseAncestors(e=>{const t=m_(e);if(t)return s=t,!1}),s){const{raycaster:l,pointer:c,camera:h,internal:d}=s,p=new Ua(c.x,c.y,0).unproject(h),f=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{const n={intersection:o,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,n):d.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&N_(d.capturedMap,o.eventObject,t,e)};let v={};for(let e in t){let n=t[e];"function"!==typeof n&&(v[e]=n)}let y=u(u(u({},o),v),{},{pointer:c,intersections:e,stopped:a.stopped,delta:i,unprojectedPoint:p,ray:l.ray,camera:h,stopPropagation(){const i="pointerId"in t&&d.capturedMap.get(t.pointerId);(!i||i.has(o.eventObject))&&(y.stopped=a.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...e.slice(0,e.indexOf(o)),o])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:t});if(r(y),!0===a.stopped)break}}}}(h,a,d,function(e){const t=e.eventObject,n=t.__r3f;if(null==n||!n.eventCount)return;const o=n.handlers;if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){const t=D_(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{const n=o[r];n?c&&!s.initialHits.includes(t)||(i(a,s.interaction.filter(e=>!s.initialHits.includes(e))),n(e)):c&&s.initialHits.includes(t)&&i(a,s.interaction.filter(e=>!s.initialHits.includes(e)))}})}}}}const O_=e=>!(null==e||!e.render),z_=t.createContext(null),F_=(e,n)=>{const i=(r=(i,r)=>{const a=new Ua,o=new Ua,s=new Ua;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:c,left:u}=n,h=i/l;t.isVector3?s.copy(t):s.set(...t);const d=e.getWorldPosition(a).distanceTo(s);if(l_(e))return{width:i/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,r=n*(i/l);return{width:r,height:n,top:c,left:u,factor:i/r,distance:d,aspect:h}}}let c;const h=e=>i(t=>({performance:u(u({},t.performance),{},{current:e})})),d=new Da,p={set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,t)=>n(e,t,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Xp,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&h(e.performance.min),c=setTimeout(()=>h(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>i(t=>u(u({},t),{},{events:u(u({},t.events),e)})),setSize:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=r().camera,c={width:e,height:t,top:n,left:a};i(e=>({size:c,viewport:u(u({},e.viewport),l(s,o,c))}))},setDpr:e=>i(t=>{const n=f_(e);return{viewport:u(u({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:t.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return p},r?Gy(r,a):Gy);var r,a;const o=i.getState();let s=o.size,l=o.viewport.dpr,c=o.camera;return i.subscribe(()=>{const{camera:e,size:t,viewport:n,gl:r,set:a}=i.getState();if(t.width!==s.width||t.height!==s.height||n.dpr!==l){s=t,l=n.dpr,k_(e,t),n.dpr>0&&r.setPixelRatio(n.dpr);const i="undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,i)}e!==c&&(c=e,a(t=>({viewport:u(u({},t.viewport),t.viewport.getCurrentViewport(e))})))}),i.subscribe(t=>e(t)),i};function B_(){const e=t.useContext(z_);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function j_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return B_()(e,t)}function H_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=B_(),i=n.getState().internal.subscribe,r=h_(e);return u_(()=>i(r,t,n),[t,i,n]),null}const V_=new WeakMap;function G_(e,t){return function(n){let i;(e=>{var t;return"function"===typeof e&&(null==e||null==(t=e.prototype)?void 0:t.constructor)===e})(n)?(i=V_.get(n),i||(i=new n,V_.set(n,i))):i=n,e&&e(i);for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Promise.all(a.map(e=>new Promise((n,r)=>i.load(e,e=>{I_(null==e?void 0:e.scene)&&Object.assign(e,v_(e.scene)),n(e)},t,t=>r(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))))))}}function W_(e,t,n,i){const r=Array.isArray(t)?t:[t],a=Zy(G_(n,i),[e,...r],{equal:g_.equ});return Array.isArray(t)?a:a[0]}function X_(e){const n=Ky()(e);return n.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version}),n}W_.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{qy(e,t,!0,n)})(G_(n),[e,...i])},W_.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)Wy.splice(0,Wy.length);else{const t=Wy.find(t=>Xy(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const q_={},Z_=/^three(?=[A-Z])/,Y_=e=>"".concat(e[0].toUpperCase()).concat(e.slice(1));let K_=0;function J_(e,t){const n=Y_(e),i=q_[n];if("primitive"!==e&&!i)throw new Error("R3F: ".concat(n," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if("primitive"===e&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function Q_(e){var t;e.isHidden&&(e.props.attach&&null!=(t=e.parent)&&t.object?w_(e.parent,e):I_(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,L_(e))}function $_(e,t,n){const i=t.root.getState();if(e.parent||e.object===i.scene){if(!t.object){var r,a;const e=q_[Y_(t.type)];t.object=null!=(r=t.props.object)?r:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if(R_(t.object,t.props),t.props.attach)w_(e,t);else if(I_(t.object)&&I_(e.object)){const i=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==i){const n=e.object.children.indexOf(t.object);if(-1!==n){e.object.children.splice(n,1);const r=n<i?i-1:i;e.object.children.splice(r,0,t.object)}else t.object.parent=e.object,e.object.children.splice(i,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const e of t.children)$_(t,e);L_(t)}}function eb(e,t){t&&(t.parent=e,e.children.push(t),$_(e,t))}function tb(e,t,n){if(!t||!n)return;t.parent=e;const i=e.children.indexOf(n);-1!==i?e.children.splice(i,0,t):e.children.push(t),$_(e,t,n)}function nb(e){if("function"===typeof e.dispose){const t=()=>{try{e.dispose()}catch(t){}};"undefined"!==typeof IS_REACT_ACT_ENVIRONMENT?t():(0,Jy.unstable_scheduleCallback)(Jy.unstable_IdlePriority,t)}}function ib(e,t,n){if(!t)return;t.parent=null;const i=e.children.indexOf(t);-1!==i&&e.children.splice(i,1),t.props.attach?M_(e,t):I_(t.object)&&I_(e.object)&&(e.object.remove(t.object),function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)}),n.capturedMap.forEach((e,i)=>{N_(n.capturedMap,t,e,i)})}(s_(t),t.object));const r=null!==t.props.dispose&&!1!==n;for(let a=t.children.length-1;a>=0;a--){ib(t,t.children[a],r)}t.children.length=0,delete t.object.__r3f,r&&"primitive"!==t.type&&"Scene"!==t.object.type&&nb(t.object),void 0===n&&L_(t)}function rb(e,t){for(const n of[e,e.alternate])if(null!==n)if("function"===typeof n.ref){null==n.refCleanup||n.refCleanup();const e=n.ref(t);"function"===typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}const ab=[];const ob=()=>{},sb={};let lb=0;const cb=X_({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var i;return J_(e=Y_(e)in q_?e:e.replace(Z_,""),t),"primitive"===e&&null!=(i=t.object)&&i.__r3f&&delete t.object.__r3f,b_(t.object,n,e,t)},removeChild:ib,appendChild:eb,appendInitialChild:eb,insertBefore:tb,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&eb(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&ib(n,t)},insertInContainerBefore(e,t,n){const i=e.getState().scene.__r3f;t&&n&&i&&tb(i,t,n)},getRootHostContext:()=>sb,getChildHostContext:()=>sb,commitUpdate(e,t,n,i,r){var a,o,s;J_(t,i);let l=!1;if(("primitive"===e.type&&n.object!==i.object||(null==(a=i.args)?void 0:a.length)!==(null==(o=n.args)?void 0:o.length)||null!=(s=i.args)&&s.some((e,t)=>{var i;return e!==(null==(i=n.args)?void 0:i[t])}))&&(l=!0),l)ab.push([e,u({},i),r]);else{const t=function(e,t){const n={};for(const i in t)if(!E_.includes(i)&&!g_.equ(t[i],e.props[i])){n[i]=t[i];for(const e in t)e.startsWith("".concat(i,"-"))&&(n[e]=t[e])}for(const i in e.props){if(E_.includes(i)||t.hasOwnProperty(i))continue;const{root:r,key:a}=x_(e.object,i);if(r.constructor&&0===r.constructor.length){const e=C_(r);g_.und(e)||(n[a]=e[a])}else n[a]=0}return n}(e,i);Object.keys(t).length&&(Object.assign(e.props,t),R_(e.object,t))}(null===r.sibling||0===(4&r.flags))&&function(){for(const[n]of ab){const e=n.parent;if(e){n.props.attach?M_(e,n):I_(n.object)&&I_(e.object)&&e.object.remove(n.object);for(const e of n.children)e.props.attach?M_(n,e):I_(e.object)&&I_(n.object)&&n.object.remove(e.object)}n.isHidden&&Q_(n),n.object.__r3f&&delete n.object.__r3f,"primitive"!==n.type&&nb(n.object)}for(const[n,i,r]of ab){n.props=i;const a=n.parent;if(a){var e,t;const i=q_[Y_(n.type)];n.object=null!=(e=n.props.object)?e:new i(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,rb(r,n.object),R_(n.object,n.props),n.props.attach?w_(a,n):I_(n.object)&&I_(a.object)&&a.object.add(n.object);for(const e of n.children)e.props.attach?w_(n,e):I_(e.object)&&I_(n.object)&&n.object.add(e.object);L_(n)}}ab.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>b_(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){var t;e.isHidden||(e.props.attach&&null!=(t=e.parent)&&t.object?M_(e.parent,e):I_(e.object)&&(e.object.visible=!1),e.isHidden=!0,L_(e))},unhideInstance:Q_,createTextInstance:ob,hideTextInstance:ob,unhideTextInstance:ob,scheduleTimeout:"function"===typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"===typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:t.createContext(null),setCurrentUpdatePriority(e){lb=e},getCurrentUpdatePriority:()=>lb,resolveUpdatePriority(){var e;if(0!==lb)return lb;switch("undefined"!==typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Fy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Fy.ContinuousEventPriority;default:return Fy.DefaultEventPriority}},resetFormInstance(){}}),ub=new Map,hb={objects:"shallow",strict:!1};function db(e){const t=ub.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const r="function"===typeof reportError?reportError:console.error,o=i||F_(Pb,Rb),s=n||cb.createContainer(o,Fy.ConcurrentRoot,null,!1,null,"",r,r,r,null);let l,c;t||ub.set(e,{fiber:s,store:o});let h=!1,d=null;return{async configure(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d=new Promise(e=>t=e);let{gl:i,size:r,scene:s,events:p,onCreated:f,shadows:m=!1,linear:g=!1,flat:v=!1,legacy:y=!1,orthographic:_=!1,frameloop:b="always",dpr:x=[1,2],performance:S,raycaster:w,camera:M,onPointerMissed:E}=n,T=o.getState(),C=T.gl;if(!T.gl){const t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"===typeof i?await i(t):i;C=O_(n)?n:new oy(u(u({},t),i)),T.set({gl:C})}let A=T.raycaster;A||T.set({raycaster:A=new Tf});const P=w||{},{params:R}=P,L=a(P,o_);if(g_.equ(L,A,hb)||R_(A,u({},L)),g_.equ(R,A.params,hb)||R_(A,{params:u(u({},A.params),R)}),!T.camera||T.camera===c&&!g_.equ(c,M,hb)){c=M;const e=null==M?void 0:M.isCamera,t=e?M:_?new xp(0,0,0,0,.1,1e3):new Nl(75,0,.1,1e3);e||(t.position.z=5,M&&(R_(t,M),t.manual||("aspect"in M||"left"in M||"right"in M||"bottom"in M||"top"in M)&&(t.manual=!0,t.updateProjectionMatrix())),T.camera||null!=M&&M.rotation||t.lookAt(0,0,0)),T.set({camera:t}),A.camera=t}if(!T.scene){let e;null!=s&&s.isScene?(e=s,b_(e,o,"",{})):(e=new Wl,b_(e,o,"",{}),s&&R_(e,s)),T.set({scene:e})}p&&!T.events.handlers&&T.set({events:p(o)});const k=function(e,t){if(!t&&"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:i,left:r}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}return!t&&"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:u({width:0,height:0,top:0,left:0},t)}(e,r);if(g_.equ(k,T.size,hb)||T.setSize(k.width,k.height,k.top,k.left),x&&T.viewport.dpr!==f_(x)&&T.setDpr(x),T.frameloop!==b&&T.setFrameloop(b),T.onPointerMissed||T.set({onPointerMissed:E}),S&&!g_.equ(S,T.performance,hb)&&T.set(e=>({performance:u(u({},e.performance),S)})),!T.xr){var I;const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&Rb(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||Pb(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(I=C.xr)?void 0:I.addEventListener)&&n.connect(),T.set({xr:n})}if(C.shadowMap){const e=C.shadowMap.enabled,t=C.shadowMap.type;if(C.shadowMap.enabled=!!m,g_.boo(m))C.shadowMap.type=Wt;else if(g_.str(m)){var D;const e={basic:Vt,percentage:Gt,soft:Wt,variance:Xt};C.shadowMap.type=null!=(D=e[m])?D:Wt}else g_.obj(m)&&Object.assign(C.shadowMap,m);e===C.shadowMap.enabled&&t===C.shadowMap.type||(C.shadowMap.needsUpdate=!0)}return Ja.enabled=!y,h||(C.outputColorSpace=g?Ir:kr,C.toneMapping=v?Dn:zn),T.legacy!==y&&T.set(()=>({legacy:y})),T.linear!==g&&T.set(()=>({linear:g})),T.flat!==v&&T.set(()=>({flat:v})),!i||g_.fun(i)||O_(i)||g_.equ(i,C,hb)||R_(C,i),l=f,h=!0,t(),this},render(t){return h||d||this.configure(),d.then(()=>{cb.updateContainer((0,Lt.jsx)(pb,{store:o,children:t,onCreated:l,rootElement:e}),s,null,()=>{})}),o},unmount(){fb(e)}}}function pb(e){let{store:t,children:n,onCreated:i,rootElement:r}=e;return u_(()=>{const e=t.getState();e.set(e=>({internal:u(u({},e.internal),{},{active:!0})})),i&&i(e),t.getState().events.connected||null==e.events.connect||e.events.connect(r)},[]),(0,Lt.jsx)(z_.Provider,{value:t,children:n})}function fb(e,t){const n=ub.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),cb.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,a,o;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(a=r.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=r.gl)&&o.xr&&r.xr.disconnect(),function(e){"Scene"!==e.type&&(null==e.dispose||e.dispose());for(const t in e){const n=e[t];"Scene"!==(null==n?void 0:n.type)&&(null==n||null==n.dispose||n.dispose())}}(r.scene),ub.delete(e),t&&t(e)}catch(fM){}},500)})}}const mb=new Set,gb=new Set,vb=new Set;function yb(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function _b(e,t){switch(e){case"before":return yb(mb,t);case"after":return yb(gb,t);case"tail":return yb(vb,t)}}let bb,xb;function Sb(e,t,n){let i=t.clock.getDelta();"never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),bb=t.internal.subscribers;for(let r=0;r<bb.length;r++)xb=bb[r],xb.ref.current(xb.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let wb,Mb,Eb,Tb=!1,Cb=!1;function Ab(e){Mb=requestAnimationFrame(Ab),Tb=!0,wb=0,_b("before",e),Cb=!0;for(const n of ub.values()){var t;Eb=n.store.getState(),!Eb.internal.active||!("always"===Eb.frameloop||Eb.internal.frames>0)||null!=(t=Eb.gl.xr)&&t.isPresenting||(wb+=Sb(e,Eb))}if(Cb=!1,_b("after",e),0===wb)return _b("tail",e),Tb=!1,cancelAnimationFrame(Mb)}function Pb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var n;if(!e)return ub.forEach(e=>Pb(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(e.internal.frames=t>1?Math.min(60,e.internal.frames+t):Cb?2:1,Tb||(Tb=!0,requestAnimationFrame(Ab)))}function Rb(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(t&&_b("before",e),n)Sb(e,n,i);else for(const r of ub.values())Sb(e,r.store.getState());t&&_b("after",e)}const Lb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function kb(e){const{handlePointer:t}=U_(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Lb).reduce((e,n)=>u(u({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=e.getState();if(null==i.disconnect||i.disconnect(),n(e=>({events:u(u({},e.events),{},{connected:t})})),i.handlers)for(const e in i.handlers){const n=i.handlers[e],[r,a]=Lb[e];t.addEventListener(r,n,{passive:a})}},disconnect:()=>{const{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(const e in n.handlers){const t=n.handlers[e],[i]=Lb[e];n.connected.removeEventListener(i,t)}t(e=>({events:u(u({},e.events),{},{connected:void 0})}))}}}}function Ib(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function Db(){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const a=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,h=(0,t.useRef)(!1);(0,t.useEffect)(()=>(h.current=!0,()=>{h.current=!1}));const[d,p,f]=(0,t.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:i,bottom:a,right:o,x:c,y:u}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:i,bottom:a,right:o,x:c,y:u};l.current.element instanceof HTMLElement&&r&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!Ob(l.current.lastBounds,d)&&s(l.current.lastBounds=d)};return[e,u?Ib(e,u):e,c?Ib(e,c):e]},[s,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",f,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new a(f),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",f,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,n){(0,t.useEffect)(()=>{if(n){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,n])}(f,!!n),function(e){(0,t.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(p),(0,t.useEffect)(()=>{m(),g()},[n,f,p]),(0,t.useEffect)(()=>m,[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=Nb(e),g())},o,d]}function Nb(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...Nb(e.parentElement)]}const Ub=["x","y","top","bottom","left","right","width","height"],Ob=(e,t)=>Ub.every(n=>e[n]===t[n]),zb=["ref","children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"];function Fb(n){let{ref:i,children:r,fallback:o,resize:s,style:l,gl:c,events:h=kb,eventSource:d,eventPrefix:p,shadows:f,linear:m,flat:g,legacy:v,orthographic:y,frameloop:_,dpr:b,performance:x,raycaster:S,camera:w,scene:M,onPointerMissed:E,onCreated:T}=n,C=a(n,zb);t.useMemo(()=>function(e){if("function"===typeof e){const t="".concat(K_++);return q_[t]=e,t}Object.assign(q_,e)}(e),[]);const A=function(){const e=n_(),n=a_();return t.useMemo(()=>i=>{let{children:r}=i;const a=Qy(e,!0,e=>e.type===t.StrictMode)?t.StrictMode:t.Fragment;return(0,Lt.jsx)(a,{children:(0,Lt.jsx)(n,{children:r})})},[e,n])}(),[P,R]=Db(u({scroll:!0,debounce:{scroll:50,resize:0}},s)),L=t.useRef(null),k=t.useRef(null);t.useImperativeHandle(i,()=>L.current);const I=h_(E),[D,N]=t.useState(!1),[U,O]=t.useState(!1);if(D)throw D;if(U)throw U;const z=t.useRef(null);u_(()=>{const e=L.current;if(R.width>0&&R.height>0&&e){async function n(){await z.current.configure({gl:c,scene:M,events:h,shadows:f,linear:m,flat:g,legacy:v,orthographic:y,frameloop:_,dpr:b,performance:x,raycaster:S,camera:w,size:R,onPointerMissed:function(){return null==I.current?void 0:I.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:k.current),p&&e.setEvents({compute:(e,t)=>{const n=e[p+"X"],i=e[p+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==T||T(e)}}),z.current.render((0,Lt.jsx)(A,{children:(0,Lt.jsx)(p_,{set:O,children:(0,Lt.jsx)(t.Suspense,{fallback:(0,Lt.jsx)(d_,{set:N}),children:null!=r?r:null})})}))}z.current||(z.current=db(e)),n()}}),t.useEffect(()=>{const e=L.current;if(e)return()=>fb(e)},[]);const F=d?"none":"auto";return(0,Lt.jsx)("div",u(u({ref:k,style:u({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F},l)},C),{},{children:(0,Lt.jsx)("div",{ref:P,style:{width:"100%",height:"100%"},children:(0,Lt.jsx)("canvas",{ref:L,style:{display:"block"},children:o})})}))}function Bb(e){return(0,Lt.jsx)(t_,{children:(0,Lt.jsx)(Fb,u({},e))})}function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jb.apply(null,arguments)}function Hb(){var e=Object.create(null);function t(i,r){var a=i.id,o=i.name,s=i.dependencies;void 0===s&&(s=[]);var l=i.init;void 0===l&&(l=function(){});var c=i.getTransferables;if(void 0===c&&(c=null),!e[a])try{s=s.map(function(n){return n&&n.isWorkerModule&&(t(n,function(e){if(e instanceof Error)throw e}),n=e[n.id].value),n}),l=n("<"+o+">.init",l),c&&(c=n("<"+o+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:u,getTransferables:c},r(u)}catch(h){h&&h.noLog||console.error(h),r(h)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var i=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(r){console.error(r)}return URL.revokeObjectURL(i),delete self.troikaDefine,n}self.addEventListener("message",function(n){var i=n.data,r=i.messageId,a=i.action,o=i.data;try{"registerModule"===a&&t(o,function(e){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:{isCallable:"function"===typeof e}})}),"callModule"===a&&function(t,n){var i,r=t.id,a=t.args;e[r]&&"function"===typeof e[r].value||n(new Error("Worker module "+r+": not found or its 'init' did not return a function"));try{var o=(i=e[r]).value.apply(i,a);o&&"function"===typeof o.then?o.then(s,function(e){return n(e instanceof Error?e:new Error(""+e))}):s(o)}catch(l){n(l)}function s(t){try{var i=e[r].getTransferables&&e[r].getTransferables(t);i&&Array.isArray(i)&&i.length||(i=void 0),n(t,i)}catch(l){console.error(l),n(l)}}}(o,function(e,t){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:e},t||void 0)})}catch(s){postMessage({messageId:r,success:!1,error:s.stack})}})}var Vb=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return Vb=function(){return e},e},Gb=0,Wb=0,Xb=!1,qb=Object.create(null),Zb=Object.create(null),Yb=Object.create(null);function Kb(e){if((!e||"function"!==typeof e.init)&&!Xb)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,i=e.getTransferables,r=e.workerId,a=function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then(function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var n=e.dependencies,i=e.init;n=Array.isArray(n)?n.map(function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e}):[];var r=Promise.all(n).then(function(e){return i.apply(null,e)});return t._getInitResult=function(){return r},r},t}(e);null==r&&(r="#default");var o="workerModule"+ ++Gb,s=e.name||o,l=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!Vb())return a.apply(void 0,e);if(!l){l=Qb(r,"registerModule",c.workerModuleData);var n=function(){l=null,Zb[r].delete(n)};(Zb[r]||(Zb[r]=new Set)).add(n)}return l.then(function(t){if(t.isCallable)return Qb(r,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")})}return t=t&&t.map(function(e){return"function"!==typeof e||e.workerModuleData||(Xb=!0,e=Kb({workerId:r,name:"<"+s+"> function dependency: "+e.name,init:"function(){return (\n"+Jb(e)+"\n)}"}),Xb=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e}),c.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:t,init:Jb(n),getTransferables:i&&Jb(i)},c.onMainThread=a,c}function Jb(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Qb(e,t,n){return new Promise(function(i,r){var a=++Wb;Yb[a]=function(e){e.success?i(e.result):r(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=qb[e];if(!t){var n=Jb(Hb);(t=qb[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,i=Yb[n];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete Yb[n],i(t)}}return t}(e).postMessage({messageId:a,action:t,data:n})})}function $b(){var e=function(e){function t(e,t,n,i,r,a,o,s){var l=1-o;s.x=l*l*e+2*l*o*n+o*o*r,s.y=l*l*t+2*l*o*i+o*o*a}function n(e,t,n,i,r,a,o,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*r+l*l*l*o,c.y=u*u*u*t+3*u*u*l*i+3*u*l*l*a+l*l*l*s}function i(e,t){for(var n,i,r,a,o,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(e){return parseFloat(e)});switch(n[1]){case"M":a=i=l[0],o=r=l[1];break;case"L":l[0]===a&&l[1]===o||t("L",a,o,a=l[0],o=l[1]);break;case"Q":t("Q",a,o,a=l[2],o=l[3],l[0],l[1]);break;case"C":t("C",a,o,a=l[4],o=l[5],l[0],l[1],l[2],l[3]);break;case"Z":a===i&&o===r||t("L",a,o,i,r)}}}function r(e,r,a){void 0===a&&(a=16);var o={x:0,y:0};i(e,function(e,i,s,l,c,u,h,d,p){switch(e){case"L":r(i,s,l,c);break;case"Q":for(var f=i,m=s,g=1;g<a;g++)t(i,s,u,h,l,c,g/(a-1),o),r(f,m,o.x,o.y),f=o.x,m=o.y;break;case"C":for(var v=i,y=s,_=1;_<a;_++)n(i,s,u,h,d,p,l,c,_/(a-1),o),r(v,y,o.x,o.y),v=o.x,y=o.y}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,i=o.get(n);if(!i){var r="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,a={},l={},c={},u=-1,h=[];function d(e){var t=a[e];if(!t&&!(t=a[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function p(e,t){var i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}function f(e,t,i,a){if(!l[e]){var o={},s={},c=n.createProgram();n.attachShader(c,p(t,n.VERTEX_SHADER)),n.attachShader(c,p(i,n.FRAGMENT_SHADER)),n.linkProgram(c),l[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];var a=s[t]||(s[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[a].concat(i))},setAttribute:function(e,t,i,a,s){var l=o[e];l||(l=o[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),r?n.vertexAttribDivisor(l.loc,a):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,a),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,i),l.data=s)}})}}}l[e].transaction(a)}function m(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var i=c[e];i||(i=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,i),t(i,u)}finally{u--}}function g(e,t,i){var r=n.createFramebuffer();h.push(r),n.bindFramebuffer(n.FRAMEBUFFER,r),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{i(r)}finally{n.deleteFramebuffer(r),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function v(){a={},l={},c={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",function(e){v(),e.preventDefault()},!1),o.set(n,i={gl:n,isWebGL2:r,getExtension:d,withProgram:f,withTexture:m,withTextureFramebuffer:g,handleContextLoss:v})}t(i)}function c(e,t,n,i,r,o,s,c){void 0===s&&(s=15),void 0===c&&(c=null),l(e,function(e){var l=e.gl,u=e.withProgram;(0,e.withTexture)("copy",function(e,h){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r,o,0,l.RGBA,l.UNSIGNED_BYTE,t),u("copy",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),l.bindFramebuffer(l.FRAMEBUFFER,c||null),l.disable(l.BLEND),l.colorMask(8&s,4&s,2&s,1&s),l.viewport(n,i,r,o),l.scissor(n,i,r,o),l.drawArrays(l.TRIANGLES,0,3)})})})}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,n){var i=e.width,r=e.height;l(e,function(a){var o=a.gl,s=new Uint8Array(i*r*4);o.readPixels(0,0,i,r,o.RGBA,o.UNSIGNED_BYTE,s),e.width=t,e.height=n,c(o,s,0,0,i,r)})}});function h(e,t,n,i,a,o){void 0===o&&(o=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,function(e,t,n,i){u.push({x1:e,y1:t,x2:n,y2:i,minX:Math.min(e,n),minY:Math.min(t,i),maxX:Math.max(e,n),maxY:Math.max(t,i)})}),u.sort(function(e,t){return e.maxX-t.maxX});for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=g(i[0]+l*(h+.5)/e,i[1]+c*(d+.5)/t),m=Math.pow(1-Math.abs(p)/a,o)/2;p<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[d*e+h]=m}return s;function g(e,t){for(var n=1/0,i=1/0,r=u.length;r--;){var a=u[r];if(a.maxX+i<=e)break;if(e+i>a.minX&&t-i<a.maxY&&t+i>a.minY){var o=f(e,t,a.x1,a.y1,a.x2,a.y2);o<n&&(n=o,i=Math.sqrt(n))}}return function(e,t){for(var n=0,i=u.length;i--;){var r=u[i];if(r.maxX<=e)break;r.y1>t!==r.y2>t&&e<(r.x2-r.x1)*(t-r.y1)/(r.y2-r.y1)+r.x1&&(n+=r.y1<r.y2?1:-1)}return 0!==n}(e,t)&&(i=-i),i}}function d(e,t,n,i,r,a,o,s,l,c){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),p(e,t,n,i,r,a,o,null,s,l,c)}function p(e,t,n,i,r,a,o,s,l,u,d){void 0===a&&(a=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0);for(var p=h(e,t,n,i,r,a),f=new Uint8Array(4*p.length),m=0;m<p.length;m++)f[4*m+d]=p[m];c(o,f,l,u,e,t,1<<3-d,s)}function f(e,t,n,i,r,a){var o=r-n,s=a-i,l=o*o+s*s,c=l?Math.max(0,Math.min(1,((e-n)*o+(t-i)*s)/l)):0,u=e-(n+c*o),h=t-(i+c*s);return u*u+h*h}var m=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:p}),g=new Float32Array([0,0,2,0,0,2]),v=null,y=!1,_={},b=new WeakMap;function x(e){if(!y&&!E(e))throw new Error("WebGL generation not supported")}function S(e,t,n,i,r,a,o){if(void 0===a&&(a=1),void 0===o&&(o=null),!o&&!(o=v)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");o=v=s.getContext("webgl",{depth:!1})}x(o);var c=new Uint8Array(e*t*4);l(o,function(o){var s=o.gl,l=o.withTexture,u=o.withTextureFramebuffer;l("readable",function(o,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(o,l,function(o){M(e,t,n,i,r,a,s,o,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)})})});for(var u=new Uint8Array(e*t),h=0,d=0;h<c.length;h+=4)u[d++]=c[h];return u}function w(e,t,n,i,r,a,o,s,l,c){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),M(e,t,n,i,r,a,o,null,s,l,c)}function M(e,t,n,i,o,s,c,u,h,d,p){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),x(c);var f=[];r(n,function(e,t,n,i){f.push(e,t,n,i)}),f=new Float32Array(f),l(c,function(n){var r=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,v=n.withTexture,y=n.withTextureFramebuffer,_=n.handleContextLoss;if(v("rawDistances",function(n,v){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),m("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(a){var u=a.setAttribute,h=a.setUniform,d=!l&&c("ANGLE_instanced_arrays"),p=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,g),u("aLineSegment",4,r.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(i)),h("1f","uMaxDistance",o),h("1f","uExponent",s),y(n,v,function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:p.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,f.length/4)})}),m("post",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,g),n.setUniform("1i","tex",v),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===p,1===p,2===p,3===p),r.viewport(h,d,e,t),r.scissor(h,d,e,t),r.drawArrays(r.TRIANGLES,0,3)})}),r.isContextLost())throw _(),new Error("webgl context lost")})}function E(e){var t=e&&e!==v?e.canvas||e:_,n=b.get(t);if(void 0===n){y=!0;var i=null;try{var r=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=S(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=a&&r.length===a.length&&a.every(function(e,t){return e===r[t]}),n||(i="bad trial run results",console.info(r,a))}catch(o){n=!1,i=o.message}i&&console.warn("WebGL SDF generation not supported:",i),y=!1,b.set(t,n)}return n}var T=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:w,generateIntoFramebuffer:M,isSupported:E});return e.forEachPathCommand=i,e.generate=function(e,t,n,i,r,a){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1);try{return S.apply(T,arguments)}catch(fM){return console.info("WebGL SDF generation failed, falling back to JS",fM),h.apply(m,arguments)}},e.generateIntoCanvas=function(e,t,n,i,r,a,o,s,l,c){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return w.apply(T,arguments)}catch(fM){return console.info("WebGL SDF generation failed, falling back to JS",fM),d.apply(m,arguments)}},e.javascript=m,e.pathToLineSegments=r,e.webgl=T,e.webglUtils=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const ex=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach(function(e,t){n[e]=1<<t+1,i[n[e]]=e}),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|r|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var i=0;t[e].split(",").forEach(function(t){var r=t.split("+"),a=r[0],o=r[1];a=parseInt(a,36),o=o?parseInt(o,36):0,c.set(i+=a,n[e]);for(var s=0;s<o;s++)c.set(++i,n[e])})}};for(var i in t)e(i)}}(),c.get(e.codePointAt(0))||n.L}var h,d,p,f="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(e,t){var n,i=0,r=new Map,a=t&&new Map;return e.split(",").forEach(function e(o){if(-1!==o.indexOf("+"))for(var s=+o;s--;)e(n);else{n=o;var l=o.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(i+=parseInt(c,36)),u=String.fromCodePoint(i+=parseInt(u,36)),r.set(c,u),t&&a.set(u,c)}}),{map:r,reverseMap:a}}function v(){if(!h){var e=g(f,!0),t=e.map,n=e.reverseMap;h=t,d=n,p=g(m,!1).map}}function y(e){return v(),h.get(e)||null}function _(e){return v(),d.get(e)||null}function b(e){return v(),p.get(e)||null}var x=n.L,S=n.R,w=n.EN,M=n.ES,E=n.ET,T=n.AN,C=n.CS,A=n.B,P=n.S,R=n.ON,L=n.BN,k=n.NSM,I=n.AL,D=n.LRO,N=n.RLO,U=n.LRE,O=n.RLE,z=n.PDF,F=n.LRI,B=n.RLI,j=n.FSI,H=n.PDI;var V;function G(e){return function(){if(!V){var e=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach(function(e,n){t.set(n,e)}),V=t}}(),V.get(e)||null}function W(e,t,n,i){var r=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);var a=[];return t.paragraphs.forEach(function(r){var o=Math.max(n,r.start),s=Math.min(i,r.end);if(o<s){for(var c=t.levels.slice(o,s+1),h=s;h>=o&&u(e[h])&l;h--)c[h]=r.level;for(var d=r.level,p=1/0,f=0;f<c.length;f++){var m=c[f];m>d&&(d=m),m<p&&(p=1|m)}for(var g=d;g>=p;g--)for(var v=0;v<c.length;v++)if(c[v]>=g){for(var y=v;v+1<c.length&&c[v+1]>=g;)v++;v>y&&a.push([y+o,v+o])}}}),a}function X(e,t,n,i){for(var r=W(e,t,n,i),a=[],o=0;o<e.length;o++)a[o]=o;return r.forEach(function(e){for(var t=e[0],n=e[1],i=a.slice(t,n+1),r=i.length;r--;)a[n-r]=i[r]}),a}return e.closingToOpeningBracket=_,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return i[u(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),i=0;i<e.length;i++)n[i]=u(e[i]);var c=new Map;function h(e,t){var i=n[e];n[e]=t,c.set(i,c.get(i)-1),i&o&&c.set(o,c.get(o)-1),c.set(t,(c.get(t)||0)+1),t&o&&c.set(o,(c.get(o)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],m=null,g=0;g<e.length;g++)m||f.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:jt(g,!1)}),n[g]&A&&(m.end=g,m=null);for(var v=O|U|N|D|r|H|z|A,V=function(e){return e+(1&e?1:2)},G=function(e){return e+(1&e?2:1)},W=0;W<f.length;W++){var X=[{_level:(m=f[W]).level,_override:0,_isolate:0}],q=void 0,Z=0,Y=0,K=0;c.clear();for(var J=m.start;J<=m.end;J++){var Q=n[J];if(q=X[X.length-1],c.set(Q,(c.get(Q)||0)+1),Q&o&&c.set(o,(c.get(o)||0)+1),Q&v)if(Q&(O|U)){d[J]=q._level;var $=(Q===O?G:V)(q._level);$<=125&&!Z&&!Y?X.push({_level:$,_override:0,_isolate:0}):Z||Y++}else if(Q&(N|D)){d[J]=q._level;var ee=(Q===N?G:V)(q._level);ee<=125&&!Z&&!Y?X.push({_level:ee,_override:Q&N?S:x,_isolate:0}):Z||Y++}else if(Q&r){Q&j&&(Q=1===jt(J+1,!0)?B:F),d[J]=q._level,q._override&&h(J,q._override);var te=(Q===B?G:V)(q._level);te<=125&&0===Z&&0===Y?(K++,X.push({_level:te,_override:0,_isolate:1,_isolInitIndex:J})):Z++}else if(Q&H){if(Z>0)Z--;else if(K>0){for(Y=0;!X[X.length-1]._isolate;)X.pop();var ne=X[X.length-1]._isolInitIndex;null!=ne&&(p.set(ne,J),p.set(J,ne)),X.pop(),K--}q=X[X.length-1],d[J]=q._level,q._override&&h(J,q._override)}else Q&z?(0===Z&&(Y>0?Y--:!q._isolate&&X.length>1&&(X.pop(),q=X[X.length-1])),d[J]=q._level):Q&A&&(d[J]=m.level);else d[J]=q._level,q._override&&Q!==L&&h(J,q._override)}for(var ie=[],re=null,ae=m.start;ae<=m.end;ae++){var oe=n[ae];if(!(oe&s)){var se=d[ae],le=oe&r,ce=oe===H;re&&se===re._level?(re._end=ae,re._endsWithIsolInit=le):ie.push(re={_start:ae,_end:ae,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<ie.length;he++){var de=ie[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[re=de],fe=void 0;re&&re._endsWithIsolInit&&null!=(fe=p.get(re._end));)for(var me=he+1;me<ie.length;me++)if(ie[me]._start===fe){pe.push(re=ie[me]);break}for(var ge=[],ve=0;ve<pe.length;ve++)for(var ye=pe[ve],_e=ye._start;_e<=ye._end;_e++)ge.push(_e);for(var be=d[ge[0]],xe=m.level,Se=ge[0]-1;Se>=0;Se--)if(!(n[Se]&s)){xe=d[Se];break}var we=ge[ge.length-1],Me=d[we],Ee=m.level;if(!(n[we]&r))for(var Te=we+1;Te<=m.end;Te++)if(!(n[Te]&s)){Ee=d[Te];break}ue.push({_seqIndices:ge,_sosType:Math.max(xe,be)%2?S:x,_eosType:Math.max(Ee,Me)%2?S:x})}}for(var Ce=0;Ce<ue.length;Ce++){var Ae=ue[Ce],Pe=Ae._seqIndices,Re=Ae._sosType,Le=Ae._eosType,ke=1&d[Pe[0]]?S:x;if(c.get(k))for(var Ie=0;Ie<Pe.length;Ie++){var De=Pe[Ie];if(n[De]&k){for(var Ne=Re,Ue=Ie-1;Ue>=0;Ue--)if(!(n[Pe[Ue]]&s)){Ne=n[Pe[Ue]];break}h(De,Ne&(r|H)?R:Ne)}}if(c.get(w))for(var Oe=0;Oe<Pe.length;Oe++){var ze=Pe[Oe];if(n[ze]&w)for(var Fe=Oe-1;Fe>=-1;Fe--){var Be=-1===Fe?Re:n[Pe[Fe]];if(Be&a){Be===I&&h(ze,T);break}}}if(c.get(I))for(var je=0;je<Pe.length;je++){var He=Pe[je];n[He]&I&&h(He,S)}if(c.get(M)||c.get(C))for(var Ve=1;Ve<Pe.length-1;Ve++){var Ge=Pe[Ve];if(n[Ge]&(M|C)){for(var We=0,Xe=0,qe=Ve-1;qe>=0&&(We=n[Pe[qe]])&s;qe--);for(var Ze=Ve+1;Ze<Pe.length&&(Xe=n[Pe[Ze]])&s;Ze++);We===Xe&&(n[Ge]===M?We===w:We&(w|T))&&h(Ge,We)}}if(c.get(w))for(var Ye=0;Ye<Pe.length;Ye++){var Ke=Pe[Ye];if(n[Ke]&w){for(var Je=Ye-1;Je>=0&&n[Pe[Je]]&(E|s);Je--)h(Pe[Je],w);for(Ye++;Ye<Pe.length&&n[Pe[Ye]]&(E|s|w);Ye++)n[Pe[Ye]]!==w&&h(Pe[Ye],w)}}if(c.get(E)||c.get(M)||c.get(C))for(var Qe=0;Qe<Pe.length;Qe++){var $e=Pe[Qe];if(n[$e]&(E|M|C)){h($e,R);for(var et=Qe-1;et>=0&&n[Pe[et]]&s;et--)h(Pe[et],R);for(var tt=Qe+1;tt<Pe.length&&n[Pe[tt]]&s;tt++)h(Pe[tt],R)}}if(c.get(w))for(var nt=0,it=Re;nt<Pe.length;nt++){var rt=Pe[nt],at=n[rt];at&w?it===x&&h(rt,x):at&a&&(it=at)}if(c.get(o)){for(var ot=S|w|T,st=ot|x,lt=[],ct=[],ut=0;ut<Pe.length;ut++)if(n[Pe[ut]]&o){var ht=e[Pe[ut]],dt=void 0;if(null!==y(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=_(ht)))for(var pt=ct.length-1;pt>=0;pt--){var ft=ct[pt].char;if(ft===dt||ft===_(b(ht))||y(b(ft))===ht){lt.push([ct[pt].seqIndex,ut]),ct.length=pt;break}}}lt.sort(function(e,t){return e[0]-t[0]});for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],vt=gt[0],yt=gt[1],_t=!1,bt=0,xt=vt+1;xt<yt;xt++){var St=Pe[xt];if(n[St]&st){_t=!0;var wt=n[St]&ot?S:x;if(wt===ke){bt=wt;break}}}if(_t&&!bt){bt=Re;for(var Mt=vt-1;Mt>=0;Mt--){var Et=Pe[Mt];if(n[Et]&st){var Tt=n[Et]&ot?S:x;bt=Tt!==ke?Tt:ke;break}}}if(bt){if(n[Pe[vt]]=n[Pe[yt]]=bt,bt!==ke)for(var Ct=vt+1;Ct<Pe.length;Ct++)if(!(n[Pe[Ct]]&s)){u(e[Pe[Ct]])&k&&(n[Pe[Ct]]=bt);break}if(bt!==ke)for(var At=yt+1;At<Pe.length;At++)if(!(n[Pe[At]]&s)){u(e[Pe[At]])&k&&(n[Pe[At]]=bt);break}}}for(var Pt=0;Pt<Pe.length;Pt++)if(n[Pe[Pt]]&o){for(var Rt=Pt,Lt=Pt,kt=Re,It=Pt-1;It>=0;It--){if(!(n[Pe[It]]&s)){kt=n[Pe[It]]&ot?S:x;break}Rt=It}for(var Dt=Le,Nt=Pt+1;Nt<Pe.length;Nt++){if(!(n[Pe[Nt]]&(o|s))){Dt=n[Pe[Nt]]&ot?S:x;break}Lt=Nt}for(var Ut=Rt;Ut<=Lt;Ut++)n[Pe[Ut]]=kt===Dt?kt:ke;Pt=Lt}}}for(var Ot=m.start;Ot<=m.end;Ot++){var zt=d[Ot],Ft=n[Ot];if(1&zt?Ft&(x|w|T)&&d[Ot]++:Ft&S?d[Ot]++:Ft&(T|w)&&(d[Ot]+=2),Ft&s&&(d[Ot]=0===Ot?m.level:d[Ot-1]),Ot===m.end||u(e[Ot])&(P|A))for(var Bt=Ot;Bt>=0&&u(e[Bt])&l;Bt--)d[Bt]=m.level}}return{levels:d,paragraphs:f};function jt(t,i){for(var a=t;a<e.length;a++){var o=n[a];if(o&(S|I))return 1;if(o&(A|x)||i&&o===H)return 0;if(o&r){var s=Ht(a);a=-1===s?e.length:s}}return 0}function Ht(t){for(var i=1,a=t+1;a<e.length;a++){var o=n[a];if(o&A)break;if(o&H){if(0===--i)return a}else o&r&&i++}return-1}},e.getMirroredCharacter=G,e.getMirroredCharactersMap=function(e,t,n,i){var r=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);for(var a=new Map,o=n;o<=i;o++)if(1&t[o]){var s=G(e[o]);null!==s&&a.set(o,s)}return a},e.getReorderSegments=W,e.getReorderedIndices=X,e.getReorderedString=function(e,t,n,i){var r=X(e,t,n,i),a=[].concat(e);return r.forEach(function(n,i){a[i]=(1&t.levels[n]?G(e[n]):null)||e[n]}),a.join("")},e.openingToClosingBracket=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e},tx=/\bvoid\s+main\s*\(\s*\)\s*{/g;function nx(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){let n=Cm[t];return n?nx(n):e})}const ix=[];for(let n=0;n<256;n++)ix[n]=(n<16?"0":"")+n.toString(16);const rx=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},ax=Date.now(),ox=new WeakMap,sx=new Map;let lx=1e10;function cx(e,t){const n=function(e){const t=JSON.stringify(e,hx);let n=px.get(t);null==n&&px.set(t,n=++dx);return n}(t);let i=ox.get(e);if(i||ox.set(e,i=Object.create(null)),i[n])return new i[n];const r="_onBeforeCompile".concat(n),a=function(i,a){e.onBeforeCompile.call(this,i,a);const o=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader;let s=sx[o];if(!s){const e=function(e,t,n,i){let{vertexShader:r,fragmentShader:a}=t,{vertexDefs:o,vertexMainIntro:s,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:f,timeUniform:m}=n;o=o||"",s=s||"",l=l||"",u=u||"",h=h||"",d=d||"",(c||f)&&(r=nx(r));(p||f)&&(a=a.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),a=nx(a));if(f){let e=f({vertexShader:r,fragmentShader:a});r=e.vertexShader,a=e.fragmentShader}if(p){let e=[];a=a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,t=>(e.push(t),"")),d="".concat(p,"\n").concat(e.join("\n"),"\n").concat(d)}if(m){const e="\nuniform float ".concat(m,";\n");o=e+o,u=e+u}c&&(r="vec3 troika_position_".concat(i,";\nvec3 troika_normal_").concat(i,";\nvec2 troika_uv_").concat(i,";\n").concat(r,"\n"),o="".concat(o,"\nvoid troikaVertexTransform").concat(i,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(c,"\n}\n"),s="\ntroika_position_".concat(i," = vec3(position);\ntroika_normal_").concat(i," = vec3(normal);\ntroika_uv_").concat(i," = vec2(uv);\ntroikaVertexTransform").concat(i,"(troika_position_").concat(i,", troika_normal_").concat(i,", troika_uv_").concat(i,");\n").concat(s,"\n"),r=r.replace(/\b(position|normal|uv)\b/g,(e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:"troika_".concat(t,"_").concat(i)),e.map&&e.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,"troika_uv_".concat(i))));return r=ux(r,i,o,s,l),a=ux(a,i,u,h,d),{vertexShader:r,fragmentShader:a}}(this,i,t,n);s=sx[o]=e}i.vertexShader=s.vertexShader,i.fragmentShader=s.fragmentShader,rx(i.uniforms,this.uniforms),t.timeUniform&&(i.uniforms[t.timeUniform]={get value(){return Date.now()-ax}}),this[r]&&this[r](i)},o=function(){return s(t.chained?e:e.clone())},s=function(i){const r=Object.create(i,l);return Object.defineProperty(r,"baseMaterial",{value:e}),Object.defineProperty(r,"id",{value:lx++}),r.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ix[255&e]+ix[e>>8&255]+ix[e>>16&255]+ix[e>>24&255]+"-"+ix[255&t]+ix[t>>8&255]+"-"+ix[t>>16&15|64]+ix[t>>24&255]+"-"+ix[63&n|128]+ix[n>>8&255]+"-"+ix[n>>16&255]+ix[n>>24&255]+ix[255&i]+ix[i>>8&255]+ix[i>>16&255]+ix[i>>24&255]).toUpperCase()}(),r.uniforms=rx({},i.uniforms,t.uniforms),r.defines=rx({},i.defines,t.defines),r.defines["TROIKA_DERIVED_MATERIAL_".concat(n)]="",r.extensions=rx({},i.extensions,t.extensions),r._listeners=void 0,r},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:t=>{e.type=t}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){const t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(e){this[r]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(rx(this.extensions,t.extensions),rx(this.defines,t.defines),rx(this.uniforms,Pl.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=cx(e.isDerivedMaterial?e.getDepthMaterial():new Md({depthPacking:Tr}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=cx(e.isDerivedMaterial?e.getDistanceMaterial():new Ed,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=o,new o}function ux(e,t,n,i,r){return(i||r||n)&&(e=e.replace(tx,"\n".concat(n,"\nvoid troikaOrigMain").concat(t,"() {")),e+="\nvoid main() {\n  ".concat(i,"\n  troikaOrigMain").concat(t,"();\n  ").concat(r,"\n}")),e}function hx(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let dx=0;const px=new Map;const fx=Kb({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,i=new Uint8Array(e);if("ttcf"==n.readASCII(i,0,4)){var r=4;n.readUshort(i,r),r+=2,n.readUshort(i,r),r+=2;var a=n.readUint(i,r);r+=4;for(var o=[],s=0;s<a;s++){var l=n.readUint(i,r);r+=4,o.push(t._readFont(i,l))}return o}return[t._readFont(i,0)]},_readFont:function(e,n){var i=t._bin,r=n;i.readFixed(e,n),n+=4;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:e,_offset:r},l={},c=0;c<a;c++){var u=i.readASCII(e,n,4);n+=4,i.readUint(e,n),n+=4;var h=i.readUint(e,n);n+=4;var d=i.readUint(e,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<o.length;c++){var p=o[c];l[p]&&(s[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,s))}return s},_tabOffset:function(e,n,i){for(var r=t._bin,a=r.readUshort(e,i+4),o=i+12,s=0;s<a;s++){var l=r.readASCII(e,o,4);o+=4,r.readUint(e,o),o+=4;var c=r.readUint(e,o);if(o+=4,r.readUint(e,o),o+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,i){for(var r=[],a=0;a<i;a++)r.push(t._bin.readUshort(e,n+2*a));return r},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(e[t+r]);return i},readUnicode:function(e,t,n){for(var i="",r=0;r<n;r++){var a=e[t++]<<8|e[t++];i+=String.fromCharCode(a)}return i},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,i){var r=t._bin._tdec;return r&&0==n&&i==e.length?r.decode(e):t._bin.readASCII(e,n,i)},readBytes:function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(e[t+r]);return i},readASCIIArray:function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(String.fromCharCode(e[t+r]));return i},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,i,r,a){var o=t._bin,s={},l=n;o.readFixed(e,n),n+=4;var c=o.readUshort(e,n);n+=2;var u=o.readUshort(e,n);n+=2;var h=o.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+h,a),s},t._lctf.readLookupList=function(e,n,i){var r=t._bin,a=n,o=[],s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,a+c,i);o.push(u)}return o},t._lctf.readLookupTable=function(e,n,i){var r=t._bin,a=n,o={tabs:[]};o.ltype=r.readUshort(e,n),n+=2,o.flag=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;for(var l=o.ltype,c=0;c<s;c++){var u=r.readUshort(e,n);n+=2;var h=i(e,l,a+u,o);o.tabs.push(h)}return o},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var i=t._bin,r=[],a=i.readUshort(e,n);if(n+=2,1==a){var o=i.readUshort(e,n);n+=2;var s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++)r.push(o+l),r.push(o+l),r.push(i.readUshort(e,n)),n+=2}if(2==a){var c=i.readUshort(e,n);for(n+=2,l=0;l<c;l++)r.push(i.readUshort(e,n)),n+=2,r.push(i.readUshort(e,n)),n+=2,r.push(i.readUshort(e,n)),n+=2}return r},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var i=e[n],r=e[n+1];if(e[n+2],i<=t&&t<=r)return n}return-1},t._lctf.readCoverage=function(e,n){var i=t._bin,r={};r.fmt=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,1==r.fmt&&(r.tab=i.readUshorts(e,n,a)),2==r.fmt&&(r.tab=i.readUshorts(e,n,3*a)),r},t._lctf.coverageIndex=function(e,n){var i=e.tab;if(1==e.fmt)return i.indexOf(n);if(2==e.fmt){var r=t._lctf.getInterval(i,n);if(-1!=r)return i[r+2]+(n-i[r])}return-1},t._lctf.readFeatureList=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readASCII(e,n,4);n+=4;var c=i.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,r+c);u.tag=l.trim(),a.push(u)}return a},t._lctf.readFeatureTable=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2,o>0&&(a.featureParams=r+o);var s=i.readUshort(e,n);n+=2,a.tab=[];for(var l=0;l<s;l++)a.tab.push(i.readUshort(e,n+2*l));return a},t._lctf.readScriptList=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readASCII(e,n,4);n+=4;var c=i.readUshort(e,n);n+=2,a[l.trim()]=t._lctf.readScriptTable(e,r+c)}return a},t._lctf.readScriptTable=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2,o>0&&(a.default=t._lctf.readLangSysTable(e,r+o));var s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readASCII(e,n,4);n+=4;var u=i.readUshort(e,n);n+=2,a[c.trim()]=t._lctf.readLangSysTable(e,r+u)}return a},t._lctf.readLangSysTable=function(e,n){var i=t._bin,r={};i.readUshort(e,n),n+=2,r.reqFeature=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,r.features=i.readUshorts(e,n,a),r},t.CFF={},t.CFF.parse=function(e,n,i){var r=t._bin;(e=new Uint8Array(e.buffer,n,i))[n=0],e[++n],e[++n],e[++n],n++;var a=[];n=t.CFF.readIndex(e,n,a);for(var o=[],s=0;s<a.length-1;s++)o.push(r.readASCII(e,n+a[s],a[s+1]-a[s]));n+=a[a.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(r.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(s=0;s<h.length-1;s++)p.push(r.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=p}if(u.ROS){n=u.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),u.FDArray=[],s=0;s<f.length-1;s++){var m=t.CFF.readDict(e,n+f[s],n+f[s+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=f[f.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var v=r.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)u.FDSelect.push(r.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,i){var r;for(var a in n.Private&&(r=n.Private[1],n.Private=t.CFF.readDict(e,r,r+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,r+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(n[a]=i[n[a]-426+35])},t.CFF.readSubrs=function(e,n,i){var r=t._bin,a=[];n=t.CFF.readIndex(e,n,a);var o,s=a.length;o=s<1240?107:s<33900?1131:32768,i.Bias=o,i.Subrs=[];for(var l=0;l<a.length-1;l++)i.Subrs.push(r.readBytes(e,n+a[l],a[l+1]-a[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,i){t._bin;var r=[".notdef"],a=e[n];if(n++,0!=a)throw"error: unknown encoding format: "+a;var o=e[n];n++;for(var s=0;s<o;s++)r.push(e[n+s]);return r},t.CFF.readCharset=function(e,n,i){var r=t._bin,a=[".notdef"],o=e[n];if(n++,0==o)for(var s=0;s<i;s++){var l=r.readUshort(e,n);n+=2,a.push(l)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;a.length<i;){l=r.readUshort(e,n),n+=2;var c=0;for(1==o?(c=e[n],n++):(c=r.readUshort(e,n),n+=2),s=0;s<=c;s++)a.push(l),l++}}return a},t.CFF.readIndex=function(e,n,i){var r=t._bin,a=r.readUshort(e,n)+1,o=e[n+=2];if(n++,1==o)for(var s=0;s<a;s++)i.push(e[n+s]);else if(2==o)for(s=0;s<a;s++)i.push(r.readUshort(e,n+2*s));else if(3==o)for(s=0;s<a;s++)i.push(16777215&r.readUint(e,n+3*s-1));else if(1!=a)throw"unsupported offset size: "+o+", count: "+a;return(n+=a*o)-1},t.CFF.getCharString=function(e,n,i){var r=t._bin,a=e[n],o=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;a<=20&&(l=a,s=1),12==a&&(l=100*a+o,s=2),21<=a&&a<=27&&(l=a,s=1),28==a&&(c=r.readShort(e,n+1),s=3),29<=a&&a<=31&&(l=a,s=1),32<=a&&a<=246&&(c=a-139,s=1),247<=a&&a<=250&&(c=256*(a-247)+o+108,s=2),251<=a&&a<=254&&(c=256*-(a-251)-o-108,s=2),255==a&&(c=r.readInt(e,n+1)/65535,s=5),i.val=null!=c?c:"o"+l,i.size=s},t.CFF.readCharString=function(e,n,i){for(var r=n+i,a=t._bin,o=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=a.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=a.readInt(e,n+1)/65535,c=5),o.push(null!=h?h:"o"+u),n+=c}return o},t.CFF.readDict=function(e,n,i){for(var r=t._bin,a={},o=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==s&&(h=r.readShort(e,n+1),c=3),29==s&&(h=r.readInt(e,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=r.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var p=e[n+c];c++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var g="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)g+=v[d[y]];h=parseFloat(g)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(a[u]=1==o.length?o[0]:o,o=[]):o.push(h),n+=c}return a},t.cmap={},t.cmap.parse=function(e,n,i){e=new Uint8Array(e.buffer,n,i),n=0;var r=t._bin,a={};r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;var s=[];a.tables=[];for(var l=0;l<o;l++){var c=r.readUshort(e,n);n+=2;var u=r.readUshort(e,n);n+=2;var h=r.readUint(e,n);n+=4;var d="p"+c+"e"+u,p=s.indexOf(h);if(-1==p){var f;p=a.tables.length,s.push(h);var m=r.readUshort(e,h);0==m?f=t.cmap.parse0(e,h):4==m?f=t.cmap.parse4(e,h):6==m?f=t.cmap.parse6(e,h):12==m?f=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),a.tables.push(f)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=p}return a},t.cmap.parse0=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,r.map=[];for(var o=0;o<a-6;o++)r.map.push(e[n+o]);return r},t.cmap.parse4=function(e,n){var i=t._bin,r=n,a={};a.format=i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;var l=s/2;a.searchRange=i.readUshort(e,n),n+=2,a.entrySelector=i.readUshort(e,n),n+=2,a.rangeShift=i.readUshort(e,n),n+=2,a.endCount=i.readUshorts(e,n,l),n+=2*l,n+=2,a.startCount=i.readUshorts(e,n,l),n+=2*l,a.idDelta=[];for(var c=0;c<l;c++)a.idDelta.push(i.readShort(e,n)),n+=2;for(a.idRangeOffset=i.readUshorts(e,n,l),n+=2*l,a.glyphIdArray=[];n<r+o;)a.glyphIdArray.push(i.readUshort(e,n)),n+=2;return a},t.cmap.parse6=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,r.firstCode=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,r.glyphIdArray=[];for(var o=0;o<a;o++)r.glyphIdArray.push(i.readUshort(e,n)),n+=2;return r},t.cmap.parse12=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2,n+=2,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4;var a=i.readUint(e,n);n+=4,r.groups=[];for(var o=0;o<a;o++){var s=n+12*o,l=i.readUint(e,s+0),c=i.readUint(e,s+4),u=i.readUint(e,s+8);r.groups.push([l,c,u])}return r},t.glyf={},t.glyf.parse=function(e,t,n,i){for(var r=[],a=0;a<i.maxp.numGlyphs;a++)r.push(null);return r},t.glyf._parseGlyf=function(e,n){var i=t._bin,r=e._data,a=t._tabOffset(r,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var o={};if(o.noc=i.readShort(r,a),a+=2,o.xMin=i.readShort(r,a),a+=2,o.yMin=i.readShort(r,a),a+=2,o.xMax=i.readShort(r,a),a+=2,o.yMax=i.readShort(r,a),a+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(i.readUshort(r,a)),a+=2;var l=i.readUshort(r,a);if(a+=2,r.length-a<l)return null;o.instructions=i.readBytes(r,a,l),a+=l;var c=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<c;s++){var u=r[a];if(a++,o.flags.push(u),0!=(8&u)){var h=r[a];a++;for(var d=0;d<h;d++)o.flags.push(u),s++}}for(o.xs=[],s=0;s<c;s++){var p=0!=(2&o.flags[s]),f=0!=(16&o.flags[s]);p?(o.xs.push(f?r[a]:-r[a]),a++):f?o.xs.push(0):(o.xs.push(i.readShort(r,a)),a+=2)}for(o.ys=[],s=0;s<c;s++)p=0!=(4&o.flags[s]),f=0!=(32&o.flags[s]),p?(o.ys.push(f?r[a]:-r[a]),a++):f?o.ys.push(0):(o.ys.push(i.readShort(r,a)),a+=2);var m=0,g=0;for(s=0;s<c;s++)m+=o.xs[s],g+=o.ys[s],o.xs[s]=m,o.ys[s]=g}else{var v;o.parts=[];do{v=i.readUshort(r,a),a+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(y),y.glyphIndex=i.readUshort(r,a),a+=2,1&v){var _=i.readShort(r,a);a+=2;var b=i.readShort(r,a);a+=2}else _=i.readInt8(r,a),a++,b=i.readInt8(r,a),a++;2&v?(y.m.tx=_,y.m.ty=b):(y.p1=_,y.p2=b),8&v?(y.m.a=y.m.d=i.readF2dot14(r,a),a+=2):64&v?(y.m.a=i.readF2dot14(r,a),a+=2,y.m.d=i.readF2dot14(r,a),a+=2):128&v&&(y.m.a=i.readF2dot14(r,a),a+=2,y.m.b=i.readF2dot14(r,a),a+=2,y.m.c=i.readF2dot14(r,a),a+=2,y.m.d=i.readF2dot14(r,a),a+=2)}while(32&v);if(256&v){var x=i.readUshort(r,a);for(a+=2,o.instr=[],s=0;s<x;s++)o.instr.push(r[a]),a++}}return o},t.GDEF={},t.GDEF.parse=function(e,n,i,r){var a=n;n+=4;var o=t._bin.readUshort(e,n);return{glyphClassDef:0===o?null:t._lctf.readClassDef(e,a+o)}},t.GPOS={},t.GPOS.parse=function(e,n,i,r){return t._lctf.parse(e,n,i,r,t.GPOS.subt)},t.GPOS.subt=function(e,n,i,r){var a=t._bin,o=i,s={};if(s.fmt=a.readUshort(e,i),i+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=a.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,l+o)}if(1==n&&1==s.fmt){var c=a.readUshort(e,i);i+=2,0!=c&&(s.pos=t.GPOS.readValueRecord(e,i,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=a.readUshort(e,i),i+=2;var u=a.readUshort(e,i);i+=2;var h=t._lctf.numOfOnes(c),d=t._lctf.numOfOnes(u);if(1==s.fmt){s.pairsets=[];var p=a.readUshort(e,i);i+=2;for(var f=0;f<p;f++){var m=o+a.readUshort(e,i);i+=2;var g=a.readUshort(e,m);m+=2;for(var v=[],y=0;y<g;y++){var _=a.readUshort(e,m);m+=2,0!=c&&(E=t.GPOS.readValueRecord(e,m,c),m+=2*h),0!=u&&(T=t.GPOS.readValueRecord(e,m,u),m+=2*d),v.push({gid2:_,val1:E,val2:T})}s.pairsets.push(v)}}if(2==s.fmt){var b=a.readUshort(e,i);i+=2;var x=a.readUshort(e,i);i+=2;var S=a.readUshort(e,i);i+=2;var w=a.readUshort(e,i);for(i+=2,s.classDef1=t._lctf.readClassDef(e,o+b),s.classDef2=t._lctf.readClassDef(e,o+x),s.matrix=[],f=0;f<S;f++){var M=[];for(y=0;y<w;y++){var E=null,T=null;0!=c&&(E=t.GPOS.readValueRecord(e,i,c),i+=2*h),0!=u&&(T=t.GPOS.readValueRecord(e,i,u),i+=2*d),M.push({val1:E,val2:T})}s.matrix.push(M)}}}else if(4==n&&1==s.fmt)s.markCoverage=t._lctf.readCoverage(e,a.readUshort(e,i)+o),s.baseCoverage=t._lctf.readCoverage(e,a.readUshort(e,i+2)+o),s.markClassCount=a.readUshort(e,i+4),s.markArray=t.GPOS.readMarkArray(e,a.readUshort(e,i+6)+o),s.baseArray=t.GPOS.readBaseArray(e,a.readUshort(e,i+8)+o,s.markClassCount);else if(6==n&&1==s.fmt)s.mark1Coverage=t._lctf.readCoverage(e,a.readUshort(e,i)+o),s.mark2Coverage=t._lctf.readCoverage(e,a.readUshort(e,i+2)+o),s.markClassCount=a.readUshort(e,i+4),s.mark1Array=t.GPOS.readMarkArray(e,a.readUshort(e,i+6)+o),s.mark2Array=t.GPOS.readBaseArray(e,a.readUshort(e,i+8)+o,s.markClassCount);else{if(9==n&&1==s.fmt){var C=a.readUshort(e,i);i+=2;var A=a.readUint(e,i);if(i+=4,9==r.ltype)r.ltype=C;else if(r.ltype!=C)throw"invalid extension substitution";return t.GPOS.subt(e,r.ltype,o+A)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,i){var r=t._bin,a=[];return a.push(1&i?r.readShort(e,n):0),n+=1&i?2:0,a.push(2&i?r.readShort(e,n):0),n+=2&i?2:0,a.push(4&i?r.readShort(e,n):0),n+=4&i?2:0,a.push(8&i?r.readShort(e,n):0),n+=8&i?2:0,a},t.GPOS.readBaseArray=function(e,n,i){var r=t._bin,a=[],o=n,s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){for(var c=[],u=0;u<i;u++)c.push(t.GPOS.readAnchorRecord(e,o+r.readUshort(e,n))),n+=2;a.push(c)}return a},t.GPOS.readMarkArray=function(e,n){var i=t._bin,r=[],a=n,o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=t.GPOS.readAnchorRecord(e,i.readUshort(e,n+2)+a);l.markClass=i.readUshort(e,n),r.push(l),n+=4}return r},t.GPOS.readAnchorRecord=function(e,n){var i=t._bin,r={};return r.fmt=i.readUshort(e,n),r.x=i.readShort(e,n+2),r.y=i.readShort(e,n+4),r},t.GSUB={},t.GSUB.parse=function(e,n,i,r){return t._lctf.parse(e,n,i,r,t.GSUB.subt)},t.GSUB.subt=function(e,n,i,r){var a=t._bin,o=i,s={};if(s.fmt=a.readUshort(e,i),i+=2,1!=n&&2!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||2==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=a.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,o+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=a.readShort(e,i),i+=2;else if(2==s.fmt){var c=a.readUshort(e,i);i+=2,s.newg=a.readUshorts(e,i,c),i+=2*s.newg.length}}else if(2==n&&1==s.fmt){c=a.readUshort(e,i),i+=2,s.seqs=[];for(var u=0;u<c;u++){var h=a.readUshort(e,i)+o;i+=2;var d=a.readUshort(e,h);s.seqs.push(a.readUshorts(e,h+2,d))}}else if(4==n)for(s.vals=[],c=a.readUshort(e,i),i+=2,u=0;u<c;u++){var p=a.readUshort(e,i);i+=2,s.vals.push(t.GSUB.readLigatureSet(e,o+p))}else if(5==n&&2==s.fmt){if(2==s.fmt){var f=a.readUshort(e,i);i+=2,s.cDef=t._lctf.readClassDef(e,o+f),s.scset=[];var m=a.readUshort(e,i);for(i+=2,u=0;u<m;u++){var g=a.readUshort(e,i);i+=2,s.scset.push(0==g?null:t.GSUB.readSubClassSet(e,o+g))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=a.readUshort(e,i),i+=2;for(var v=[],y=0;y<c;y++)v.push(t._lctf.readCoverage(e,o+a.readUshort(e,i+2*y)));i+=2*c,0==u&&(s.backCvg=v),1==u&&(s.inptCvg=v),2==u&&(s.ahedCvg=v)}c=a.readUshort(e,i),i+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,i,c)}}else{if(7==n&&1==s.fmt){var _=a.readUshort(e,i);i+=2;var b=a.readUint(e,i);if(i+=4,9==r.ltype)r.ltype=_;else if(r.ltype!=_)throw"invalid extension substitution";return t.GSUB.subt(e,r.ltype,o+b)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var i=t._bin.readUshort,r=n,a=[],o=i(e,n);n+=2;for(var s=0;s<o;s++){var l=i(e,n);n+=2,a.push(t.GSUB.readSubClassRule(e,r+l))}return a},t.GSUB.readSubClassRule=function(e,n){var i=t._bin.readUshort,r={},a=i(e,n),o=i(e,n+=2);n+=2,r.input=[];for(var s=0;s<a-1;s++)r.input.push(i(e,n)),n+=2;return r.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,o),r},t.GSUB.readSubstLookupRecords=function(e,n,i){for(var r=t._bin.readUshort,a=[],o=0;o<i;o++)a.push(r(e,n),r(e,n+2)),n+=4;return a},t.GSUB.readChainSubClassSet=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,n);n+=2,a.push(t.GSUB.readChainSubClassRule(e,r+l))}return a},t.GSUB.readChainSubClassRule=function(e,n){for(var i=t._bin,r={},a=["backtrack","input","lookahead"],o=0;o<a.length;o++){var s=i.readUshort(e,n);n+=2,1==o&&s--,r[a[o]]=i.readUshorts(e,n,s),n+=2*r[a[o]].length}return s=i.readUshort(e,n),n+=2,r.subst=i.readUshorts(e,n,2*s),n+=2*r.subst.length,r},t.GSUB.readLigatureSet=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,n);n+=2,a.push(t.GSUB.readLigature(e,r+l))}return a},t.GSUB.readLigature=function(e,n){var i=t._bin,r={chain:[]};r.nglyph=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;for(var o=0;o<a-1;o++)r.chain.push(i.readUshort(e,n)),n+=2;return r},t.head={},t.head.parse=function(e,n,i){var r=t._bin,a={};return r.readFixed(e,n),n+=4,a.fontRevision=r.readFixed(e,n),n+=4,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4,a.flags=r.readUshort(e,n),n+=2,a.unitsPerEm=r.readUshort(e,n),n+=2,a.created=r.readUint64(e,n),n+=8,a.modified=r.readUint64(e,n),n+=8,a.xMin=r.readShort(e,n),n+=2,a.yMin=r.readShort(e,n),n+=2,a.xMax=r.readShort(e,n),n+=2,a.yMax=r.readShort(e,n),n+=2,a.macStyle=r.readUshort(e,n),n+=2,a.lowestRecPPEM=r.readUshort(e,n),n+=2,a.fontDirectionHint=r.readShort(e,n),n+=2,a.indexToLocFormat=r.readShort(e,n),n+=2,a.glyphDataFormat=r.readShort(e,n),n+=2,a},t.hhea={},t.hhea.parse=function(e,n,i){var r=t._bin,a={};return r.readFixed(e,n),n+=4,a.ascender=r.readShort(e,n),n+=2,a.descender=r.readShort(e,n),n+=2,a.lineGap=r.readShort(e,n),n+=2,a.advanceWidthMax=r.readUshort(e,n),n+=2,a.minLeftSideBearing=r.readShort(e,n),n+=2,a.minRightSideBearing=r.readShort(e,n),n+=2,a.xMaxExtent=r.readShort(e,n),n+=2,a.caretSlopeRise=r.readShort(e,n),n+=2,a.caretSlopeRun=r.readShort(e,n),n+=2,a.caretOffset=r.readShort(e,n),n+=2,n+=8,a.metricDataFormat=r.readShort(e,n),n+=2,a.numberOfHMetrics=r.readUshort(e,n),n+=2,a},t.hmtx={},t.hmtx.parse=function(e,n,i,r){for(var a=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<r.maxp.numGlyphs;c++)c<r.hhea.numberOfHMetrics&&(s=a.readUshort(e,n),n+=2,l=a.readShort(e,n),n+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(e,n,i,r){var a=t._bin,o=a.readUshort(e,n);if(n+=2,1==o)return t.kern.parseV1(e,n-2,i,r);var s=a.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,i=a.readUshort(e,n),n+=2;var u=a.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,i,r){var a=t._bin;a.readFixed(e,n),n+=4;var o=a.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){a.readUint(e,n),n+=4;var c=a.readUshort(e,n);n+=2,a.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,i){var r=t._bin,a=-1,o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var s=0;s<o;s++){var l=r.readUshort(e,n);n+=2;var c=r.readUshort(e,n);n+=2;var u=r.readShort(e,n);n+=2,l!=a&&(i.glyph1.push(l),i.rval.push({glyph2:[],vals:[]}));var h=i.rval[i.rval.length-1];h.glyph2.push(c),h.vals.push(u),a=l}return n},t.loca={},t.loca.parse=function(e,n,i,r){var a=t._bin,o=[],s=r.head.indexToLocFormat,l=r.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)o.push(a.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)o.push(a.readUint(e,n+(c<<2)));return o},t.maxp={},t.maxp.parse=function(e,n,i){var r=t._bin,a={},o=r.readUint(e,n);return n+=4,a.numGlyphs=r.readUshort(e,n),n+=2,65536==o&&(a.maxPoints=r.readUshort(e,n),n+=2,a.maxContours=r.readUshort(e,n),n+=2,a.maxCompositePoints=r.readUshort(e,n),n+=2,a.maxCompositeContours=r.readUshort(e,n),n+=2,a.maxZones=r.readUshort(e,n),n+=2,a.maxTwilightPoints=r.readUshort(e,n),n+=2,a.maxStorage=r.readUshort(e,n),n+=2,a.maxFunctionDefs=r.readUshort(e,n),n+=2,a.maxInstructionDefs=r.readUshort(e,n),n+=2,a.maxStackElements=r.readUshort(e,n),n+=2,a.maxSizeOfInstructions=r.readUshort(e,n),n+=2,a.maxComponentElements=r.readUshort(e,n),n+=2,a.maxComponentDepth=r.readUshort(e,n),n+=2),a},t.name={},t.name.parse=function(e,n,i){var r=t._bin,a={};r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<o;u++){var h=r.readUshort(e,n);n+=2;var d=r.readUshort(e,n);n+=2;var p=r.readUshort(e,n);n+=2;var f=r.readUshort(e,n);n+=2;var m=r.readUshort(e,n);n+=2;var g=r.readUshort(e,n);n+=2;var v,y=l[f],_=c+12*o+g;if(0==h)v=r.readUnicode(e,_,m/2);else if(3==h&&0==d)v=r.readUnicode(e,_,m/2);else if(0==d)v=r.readASCII(e,_,m);else if(1==d)v=r.readUnicode(e,_,m/2);else if(3==d)v=r.readUnicode(e,_,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;v=r.readASCII(e,_,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+p.toString(16);null==a[b]&&(a[b]={}),a[b][void 0!==y?y:f]=v,a[b]._lang=p}for(var x in a)if(null!=a[x].postScriptName&&1033==a[x]._lang)return a[x];for(var x in a)if(null!=a[x].postScriptName&&0==a[x]._lang)return a[x];for(var x in a)if(null!=a[x].postScriptName&&3084==a[x]._lang)return a[x];for(var x in a)if(null!=a[x].postScriptName)return a[x];for(var x in a){s=x;break}return console.debug("returning name table with languageID "+a[s]._lang),a[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,i){var r=t._bin.readUshort(e,n);n+=2;var a={};if(0==r)t["OS/2"].version0(e,n,a);else if(1==r)t["OS/2"].version1(e,n,a);else if(2==r||3==r||4==r)t["OS/2"].version2(e,n,a);else{if(5!=r)throw"unknown OS/2 table version: "+r;t["OS/2"].version5(e,n,a)}return a},t["OS/2"].version0=function(e,n,i){var r=t._bin;return i.xAvgCharWidth=r.readShort(e,n),n+=2,i.usWeightClass=r.readUshort(e,n),n+=2,i.usWidthClass=r.readUshort(e,n),n+=2,i.fsType=r.readUshort(e,n),n+=2,i.ySubscriptXSize=r.readShort(e,n),n+=2,i.ySubscriptYSize=r.readShort(e,n),n+=2,i.ySubscriptXOffset=r.readShort(e,n),n+=2,i.ySubscriptYOffset=r.readShort(e,n),n+=2,i.ySuperscriptXSize=r.readShort(e,n),n+=2,i.ySuperscriptYSize=r.readShort(e,n),n+=2,i.ySuperscriptXOffset=r.readShort(e,n),n+=2,i.ySuperscriptYOffset=r.readShort(e,n),n+=2,i.yStrikeoutSize=r.readShort(e,n),n+=2,i.yStrikeoutPosition=r.readShort(e,n),n+=2,i.sFamilyClass=r.readShort(e,n),n+=2,i.panose=r.readBytes(e,n,10),n+=10,i.ulUnicodeRange1=r.readUint(e,n),n+=4,i.ulUnicodeRange2=r.readUint(e,n),n+=4,i.ulUnicodeRange3=r.readUint(e,n),n+=4,i.ulUnicodeRange4=r.readUint(e,n),n+=4,i.achVendID=[r.readInt8(e,n),r.readInt8(e,n+1),r.readInt8(e,n+2),r.readInt8(e,n+3)],n+=4,i.fsSelection=r.readUshort(e,n),n+=2,i.usFirstCharIndex=r.readUshort(e,n),n+=2,i.usLastCharIndex=r.readUshort(e,n),n+=2,i.sTypoAscender=r.readShort(e,n),n+=2,i.sTypoDescender=r.readShort(e,n),n+=2,i.sTypoLineGap=r.readShort(e,n),n+=2,i.usWinAscent=r.readUshort(e,n),n+=2,i.usWinDescent=r.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,i){var r=t._bin;return n=t["OS/2"].version0(e,n,i),i.ulCodePageRange1=r.readUint(e,n),n+=4,i.ulCodePageRange2=r.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,i){var r=t._bin;return n=t["OS/2"].version1(e,n,i),i.sxHeight=r.readShort(e,n),n+=2,i.sCapHeight=r.readShort(e,n),n+=2,i.usDefault=r.readUshort(e,n),n+=2,i.usBreak=r.readUshort(e,n),n+=2,i.usMaxContext=r.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,i){var r=t._bin;return n=t["OS/2"].version2(e,n,i),i.usLowerOpticalPointSize=r.readUshort(e,n),n+=2,i.usUpperOpticalPointSize=r.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,i){var r=t._bin,a={};return a.version=r.readFixed(e,n),n+=4,a.italicAngle=r.readFixed(e,n),n+=4,a.underlinePosition=r.readShort(e,n),n+=2,a.underlineThickness=r.readShort(e,n),n+=2,a},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,i=-1;if(null!=n.p0e4?i=n.p0e4:null!=n.p3e1?i=n.p3e1:null!=n.p1e0?i=n.p1e0:null!=n.p0e3&&(i=n.p0e3),-1==i)throw"no familiar platform and encoding!";var r=n.tables[i];if(0==r.format)return t>=r.map.length?0:r.map[t];if(4==r.format){for(var a=-1,o=0;o<r.endCount.length;o++)if(t<=r.endCount[o]){a=o;break}return-1==a||r.startCount[a]>t?0:65535&(0!=r.idRangeOffset[a]?r.glyphIdArray[t-r.startCount[a]+(r.idRangeOffset[a]>>1)-(r.idRangeOffset.length-a)]:t+r.idDelta[a])}if(12==r.format){if(t>r.groups[r.groups.length-1][1])return 0;for(o=0;o<r.groups.length;o++){var s=r.groups[o];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+r.format},t.U.glyphToPath=function(e,n){var i={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var r=e.SVG.entries[n];return null==r?i:("string"==typeof r&&(r=t.SVG.toPath(r),e.SVG.entries[n]=r),r)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,s=e.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=n;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],a,o,s,i)}else e.glyf&&t.U._drawGlyf(n,e,i);return i},t.U._drawGlyf=function(e,n,i){var r=n.glyf[e];null==r&&(r=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=r&&(r.noc>-1?t.U._simpleGlyph(r,i):t.U._compoGlyph(r,n,i))},t.U._simpleGlyph=function(e,n){for(var i=0;i<e.noc;i++){for(var r=0==i?0:e.endPts[i-1]+1,a=e.endPts[i],o=r;o<=a;o++){var s=o==r?a:o-1,l=o==a?r:o+1,c=1&e.flags[o],u=1&e.flags[s],h=1&e.flags[l],d=e.xs[o],p=e.ys[o];if(o==r)if(c){if(!u){t.U.P.moveTo(n,d,p);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+p)/2);c?u&&t.U.P.lineTo(n,d,p):h?t.U.P.qcurveTo(n,d,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,p,(d+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,i){for(var r=0;r<e.parts.length;r++){var a={cmds:[],crds:[]},o=e.parts[r];t.U._drawGlyf(o.glyphIndex,n,a);for(var s=o.m,l=0;l<a.crds.length;l+=2){var c=a.crds[l],u=a.crds[l+1];i.crds.push(c*s.a+u*s.b+s.tx),i.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<a.cmds.length;l++)i.cmds.push(a.cmds[l])}},t.U._getGlyphClass=function(e,n){var i=t._lctf.getInterval(n,e);return-1==i?0:n[i+2]},t.U._applySubs=function(e,n,i,r){for(var a=e.length-n-1,o=0;o<i.tabs.length;o++)if(null!=i.tabs[o]){var s,l=i.tabs[o];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==i.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==i.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>a)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==e[n+f+(1+m)];)f++;h.chain[m]!=e[n+f+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<d+f;m++)e[n+m+1]=-1;break}}}else if(5==i.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),v=l.cDef[g+2],y=l.scset[v],_=0;_<y.length;_++){var b=y[_],x=b.input;if(!(x.length>a)){for(p=!0,m=0;m<x.length;m++){var S=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[S+2]!=x[m]){p=!1;break}}if(p){var w=b.substLookupRecords;for(u=0;u<w.length;u+=2)w[u],w[u+1]}}}else if(6==i.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var M=l.lookupRec;for(_=0;_<M.length;_+=2){g=M[_];var E=r[M[_+1]];t.U._applySubs(e,n+g,E,r)}}}},t.U._glsCovered=function(e,n,i){for(var r=0;r<n.length;r++)if(-1==t._lctf.coverageIndex(n[r],e[i+r]))return!1;return!0},t.U.glyphsToPath=function(e,n,i){for(var r={cmds:[],crds:[]},a=0,o=0;o<n.length;o++){var s=n[o];if(-1!=s){for(var l=o<n.length-1&&-1!=n[o+1]?n[o+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)r.crds.push(c.crds[u]+a),r.crds.push(c.crds[u+1]);for(i&&r.cmds.push(i),u=0;u<c.cmds.length;u++)r.cmds.push(c.cmds[u]);i&&r.cmds.push("X"),a+=e.hmtx.aWidth[s],o<n.length-1&&(a+=t.U.getPairAdjustment(e,s,l))}}return r},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,i,r,a,o){e.cmds.push("C"),e.crds.push(t,n,i,r,a,o)},t.U.P.qcurveTo=function(e,t,n,i,r){e.cmds.push("Q"),e.crds.push(t,n,i,r)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,i,r,a){for(var o=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,p=n.y,f=0,m=0,g=0,v=0,y=0,_=0,b=0,x=0,S=0,w=0,M={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,M);var E=M.val;if(h+=M.size,"o1"==E||"o18"==E)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o3"==E||"o23"==E)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o4"==E)o.length>1&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),u&&t.U.P.closePath(a),p+=o.pop(),t.U.P.moveTo(a,d,p),u=!0;else if("o5"==E)for(;o.length>0;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p);else if("o6"==E||"o7"==E)for(var T=o.length,C="o6"==E,A=0;A<T;A++){var P=o.shift();C?d+=P:p+=P,C=!C,t.U.P.lineTo(a,d,p)}else if("o8"==E||"o24"==E){T=o.length;for(var R=0;R+6<=T;)f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p),R+=6;"o24"==E&&(d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(m=p,g=(f=d+o.shift())+o.shift(),w=v=m+o.shift(),_=v,x=p,d=(b=(y=(S=g+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,w),t.U.P.curveTo(a,y,_,b,x,d,p)),"o1235"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),S=g+o.shift(),w=v+o.shift(),y=S+o.shift(),_=w+o.shift(),b=y+o.shift(),x=_+o.shift(),d=b+o.shift(),p=x+o.shift(),o.shift(),t.U.P.curveTo(a,f,m,g,v,S,w),t.U.P.curveTo(a,y,_,b,x,d,p)),"o1236"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),w=v=m+o.shift(),_=v,b=(y=(S=g+o.shift())+o.shift())+o.shift(),x=_+o.shift(),d=b+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,w),t.U.P.curveTo(a,y,_,b,x,d,p)),"o1237"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),S=g+o.shift(),w=v+o.shift(),y=S+o.shift(),_=w+o.shift(),b=y+o.shift(),x=_+o.shift(),Math.abs(b-d)>Math.abs(x-p)?d=b+o.shift():p=x+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,w),t.U.P.curveTo(a,y,_,b,x,d,p));else if("o14"==E){if(o.length>0&&!l&&(c=o.shift()+i.nominalWidthX,l=!0),4==o.length){var L=o.shift(),k=o.shift(),I=o.shift(),D=o.shift(),N=t.CFF.glyphBySE(i,I),U=t.CFF.glyphBySE(i,D);t.U._drawCFF(i.CharStrings[N],n,i,r,a),n.x=L,n.y=k,t.U._drawCFF(i.CharStrings[U],n,i,r,a)}u&&(t.U.P.closePath(a),u=!1)}else if("o19"==E||"o20"==E)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,h+=s+7>>3;else if("o21"==E)o.length>2&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),p+=o.pop(),d+=o.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,p),u=!0;else if("o22"==E)o.length>1&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),d+=o.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,p),u=!0;else if("o25"==E){for(;o.length>6;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p);f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p)}else if("o26"==E)for(o.length%2&&(d+=o.shift());o.length>0;)f=d,m=p+o.shift(),d=g=f+o.shift(),p=(v=m+o.shift())+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p);else if("o27"==E)for(o.length%2&&(p+=o.shift());o.length>0;)m=p,g=(f=d+o.shift())+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v,t.U.P.curveTo(a,f,m,g,v,d,p);else if("o10"==E||"o29"==E){var O="o10"==E?r:i;if(0==o.length)console.debug("error: empty stack");else{var z=o.pop(),F=O.Subrs[z+O.Bias];n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(F,n,i,r,a),d=n.x,p=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==E||"o31"==E){var B=o.length,j=(R=0,"o31"==E);for(R+=B-(T=-3&B);R<T;)j?(m=p,g=(f=d+o.shift())+o.shift(),p=(v=m+o.shift())+o.shift(),T-R==5?(d=g+o.shift(),R++):d=g,j=!1):(f=d,m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),T-R==5?(p=v+o.shift(),R++):p=v,j=!0),t.U.P.curveTo(a,f,m,g,v,d,p),R+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;o.push(E)}}}n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,i={Typr:n};return e.Typr=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,i=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var r=new n(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];var o=new i(r[30]);for(a=1;a<30;++a)for(var s=r[a];s<r[a+1];++s)o[s]=s-r[a]<<5|a;return[r,o]},l=s(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(a,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(e,t,i){for(var r=e.length,a=0,o=new n(t);a<r;++a)++o[e[a]-1];var s,l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;if(i){s=new n(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],h=t-e[a],p=l[e[a]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)s[d[p]>>>c]=u}else for(s=new n(r),a=0;a<r;++a)e[a]&&(s[a]=d[l[e[a]-1]++]>>>15-e[a]);return s},g=new t(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var v=new t(32);for(p=0;p<32;++p)v[p]=5;var y=m(g,9,1),_=m(v,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},x=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},S=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},w=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(e,t,n){var i=new Error(t||w[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,M),!n)throw i;return i},E=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var d=!s||l,p=!l||l.i;l||(l={}),s||(s=new t(3*u));var f,g=function(e){var n=s.length;if(e>n){var i=new t(Math.max(2*n,e));i.set(s),s=i}},v=l.f||0,w=l.p||0,E=l.b||0,T=l.l,C=l.d,A=l.m,P=l.n,R=8*u;do{if(!T){l.f=v=x(e,w,1);var L=x(e,w+1,3);if(w+=3,!L){var k=e[(V=((f=w)/8|0)+(7&f&&1)+4)-4]|e[V-3]<<8,I=V+k;if(I>u){p&&M(0);break}d&&g(E+k),s.set(e.subarray(V,I),E),l.b=E+=k,l.p=w=8*I;continue}if(1==L)T=y,C=_,A=9,P=5;else if(2==L){var D=x(e,w,31)+257,N=x(e,w+10,15)+4,U=D+x(e,w+5,31)+1;w+=14;for(var O=new t(U),z=new t(19),F=0;F<N;++F)z[o[F]]=x(e,w+3*F,7);w+=3*N;var B=b(z),j=(1<<B)-1,H=m(z,B,1);for(F=0;F<U;){var V,G=H[x(e,w,j)];if(w+=15&G,(V=G>>>4)<16)O[F++]=V;else{var W=0,X=0;for(16==V?(X=3+x(e,w,3),w+=2,W=O[F-1]):17==V?(X=3+x(e,w,7),w+=3):18==V&&(X=11+x(e,w,127),w+=7);X--;)O[F++]=W}}var q=O.subarray(0,D),Z=O.subarray(D);A=b(q),P=b(Z),T=m(q,A,1),C=m(Z,P,1)}else M(1);if(w>R){p&&M(0);break}}d&&g(E+131072);for(var Y=(1<<A)-1,K=(1<<P)-1,J=w;;J=w){var Q=(W=T[S(e,w)&Y])>>>4;if((w+=15&W)>R){p&&M(0);break}if(W||M(2),Q<256)s[E++]=Q;else{if(256==Q){J=w,T=null;break}var $=Q-254;if(Q>264){var ee=r[F=Q-257];$=x(e,w,(1<<ee)-1)+c[F],w+=ee}var te=C[S(e,w)&K],ne=te>>>4;if(te||M(3),w+=15&te,Z=h[ne],ne>3&&(ee=a[ne],Z+=S(e,w)&(1<<ee)-1,w+=ee),w>R){p&&M(0);break}d&&g(E+131072);for(var ie=E+$;E<ie;E+=4)s[E]=s[E-Z],s[E+1]=s[E+1-Z],s[E+2]=s[E+2-Z],s[E+3]=s[E+3-Z];E=ie}}l.l=T,l.p=J,l.b=E,T&&(v=1,l.m=A,l.d=C,l.n=P)}while(!v);return E==s.length?s:function(e,r,a){(null==r||r<0)&&(r=0),(null==a||a>e.length)&&(a=e.length);var o=new(e instanceof n?n:e instanceof i?i:t)(a-r);return o.set(e.subarray(r,a)),o}(s,0,E)},T=new t(0),C="undefined"!=typeof TextDecoder&&new TextDecoder;try{C.decode(T,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function i(){var e=t.getUint16(n);return n+=2,e}function r(){var e=t.getUint32(n);return n+=4,e}function a(e){v.setUint16(y,e),y+=2}function o(e){v.setUint32(y,e),y+=4}for(var s={signature:r(),flavor:r(),length:r(),numTables:i(),reserved:i(),totalSfntSize:r(),majorVersion:i(),minorVersion:i(),metaOffset:r(),metaLength:r(),metaOrigLength:r(),privOffset:r(),privLength:r()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,h=12,d=[],p=0;p<s.numTables;p++)d.push({tag:r(),offset:r(),compLength:r(),origLength:r(),origChecksum:r()}),h+=16;var f,m=new Uint8Array(12+16*d.length+d.reduce(function(e,t){return e+t.origLength+4},0)),g=m.buffer,v=new DataView(g),y=0;return o(s.flavor),a(s.numTables),a(c),a(l),a(u),d.forEach(function(e){o(e.tag),o(e.origChecksum),o(h),o(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)}),d.forEach(function(t){var n,i=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var r=new Uint8Array(t.origLength);n=new Uint8Array(i,2),E(n,r)}else r=new Uint8Array(i);m.set(r,t.outOffset);var a=0;(h=t.outOffset+t.origLength)%4!=0&&(a=4-h%4),m.set(new Uint8Array(a).buffer,t.outOffset+t.origLength),f=h+a}),g.slice(0,f)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let r;function a(e){if(!r){const e={R:2,L:1,D:4,C:16,U:32,T:8};r=new Map;for(let t in i){let n=0;i[t].split(",").forEach(i=>{let[a,o]=i.split("+");a=parseInt(a,36),o=o?parseInt(o,36):0,r.set(n+=a,e[t]);for(let s=o;s--;)r.set(++n,e[t])})}}return r.get(e)||32}const o=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let n=32,i=1,r=-1;for(let o=0;o<e.length;o++){const s=e.codePointAt(o);let l=0|a(s),c=1;8&l||(21&n?22&l?(c=3,1!==i&&3!==i||t[r]++):33&l&&(2!==i&&4!==i||t[r]--):34&n&&(2!==i&&4!==i||t[r]--),i=t[o]=c,n=l,r=o,s>65535&&o++)}return t}function l(t,n){const i=t.GDEF&&t.GDEF.glyphClassDef;return i?e.U._getGlyphClass(n,i):0}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;i++)if("number"===typeof t[i])return t[i]}function u(t){const i=Object.create(null),r=t["OS/2"],a=t.hhea,u=t.head.unitsPerEm,h=c(r&&r.sTypoAscender,a&&a.ascender,u),d={unitsPerEm:u,ascender:h,descender:c(r&&r.sTypoDescender,a&&a.descender,0),capHeight:c(r&&r.sCapHeight,h),xHeight:c(r&&r.sxHeight,h),lineGap:c(r&&r.sTypoLineGap,a&&a.lineGap),supportsCodePoint:n=>e.U.codeToGlyph(t,n)>0,forEachGlyph(r,a,c,u){let h=0;const p=1/d.unitsPerEm*a,f=function(t,n){const i=[];for(let a=0;a<n.length;a++){const r=n.codePointAt(a);r>65535&&a++,i.push(e.U.codeToGlyph(t,r))}const r=t.GSUB;if(r){const{lookupList:t,featureList:a}=r;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,u=[];a.forEach(r=>{if(c.test(r.tag))for(let a=0;a<r.tab.length;a++){if(u[r.tab[a]])continue;u[r.tab[a]]=!0;const c=t[r.tab[a]],h=/^(isol|init|fina|medi)$/.test(r.tag);h&&!l&&(l=s(n));for(let n=0;n<i.length;n++)l&&h&&o[l[n]]!==r.tag||e.U._applySubs(i,n,c,t)}})}return i}(t,r);let m=0;const g=function(t,n){const i=new Int16Array(3*n.length);let r=0;for(;r<n.length;r++){const c=n[r];if(-1===c)continue;i[3*r+2]=t.hmtx.aWidth[c];const u=t.GPOS;if(u){const h=u.lookupList;for(let u=0;u<h.length;u++){const d=h[u];for(let u=0;u<d.tabs.length;u++){const h=d.tabs[u];if(1===d.ltype){if(-1!==e._lctf.coverageIndex(h.coverage,c)&&h.pos){s(h.pos,r);break}}else if(2===d.ltype){let t=null,i=a();if(-1!==i){const a=e._lctf.coverageIndex(h.coverage,n[i]);if(-1!==a){if(1===h.fmt){const e=h.pairsets[a];for(let n=0;n<e.length;n++)e[n].gid2===c&&(t=e[n])}else if(2===h.fmt){const r=e.U._getGlyphClass(n[i],h.classDef1),a=e.U._getGlyphClass(c,h.classDef2);t=h.matrix[r][a]}if(t){t.val1&&s(t.val1,i),t.val2&&s(t.val2,r);break}}}}else if(4===d.ltype){const t=e._lctf.coverageIndex(h.markCoverage,c);if(-1!==t){const s=a(o),l=-1===s?-1:e._lctf.coverageIndex(h.baseCoverage,n[s]);if(-1!==l){const e=h.markArray[t],n=h.baseArray[l][e.markClass];i[3*r]=n.x-e.x+i[3*s]-i[3*s+2],i[3*r+1]=n.y-e.y+i[3*s+1];break}}}else if(6===d.ltype){const o=e._lctf.coverageIndex(h.mark1Coverage,c);if(-1!==o){const s=a();if(-1!==s){const a=n[s];if(3===l(t,a)){const t=e._lctf.coverageIndex(h.mark2Coverage,a);if(-1!==t){const e=h.mark1Array[o],n=h.mark2Array[t][e.markClass];i[3*r]=n.x-e.x+i[3*s]-i[3*s+2],i[3*r+1]=n.y-e.y+i[3*s+1];break}}}}}}}}else if(t.kern&&!t.cff){const e=a();if(-1!==e){const r=t.kern.glyph1.indexOf(n[e]);if(-1!==r){const n=t.kern.rval[r].glyph2.indexOf(c);-1!==n&&(i[3*e+2]+=t.kern.rval[r].vals[n])}}}}return i;function a(e){for(let t=r-1;t>=0;t--)if(-1!==n[t]&&(!e||e(n[t])))return t;return-1}function o(e){return 1===l(t,e)}function s(e,t){for(let n=0;n<3;n++)i[3*t+n]+=e[n]||0}}(t,f);return f.forEach((o,s)=>{if(-1!==o){let r=i[o];if(!r){const{cmds:a,crds:s}=e.U.glyphToPath(t,o);let l,c,u,h,d="",p=0;for(let e=0,t=a.length;e<t;e++){const t=n[a[e]];d+=a[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+s[p++]}if(s.length){l=c=1/0,u=h=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<l&&(l=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else l=u=c=h=0;r=i[o]={index:o,advanceWidth:t.hmtx.aWidth[o],xMin:l,yMin:c,xMax:u,yMax:h,path:d}}u.call(null,r,h+g[3*s]*p,g[3*s+1]*p,m),h+=g[3*s+2]*p,c&&(h+=c*a)}m+=r.codePointAt(m)>65535?2:1}),h}};return d}return function(n){const i=new Uint8Array(n,0,4),r=e._bin.readASCII(i,0,4);if("wOFF"===r)n=t(n);else if("wOF2"===r)throw new Error("woff2 fonts not supported");return u(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())});const mx=Kb({name:"FontResolver",dependencies:[function(e,t){const n=Object.create(null),i=Object.create(null);function r(t,r){let a=n[t];a?r(a):i[t]?i[t].push(r):(i[t]=[r],function(t,n){const i=e=>{console.error("Failure loading font ".concat(t),e)};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)i(new Error(r.statusText));else if(r.status>0)try{const i=e(r.response);i.src=t,n(i)}catch(fM){i(fM)}},r.onerror=i,r.send()}catch(r){i(r)}}(t,e=>{e.src=t,n[t]=e,i[t].forEach(t=>t(e)),delete i[t]}))}return function(e,i){let{lang:a,fonts:o=[],style:s="normal",weight:l="normal",unicodeFontsURL:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const u=new Uint8Array(e.length),h=[];e.length||m();const d=new Map,p=[];if("italic"!==s&&(s="normal"),"number"!==typeof l&&(l="bold"===l?700:400),o&&!Array.isArray(o)&&(o=[o]),o=o.slice().filter(e=>!e.lang||e.lang.test(a)).reverse(),o.length){const t=1,i=2;let a=0;!function s(){for(let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=e.length;l<c;l++){const f=e.codePointAt(l);if(a===t&&h[u[l-1]].supportsCodePoint(f)||l>0&&/\s/.test(e[l]))u[l]=u[l-1],a===i&&(p[p.length-1][1]=l);else for(let e=u[l],c=o.length;e<=c;e++)if(e===c){(a===i?p[p.length-1]:p[p.length]=[l,l])[1]=l,a=i}else{u[l]=e;const{src:i,unicodeRange:c}=o[e];if(!c||g(f,c)){const e=n[i];if(!e)return void r(i,()=>{s(l)});if(e.supportsCodePoint(f)){let n=d.get(e);"number"!==typeof n&&(n=h.length,h.push(e),d.set(e,n)),u[l]=n,a=t;break}}}f>65535&&l+1<c&&(u[l+1]=u[l],l++,a===i&&(p[p.length-1][1]=l))}f()}()}else p.push([0,e.length-1]),f();function f(){if(p.length){const n=p.map(t=>e.substring(t[0],t[1]+1)).join("\n");t.getFontsForString(n,{lang:a||void 0,style:s,weight:l,dataUrl:c}).then(e=>{let{fontUrls:t,chars:n}=e;const i=h.length;let a=0;p.forEach(e=>{for(let t=0,r=e[1]-e[0];t<=r;t++)u[e[0]+t]=n[a++]+i;a++});let o=0;t.forEach((e,n)=>{r(e,e=>{h[n+i]=e,++o===t.length&&m()})})})}else m()}function m(){i({chars:u,fonts:h})}function g(e,t){for(let n=0;n<t.length;n++){const[i,r=i]=t[n];if(i<=e&&e<=r)return!0}return!1}}},fx,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&0!=(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach(function(t,n){e.push((+n).toString(36)+":"+t.toString(36))}),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach(function(e){var n=e.split(":");t.buckets.set(parseInt(n[0],36),parseInt(n[1],36))})};var n=Math.pow(2,8),i=n-1,r=~i;function a(e){var t=function(e){return e&r}(e).toString(16),i=function(e){return(e&r)+n-1}(e).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+i+".json"}function o(e,t){var n=e&i,r=t.codePointAt(n/6|0);return 0!=((r=(r||48)-48)&1<<n%6)}function s(e,t){!function(e,t){var n;(n=e,n.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(e){return e.split("-").map(function(e){return parseInt(e.trim(),16)})})).forEach(function(e){var n=e[0],i=e[1];void 0===i&&(i=n),t(n,i)})}(e,function(e,n){for(var i=e;i<=n;i++)t(i)})}var l={},c={},u=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(e){var n=u.get(e);return n||(n=new t,s(e.ranges,function(e){return n.add(e)}),u.set(e,n)),n}var p,f=new Map;function m(e,t,n){return e[t]?t:e[n]?n:function(e){for(var t in e)return t}(e)}function g(e,t){var n=t;if(!e.includes(n)){n=1/0;for(var i=0;i<e.length;i++)Math.abs(e[i]-t)<Math.abs(n-t)&&(n=e[i])}return n}function v(e){return p||(p=new Set,s("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(e){p.add(e)})),p.has(e)}return e.CodePointSet=t,e.clearCache=function(){l={},c={}},e.getFontsForString=function(e,t){void 0===t&&(t={});var n,i=t.lang;void 0===i&&(i=/[\u1100-\u11FF\u302E\u302F\u3131-\u318E\u3200-\u321E\u3260-\u327E\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/.test(n=e)?"ko":/(?:[\u3041-\u3096\u309D-\u309F]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]|\uD83C\uDE00)|(?:[\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67])/.test(n)?"ja":"en");var r=t.category;void 0===r&&(r="sans-serif");var s=t.style;void 0===s&&(s="normal");var u=t.weight;void 0===u&&(u=400);var p=(t.dataUrl||h).replace(/\/$/g,""),y=new Map,_=new Uint8Array(e.length),b={},x={},S=new Array(e.length),w=new Map,M=!1;function E(e){var t=f.get(e);return t||(t=fetch(p+"/"+e).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json().then(function(e){if(!Array.isArray(e)||1!==e[0])throw new Error("Incorrect schema version; need 1, got "+e[0]);return e[1]})}).catch(function(t){if(p!==h)return M||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+p+'", trying default CDN. '+t.message),M=!0),p=h,f.delete(e),E(e);throw t}),f.set(e,t)),t}for(var T=function(t){var n=e.codePointAt(t),i=a(n);S[t]=i,l[i]||w.has(i)||w.set(i,E(i).then(function(e){l[i]=e})),n>65535&&(t++,C=t)},C=0;C<e.length;C++)T(C);return Promise.all(w.values()).then(function(){w.clear();for(var t=function(t){var r=e.codePointAt(t),a=null,s=l[S[t]],u=void 0;for(var h in s){var d=x[h];if(void 0===d&&(d=x[h]=new RegExp(h).test(i||"en")),d){for(var p in u=h,s[h])if(o(r,s[h][p])){a=p;break}break}}if(!a)e:for(var f in s)if(f!==u)for(var m in s[f])if(o(r,s[f][m])){a=m;break e}a||(console.debug("No font coverage for U+"+r.toString(16)),a="latin"),S[t]=a,c[a]||w.has(a)||w.set(a,E("font-meta/"+a+".json").then(function(e){c[a]=e})),r>65535&&(t++,n=t)},n=0;n<e.length;n++)t(n);return Promise.all(w.values())}).then(function(){for(var t,n=null,i=0;i<e.length;i++){var a=e.codePointAt(i);if(n&&(v(a)||d(n).has(a)))_[i]=_[i-1];else{n=c[S[i]];var o=b[n.id];if(!o){var l=n.typeforms,h=m(l,r,"sans-serif"),f=m(l[h],s,"normal"),x=g(null===(t=l[h])||void 0===t?void 0:t[f],u);o=b[n.id]=p+"/font-files/"+n.id+"/"+h+"."+f+"."+x+".woff"}var w=y.get(o);null==w&&(w=y.size,y.set(o,w)),_[i]=w}a>65535&&(i++,_[i]=_[i-1])}return{fontUrls:Array.from(y.keys()),chars:_}})},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,n)=>e(t,n())});const gx=()=>(self.performance||Date).now(),vx=$b();let yx;const _x=[];let bx=0;function xx(){const e=gx();for(;_x.length&&gx()-e<5;)_x.shift()();bx=_x.length?setTimeout(xx,0):0}const Sx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((e,n)=>{_x.push(()=>{const i=gx();try{vx.webgl.generateIntoCanvas(...t),e({timing:gx()-i})}catch(r){n(r)}}),bx||(bx=setTimeout(xx,0))})},wx=4,Mx=2e3,Ex={};let Tx=0;function Cx(e,t,n,i,r,a,o,s,l,c){const u="TroikaTextSDFGenerator_JS_"+Tx++%wx;let h=Ex[u];return h||(h=Ex[u]={workerModule:Kb({name:u,workerId:u,dependencies:[$b,gx],init(e,t){const n=e().javascript.generate;return function(){const e=t();return{textureData:n(...arguments),timing:t()-e}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,i,r,a).then(n=>{let{textureData:i,timing:r}=n;const a=gx(),d=new Uint8Array(4*i.length);for(let e=0;e<i.length;e++)d[4*e+c]=i[e];return vx.webglUtils.renderImageData(o,d,s,l,e,t,1<<3-c),r+=gx()-a,0===--h.requests&&(h.idleTimer=setTimeout(()=>{!function(e){Zb[e]&&Zb[e].forEach(function(e){e()}),qb[e]&&(qb[e].terminate(),delete qb[e])}(u)},Mx)),{timing:r}})}const Ax=vx.webglUtils.resizeWebGLCanvasWithoutClearing,Px={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Rx=new Ns;let Lx=!1;function kx(){return(self.performance||Date).now()}const Ix=Object.create(null);function Dx(e,t){Lx=!0,e=Ux({},e);const n=kx(),{defaultFontURL:i}=Px,r=[];if(i&&r.push({label:"default",src:zx(i)}),e.font&&r.push({label:"user",src:zx(e.font)}),e.font=r,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Px.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||Px.unicodeFontsURL,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let i=e.colorRanges[n];"number"!==typeof i&&(i=Rx.set(i).getHex()),t[n]=i}e.colorRanges=t}Object.freeze(e);const{textureWidth:a,sdfExponent:o}=Px,{sdfGlyphSize:s}=e,l=a/s*4;let c=Ix[s];if(!c){const e=document.createElement("canvas");e.width=a,e.height=256*s/l,c=Ix[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:e,sdfTexture:new so(e,void 0,void 0,void 0,ri,ri),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0}),t.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach(t=>{t.forEach(t=>{n.push(Nx(t,e,!0))})}),Promise.all(n).then(()=>{Fx(e),e.sdfTexture.needsUpdate=!0})})}(c)}const{sdfTexture:u,sdfCanvas:h}=c;(Px.useWorker?jx:Hx)(e).then(i=>{const{glyphIds:r,glyphFontIndices:d,fontData:p,glyphPositions:f,fontSize:m,timings:g}=i,v=[],y=new Float32Array(4*r.length);let _=0,b=0;const x=kx(),S=p.map(e=>{let t=c.glyphsByFont.get(e.src);return t||c.glyphsByFont.set(e.src,t=new Map),t});r.forEach((e,t)=>{const n=d[t],{src:a,unitsPerEm:o}=p[n];let l=S[n].get(e);if(!l){const{path:t,pathBounds:r}=i.glyphData[a][e],o=Math.max(r[2]-r[0],r[3]-r[1])/s*(Px.sdfMargin*s+.5),u=c.glyphCount++,h=[r[0]-o,r[1]-o,r[2]+o,r[3]+o];S[n].set(e,l={path:t,atlasIndex:u,sdfViewBox:h}),v.push(l)}const{sdfViewBox:u}=l,h=f[b++],g=f[b++],x=m/o;y[_++]=h+u[0]*x,y[_++]=g+u[1]*x,y[_++]=h+u[2]*x,y[_++]=g+u[3]*x,r[t]=l.atlasIndex}),g.quads=(g.quads||0)+(kx()-x);const w=kx();g.sdf={};const M=h.height,E=Math.ceil(c.glyphCount/l),T=Math.pow(2,Math.ceil(Math.log2(E*s)));T>M&&(console.info("Increasing SDF texture size ".concat(M,"->").concat(T)),Ax(h,a,T),u.dispose()),Promise.all(v.map(t=>Nx(t,c,e.gpuAccelerateSDF).then(e=>{let{timing:n}=e;g.sdf[t.atlasIndex]=n}))).then(()=>{v.length&&!c.contextLost&&(Fx(c),u.needsUpdate=!0),g.sdfTotal=kx()-w,g.total=kx()-n,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:s,sdfExponent:o,glyphBounds:y,glyphAtlasIndices:r,glyphColors:i.glyphColors,caretPositions:i.caretPositions,chunkedBounds:i.chunkedBounds,ascender:i.ascender,descender:i.descender,lineHeight:i.lineHeight,capHeight:i.capHeight,xHeight:i.xHeight,topBaseline:i.topBaseline,blockBounds:i.blockBounds,visibleBounds:i.visibleBounds,timings:i.timings}))})}),Promise.resolve().then(()=>{var e;c.contextLost||(e=h)._warm||(vx.webgl.isSupported(e),e._warm=!0)})}function Nx(e,t,n){let{path:i,atlasIndex:r,sdfViewBox:a}=e,{sdfGlyphSize:o,sdfCanvas:s,contextLost:l}=t;if(l)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:u}=Px,h=Math.max(a[2]-a[0],a[3]-a[1]),d=Math.floor(r/4);return function(e,t,n,i,r,a,o,s,l,c){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?Cx(e,t,n,i,r,a,o,s,l,c):Sx(e,t,n,i,r,a,o,s,l,c).then(null,u=>(yx||(console.warn("WebGL SDF generation failed, falling back to JS",u),yx=!0),Cx(e,t,n,i,r,a,o,s,l,c)))}(o,o,i,a,h,u,s,d%(c/o)*o,Math.floor(d/(c/o))*o,r%4,n)}function Ux(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let Ox;function zx(e){return Ox||(Ox="undefined"===typeof document?{}:document.createElement("a")),Ox.href=e,Ox.href}function Fx(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:i,height:r}=t,a=e.sdfCanvas.getContext("webgl");let o=n.image.data;o&&o.length===i*r*4||(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,o)}}const Bx=Kb({name:"Typesetter",dependencies:[function(e,t){const n=1/0,i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",a=new RegExp("".concat(r,"|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]"));function o(o,u){let{text:d="",font:p,lang:f,sdfGlyphSize:m=64,fontSize:g=400,fontWeight:v=1,fontStyle:y="normal",letterSpacing:_=0,lineHeight:b="normal",maxWidth:x=n,direction:S,textAlign:w="left",textIndent:M=0,whiteSpace:E="normal",overflowWrap:T="normal",anchorX:C=0,anchorY:A=0,metricsOnly:P=!1,unicodeFontsURL:R,preResolvedFonts:L=null,includeCaretPositions:k=!1,chunkedBoundsSize:I=8192,colorRanges:D=null}=o;const N=c(),U={fontLoad:0,typesetting:0};d.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),d=d.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),g=+g,_=+_,x=+x,b=b||"normal",M=+M,function(t,n){let{text:i,lang:r,fonts:a,style:o,weight:s,preResolvedFonts:l,unicodeFontsURL:c}=t;const u=e=>{let t,i,{chars:r,fonts:a}=e;const o=[];for(let n=0;n<r.length;n++)r[n]!==i?(i=r[n],o.push(t={start:n,end:n,fontObj:a[r[n]]})):t.end=n;n(o)};l?u(l):e(i,u,{lang:r,fonts:a,style:o,weight:s,unicodeFontsURL:c})}({text:d,lang:f,style:y,weight:v,fonts:"string"===typeof p?[{src:p}]:p,unicodeFontsURL:R,preResolvedFonts:L},e=>{U.fontLoad=c()-N;const o=isFinite(x);let p=null,f=null,m=null,v=null,y=null,R=null,L=null,O=null,z=0,F=0,B="nowrap"!==E;const j=new Map,H=c();let V=M,G=0,W=new h;const X=[W];e.forEach(e=>{const{fontObj:t}=e,{ascender:n,descender:s,unitsPerEm:l,lineGap:c,capHeight:u,xHeight:p}=t;let f=j.get(t);if(!f){const e=g/l,i="normal"===b?(n-s+c)*e:b*g,r=(i-(n-s)*e)/2,a=Math.min(i,(n-s)*e),o=(n+s)/2*e+a/2;f={index:j.size,src:t.src,fontObj:t,fontSizeMult:e,unitsPerEm:l,ascender:n*e,descender:s*e,capHeight:u*e,xHeight:p*e,lineHeight:i,baseline:-r-n*e,caretTop:o,caretBottom:o-a},j.set(t,f)}const{fontSizeMult:m}=f,v=d.slice(e.start,e.end+1);let y,S;t.forEachGlyph(v,g,_,(t,n,s,l)=>{n+=G,l+=e.start,y=n,S=t;const c=d.charAt(l),u=t.advanceWidth*m,p=W.count;let v;if("isEmpty"in t||(t.isWhitespace=!!c&&new RegExp(r).test(c),t.canBreakAfter=!!c&&a.test(c),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||i.test(c)),t.isWhitespace||t.isEmpty||F++,B&&o&&!t.isWhitespace&&n+u+V>x&&p){if(W.glyphAt(p-1).glyphObj.canBreakAfter)v=new h,V=-n;else for(let e=p;e--;){if(0===e&&"break-word"===T){v=new h,V=-n;break}if(W.glyphAt(e).glyphObj.canBreakAfter){v=W.splitAt(e+1);const t=v.glyphAt(0).x;V-=t;for(let e=v.count;e--;)v.glyphAt(e).x-=t;break}}v&&(W.isSoftWrapped=!0,W=v,X.push(W),z=x)}let b=W.glyphAt(W.count);b.glyphObj=t,b.x=n+V,b.y=s,b.width=u,b.charIndex=l,b.fontData=f,"\n"===c&&(W=new h,X.push(W),V=-(n+u+_*g)+M)}),G=y+S.advanceWidth*m+_*g});let q=0;X.forEach(e=>{let t=!0;for(let n=e.count;n--;){const i=e.glyphAt(n);t&&!i.glyphObj.isWhitespace&&(e.width=i.x+i.width,e.width>z&&(z=e.width),t=!1);let{lineHeight:r,capHeight:a,xHeight:o,baseline:s}=i.fontData;r>e.lineHeight&&(e.lineHeight=r);const l=s-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+a),e.ex=Math.max(e.ex,e.baseline+o)}e.baseline-=q,e.cap-=q,e.ex-=q,q+=e.lineHeight});let Z=0,Y=0;if(C&&("number"===typeof C?Z=-C:"string"===typeof C&&(Z=-z*("left"===C?0:"center"===C?.5:"right"===C?1:s(C)))),A&&("number"===typeof A?Y=-A:"string"===typeof A&&(Y="top"===A?0:"top-baseline"===A?-X[0].baseline:"top-cap"===A?-X[0].cap:"top-ex"===A?-X[0].ex:"middle"===A?q/2:"bottom"===A?q:"bottom-baseline"===A?-X[X.length-1].baseline:s(A)*q)),!P){const e=t.getEmbeddingLevels(d,S);p=new Uint16Array(F),f=new Uint8Array(F),m=new Float32Array(2*F),v={},L=[n,n,-n,-n],O=[],k&&(R=new Float32Array(4*d.length)),D&&(y=new Uint8Array(3*F));let i,r,a=0,o=-1,s=-1;if(X.forEach((c,u)=>{let{count:h,width:g}=c;if(h>0){let u=0;for(let e=h;e--&&c.glyphAt(e).glyphObj.isWhitespace;)u++;let _=0,b=0;if("center"===w)_=(z-g)/2;else if("right"===w)_=z-g;else if("justify"===w&&c.isSoftWrapped){let e=0;for(let t=h-u;t--;)c.glyphAt(t).glyphObj.isWhitespace&&e++;b=(z-g)/e}if(b||_){let e=0;for(let t=0;t<h;t++){let n=c.glyphAt(t);const i=n.glyphObj;n.x+=_+e,0!==b&&i.isWhitespace&&t<h-u&&(e+=b,n.width+=b)}}const x=t.getReorderSegments(d,e,c.glyphAt(0).charIndex,c.glyphAt(c.count-1).charIndex);for(let e=0;e<x.length;e++){const[t,n]=x[e];let i=1/0,r=-1/0;for(let e=0;e<h;e++)if(c.glyphAt(e).charIndex>=t){let t=e,a=e;for(;a<h;a++){let e=c.glyphAt(a);if(e.charIndex>n)break;a<h-u&&(i=Math.min(i,e.x),r=Math.max(r,e.x+e.width))}for(let e=t;e<a;e++){const t=c.glyphAt(e);t.x=r-(t.x+t.width-i)}break}}let S;const M=e=>S=e;for(let g=0;g<h;g++){const u=c.glyphAt(g);S=u.glyphObj;const h=S.index,_=1&e.levels[u.charIndex];if(_){const e=t.getMirroredCharacter(d[u.charIndex]);e&&u.fontData.fontObj.forEachGlyph(e,0,0,M)}if(k){const{charIndex:e,fontData:t}=u,n=u.x+Z,i=u.x+u.width+Z;R[4*e]=_?i:n,R[4*e+1]=_?n:i,R[4*e+2]=c.baseline+t.caretBottom+Y,R[4*e+3]=c.baseline+t.caretTop+Y;const r=e-o;r>1&&l(R,o,r),o=e}if(D){const{charIndex:e}=u;for(;e>s;)s++,D.hasOwnProperty(s)&&(r=D[s])}if(!S.isWhitespace&&!S.isEmpty){const e=a++,{fontSizeMult:t,src:o,index:s}=u.fontData,l=v[o]||(v[o]={});l[h]||(l[h]={path:S.path,pathBounds:[S.xMin,S.yMin,S.xMax,S.yMax]});const d=u.x+Z,g=u.y+c.baseline+Y;m[2*e]=d,m[2*e+1]=g;const _=d+S.xMin*t,b=g+S.yMin*t,x=d+S.xMax*t,w=g+S.yMax*t;_<L[0]&&(L[0]=_),b<L[1]&&(L[1]=b),x>L[2]&&(L[2]=x),w>L[3]&&(L[3]=w),e%I===0&&(i={start:e,end:e,rect:[n,n,-n,-n]},O.push(i)),i.end++;const M=i.rect;if(_<M[0]&&(M[0]=_),b<M[1]&&(M[1]=b),x>M[2]&&(M[2]=x),w>M[3]&&(M[3]=w),p[e]=h,f[e]=s,D){const t=3*e;y[t]=r>>16&255,y[t+1]=r>>8&255,y[t+2]=255&r}}}}}),R){const e=d.length-o;e>1&&l(R,o,e)}}const K=[];j.forEach(e=>{let{index:t,src:n,unitsPerEm:i,ascender:r,descender:a,lineHeight:o,capHeight:s,xHeight:l}=e;K[t]={src:n,unitsPerEm:i,ascender:r,descender:a,lineHeight:o,capHeight:s,xHeight:l}}),U.typesetting=c()-H,u({glyphIds:p,glyphFontIndices:f,glyphPositions:m,glyphData:v,fontData:K,caretPositions:R,glyphColors:y,chunkedBounds:O,fontSize:g,topBaseline:Y+X[0].baseline,blockBounds:[Z,Y-q,Z+z,Y],visibleBounds:L,timings:U})})}function s(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function l(e,t,n){const i=e[4*t],r=e[4*t+1],a=e[4*t+2],o=e[4*t+3],s=(r-i)/n;for(let l=0;l<n;l++){const n=4*(t+l);e[n]=i+s*l,e[n+1]=i+s*(l+1),e[n+2]=a,e[n+3]=o}}function c(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(e){let t=h.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new h;return t.data=this.data.splice(e*d.length),t}},h.flyweight=d.reduce((e,t,n,i)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*d.length+n]},set(e){this.data[this.index*d.length+n]=e}}),e),{data:null,index:0}),{typeset:o,measure:function(e,t){o(u(u({},e),{},{metricsOnly:!0}),e=>{const[n,i,r,a]=e.blockBounds;t({width:r-n,height:a-i})})}}},mx,ex],init:(e,t,n)=>e(t,n())}),jx=Kb({name:"Typesetter",dependencies:[Bx],init:e=>function(t){return new Promise(n=>{e.typeset(t,n)})},getTransferables(e){const t=[];for(let n in e)e[n]&&e[n].buffer&&t.push(e[n].buffer);return t}}),Hx=jx.onMainThread;const Vx={};const Gx="aTroikaGlyphBounds",Wx="aTroikaGlyphIndex";class Xx extends Rp{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Do,this.boundingBox=new go}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,("number"!==typeof e||e<1)&&(e=1);let t=function(e){let t=Vx[e];return t||(t=Vx[e]=new ad(1,1,e,e).translate(.5,.5,0)),t}(e);["position","normal","uv"].forEach(e=>{this.attributes[e]=t.attributes[e].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,i,r){this.updateAttributeData(Gx,e,4),this.updateAttributeData(Wx,t,1),this.updateAttributeData("aTroikaGlyphColor",r,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:i,floor:r,min:a,max:o,sin:s,cos:l}=Math,c=i/2,u=2*i,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=r((d+c)/u)!==r((p+c)/u)?-h:a(s(d)*h,s(p)*h),m=r((d-c)/u)!==r((p-c)/u)?h:o(s(d)*h,s(p)*h),g=r((d+i)/u)!==r((p+i)/u)?2*h:o(h-l(d)*h,h-l(p)*h);n.min.set(f,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Wx).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){t=n[i].end;let r=n[i].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new Pc(t,n)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const qx="\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n"),Zx="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n");function Yx(e){const t=cx(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Da},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new lo(0,0,0,0)},uTroikaClipRect:{value:new lo(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Da},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ns},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Fa},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:qx,fragmentDefs:Zx,fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter(e){let{vertexShader:t,fragmentShader:n}=e,i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(tx,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:n}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const Kx=new Fs({color:16777215,side:Yt,transparent:!0}),Jx=8421504,Qx=new Vo,$x=new Ua,eS=new Ua,tS=[],nS=new Ua,iS="+x+y";function rS(e){return Array.isArray(e)?e[0]:e}let aS=()=>{const e=new wl(new ad(1,1),Kx);return aS=()=>e,e},oS=()=>{const e=new wl(new ad(1,1,32,1),Kx);return oS=()=>e,e};const sS={type:"syncstart"},lS={type:"synccomplete"},cS=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],uS=cS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class hS extends wl{constructor(){super(new Xx,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Jx,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=iS,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(sS),Dx({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(e=>e&&e())})),this.dispatchEvent(lS),e&&e()})))}onBeforeRender(e,t,n,i,r,a){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return Yx(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Kx.clone());if(e&&e.isDerivedFrom(t)||(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",function n(){e.removeEventListener("dispose",n),t.dispose()})),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return rS(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return rS(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:e,blockBounds:r}=i;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(r),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let a,o,s,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:i,outlineOpacity:r}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(i)||0),a=r,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?Jx:s),o=this.strokeOpacity,null==o&&(o=1)),a=this.fillOpacity;n.uTroikaEdgeOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=o,n.uTroikaFillOpacity.value=null==a?1:a,n.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)n.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(r[0]-e,r[1]-e,r[2]+e,r[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(null==r)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new Ns;r===t._input&&"object"!==typeof r||t.set(t._input=r)}let a=this.orientation||iS;if(a!==e._orientation){let t=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let i=a!==iS&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(i){let[,e,n,r,a]=i;$x.set(0,0,0)[n]="-"===e?1:-1,eS.set(0,0,0)[a]="-"===r?-1:1,Qx.lookAt(nS,$x.cross(eS),eS),t.setFromMatrix4(Qx)}else t.identity();e._orientation=a}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da;t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Da;return $x.copy(e),this.localPositionToTextCoords(this.worldToLocal($x),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:i}=this;if(n){const r=n.blockBounds,a=i?oS():aS(),o=a.geometry,{position:s,uv:l}=o.attributes;for(let e=0;e<l.count;e++){let t=r[0]+l.getX(e)*(r[2]-r[0]);const n=r[1]+l.getY(e)*(r[3]-r[1]);let a=0;i&&(a=i-Math.cos(t/i)*i,t=Math.sin(t/i)*i),s.setXYZ(e,t,n,a)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,tS.length=0,a.raycast(e,tS);for(let e=0;e<tS.length;e++)tS[e].object=this,t.push(tS[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,uS.forEach(t=>{this[t]=e[t]}),this}clone(){return(new this.constructor).copy(this)}}cS.forEach(e=>{const t="_private_"+e;Object.defineProperty(hS.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})});new go,new Ns;new WeakMap;new WeakMap;const dS=["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"],pS=t.forwardRef((e,n)=>{let{sdfGlyphSize:i=64,anchorX:r="center",anchorY:o="middle",font:s,fontSize:l=1,children:c,characters:u,onSync:h}=e,d=a(e,dS);const p=j_(e=>{let{invalidate:t}=e;return t}),[f]=t.useState(()=>new hS),[m,g]=t.useMemo(()=>{const e=[];let n="";return t.Children.forEach(c,t=>{"string"===typeof t||"number"===typeof t?n+=t:e.push(t)}),[e,n]},[c]);return Zy(()=>new Promise(e=>function(e,t){let{font:n,characters:i,sdfGlyphSize:r}=e;Dx({font:n,sdfGlyphSize:r,text:Array.isArray(i)?i.join("\n"):""+i},t)}({font:s,characters:u},e)),["troika-text",s,u]),t.useLayoutEffect(()=>{f.sync(()=>{p(),h&&h(f)})}),t.useEffect(()=>()=>f.dispose(),[f]),t.createElement("primitive",jb({object:f,ref:n,font:s,text:g,anchorX:r,anchorY:o,fontSize:l,sdfGlyphSize:i},d),m)}),fS=(()=>parseInt(Ut.replace(/\D+/g,"")))();class mS extends Rl{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <".concat(fS>=154?"colorspace_fragment":"encodings_fragment",">\n      }")})}}const gS=e=>(new Ua).setFromSpherical(new Lf(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),vS=t.forwardRef((e,n)=>{let{radius:i=100,depth:r=50,count:a=5e3,saturation:o=0,factor:s=4,fade:l=!1,speed:c=1}=e;const u=t.useRef(null),[h,d,p]=t.useMemo(()=>{const e=[],t=[],n=Array.from({length:a},()=>(.5+.5*Math.random())*s),l=new Ns;let c=i+r;const u=r/a;for(let i=0;i<a;i++)c-=u*Math.random(),e.push(...gS(c).toArray()),l.setHSL(i/a,o,.9),t.push(l.r,l.g,l.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(n)]},[a,r,s,i,o]);H_(e=>u.current&&(u.current.uniforms.time.value=e.clock.elapsedTime*c));const[f]=t.useState(()=>new mS);return t.createElement("points",{ref:n},t.createElement("bufferGeometry",null,t.createElement("bufferAttribute",{attach:"attributes-position",args:[h,3]}),t.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),t.createElement("bufferAttribute",{attach:"attributes-size",args:[p,1]})),t.createElement("primitive",{ref:u,object:f,attach:"material",blending:Qt,"uniforms-fade-value":l,depthWrite:!1,transparent:!0,vertexColors:!0}))});var yS=Object.defineProperty,_S=(e,t,n)=>(((e,t,n)=>{t in e?yS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class bS{constructor(){_S(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}var xS=Object.defineProperty,SS=(e,t,n)=>(((e,t,n)=>{t in e?xS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const wS=new Ho,MS=new jc,ES=Math.cos(Math.PI/180*70),TS=(e,t)=>(e%t+t)%t;class CS extends bS{constructor(e,t){super(),SS(this,"object"),SS(this,"domElement"),SS(this,"enabled",!0),SS(this,"target",new Ua),SS(this,"minDistance",0),SS(this,"maxDistance",1/0),SS(this,"minZoom",0),SS(this,"maxZoom",1/0),SS(this,"minPolarAngle",0),SS(this,"maxPolarAngle",Math.PI),SS(this,"minAzimuthAngle",-1/0),SS(this,"maxAzimuthAngle",1/0),SS(this,"enableDamping",!1),SS(this,"dampingFactor",.05),SS(this,"enableZoom",!0),SS(this,"zoomSpeed",1),SS(this,"enableRotate",!0),SS(this,"rotateSpeed",1),SS(this,"enablePan",!0),SS(this,"panSpeed",1),SS(this,"screenSpacePanning",!0),SS(this,"keyPanSpeed",7),SS(this,"zoomToCursor",!1),SS(this,"autoRotate",!1),SS(this,"autoRotateSpeed",2),SS(this,"reverseOrbit",!1),SS(this,"reverseHorizontalOrbit",!1),SS(this,"reverseVerticalOrbit",!1),SS(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),SS(this,"mouseButtons",{LEFT:Ot.ROTATE,MIDDLE:Ot.DOLLY,RIGHT:Ot.PAN}),SS(this,"touches",{ONE:zt.ROTATE,TWO:zt.DOLLY_PAN}),SS(this,"target0"),SS(this,"position0"),SS(this,"zoom0"),SS(this,"_domElementKeyEvents",null),SS(this,"getPolarAngle"),SS(this,"getAzimuthalAngle"),SS(this,"setPolarAngle"),SS(this,"setAzimuthalAngle"),SS(this,"getDistance"),SS(this,"getZoomScale"),SS(this,"listenToKeyEvents"),SS(this,"stopListenToKeyEvents"),SS(this,"saveState"),SS(this,"reset"),SS(this,"update"),SS(this,"connect"),SS(this,"dispose"),SS(this,"dollyIn"),SS(this,"dollyOut"),SS(this,"getScale"),SS(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=TS(e,2*Math.PI),i=c.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.phi=t-i,n.update()},this.setAzimuthalAngle=e=>{let t=TS(e,2*Math.PI),i=c.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.theta=t-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),s=o.NONE},this.update=(()=>{const t=new Ua,r=new Ua(0,1,0),a=(new Na).setFromUnitVectors(e.up,r),p=a.clone().invert(),f=new Ua,m=new Na,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,r),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&s===o.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(y)&&isFinite(_)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),c.theta=y<=_?Math.max(y,Math.min(_,c.theta)):c.theta>(y+_)/2?Math.max(y,c.theta):Math.min(_,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&M||n.object.isOrthographicCamera?c.radius=O(c.radius):c.radius=O(c.radius*h),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0));let b=!1;if(n.zoomToCursor&&M){let i=null;if(n.object instanceof Nl&&n.object.isPerspectiveCamera){const e=t.length();i=O(e*h);const r=e-i;n.object.position.addScaledVector(S,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new Ua(w.x,w.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),b=!0;const r=new Ua(w.x,w.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(wS.origin.copy(n.object.position),wS.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(wS.direction))<ES?e.lookAt(n.target):(MS.setFromNormalAndCoplanarPoint(n.object.up,n.target),wS.intersectPlane(MS,n.target))))}else n.object instanceof xp&&n.object.isOrthographicCamera&&(b=1!==h,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,M=!1,!!(b||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),f.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",Z),n.domElement.addEventListener("wheel",Y)},this.dispose=()=>{var e,t,i,r,a,o;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",J),null==(t=n.domElement)||t.removeEventListener("pointerdown",X),null==(i=n.domElement)||i.removeEventListener("pointercancel",Z),null==(r=n.domElement)||r.removeEventListener("wheel",Y),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",q),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointerup",Z),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,i={type:"change"},r={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,c=new Lf,u=new Lf;let h=1;const d=new Ua,p=new Da,f=new Da,m=new Da,g=new Da,v=new Da,y=new Da,_=new Da,b=new Da,x=new Da,S=new Ua,w=new Da;let M=!1;const E=[],T={};function C(){return Math.pow(.95,n.zoomSpeed)}function A(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function P(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const R=(()=>{const e=new Ua;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}})(),L=(()=>{const e=new Ua;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),k=(()=>{const e=new Ua;return function(t,i){const r=n.domElement;if(r&&n.object instanceof Nl&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),R(2*t*o/r.clientHeight,n.object.matrix),L(2*i*o/r.clientHeight,n.object.matrix)}else r&&n.object instanceof xp&&n.object.isOrthographicCamera?(R(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),L(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof Nl&&n.object.isPerspectiveCamera||n.object instanceof xp&&n.object.isOrthographicCamera?h=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){I(h/e)}function N(e){I(h*e)}function U(e){if(!n.zoomToCursor||!n.domElement)return;M=!0;const t=n.domElement.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,a=t.width,o=t.height;w.x=i/a*2-1,w.y=-r/o*2+1,S.set(w.x,w.y,1).unproject(n.object).sub(n.object.position).normalize()}function O(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function z(e){p.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function B(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);p.set(e,t)}}function j(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function H(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);_.set(0,n)}function V(e){if(1==E.length)f.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function G(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v)}function W(e){const t=$(e),i=e.pageX-t.x,r=e.pageY-t.y,a=Math.sqrt(i*i+r*r);b.set(0,a),x.set(0,Math.pow(b.y/_.y,n.zoomSpeed)),D(x.y),_.copy(b)}function X(e){var t,i;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",q),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",Z)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),E.length){case 1:switch(n.touches.ONE){case zt.ROTATE:if(!1===n.enableRotate)return;B(),s=o.TOUCH_ROTATE;break;case zt.PAN:if(!1===n.enablePan)return;j(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case zt.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&j(),s=o.TOUCH_DOLLY_PAN;break;case zt.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&B(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ot.DOLLY:if(!1===n.enableZoom)return;!function(e){U(e),_.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case Ot.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),s=o.PAN}else{if(!1===n.enableRotate)return;z(e),s=o.ROTATE}break;case Ot.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;z(e),s=o.ROTATE}else{if(!1===n.enablePan)return;F(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(r)}(e))}function q(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&G(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&V(e)}(e),n.update();break;default:s=o.NONE}}(e):function(e){if(!1===n.enabled)return;switch(s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,_),x.y>0?D(C()):x.y<0&&N(C()),_.copy(b),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function Z(e){var t,i,r;!function(e){delete T[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",Z)),n.dispatchEvent(a),s=o.NONE}function Y(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){U(e),e.deltaY<0?N(C()):e.deltaY>0&&D(C()),n.update()}(e),n.dispatchEvent(a))}function K(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:k(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:k(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=T[e.pointerId];void 0===t&&(t=new Da,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return T[t.pointerId]}this.dollyIn=function(){N(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C()),n.update()},this.dollyOut=function(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C()),n.update()},this.getScale=()=>h,this.setScale=e=>{I(e),n.update()},this.getZoomScale=()=>C(),void 0!==t&&this.connect(t),this.update()}}const AS=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],PS=t.forwardRef((e,n)=>{let{makeDefault:i,camera:r,regress:o,domElement:s,enableDamping:l=!0,keyEvents:c=!1,onChange:u,onStart:h,onEnd:d}=e,p=a(e,AS);const f=j_(e=>e.invalidate),m=j_(e=>e.camera),g=j_(e=>e.gl),v=j_(e=>e.events),y=j_(e=>e.setEvents),_=j_(e=>e.set),b=j_(e=>e.get),x=j_(e=>e.performance),S=r||m,w=s||v.connected||g.domElement,M=t.useMemo(()=>new CS(S),[S]);return H_(()=>{M.enabled&&M.update()},-1),t.useEffect(()=>(c&&M.connect(!0===c?w:c),M.connect(w),()=>{M.dispose()}),[c,w,o,M,f]),t.useEffect(()=>{const e=e=>{f(),o&&x.regress(),u&&u(e)},t=e=>{h&&h(e)},n=e=>{d&&d(e)};return M.addEventListener("change",e),M.addEventListener("start",t),M.addEventListener("end",n),()=>{M.removeEventListener("start",t),M.removeEventListener("end",n),M.removeEventListener("change",e)}},[u,h,d,M,f,y]),t.useEffect(()=>{if(i){const e=b().controls;return _({controls:M}),()=>_({controls:e})}},[i,M]),t.createElement("primitive",jb({ref:n,object:M,enableDamping:l},p))});function RS(e){let{scale:t=4}=e;const n=[];for(let i=1;i<=t;i++)n.push(i),n.push(-i);return(0,Lt.jsxs)("group",{children:[n.map(e=>(0,Lt.jsx)(pS,{position:[e,-.2,0],fontSize:.12,color:"white",anchorX:"center",anchorY:"middle",children:e},"x-".concat(e))),n.map(e=>(0,Lt.jsx)(pS,{position:[.2,e,0],fontSize:.12,color:"white",anchorX:"center",anchorY:"middle",children:e},"y-".concat(e))),n.map(e=>(0,Lt.jsx)(pS,{position:[0,-.2,e],fontSize:.12,color:"white",anchorX:"center",anchorY:"middle",rotation:[-Math.PI/2,0,0],children:e},"z-".concat(e)))]})}function LS(e){let{points:n}=e;const i=(0,t.useMemo)(()=>{const e=new ch(n.map(e=>new Ua(e.x,e.y,e.z)));return(new hl).setFromPoints(e.getPoints(360))},[n]);return(0,Lt.jsx)("line",{geometry:i,children:(0,Lt.jsx)("lineBasicMaterial",{attach:"material",color:"#00ffff",linewidth:2})})}function kS(e){let{orbitalData:t}=e;if(!t)return null;const n=t.orbit_path.x.map((e,n)=>({x:t.orbit_path.x[n],y:t.orbit_path.y[n],z:t.orbit_path.z[n]})),i=[t.asteroid_position.x,t.asteroid_position.y,t.asteroid_position.z];return(0,Lt.jsxs)(Bb,{camera:{position:[5,5,5],fov:60},children:[(0,Lt.jsx)("ambientLight",{intensity:.5}),(0,Lt.jsx)("pointLight",{position:[0,0,0],intensity:150,color:"#FFDAB9"}),(0,Lt.jsx)(vS,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0}),(0,Lt.jsx)(PS,{}),(0,Lt.jsx)("axesHelper",{args:[4]}),(0,Lt.jsx)("gridHelper",{args:[8,8]}),(0,Lt.jsx)(pS,{position:[4.3,0,0],fontSize:.15,color:"white",children:"X (AU)"}),(0,Lt.jsx)(pS,{position:[0,4.3,0],fontSize:.15,color:"white",children:"Y (AU)"}),(0,Lt.jsx)(pS,{position:[0,0,4.3],fontSize:.15,color:"white",rotation:[0,Math.PI/2,0],children:"Z (AU)"}),(0,Lt.jsx)(RS,{scale:4}),(0,Lt.jsxs)("mesh",{children:[(0,Lt.jsx)("sphereGeometry",{args:[.2,32,32]}),(0,Lt.jsx)("meshStandardMaterial",{emissive:"yellow"})]}),(0,Lt.jsxs)("line",{children:[(0,Lt.jsx)("bufferGeometry",{children:(0,Lt.jsx)("bufferAttribute",{attach:"attributes-position",count:361,array:new Float32Array(Array.from({length:361},(e,t)=>[Math.cos(t*Math.PI/180),Math.sin(t*Math.PI/180),0]).flat()),itemSize:3})}),(0,Lt.jsx)("lineBasicMaterial",{color:"dodgerblue",transparent:!0,opacity:.5})]}),(0,Lt.jsx)(LS,{points:n}),(0,Lt.jsxs)("mesh",{position:i,children:[(0,Lt.jsx)("sphereGeometry",{args:[.05,16,16]}),(0,Lt.jsx)("meshStandardMaterial",{color:"red"})]})]})}const IS=Pt("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const DS=function(){const[e,n]=(0,t.useState)(""),[i,r]=(0,t.useState)("2025-12-25"),[a,o]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[h,d]=(0,t.useState)(""),[p,f]=(0,t.useState)([]),[m,g]=(0,t.useState)(0),[v,y]=(0,t.useState)(!0),[_,b]=(0,t.useState)(""),[x,S]=(0,t.useState)(!1),w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u(!0),d("");try{const t="http://127.0.0.1:5000/api/asteroids?page=".concat(e),n=await fetch(t),i=await n.json();i.asteroids&&i.asteroids.length>0?(f(i.asteroids),g(i.page||e),y(20===i.asteroids.length)):(f([]),y(!1))}catch(t){d("Error loading asteroids"),console.error(t)}finally{u(!1)}},M=async()=>{const e=_.trim();if(e){u(!0),d(""),S(!0);try{const t="http://127.0.0.1:5000/api/asteroids/search?query=".concat(encodeURIComponent(e)),n=await fetch(t),i=await n.json();i.error?(d(i.error),f([])):i.asteroids&&(f(i.asteroids),0===i.asteroids.length&&d("No asteroids found matching your search"))}catch(t){d("Error searching asteroids"),console.error(t),f([])}finally{u(!1)}}else d("Please enter a search term")};return(0,t.useEffect)(()=>{e?(async e=>{u(!0),d("");try{const t=await fetch("http://127.0.0.1:5000/api/asteroid-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asteroid_id:e})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Error fetching asteroid details")}const n=await t.json();l(n)}catch(t){d(t.message),l(null)}finally{u(!1)}})(e):l(null)},[e]),(0,t.useEffect)(()=>{w(0)},[]),(0,Lt.jsxs)("div",{className:"bg-gradient-to-b from-[#0a0a0a] to-[#1a1a2e] min-h-screen font-sans text-[#e0e0e0]",children:[(0,Lt.jsx)(kt,{}),(0,Lt.jsxs)("div",{className:"flex flex-col lg:flex-row justify-center items-start gap-8 px-6 py-10 min-h-screen",children:[(0,Lt.jsxs)("div",{className:"flex-1 bg-[#111118] rounded-3xl shadow-2xl relative flex flex-col items-center justify-center h-screen overflow-hidden",children:[c&&!a&&(0,Lt.jsx)("div",{className:"w-16 h-16 border-4 border-gray-600 border-t-purple-500 rounded-full animate-spin mb-4"}),h&&!a&&(0,Lt.jsx)("p",{className:"text-red-400 text-center font-semibold text-lg mb-4 px-4",children:h}),a&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)(kS,{orbitalData:a,className:"w-full h-full"}),(0,Lt.jsxs)("div",{className:"absolute top-4 left-4 bg-[#1c1c29] bg-opacity-90 rounded-xl p-3 shadow-lg text-sm",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Lt.jsx)("span",{className:"w-3 h-3 bg-yellow-400 rounded-full inline-block"})," Sun"]}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Lt.jsx)("span",{className:"w-3 h-3 bg-cyan-400 rounded-full inline-block"})," Orbit of ",a.asteroid_name]}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Lt.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full inline-block"})," Earth Orbit"]}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full inline-block"})," Position on ",i]})]})]}),!a&&!c&&!h&&(0,Lt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,Lt.jsx)("p",{className:"text-xl mb-2",children:"Select an asteroid and date"}),(0,Lt.jsx)("p",{className:"text-sm",children:"to visualize its orbit"})]})]}),(0,Lt.jsxs)("div",{className:"flex-1 max-w-md w-full bg-[#111118] rounded-3xl shadow-2xl p-8 flex flex-col gap-6",children:[(0,Lt.jsx)("h1",{className:"text-center text-5xl font-extrabold text-purple-400 mb-6 tracking-wide",children:"Orbit Visualizer"}),(0,Lt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e){u(!0),d(""),o(null);try{const t=await fetch("http://127.0.0.1:5000/api/orbital-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asteroid_id:e,target_date:i})});if(!t.ok){const e=await t.json();throw new Error(e.error||"A server error occurred.")}const n=await t.json();o(n)}catch(n){d(n.message)}finally{u(!1)}}else d("Please select an asteroid")},className:"flex flex-col gap-5",children:[(0,Lt.jsx)("label",{className:"font-semibold text-gray-300",children:"Select Asteroid:"}),(0,Lt.jsxs)("div",{className:"flex gap-2",children:[(0,Lt.jsx)("input",{type:"text",placeholder:"Search by name or ID...",value:_,onChange:e=>b(e.target.value),onKeyPress:e=>"Enter"===e.key&&M(),className:"flex-1 px-3 py-2 rounded-md bg-[#1e1e1e] border border-gray-600 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-md transition-colors flex items-center justify-center",title:"Search",children:(0,Lt.jsx)(IS,{size:20})})]}),x&&(0,Lt.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400 -mt-2",children:[(0,Lt.jsx)("span",{children:"Showing search results"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>{b(""),S(!1),d(""),n(""),w(0)},className:"text-purple-400 hover:text-purple-300 underline",children:"Clear"})]}),(0,Lt.jsx)("ul",{className:"border border-gray-700 rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-gray-900",children:0!==p.length||c?p.map(t=>(0,Lt.jsxs)("li",{onClick:()=>n(t.id),className:"cursor-pointer px-4 py-2 mb-1 rounded-lg transition-all\n                      ".concat(e===t.id?"bg-purple-600 text-white shadow-lg scale-105":"bg-[#1e1e1e] text-gray-200 hover:bg-gray-800 hover:scale-105"),children:[(0,Lt.jsx)("span",{className:"font-semibold",children:t.name}),(0,Lt.jsxs)("span",{className:"ml-2 text-sm text-gray-400",children:["(",t.id,")"]})]},t.id)):(0,Lt.jsx)("li",{className:"px-4 py-8 text-center text-gray-500",children:x?"No results found":"No asteroids available"})}),!x&&(0,Lt.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,Lt.jsx)("button",{type:"button",onClick:()=>w(Math.max(0,m-1)),disabled:0===m||c,className:"bg-gray-700 px-4 py-2 rounded text-white hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,Lt.jsxs)("span",{className:"text-gray-400 flex items-center",children:["Page ",m+1]}),(0,Lt.jsx)("button",{type:"button",onClick:()=>v&&w(m+1),disabled:!v||c,className:"bg-gray-700 px-4 py-2 rounded text-white hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]}),(0,Lt.jsx)("label",{className:"font-semibold text-gray-300 mt-4",children:"Target Date:"}),(0,Lt.jsx)("input",{type:"date",id:"target_date",value:i,onChange:e=>r(e.target.value),required:!0,className:"p-3 rounded-xl border border-[#333] bg-[#1c1c29] text-white text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("button",{type:"submit",disabled:c||!e,className:"py-4 rounded-xl text-white text-lg font-semibold transition-colors\n                ".concat(c||!e?"bg-gray-600 cursor-not-allowed":"bg-purple-600 hover:bg-purple-800 cursor-pointer"),children:c?"Generating...":"Generate Plot"})]}),s&&(0,Lt.jsxs)("div",{className:"mt-6 bg-[#1c1c29] rounded-2xl p-4 shadow-lg text-gray-300 text-sm",children:[(0,Lt.jsx)("h2",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Asteroid Details"}),(0,Lt.jsxs)("div",{className:"space-y-1",children:[(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Name:"})," ",s.name]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Designation:"})," ",s.designation]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Absolute Magnitude (H):"})," ",s.absolute_magnitude_h," mag"]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Estimated Diameter:"})," ".concat(s.estimated_diameter.estimated_diameter_min.toFixed(2)," m - ").concat(s.estimated_diameter.estimated_diameter_max.toFixed(2)," m \n                    (avg: ").concat(s.estimated_diameter.estimated_diameter_avg.toFixed(2)," m)")]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Potentially Hazardous:"}),s.is_potentially_hazardous?" Yes":" No"]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"NASA JPL URL:"}),(0,Lt.jsx)("a",{href:s.nasa_jpl_url,target:"_blank",className:"text-purple-300 underline",children:"Link"})]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("span",{className:"font-semibold",children:"Estimated Density:"})," ",s.density.toFixed(2)," kg/m\xb3",(0,Lt.jsx)("span",{className:"text-gray-400 text-xs ml-1",children:"(Based on albedo & taxonomic type, approximate)"})]})]})]})]})]})]})};function NS(){const e=(0,t.useRef)(null),n=(0,t.useRef)(null),i=(0,t.useRef)(null),r=(0,t.useRef)(null),a=(0,t.useRef)(null),o=(0,t.useRef)(null),s=(0,t.useRef)(!0),l=(0,t.useRef)([]),[c,u]=((0,t.useRef)(0),(0,t.useRef)(0),(0,t.useRef)(0),(0,t.useState)(0)),[h,d]=(0,t.useState)(0),[p,f]=(0,t.useState)(0);(0,t.useEffect)(()=>{const t=e.current||document.body,c=t.clientWidth||window.innerWidth,h=t.clientHeight||window.innerHeight,p=2.1/6371,m=new Wl;n.current=m;const g=new Nl(45,c/h,.1,1e3);g.position.z=3,i.current=g;const v=new oy({antialias:!0});v.setPixelRatio(window.devicePixelRatio||1),v.setSize(c,h),v.toneMapping=zn,Ir&&(v.outputColorSpace=Ir),t.appendChild(v.domElement),r.current=v;const y=new Bl;y.rotation.z=-23.4*Math.PI/180,m.add(y);new My(g,v.domElement);const _=new sp,b=e=>(e&&e.dispose&&l.current.push(e),e),x=new nd(1,16),S=new ld(1.01,Math.max(8,256)),w=new ld(1.03,Math.max(8,256)),M=(b(_.load("/textures/8k_earth_daymap.jpg")),b(_.load("/textures/earthspec1k.jpg")),b(_.load("/textures/earthbump1k.jpg")),new bd({map:_.load("/three-textures/8k_earth_daymap.jpg"),specularMap:_.load("/three-textures/earthspec1k.jpg"),bumpMap:_.load("/three-textures/earthbump1k.jpg"),bumpScale:.04})),E=new wl(x,M);y.add(E);b(_.load("/textures/8k_earth_nightmap.jpg"));const T=new Fs({map:_.load("/three-textures/8k_earth_nightmap.jpg"),blending:Qt}),C=new wl(x.clone(),T);y.add(C);b(_.load("/textures/8k_earth_clouds.jpg"));const A=new yd({map:_.load("/three-textures/8k_earth_clouds.jpg"),blending:Qt}),P=new wl(S,A);y.add(P);const R=new Fs({color:9687023,transparent:!0,opacity:.1}),L=new wl(w,R);L.renderOrder=1,y.add(L);const k=new wp(16777215,2);let I;k.position.set(-2,.5,1.5),m.add(k),function e(){I=requestAnimationFrame(e),s.current&&(E.rotation.y+=5e-4,C.rotation.y+=5e-4,P.rotation.y+=3e-4),v.render(m,g)}();const D=new Tf,N=new Da;function U(e){const t=function(e){const t=v.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1}}(e);N.x=t.x,N.y=t.y,D.setFromCamera(N,g),s.current=!1;const n=D.intersectObjects(y.children,!0);if(n.length>0){const i=n[0],r=20*Math.PI/180,l=i.point.length();let c=Math.acos(i.point.y/l),h=Math.atan2(i.point.z,i.point.x);c=Math.min(c+r,Math.PI),h+=r;const x=new Ua(l*Math.sin(c)*Math.cos(h),l*Math.cos(c),l*Math.sin(c)*Math.sin(h)),S=g.position.clone(),w=x.clone().multiplyScalar(2.2).divideScalar(document.getElementById("zoomValue").innerText/100*2+1),M=g.getWorldDirection(new Ua).clone(),E=i.point.clone();let T=0;const C=60;function A(){T++;const e=Math.min(T/C,1);g.position.lerpVectors(S,w,e),g.lookAt(M.clone().lerp(E,e)),e<1&&requestAnimationFrame(A)}A(),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{yawDeg:0,pitchDeg:0,velocity:7e-4,diameter:1e3,density:1,mass:1e3};try{const i=n.velocity||7e-4,r=n.diameter||1e3,s=1e3*n.mass||1e3,l=90,c=90-180*Math.acos(e.y/e.length())/Math.PI,h=(180*Math.atan2(e.z,e.x)/Math.PI+180)%360-180;u(c),d(h);const g=await fetch("".concat(hM,"/impact?velocity=").concat(i,"&mass=").concat(s,"&diameter=").concat(r,"&angle=").concat(l,"&latitude=").concat(c,"&longitude=").concat(h));if(!g.ok)throw new Error("API request failed");const v=await g.json();document.getElementById("simulationResults"),f(v.impact_energy),document.getElementById("energyValue").textContent="".concat(v.impact_energy.toFixed(4)," J"),document.getElementById("energyTNTValue").textContent="".concat(v.impact_energy_tnt.toFixed(4)," TNT tons"),document.getElementById("energyLostValue").textContent="".concat(v.lost_energy.toFixed(4)," J"),document.getElementById("massSpaceValue").textContent="".concat(v.percent_to_space.toFixed(2),"%"),document.getElementById("hiroshimaValue").textContent="".concat(v.impact_energy_hiroshima.toFixed(3)," H-bombs"),a.current&&(m.remove(a.current),a.current.trail&&m.remove(a.current.trail),a.current.burn&&m.remove(a.current.burn));const y=n.diameter/2,x=new nd(y/6371e3,3),S=(b(_.load("/textures/meteor_texture.jpg")),new yd({map:_.load("/three-textures/meteor_texture.jpg"),emissive:16777040,emissiveIntensity:4,roughness:.4,metalness:.2})),w=new wl(x,S),M=e.clone().normalize(),E=M.clone(),T=Ia.degToRad(n.yawDeg||0),C=Ia.degToRad(n.pitchDeg||0),A=new bp(16755285,2.5,2.5);m.add(A),A.intensity=0,o.current=A;const P=(new Vo).makeRotationY(T);E.applyMatrix4(P);const R=(new Ua).crossVectors(E,new Ua(0,1,0)).normalize(),L=(new Vo).makeRotationAxis(R,C);E.applyMatrix4(L),w.position.copy(E.clone().multiplyScalar(t+1));const k=M.clone().multiplyScalar(1.1).clone().sub(E).normalize(),I=k.multiplyScalar(-1*(n.velocity||7e-4)),D=new fu({color:16737792,transparent:!0,opacity:.5}),N=(new hl).setFromPoints([E,w.position]),U=new Su(N,D);m.add(U),w.trail=U;const O=b(_.load("/textures/burn_glow.png")),z=new yd({map:O,color:16750899,transparent:!0,blending:Qt,depthWrite:!1,opacity:1,emissive:16750899,emissiveIntensity:2}),F=new wl(x.clone(),z);F.scale.set(1.1,1.1,1.1),w.add(F),w.burn=F;const B=5e3,j=new hl,H=new Float32Array(3*B),V=new Float32Array(3*B),G=document.getElementById("diameterValue").innerText/2/6371e3,W=w.position.clone().normalize();let X=0;const q=14,Z=Math.floor(B/q);for(let e=0;e<q;e++){const t=G-e*(G/q)*(.8+.4*Math.random());for(let e=0;e<Z&&X<B;e++){let e,n,i,r,a=0;do{const o=Math.random(),s=Math.random(),l=Math.acos(2*o-1),c=2*Math.PI*s;if(e=t*Math.sin(l)*Math.cos(c),n=t*Math.sin(l)*Math.sin(c),i=t*Math.cos(l),r=new Ua(e,n,i).normalize().dot(W),a++,a>10)break}while(r>.2);H[3*X+0]=e,H[3*X+1]=n,H[3*X+2]=i;const o=new Ua(e,n,i).normalize(),s=.6,l=o.multiplyScalar(1-s).add(W.clone().multiplyScalar(s));l.x+=.3*(Math.random()-.5),l.y+=.3*(Math.random()-.5),l.z+=.3*(Math.random()-.5),l.normalize();const c=2e-4;V[3*X+0]=l.x*c,V[3*X+1]=l.y*c,V[3*X+2]=l.z*c,X++}}j.setAttribute("position",new Zs(H,3));const Y=new Au({color:16755251,size:.003,transparent:!0,opacity:.8,blending:Qt,depthWrite:!1}),K=new Iu(j,Y);w.add(K),w.particles=K,w.velocities=V;let J=!0;const Q=()=>{if(!J)return;if(w.position.add(I),o.current){const e=w.position.clone().normalize(),t=.013,i=w.position.clone().add(e.clone().multiplyScalar(t));o.current.position.copy(i),o.current.intensity=n.diameter>5e3?.5:n.diameter>2e3?.25:.1}const e=[w.position.clone(),w.position.clone().sub(k.clone().multiplyScalar(.2))];U.geometry.setFromPoints(e),D.opacity=Math.max(.2,.8-w.position.length()/2);const t=w.position.length();if(t>1.2){const e=w.position.clone().normalize().negate();I.add(e.multiplyScalar(.02*p))}if(t<1.2&&t>.1){F.material.opacity=Ia.mapLinear(t,1.15,1.02,0,1);const e=5e-5;if(I.length(),t>1.05){const e=.985;I.multiplyScalar(e),I.length()<5e-4?I.setLength(5e-4):I.length()>.001&&I.setLength(.001),w.material.emissiveIntensity=6}else if(t>1.04){const e=.97;I.multiplyScalar(e),I.length()<1e-4?I.setLength(1e-4):I.length()>5e-4&&I.setLength(5e-4)}else t>1.02&&I.length()<e&&I.setLength(e)}else F.material.opacity=0;if(t<1.01&&t>.1){const e=K.geometry.attributes.position.array,t=w.velocities;for(let n=0;n<B;n++)e[3*n+0]+=.99*t[3*n+0],e[3*n+1]+=.99*t[3*n+1],e[3*n+2]+=.99*t[3*n+2];K.geometry.attributes.position.needsUpdate=!0}if(t<=.1)return F.material.opacity=0,o.current&&(m.remove(o.current),o.current=null),m.remove(w),m.remove(U),m.remove(F),a.current=null,void(J=!1);requestAnimationFrame(Q)};Q(),a.current=w,m.add(w)}catch(i){console.error("Error creating meteor:",i)}}(i.point,parseFloat(document.getElementById("distValue").innerText),{velocity:1e-6*parseFloat(document.getElementById("velValue").innerText),diameter:parseFloat(document.getElementById("diameterValue").innerText),mass:parseFloat(document.getElementById("massValue").innerText)})}}function O(){const e=t.clientWidth||window.innerWidth,n=t.clientHeight||window.innerHeight;g.aspect=e/n,g.updateProjectionMatrix(),v.setSize(e,n)}v.domElement.addEventListener("click",U),window.addEventListener("resize",O);const z=document.getElementById("resetButton"),F=()=>{a.current&&(m.remove(a.current),a.current.trail&&m.remove(a.current.trail),a.current.burn&&m.remove(a.current.burn),a.current=null),o.current&&(m.remove(o.current),o.current=null);const e=g.position.clone(),t=new Ua(0,0,3),n=g.getWorldDirection(new Ua).clone(),i=new Ua(0,0,0);let r=0;!function a(){r++;const o=Math.min(r/60,1);g.position.lerpVectors(e,t,o),g.lookAt(n.clone().lerp(i,o)),o<1?requestAnimationFrame(a):s.current=!0}()};return z&&z.addEventListener("click",F),()=>{v.domElement.removeEventListener("click",U),window.removeEventListener("resize",O),z&&z.removeEventListener("click",F),cancelAnimationFrame(I),x.dispose(),S.dispose(),w.dispose(),[M,T,A,R].forEach(e=>{try{e&&e.dispose&&e.dispose()}catch(fM){}}),l.current.forEach(e=>{try{e&&e.dispose&&e.dispose()}catch(fM){}}),l.current=[],a.current&&m.remove(a.current),o.current&&m.remove(o.current);try{t.removeChild(v.domElement)}catch(fM){}v.dispose(),n.current=null,i.current=null,r.current=null,a.current=null,o.current=null}},[]);return(0,Lt.jsxs)("div",{className:"flex w-full h-full gap-4 bg-black",children:[(0,Lt.jsx)("div",{ref:e,id:"three-container",className:"flex-1",style:{background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.02), rgba(0,0,0,0.02))"}}),(0,Lt.jsxs)("div",{className:"w-80 flex flex-col bg-gray-800 text-white p-4 m-4 gap-4 rounded-xl shadow-2xl",children:[(0,Lt.jsxs)("div",{className:"flex flex-col gap-4 overflow-auto",children:[(0,Lt.jsx)("div",{className:"flex justify-center mb-2 rounded-md bg-gradient-to-r from-indigo-600 to-purple-600 p-2",children:(0,Lt.jsx)("h2",{children:"Click anywhere in the Earth to launch a meteor with the specified parameters!"})}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Lt.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,Lt.jsxs)("label",{children:["Initial Distance: ",(0,Lt.jsx)("span",{id:"distValue",children:"0.4"})," ua"]}),(0,Lt.jsx)("input",{type:"range",min:"0.2",max:"1",step:"0.01",defaultValue:"0.4",onChange:e=>document.getElementById("distValue").innerText=e.target.value})]}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,Lt.jsxs)("label",{children:["Zoom: ",(0,Lt.jsx)("span",{id:"zoomValue",children:"50"})," %"]}),(0,Lt.jsx)("input",{type:"range",min:"0",max:"50",step:"1",defaultValue:"50",onChange:e=>document.getElementById("zoomValue").innerText=e.target.value})]}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,Lt.jsxs)("label",{children:["Diameter: ",(0,Lt.jsx)("span",{id:"diameterValue",children:"1000"})," m"]}),(0,Lt.jsx)("input",{type:"range",min:"100",max:"10000",step:"100",defaultValue:"1000",onChange:e=>document.getElementById("diameterValue").innerText=e.target.value})]}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,Lt.jsxs)("label",{children:["Initial Velocity: ",(0,Lt.jsx)("span",{id:"velValue",children:"40000"})," m/s"]}),(0,Lt.jsx)("input",{type:"range",min:"10000",max:"70000",step:"100",defaultValue:"40000",onChange:e=>document.getElementById("velValue").innerText=e.target.value})]})]}),(0,Lt.jsxs)("details",{className:"bg-gray-700 p-1 rounded-md",children:[(0,Lt.jsx)("summary",{className:"cursor-pointer font-semibold",children:"Advanced Parameters"}),(0,Lt.jsx)("div",{className:"flex flex-col gap-1 mt-2",children:(0,Lt.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Lt.jsxs)("label",{children:["Mass: ",(0,Lt.jsx)("span",{id:"massValue",children:"1000000000000"})]}),(0,Lt.jsx)("input",{type:"range",min:"1000000000",max:"1000000000000000",step:"1000000000",defaultValue:"1000000000000",onChange:e=>document.getElementById("massValue").innerText=e.target.value})]})})]})]}),(0,Lt.jsxs)("div",{id:"simulationResults",className:"flex-1 p-4 bg-gray-700 rounded-lg overflow-auto text-sm overflow-x-hidden",children:[(0,Lt.jsx)("div",{className:"text-center text-gray-400",children:(0,Lt.jsx)("p",{className:"font-semibold text-lg",children:"Simulation Results"})}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 gap-2 text-gray-300",children:(0,Lt.jsxs)("div",{className:"flex flex-col items-start",children:[(0,Lt.jsxs)("p",{children:["Energy: ",(0,Lt.jsx)("span",{id:"energyValue"})]}),(0,Lt.jsxs)("p",{children:["Energy (TNT): ",(0,Lt.jsx)("span",{id:"energyTNTValue"})]}),(0,Lt.jsxs)("p",{children:["Energy lost: ",(0,Lt.jsx)("span",{id:"energyLostValue"})]}),(0,Lt.jsxs)("p",{children:["Mass to space: ",(0,Lt.jsx)("span",{id:"massSpaceValue"})]}),(0,Lt.jsxs)("p",{children:["Equivalent to: ",(0,Lt.jsx)("span",{id:"hiroshimaValue"})]})]})})]}),(0,Lt.jsxs)("div",{className:"flex flex-row gap-4 h-16",children:[(0,Lt.jsx)("div",{className:"flex gap-4 mt-4",children:(0,Lt.jsx)("button",{onClick:()=>{const e=i.current;if(!e)return;const t=n.current;a.current&&(a.current.trail&&t.remove(a.current.trail),a.current.burn&&t.remove(a.current.burn),t.remove(a.current),a.current=null),o.current&&(t.remove(o.current),o.current=null);const r=e.position.clone(),l=new Ua(0,0,3),c=e.getWorldDirection(new Ua).clone(),u=new Ua(0,0,0);let h=0;!function t(){h++;const n=Math.min(h/60,1);e.position.lerpVectors(r,l,n),e.lookAt(c.clone().lerp(u,n)),n<1?requestAnimationFrame(t):s.current=!0}()},className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-300 text-center",children:(0,Lt.jsx)("p",{className:"m-0 text-sm",children:"Reset View"})})}),(0,Lt.jsx)("div",{className:"flex gap-4 mt-4",children:(0,Lt.jsx)(mt,{to:"/impact-damage?lat=".concat(c,"&lon=").concat(h,"&energy=").concat(p),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-300 text-center",children:(0,Lt.jsx)("p",{children:"Damage on Impact"})})})]})]})]})}const US=function(){return(0,Lt.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,Lt.jsx)(kt,{}),(0,Lt.jsx)("div",{className:"flex-1 flex bg-black overflow-hidden",children:(0,Lt.jsx)("div",{className:"flex-1 relative",children:(0,Lt.jsx)(NS,{className:"absolute inset-0 w-full h-full"})})})]})};function OS(e,t){return Object.freeze(u(u({},e),t))}const zS=(0,t.createContext)(null);function FS(){const e=(0,t.use)(zS);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function BS(){return FS().map}var jS=n(228),HS=n.n(jS);const VS=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function GS(e,n){let{bounds:i,boundsOptions:r,center:o,children:s,className:l,id:c,placeholder:h,style:d,whenReady:p,zoom:f}=e,m=a(e,VS);const[g]=(0,t.useState)({className:l,id:c,style:d}),[v,y]=(0,t.useState)(null),_=(0,t.useRef)(void 0);(0,t.useImperativeHandle)(n,()=>{var e;return null!==(e=null===v||void 0===v?void 0:v.map)&&void 0!==e?e:null},[v]);const b=(0,t.useCallback)(e=>{if(null!==e&&!_.current){const t=new jS.Map(e,m);_.current=t,null!=o&&null!=f?t.setView(o,f):null!=i&&t.fitBounds(i,r),null!=p&&t.whenReady(p),y(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,t.useEffect)(()=>()=>{null===v||void 0===v||v.map.remove()},[v]);const x=v?t.createElement(zS,{value:v},s):null!==h&&void 0!==h?h:null;return t.createElement("div",u(u({},g),{},{ref:b}),x)}const WS=(0,t.forwardRef)(GS);var XS=n(950);function qS(e){function n(n,i){const{instance:r,context:a}=e(n).current;(0,t.useImperativeHandle)(i,()=>r);const{children:o}=n;return null==o?null:t.createElement(zS,{value:a},o)}return(0,t.forwardRef)(n)}function ZS(e,n){const i=(0,t.useRef)(n);(0,t.useEffect)(function(){n!==i.current&&null!=e.attributionControl&&(null!=i.current&&e.attributionControl.removeAttribution(i.current),null!=n&&e.attributionControl.addAttribution(n)),i.current=n},[e,n])}function YS(e,n){const i=(0,t.useRef)(void 0);(0,t.useEffect)(function(){return null!=n&&e.instance.on(n),i.current=n,function(){null!=i.current&&e.instance.off(i.current),i.current=null}},[e,n])}function KS(e,t){var n;const i=null!==(n=e.pane)&&void 0!==n?n:t.pane;return i?u(u({},e),{},{pane:i}):e}function JS(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function QS(e,n){return null==n?function(n,i){const r=(0,t.useRef)(void 0);return r.current||(r.current=e(n,i)),r}:function(i,r){const a=(0,t.useRef)(void 0);a.current||(a.current=e(i,r));const o=(0,t.useRef)(i),{instance:s}=a.current;return(0,t.useEffect)(function(){o.current!==i&&(n(s,i,o.current),o.current=i)},[s,i,n]),a}}function $S(e,n){(0,t.useEffect)(function(){var t;return(null!==(t=n.layerContainer)&&void 0!==t?t:n.map).addLayer(e.instance),function(){var t;null===(t=n.layerContainer)||void 0===t||t.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function ew(e){return function(t){const n=FS(),i=e(KS(t,n),n);return ZS(n.map,t.attribution),YS(i.current,t.eventHandlers),$S(i.current,n),i}}function tw(e){return function(n){const i=FS(),r=e(KS(n,i),i);return YS(r.current,n.eventHandlers),$S(r.current,i),function(e,n){const i=(0,t.useRef)(void 0);(0,t.useEffect)(function(){if(n.pathOptions!==i.current){var t;const r=null!==(t=n.pathOptions)&&void 0!==t?t:{};e.instance.setStyle(r),i.current=r}},[e,n])}(r.current,n),r}}const nw=["url"],iw=(rw=function(e,t){let{url:n}=e,i=a(e,nw);return JS(new jS.TileLayer(n,KS(i,t)),t)},function(e){function n(n,i){const{instance:r}=e(n).current;return(0,t.useImperativeHandle)(i,()=>r),null}return(0,t.forwardRef)(n)}(ew(QS(rw,function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:r}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=r&&r!==n.zIndex&&e.setZIndex(r)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)}))));var rw;const aw=["position"],ow=function(e,t){return qS(ew(QS(e,t)))}(function(e,t){let{position:n}=e,i=a(e,aw);const r=new jS.Marker(n,i);return JS(r,OS(t,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),sw=function(e,n){const i=function(e,t){return function(n,i){const r=FS(),a=e(KS(n,r),r);return ZS(r.map,n.attribution),YS(a.current,n.eventHandlers),t(a.current,r,n,i),a}}(QS(e),n);return function(e){function n(n,i){const[r,a]=(0,t.useState)(!1),{instance:o}=e(n,a).current;(0,t.useImperativeHandle)(i,()=>o),(0,t.useEffect)(function(){r&&o.update()},[o,r,n.children]);const s=o._contentNode;return s?(0,XS.createPortal)(n.children,s):null}return(0,t.forwardRef)(n)}(i)}(function(e,t){return JS(new jS.Tooltip(e,t.overlayContainer),t)},function(e,n,i,r){let{position:a}=i;(0,t.useEffect)(function(){const t=n.overlayContainer;if(null==t)return;const{instance:i}=e,o=e=>{e.tooltip===i&&(null!=a&&i.setLatLng(a),i.update(),r(!0))},s=e=>{e.tooltip===i&&r(!1)};return t.on({tooltipopen:o,tooltipclose:s}),t.bindTooltip(i),function(){t.off({tooltipopen:o,tooltipclose:s}),null!=t._map&&t.unbindTooltip()}},[e,n,r,a])});const lw=["center","children"],cw=function(e,t){return qS(tw(QS(e,t)))}(function(e,t){let{center:n,children:i}=e,r=a(e,lw);const o=new jS.Circle(n,r);return JS(o,OS(t,{overlayContainer:o}))},function(e,t,n){t.center!==n.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==n.radius&&e.setRadius(t.radius)});var uw=6371008.8,hw={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*uw,kilometers:6371.0088,kilometres:6371.0088,meters:uw,metres:uw,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:uw/1852,radians:1,yards:6967335.223679999};function dw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xw(e[0])||!xw(e[1]))throw new Error("coordinates must contain numbers");return dw({type:"Point",coordinates:e},t,n)}function fw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let e=0;e<i[i.length-1].length;e++)if(i[i.length-1][e]!==i[0][e])throw new Error("First and last Position are not equivalent.")}return dw({type:"Polygon",coordinates:e},t,n)}function mw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return dw({type:"LineString",coordinates:e},t,n)}function gw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function vw(e,t){return dw({type:"MultiLineString",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function yw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers";const n=hw[t];if(!n)throw new Error(t+" units is invalid");return e*n}function _w(e){return 180*(e%(2*Math.PI))/Math.PI}function bw(e){return e%360*Math.PI/180}function xw(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}const Sw=11102230246251565e-32,ww=134217729,Mw=(3+8*Sw)*Sw;function Ew(e,t,n,i,r){let a,o,s,l,c=t[0],u=i[0],h=0,d=0;u>c===u>-c?(a=c,c=t[++h]):(a=u,u=i[++d]);let p=0;if(h<e&&d<n)for(u>c===u>-c?(o=c+a,s=a-(o-c),c=t[++h]):(o=u+a,s=a-(o-u),u=i[++d]),a=o,0!==s&&(r[p++]=s);h<e&&d<n;)u>c===u>-c?(o=a+c,l=o-a,s=a-(o-l)+(c-l),c=t[++h]):(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=i[++d]),a=o,0!==s&&(r[p++]=s);for(;h<e;)o=a+c,l=o-a,s=a-(o-l)+(c-l),c=t[++h],a=o,0!==s&&(r[p++]=s);for(;d<n;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=i[++d],a=o,0!==s&&(r[p++]=s);return 0===a&&0!==p||(r[p++]=a),p}function Tw(e){return new Float64Array(e)}const Cw=Tw(4),Aw=Tw(8),Pw=Tw(12),Rw=Tw(16),Lw=Tw(4);function kw(e,t,n,i,r,a){const o=(t-a)*(n-r),s=(e-r)*(i-a),l=o-s,c=Math.abs(o+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,i,r,a,o){let s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,S,w,M;const E=e-r,T=n-r,C=t-a,A=i-a;b=E*A,d=ww*E,p=d-(d-E),f=E-p,d=ww*A,m=d-(d-A),g=A-m,x=f*g-(b-p*m-f*m-p*g),S=C*T,d=ww*C,p=d-(d-C),f=C-p,d=ww*T,m=d-(d-T),g=T-m,w=f*g-(S-p*m-f*m-p*g),v=x-w,h=x-v,Cw[0]=x-(v+h)+(h-w),y=b+v,h=y-b,_=b-(y-h)+(v-h),v=_-S,h=_-v,Cw[1]=_-(v+h)+(h-S),M=y+v,h=M-y,Cw[2]=y-(M-h)+(v-h),Cw[3]=M;let P=function(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,Cw),R=22204460492503146e-32*o;if(P>=R||-P>=R)return P;if(h=e-E,s=e-(E+h)+(h-r),h=n-T,c=n-(T+h)+(h-r),h=t-C,l=t-(C+h)+(h-a),h=i-A,u=i-(A+h)+(h-a),0===s&&0===l&&0===c&&0===u)return P;if(R=11093356479670487e-47*o+Mw*Math.abs(P),P+=E*u+A*s-(C*c+T*l),P>=R||-P>=R)return P;b=s*A,d=ww*s,p=d-(d-s),f=s-p,d=ww*A,m=d-(d-A),g=A-m,x=f*g-(b-p*m-f*m-p*g),S=l*T,d=ww*l,p=d-(d-l),f=l-p,d=ww*T,m=d-(d-T),g=T-m,w=f*g-(S-p*m-f*m-p*g),v=x-w,h=x-v,Lw[0]=x-(v+h)+(h-w),y=b+v,h=y-b,_=b-(y-h)+(v-h),v=_-S,h=_-v,Lw[1]=_-(v+h)+(h-S),M=y+v,h=M-y,Lw[2]=y-(M-h)+(v-h),Lw[3]=M;const L=Ew(4,Cw,4,Lw,Aw);b=E*u,d=ww*E,p=d-(d-E),f=E-p,d=ww*u,m=d-(d-u),g=u-m,x=f*g-(b-p*m-f*m-p*g),S=C*c,d=ww*C,p=d-(d-C),f=C-p,d=ww*c,m=d-(d-c),g=c-m,w=f*g-(S-p*m-f*m-p*g),v=x-w,h=x-v,Lw[0]=x-(v+h)+(h-w),y=b+v,h=y-b,_=b-(y-h)+(v-h),v=_-S,h=_-v,Lw[1]=_-(v+h)+(h-S),M=y+v,h=M-y,Lw[2]=y-(M-h)+(v-h),Lw[3]=M;const k=Ew(L,Aw,4,Lw,Pw);b=s*u,d=ww*s,p=d-(d-s),f=s-p,d=ww*u,m=d-(d-u),g=u-m,x=f*g-(b-p*m-f*m-p*g),S=l*c,d=ww*l,p=d-(d-l),f=l-p,d=ww*c,m=d-(d-c),g=c-m,w=f*g-(S-p*m-f*m-p*g),v=x-w,h=x-v,Lw[0]=x-(v+h)+(h-w),y=b+v,h=y-b,_=b-(y-h)+(v-h),v=_-S,h=_-v,Lw[1]=_-(v+h)+(h-S),M=y+v,h=M-y,Lw[2]=y-(M-h)+(v-h),Lw[3]=M;const I=Ew(k,Pw,4,Lw,Rw);return Rw[I-1]}(e,t,n,i,r,a,c)}Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(8),Tw(8),Tw(8),Tw(4),Tw(8),Tw(8),Tw(8),Tw(12);Tw(192),Tw(192);Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(8),Tw(8),Tw(8),Tw(8),Tw(8),Tw(8),Tw(8),Tw(8),Tw(8),Tw(4),Tw(4),Tw(4),Tw(8),Tw(16),Tw(16),Tw(16),Tw(32),Tw(32),Tw(48),Tw(64);Tw(1152),Tw(1152);Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(4),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(24),Tw(1152),Tw(1152),Tw(1152),Tw(1152),Tw(1152),Tw(2304),Tw(2304),Tw(3456),Tw(5760),Tw(8),Tw(8),Tw(8),Tw(16),Tw(24),Tw(48),Tw(48),Tw(96),Tw(192),Tw(384),Tw(384),Tw(384),Tw(768);Tw(96),Tw(96),Tw(96),Tw(1152);function Iw(e,t){var n,i,r,a,o,s,l,c,u,h=0,d=e[0],p=e[1],f=t.length;for(n=0;n<f;n++){i=0;var m=t[n],g=m.length-1;if((c=m[0])[0]!==m[g][0]&&c[1]!==m[g][1])throw new Error("First and last coordinates in a ring must be the same");for(a=c[0]-d,o=c[1]-p;i<g;i++){if(s=(u=m[i+1])[0]-d,l=u[1]-p,0===o&&0===l){if(s<=0&&a>=0||a<=0&&s>=0)return 0}else if(l>=0&&o<=0||l<=0&&o>=0){if(0===(r=kw(a,s,o,l,0,0)))return 0;(r>0&&l>0&&o<=0||r<0&&l<=0&&o>0)&&h++}c=u,o=l,a=s}}return h%2!==0}function Dw(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return[...e.geometry.coordinates];if("Point"===e.type)return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Nw(e){return"Feature"===e.type?e.geometry:e}function Uw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=Dw(e),r=Nw(t),a=r.type,o=t.bbox;let s=r.coordinates;if(o&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,o))return!1;"Polygon"===a&&(s=[s]);let l=!1;for(var c=0;c<s.length;++c){const e=Iw(i,s[c]);if(0===e)return!n.ignoreBoundary;e&&(l=!0)}return l}function Ow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Nw(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),n.type){case"Polygon":return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Nw(e),i=n.coordinates,r=t.properties?t.properties:"Feature"===e.type?e.properties:{};return zw(i,r)}(n,t);case"MultiPolygon":return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Nw(e),i=n.coordinates,r=t.properties?t.properties:"Feature"===e.type?e.properties:{},a=[];return i.forEach(e=>{a.push(zw(e,r))}),gw(a)}(n,t);default:throw new Error("invalid poly")}}function zw(e,t){return e.length>1?vw(e,t):mw(e[0],t)}function Fw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i=Dw(e),r=Dw(t),a=bw(r[1]-i[1]),o=bw(r[0]-i[0]),s=bw(i[1]),l=bw(r[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(l);return yw(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function Bw(e,t){var n,i,r,a,o,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,m=p?e.features.length:1;for(n=0;n<m;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,o=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<o;r++)if(null!==(a=l?s.geometries[r]:s))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===t(a.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}function jw(e,t){Bw(e,function(e,n,i,r,a){var o,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(dw(e,i,{bbox:r,id:a}),n,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(dw({type:o,coordinates:c},i),n,l))return!1}})}var Hw=Object.defineProperty,Vw=Object.defineProperties,Gw=Object.getOwnPropertyDescriptors,Ww=Object.getOwnPropertySymbols,Xw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Zw=(e,t,n)=>t in e?Hw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yw=(e,t)=>{for(var n in t||(t={}))Xw.call(t,n)&&Zw(e,n,t[n]);if(Ww)for(var n of Ww(t))qw.call(t,n)&&Zw(e,n,t[n]);return e},Kw=(e,t)=>Vw(e,Gw(t));function Jw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)throw new Error("lines and pt are required arguments");const i=Dw(t);let r=pw([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),a=0;return jw(e,function(e,o,s){const l=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e);for(let c=0;c<l.length-1;c++){const e=pw(l[c]);e.properties.dist=Fw(t,e,n);const o=Dw(e),u=pw(l[c+1]);u.properties.dist=Fw(t,u,n);const h=Dw(u),d=Fw(e,u,n);let p,f,m;o[0]===i[0]&&o[1]===i[1]?[p,,f]=[o,void 0,!1]:h[0]===i[0]&&h[1]===i[1]?[p,,f]=[h,void 0,!0]:[p,,f]=nM(e.geometry.coordinates,u.geometry.coordinates,Dw(t)),p&&(m=pw(p,{dist:Fw(t,p,n),multiFeatureIndex:s,location:a+Fw(e,p,n)})),m&&m.properties.dist<r.properties.dist&&(r=Kw(Yw({},m),{properties:Kw(Yw({},m.properties),{index:f?c+1:c})})),a+=d}}),r}function Qw(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function $w(e,t){const n=function(e,t){const[n,i,r]=e,[a,o,s]=t;return n*a+i*o+r*s}(e,t)/(Qw(e)*Qw(t));return Math.acos(Math.min(Math.max(n,-1),1))}function eM(e){const t=bw(e[1]),n=bw(e[0]);return[Math.cos(t)*Math.cos(n),Math.cos(t)*Math.sin(n),Math.sin(t)]}function tM(e){const[t,n,i]=e,r=_w(Math.asin(i));return[_w(Math.atan2(n,t)),r]}function nM(e,t,n){const i=eM(e),r=eM(t),a=eM(n),[o,s,l]=a,[c,u,h]=function(e,t){const[n,i,r]=e,[a,o,s]=t;return[i*s-r*o,r*a-n*s,n*o-i*a]}(i,r),d=u*l-h*s,p=h*o-c*l,f=c*s-u*o,m=f*u-p*h,g=d*h-f*c,v=p*c-d*u,y=1/Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(v,2)),_=[m*y,g*y,v*y],b=[-1*m*y,-1*g*y,-1*v*y],x=$w(i,r),S=$w(i,_),w=$w(r,_),M=$w(i,b),E=$w(r,b);let T;return T=S<M&&S<E||w<M&&w<E?_:b,$w(i,T)>x||$w(r,T)>x?Fw(tM(T),tM(i))<=Fw(tM(T),tM(r))?[tM(i),!0,!1]:[tM(r),!1,!0]:[tM(T),!1,!1]}n(0);function iM(e,t,n,i){return i.filter(i=>function(e,t,n,i){const r=(n-e)*Math.PI/180,a=(i-t)*Math.PI/180,o=Math.sin(r/2)**2+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)**2;return 12742*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}(e,t,i.latitude,i.longitude)<=n)}delete HS().Icon.Default.prototype._getIconUrl,HS().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const rM=[{id:"crater",radius:3,description:"Permanent impact crater zone.",color:"black"},{id:"thermal",radius:25,description:"Severe burns and fires from thermal radiation.",color:"red"},{id:"airblast",radius:60,description:"Shockwave destruction.",color:"orange"},{id:"ejecta",radius:120,description:"Secondary impacts and debris.",color:"yellow"},{id:"seismic",radius:200,description:"Major seismic damage.",color:"gray"}],aM=[{id:"tsunami",radius:300,description:"Massive tsunami generation and coastal flooding.",color:"blue"},{id:"vapor_cloud",radius:80,description:"Water vapor cloud and atmospheric effects.",color:"lightblue"}],oM=[{id:"mixed_wave",radius:150,description:"Coastal tsunami and partial land flooding.",color:"purple"},{id:"shockwave",radius:40,description:"Shockwave from near-shore explosion.",color:"orange"}];const sM=(e,t)=>(0,Lt.jsxs)("div",{style:{fontSize:"12px",backgroundColor:"rgba(255,255,255,0.95)",padding:"8px",borderRadius:"6px",maxWidth:"350px",lineHeight:"1.4em",pointerEvents:"auto",wordWrap:"break-word",whiteSpace:"normal"},children:[(0,Lt.jsx)("b",{children:e}),(0,Lt.jsx)("br",{}),t]}),lM=e=>{let{points:n=[]}=e;const i=BS();return(0,t.useEffect)(()=>{if(!i||0===n.length)return;const e=n.map(e=>[e[0],e[1],Math.log10(e[2]||1)]),t=HS().heatLayer(e,{radius:25,blur:20,maxZoom:10,max:1}).addTo(i);return()=>i.removeLayer(t)},[i,n]),null},cM=()=>{const[e,n]=(0,t.useState)(null),[i,r]=(0,t.useState)([]),[a,o]=(0,t.useState)({}),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[h,d]=(0,t.useState)(null),[p,f]=(0,t.useState)(null);if((0,t.useEffect)(()=>{fetch("https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson").then(e=>e.json()).then(e=>f(e)).catch(e=>console.error("Error loading GeoJSON:",e))},[]),(0,t.useEffect)(()=>{if(!p)return;const e=pw([-90,20.5]);let t=!0,i=!1,r=1/0;for(const n of p.features)try{if(!n.geometry||!n.geometry.coordinates)continue;const a=n.geometry.type,o="Polygon"===a?[n]:"MultiPolygon"===a?n.geometry.coordinates.map(e=>fw(e,n.properties)):[];for(const n of o){if(Uw(e,n)){t=!1,i=!1,r=0;break}const a=Ow(n),o=Fw(e,Jw(a,e));!isNaN(o)&&o<r&&(r=o)}if(!t)break}catch(o){console.warn("Skipping invalid feature:",o)}t&&r<30&&(i=!0);const a=function(e){let{latitude:t,longitude:n,isWater:i,isCoastal:r}=e;return{energy_mt:.05,latitude:t,longitude:n,zones:r?oM:i?aM:rM}}({latitude:20.5,longitude:-90,isWater:t,isCoastal:i});n(a)},[p]),(0,t.useEffect)(()=>{if(!e)return;const t=Math.max(...e.zones.map(e=>e.radius));fetch("".concat(hM,"/api/cities?lat=").concat(e.latitude,"&lon=").concat(e.longitude,"&radius=").concat(t)).then(e=>e.json()).then(t=>{r(t);const n={};let i=0;e.zones.forEach(r=>{const a=iM(e.latitude,e.longitude,r.radius,t).reduce((e,t)=>e+(t.population||0),0);n[r.id]=i+a,i=n[r.id]}),o(n)}).catch(e=>console.error("Error loading city data:",e));const n=function(e){const t=4184e12*e;return(2/3*Math.log10(t)-3.2).toFixed(2)}(e.energy_mt);(async function(e,t,n){const i=parseFloat(n),r=i-.5,a=i+.5;alert(r);const o="https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&latitude=".concat(e,"&longitude=").concat(t,"&maxradiuskm=500&starttime=1900-01-01&minmagnitude=").concat(r,"&maxmagnitude=").concat(a);console.log(o);try{const e=await fetch(o);return(await e.json()).features.map(e=>({id:e.id,mag:e.properties.mag,place:e.properties.place,time:new Date(e.properties.time),coords:[e.geometry.coordinates[1],e.geometry.coordinates[0]]}))}catch(s){return console.error("Error fetching earthquakes:",s),[]}})(e.latitude,e.longitude,n).then(e=>l(e))},[e]),!e||!p)return(0,Lt.jsx)("div",{children:"Loading map..."});const m=[e.latitude,e.longitude],g=e.zones,v=i.map(e=>[e.latitude,e.longitude,e.population||0]),y=e.zones===aM?"Water Impact":e.zones===oM?"Coastal Impact":"Land Impact",_=e=>{const t=a[e.id]||0,n=(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("b",{children:"Radius:"})," ",e.radius," km",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Effect:"})," ",e.description,(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Population affected:"})," ",t.toLocaleString()]});return sM("".concat(e.id.toUpperCase()," ZONE"),n)};return(0,Lt.jsxs)(WS,{center:m,zoom:6,style:{height:"100vh",width:"100%"},children:[(0,Lt.jsx)(iw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,Lt.jsx)(ow,{position:m,children:(0,Lt.jsx)(sw,{direction:"top",offset:[0,-10],opacity:1,permanent:!0,children:(0,Lt.jsxs)("div",{style:{fontSize:"12px"},children:[(0,Lt.jsx)("b",{children:y}),(0,Lt.jsx)("br",{}),"Name: Dummy meteor",(0,Lt.jsx)("br",{}),"Energy: ",e.energy_mt," Mt"]})})}),!e.isWater&&g.slice().reverse().map((e,t)=>{const n=t===g.length-1;return(0,Lt.jsx)(cw,{center:m,radius:1e3*e.radius,pathOptions:{color:e.color,fillOpacity:.15+.05*t,fill:!0,weight:1,pointerEvents:n?"auto":"none"},children:(0,Lt.jsx)(sw,{direction:"top",offset:[0,-10],opacity:1,children:_(e)})},e.id)}),i.length>0&&(0,Lt.jsx)(lM,{points:v}),s.map(e=>(0,Lt.jsx)(ow,{position:e.coords,icon:HS().icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41]}),children:(0,Lt.jsx)(sw,{direction:"top",offset:[0,-10],opacity:1,permanent:!0,children:(0,Lt.jsxs)("div",{style:{fontSize:"12px"},children:[(0,Lt.jsx)("b",{children:"Magnitude:"})," ",e.mag,(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Place:"})," ",e.place,(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Date:"})," ",e.time.toLocaleDateString()]})})},e.id)),(0,Lt.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:c?"350px":"0",height:"100vh",backgroundColor:"rgba(0,0,0,0.95)",overflowX:"hidden",transition:"0.3s",padding:c?"20px":"0",zIndex:1e3},children:[(0,Lt.jsx)("button",{onClick:()=>u(!1),style:{position:"absolute",top:10,right:10,fontSize:"18px"},children:"\xd7"}),(0,Lt.jsx)("h3",{children:"Similar Earthquakes"}),0===s.length&&(0,Lt.jsx)("p",{children:"No similar earthquakes found."}),(0,Lt.jsx)("ul",{style:{listStyle:"none",padding:0},children:s.map(e=>(0,Lt.jsxs)("li",{style:{marginBottom:"10px",borderBottom:"1px solid #ccc",paddingBottom:"5px"},children:[(0,Lt.jsx)("b",{children:e.place})," ",(0,Lt.jsx)("br",{}),"Magnitude: ",e.mag," ",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("button",{onClick:()=>d(e),style:{marginTop:"5px",fontSize:"12px"},children:"More Info"})]},e.id))}),h&&(0,Lt.jsxs)("div",{style:{marginTop:"20px",backgroundColor:"#36454F",padding:"10px",borderRadius:"6px"},children:[(0,Lt.jsx)("h4",{children:"Details"}),(0,Lt.jsx)("b",{children:"Place:"})," ",h.place," ",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Magnitude:"})," ",h.mag," ",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Date:"})," ",h.time.toLocaleString()," ",(0,Lt.jsx)("br",{}),(0,Lt.jsx)("b",{children:"Coordinates:"})," ",h.coords[0].toFixed(2),", ",h.coords[1].toFixed(2),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("button",{onClick:()=>d(null),style:{marginTop:"10px",fontSize:"12px"},children:"Close Info"})]})]}),(0,Lt.jsx)("button",{onClick:()=>u(!0),style:{position:"fixed",top:20,left:20,zIndex:1001,padding:"8px 12px",fontSize:"14px",borderRadius:"4px",backgroundColor:"#007bff",color:"#fff",border:"none",cursor:"pointer"},children:"Show Earthquakes"})]})};const uM=function(){return(0,Lt.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,Lt.jsx)(kt,{}),(0,Lt.jsx)("div",{className:"flex-1 flex bg-black overflow-hidden",children:(0,Lt.jsx)("div",{className:"flex-1 relative",children:(0,Lt.jsx)(cM,{className:"absolute inset-0 w-full h-full"})})})]})};const hM="http://127.0.0.1:5000",dM=function(){return(0,Lt.jsx)(pt,{children:(0,Lt.jsxs)(De,{children:[(0,Lt.jsx)(ke,{path:"/",element:(0,Lt.jsx)(zy,{})}),(0,Lt.jsx)(ke,{path:"/watch",element:(0,Lt.jsx)(DS,{})}),(0,Lt.jsx)(ke,{path:"/simulate",element:(0,Lt.jsx)(US,{})}),(0,Lt.jsx)(ke,{path:"/impact-damage",element:(0,Lt.jsx)(cM,{})}),(0,Lt.jsx)(ke,{path:"/simulate/impact-damage",element:(0,Lt.jsx)(uM,{})})]})})},pM=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:a,getTTFB:o}=t;n(e),i(e),r(e),a(e),o(e)})};r.createRoot(document.getElementById("root")).render((0,Lt.jsx)(t.StrictMode,{children:(0,Lt.jsx)(dM,{})})),pM()})()})();
//# sourceMappingURL=main.f7e84995.js.map